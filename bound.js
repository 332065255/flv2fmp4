/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// identity function for calling harmony imports with the correct context
/******/ 	__webpack_require__.i = function(value) { return value; };
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, {
/******/ 				configurable: false,
/******/ 				enumerable: true,
/******/ 				get: getter
/******/ 			});
/******/ 		}
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 14);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); /*\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * Copyright (C) 2016 Bilibili. All Rights Reserved.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * @author zheng qian <xqq@xqq.im>\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * Licensed under the Apache License, Version 2.0 (the \"License\");\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * you may not use this file except in compliance with the License.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * You may obtain a copy of the License at\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *     http://www.apache.org/licenses/LICENSE-2.0\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * Unless required by applicable law or agreed to in writing, software\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * distributed under the License is distributed on an \"AS IS\" BASIS,\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * See the License for the specific language governing permissions and\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * limitations under the License.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      */\n\nvar _expGolomb = __webpack_require__(4);\n\nvar _expGolomb2 = _interopRequireDefault(_expGolomb);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar SPSParser = function () {\n    function SPSParser() {\n        _classCallCheck(this, SPSParser);\n    }\n\n    _createClass(SPSParser, null, [{\n        key: '_ebsp2rbsp',\n        value: function _ebsp2rbsp(uint8array) {\n            var src = uint8array;\n            var src_length = src.byteLength;\n            var dst = new Uint8Array(src_length);\n            var dst_idx = 0;\n\n            for (var i = 0; i < src_length; i++) {\n                if (i >= 2) {\n                    // Unescape: Skip 0x03 after 00 00\n                    if (src[i] === 0x03 && src[i - 1] === 0x00 && src[i - 2] === 0x00) {\n                        continue;\n                    }\n                }\n                dst[dst_idx] = src[i];\n                dst_idx++;\n            }\n\n            return new Uint8Array(dst.buffer, 0, dst_idx);\n        }\n    }, {\n        key: 'parseSPS',\n        value: function parseSPS(uint8array) {\n            var rbsp = SPSParser._ebsp2rbsp(uint8array);\n            var gb = new _expGolomb2.default(rbsp);\n\n            gb.readByte();\n            var profile_idc = gb.readByte(); // profile_idc\n            gb.readByte(); // constraint_set_flags[5] + reserved_zero[3]\n            var level_idc = gb.readByte(); // level_idc\n            gb.readUEG(); // seq_parameter_set_id\n\n            var profile_string = SPSParser.getProfileString(profile_idc);\n            var level_string = SPSParser.getLevelString(level_idc);\n            var chroma_format_idc = 1;\n            var chroma_format = 420;\n            var chroma_format_table = [0, 420, 422, 444];\n            var bit_depth = 8;\n\n            if (profile_idc === 100 || profile_idc === 110 || profile_idc === 122 || profile_idc === 244 || profile_idc === 44 || profile_idc === 83 || profile_idc === 86 || profile_idc === 118 || profile_idc === 128 || profile_idc === 138 || profile_idc === 144) {\n\n                chroma_format_idc = gb.readUEG();\n                if (chroma_format_idc === 3) {\n                    gb.readBits(1); // separate_colour_plane_flag\n                }\n                if (chroma_format_idc <= 3) {\n                    chroma_format = chroma_format_table[chroma_format_idc];\n                }\n\n                bit_depth = gb.readUEG() + 8; // bit_depth_luma_minus8\n                gb.readUEG(); // bit_depth_chroma_minus8\n                gb.readBits(1); // qpprime_y_zero_transform_bypass_flag\n                if (gb.readBool()) {\n                    // seq_scaling_matrix_present_flag\n                    var scaling_list_count = chroma_format_idc !== 3 ? 8 : 12;\n                    for (var i = 0; i < scaling_list_count; i++) {\n                        if (gb.readBool()) {\n                            // seq_scaling_list_present_flag\n                            if (i < 6) {\n                                SPSParser._skipScalingList(gb, 16);\n                            } else {\n                                SPSParser._skipScalingList(gb, 64);\n                            }\n                        }\n                    }\n                }\n            }\n            gb.readUEG(); // log2_max_frame_num_minus4\n            var pic_order_cnt_type = gb.readUEG();\n            if (pic_order_cnt_type === 0) {\n                gb.readUEG(); // log2_max_pic_order_cnt_lsb_minus_4\n            } else if (pic_order_cnt_type === 1) {\n                gb.readBits(1); // delta_pic_order_always_zero_flag\n                gb.readSEG(); // offset_for_non_ref_pic\n                gb.readSEG(); // offset_for_top_to_bottom_field\n                var num_ref_frames_in_pic_order_cnt_cycle = gb.readUEG();\n                for (var _i = 0; _i < num_ref_frames_in_pic_order_cnt_cycle; _i++) {\n                    gb.readSEG(); // offset_for_ref_frame\n                }\n            }\n            gb.readUEG(); // max_num_ref_frames\n            gb.readBits(1); // gaps_in_frame_num_value_allowed_flag\n\n            var pic_width_in_mbs_minus1 = gb.readUEG();\n            var pic_height_in_map_units_minus1 = gb.readUEG();\n\n            var frame_mbs_only_flag = gb.readBits(1);\n            if (frame_mbs_only_flag === 0) {\n                gb.readBits(1); // mb_adaptive_frame_field_flag\n            }\n            gb.readBits(1); // direct_8x8_inference_flag\n\n            var frame_crop_left_offset = 0;\n            var frame_crop_right_offset = 0;\n            var frame_crop_top_offset = 0;\n            var frame_crop_bottom_offset = 0;\n\n            var frame_cropping_flag = gb.readBool();\n            if (frame_cropping_flag) {\n                frame_crop_left_offset = gb.readUEG();\n                frame_crop_right_offset = gb.readUEG();\n                frame_crop_top_offset = gb.readUEG();\n                frame_crop_bottom_offset = gb.readUEG();\n            }\n\n            var sar_width = 1,\n                sar_height = 1;\n            var fps = 0,\n                fps_fixed = true,\n                fps_num = 0,\n                fps_den = 0;\n\n            var vui_parameters_present_flag = gb.readBool();\n            if (vui_parameters_present_flag) {\n                if (gb.readBool()) {\n                    // aspect_ratio_info_present_flag\n                    var aspect_ratio_idc = gb.readByte();\n                    var sar_w_table = [1, 12, 10, 16, 40, 24, 20, 32, 80, 18, 15, 64, 160, 4, 3, 2];\n                    var sar_h_table = [1, 11, 11, 11, 33, 11, 11, 11, 33, 11, 11, 33, 99, 3, 2, 1];\n\n                    if (aspect_ratio_idc > 0 && aspect_ratio_idc < 16) {\n                        sar_width = sar_w_table[aspect_ratio_idc - 1];\n                        sar_height = sar_h_table[aspect_ratio_idc - 1];\n                    } else if (aspect_ratio_idc === 255) {\n                        sar_width = gb.readByte() << 8 | gb.readByte();\n                        sar_height = gb.readByte() << 8 | gb.readByte();\n                    }\n                }\n\n                if (gb.readBool()) {\n                    // overscan_info_present_flag\n                    gb.readBool(); // overscan_appropriate_flag\n                }\n                if (gb.readBool()) {\n                    // video_signal_type_present_flag\n                    gb.readBits(4); // video_format & video_full_range_flag\n                    if (gb.readBool()) {\n                        // colour_description_present_flag\n                        gb.readBits(24); // colour_primaries & transfer_characteristics & matrix_coefficients\n                    }\n                }\n                if (gb.readBool()) {\n                    // chroma_loc_info_present_flag\n                    gb.readUEG(); // chroma_sample_loc_type_top_field\n                    gb.readUEG(); // chroma_sample_loc_type_bottom_field\n                }\n                if (gb.readBool()) {\n                    // timing_info_present_flag\n                    var num_units_in_tick = gb.readBits(32);\n                    var time_scale = gb.readBits(32);\n                    fps_fixed = gb.readBool(); // fixed_frame_rate_flag\n\n                    fps_num = time_scale;\n                    fps_den = num_units_in_tick * 2;\n                    fps = fps_num / fps_den;\n                }\n            }\n\n            var sarScale = 1;\n            if (sar_width !== 1 || sar_height !== 1) {\n                sarScale = sar_width / sar_height;\n            }\n\n            var crop_unit_x = 0,\n                crop_unit_y = 0;\n            if (chroma_format_idc === 0) {\n                crop_unit_x = 1;\n                crop_unit_y = 2 - frame_mbs_only_flag;\n            } else {\n                var sub_wc = chroma_format_idc === 3 ? 1 : 2;\n                var sub_hc = chroma_format_idc === 1 ? 2 : 1;\n                crop_unit_x = sub_wc;\n                crop_unit_y = sub_hc * (2 - frame_mbs_only_flag);\n            }\n\n            var codec_width = (pic_width_in_mbs_minus1 + 1) * 16;\n            var codec_height = (2 - frame_mbs_only_flag) * ((pic_height_in_map_units_minus1 + 1) * 16);\n\n            codec_width -= (frame_crop_left_offset + frame_crop_right_offset) * crop_unit_x;\n            codec_height -= (frame_crop_top_offset + frame_crop_bottom_offset) * crop_unit_y;\n\n            var present_width = Math.ceil(codec_width * sarScale);\n\n            gb.destroy();\n            gb = null;\n\n            return {\n                profile_string: profile_string, // baseline, high, high10, ...\n                level_string: level_string, // 3, 3.1, 4, 4.1, 5, 5.1, ...\n                bit_depth: bit_depth, // 8bit, 10bit, ...\n                chroma_format: chroma_format, // 4:2:0, 4:2:2, ...\n                chroma_format_string: SPSParser.getChromaFormatString(chroma_format),\n\n                frame_rate: {\n                    fixed: fps_fixed,\n                    fps: fps,\n                    fps_den: fps_den,\n                    fps_num: fps_num\n                },\n\n                sar_ratio: {\n                    width: sar_width,\n                    height: sar_height\n                },\n\n                codec_size: {\n                    width: codec_width,\n                    height: codec_height\n                },\n\n                present_size: {\n                    width: present_width,\n                    height: codec_height\n                }\n            };\n        }\n    }, {\n        key: '_skipScalingList',\n        value: function _skipScalingList(gb, count) {\n            var last_scale = 8,\n                next_scale = 8;\n            var delta_scale = 0;\n            for (var i = 0; i < count; i++) {\n                if (next_scale !== 0) {\n                    delta_scale = gb.readSEG();\n                    next_scale = (last_scale + delta_scale + 256) % 256;\n                }\n                last_scale = next_scale === 0 ? last_scale : next_scale;\n            }\n        }\n    }, {\n        key: 'getProfileString',\n        value: function getProfileString(profile_idc) {\n            switch (profile_idc) {\n                case 66:\n                    return 'Baseline';\n                case 77:\n                    return 'Main';\n                case 88:\n                    return 'Extended';\n                case 100:\n                    return 'High';\n                case 110:\n                    return 'High10';\n                case 122:\n                    return 'High422';\n                case 244:\n                    return 'High444';\n                default:\n                    return 'Unknown';\n            }\n        }\n    }, {\n        key: 'getLevelString',\n        value: function getLevelString(level_idc) {\n            return (level_idc / 10).toFixed(1);\n        }\n    }, {\n        key: 'getChromaFormatString',\n        value: function getChromaFormatString(chroma) {\n            switch (chroma) {\n                case 420:\n                    return '4:2:0';\n                case 422:\n                    return '4:2:2';\n                case 444:\n                    return '4:4:4';\n                default:\n                    return 'Unknown';\n            }\n        }\n    }]);\n\n    return SPSParser;\n}();\n\nexports.default = SPSParser;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9qcy9mbHYvc3BzLXBhcnNlci5qcz82ZWE1Il0sIm5hbWVzIjpbIlNQU1BhcnNlciIsInVpbnQ4YXJyYXkiLCJzcmMiLCJzcmNfbGVuZ3RoIiwiYnl0ZUxlbmd0aCIsImRzdCIsIlVpbnQ4QXJyYXkiLCJkc3RfaWR4IiwiaSIsImJ1ZmZlciIsInJic3AiLCJfZWJzcDJyYnNwIiwiZ2IiLCJyZWFkQnl0ZSIsInByb2ZpbGVfaWRjIiwibGV2ZWxfaWRjIiwicmVhZFVFRyIsInByb2ZpbGVfc3RyaW5nIiwiZ2V0UHJvZmlsZVN0cmluZyIsImxldmVsX3N0cmluZyIsImdldExldmVsU3RyaW5nIiwiY2hyb21hX2Zvcm1hdF9pZGMiLCJjaHJvbWFfZm9ybWF0IiwiY2hyb21hX2Zvcm1hdF90YWJsZSIsImJpdF9kZXB0aCIsInJlYWRCaXRzIiwicmVhZEJvb2wiLCJzY2FsaW5nX2xpc3RfY291bnQiLCJfc2tpcFNjYWxpbmdMaXN0IiwicGljX29yZGVyX2NudF90eXBlIiwicmVhZFNFRyIsIm51bV9yZWZfZnJhbWVzX2luX3BpY19vcmRlcl9jbnRfY3ljbGUiLCJwaWNfd2lkdGhfaW5fbWJzX21pbnVzMSIsInBpY19oZWlnaHRfaW5fbWFwX3VuaXRzX21pbnVzMSIsImZyYW1lX21ic19vbmx5X2ZsYWciLCJmcmFtZV9jcm9wX2xlZnRfb2Zmc2V0IiwiZnJhbWVfY3JvcF9yaWdodF9vZmZzZXQiLCJmcmFtZV9jcm9wX3RvcF9vZmZzZXQiLCJmcmFtZV9jcm9wX2JvdHRvbV9vZmZzZXQiLCJmcmFtZV9jcm9wcGluZ19mbGFnIiwic2FyX3dpZHRoIiwic2FyX2hlaWdodCIsImZwcyIsImZwc19maXhlZCIsImZwc19udW0iLCJmcHNfZGVuIiwidnVpX3BhcmFtZXRlcnNfcHJlc2VudF9mbGFnIiwiYXNwZWN0X3JhdGlvX2lkYyIsInNhcl93X3RhYmxlIiwic2FyX2hfdGFibGUiLCJudW1fdW5pdHNfaW5fdGljayIsInRpbWVfc2NhbGUiLCJzYXJTY2FsZSIsImNyb3BfdW5pdF94IiwiY3JvcF91bml0X3kiLCJzdWJfd2MiLCJzdWJfaGMiLCJjb2RlY193aWR0aCIsImNvZGVjX2hlaWdodCIsInByZXNlbnRfd2lkdGgiLCJNYXRoIiwiY2VpbCIsImRlc3Ryb3kiLCJjaHJvbWFfZm9ybWF0X3N0cmluZyIsImdldENocm9tYUZvcm1hdFN0cmluZyIsImZyYW1lX3JhdGUiLCJmaXhlZCIsInNhcl9yYXRpbyIsIndpZHRoIiwiaGVpZ2h0IiwiY29kZWNfc2l6ZSIsInByZXNlbnRfc2l6ZSIsImNvdW50IiwibGFzdF9zY2FsZSIsIm5leHRfc2NhbGUiLCJkZWx0YV9zY2FsZSIsInRvRml4ZWQiLCJjaHJvbWEiXSwibWFwcGluZ3MiOiI7Ozs7OztxakJBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQWtCQTs7Ozs7Ozs7SUFFTUEsUzs7Ozs7OzttQ0FFZ0JDLFUsRUFBWTtBQUMxQixnQkFBSUMsTUFBTUQsVUFBVjtBQUNBLGdCQUFJRSxhQUFhRCxJQUFJRSxVQUFyQjtBQUNBLGdCQUFJQyxNQUFNLElBQUlDLFVBQUosQ0FBZUgsVUFBZixDQUFWO0FBQ0EsZ0JBQUlJLFVBQVUsQ0FBZDs7QUFFQSxpQkFBSyxJQUFJQyxJQUFJLENBQWIsRUFBZ0JBLElBQUlMLFVBQXBCLEVBQWdDSyxHQUFoQyxFQUFxQztBQUNqQyxvQkFBSUEsS0FBSyxDQUFULEVBQVk7QUFDUjtBQUNBLHdCQUFJTixJQUFJTSxDQUFKLE1BQVcsSUFBWCxJQUFtQk4sSUFBSU0sSUFBSSxDQUFSLE1BQWUsSUFBbEMsSUFBMENOLElBQUlNLElBQUksQ0FBUixNQUFlLElBQTdELEVBQW1FO0FBQy9EO0FBQ0g7QUFDSjtBQUNESCxvQkFBSUUsT0FBSixJQUFlTCxJQUFJTSxDQUFKLENBQWY7QUFDQUQ7QUFDSDs7QUFFRCxtQkFBTyxJQUFJRCxVQUFKLENBQWVELElBQUlJLE1BQW5CLEVBQTJCLENBQTNCLEVBQThCRixPQUE5QixDQUFQO0FBQ0g7OztpQ0FFZU4sVSxFQUFZO0FBQ3hCLGdCQUFJUyxPQUFP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QUFDbEJDLGtDQUFjL0QsR0FBR2tCLE9BQUgsRUFBZDtBQUNBNEMsaUNBQWEsQ0FBQ0QsYUFBYUUsV0FBYixHQUEyQixHQUE1QixJQUFtQyxHQUFoRDtBQUNIO0FBQ0RGLDZCQUFjQyxlQUFlLENBQWhCLEdBQXFCRCxVQUFyQixHQUFrQ0MsVUFBL0M7QUFDSDtBQUNKOzs7eUNBRXVCNUQsVyxFQUFhO0FBQ2pDLG9CQUFRQSxXQUFSO0FBQ0kscUJBQUssRUFBTDtBQUNJLDJCQUFPLFVBQVA7QUFDSixxQkFBSyxFQUFMO0FBQ0ksMkJBQU8sTUFBUDtBQUNKLHFCQUFLLEVBQUw7QUFDSSwyQkFBTyxVQUFQO0FBQ0oscUJBQUssR0FBTDtBQUNJLDJCQUFPLE1BQVA7QUFDSixxQkFBSyxHQUFMO0FBQ0ksMkJBQU8sUUFBUDtBQUNKLHFCQUFLLEdBQUw7QUFDSSwyQkFBTyxTQUFQO0FBQ0oscUJBQUssR0FBTDtBQUNJLDJCQUFPLFNBQVA7QUFDSjtBQUNJLDJCQUFPLFNBQVA7QUFoQlI7QUFrQkg7Ozt1Q0FFcUJDLFMsRUFBVztBQUM3QixtQkFBTyxDQUFDQSxZQUFZLEVBQWIsRUFBaUI2RCxPQUFqQixDQUF5QixDQUF6QixDQUFQO0FBQ0g7Ozs4Q0FFNEJDLE0sRUFBUTtBQUNqQyxvQkFBUUEsTUFBUjtBQUNJLHFCQUFLLEdBQUw7QUFDSSwyQkFBTyxPQUFQO0FBQ0oscUJBQUssR0FBTDtBQUNJLDJCQUFPLE9BQVA7QUFDSixxQkFBSyxHQUFMO0FBQ0ksMkJBQU8sT0FBUDtBQUNKO0FBQ0ksMkJBQU8sU0FBUDtBQVJSO0FBVUg7Ozs7OztrQkFJVTdFLFMiLCJmaWxlIjoiMC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qXG4gKiBDb3B5cmlnaHQgKEMpIDIwMTYgQmlsaWJpbGkuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogQGF1dGhvciB6aGVuZyBxaWFuIDx4cXFAeHFxLmltPlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgRXhwR29sb21iIGZyb20gJy4vZXhwLWdvbG9tYi5qcyc7XG5cbmNsYXNzIFNQU1BhcnNlciB7XG5cbiAgICBzdGF0aWMgX2Vic3AycmJzcCh1aW50OGFycmF5KSB7XG4gICAgICAgIGxldCBzcmMgPSB1aW50OGFycmF5O1xuICAgICAgICBsZXQgc3JjX2xlbmd0aCA9IHNyYy5ieXRlTGVuZ3RoO1xuICAgICAgICBsZXQgZHN0ID0gbmV3IFVpbnQ4QXJyYXkoc3JjX2xlbmd0aCk7XG4gICAgICAgIGxldCBkc3RfaWR4ID0gMDtcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNyY19sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKGkgPj0gMikge1xuICAgICAgICAgICAgICAgIC8vIFVuZXNjYXBlOiBTa2lwIDB4MDMgYWZ0ZXIgMDAgMDBcbiAgICAgICAgICAgICAgICBpZiAoc3JjW2ldID09PSAweDAzICYmIHNyY1tpIC0gMV0gPT09IDB4MDAgJiYgc3JjW2kgLSAyXSA9PT0gMHgwMCkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkc3RbZHN0X2lkeF0gPSBzcmNbaV07XG4gICAgICAgICAgICBkc3RfaWR4Kys7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbmV3IFVpbnQ4QXJyYXkoZHN0LmJ1ZmZlciwgMCwgZHN0X2lkeCk7XG4gICAgfVxuXG4gICAgc3RhdGljIHBhcnNlU1BTKHVpbnQ4YXJyYXkpIHtcbiAgICAgICAgbGV0IHJic3AgPSBTUFNQYXJzZXIuX2Vic3AycmJzcCh1aW50OGFycmF5KTtcbiAgICAgICAgbGV0IGdiID0gbmV3IEV4cEdvbG9tYihyYnNwKTtcblxuICAgICAgICBnYi5yZWFkQnl0ZSgpO1xuICAgICAgICBsZXQgcHJvZmlsZV9pZGMgPSBnYi5yZWFkQnl0ZSgpOyAgLy8gcHJvZmlsZV9pZGNcbiAgICAgICAgZ2IucmVhZEJ5dGUoKTsgIC8vIGNvbnN0cmFpbnRfc2V0X2ZsYWdzWzVdICsgcmVzZXJ2ZWRfemVyb1szXVxuICAgICAgICBsZXQgbGV2ZWxfaWRjID0gZ2IucmVhZEJ5dGUoKTsgIC8vIGxldmVsX2lkY1xuICAgICAgICBnYi5yZWFkVUVHKCk7ICAvLyBzZXFfcGFyYW1ldGVyX3NldF9pZFxuXG4gICAgICAgIGxldCBwcm9maWxlX3N0cmluZyA9IFNQU1BhcnNlci5nZXRQcm9maWxlU3RyaW5nKHByb2ZpbGVfaWRjKTtcbiAgICAgICAgbGV0IGxldmVsX3N0cmluZyA9IFNQU1BhcnNlci5nZXRMZXZlbFN0cmluZyhsZXZlbF9pZGMpO1xuICAgICAgICBsZXQgY2hyb21hX2Zvcm1hdF9pZGMgPSAxO1xuICAgICAgICBsZXQgY2hyb21hX2Zvcm1hdCA9IDQyMDtcbiAgICAgICAgbGV0IGNocm9tYV9mb3JtYXRfdGFibGUgPSBbMCwgNDIwLCA0MjIsIDQ0NF07XG4gICAgICAgIGxldCBiaXRfZGVwdGggPSA4O1xuXG4gICAgICAgIGlmIChwcm9maWxlX2lkYyA9PT0gMTAwIHx8IHByb2ZpbGVfaWRjID09PSAxMTAgfHwgcHJvZmlsZV9pZGMgPT09IDEyMiB8fFxuICAgICAgICAgICAgcHJvZmlsZV9pZGMgPT09IDI0NCB8fCBwcm9maWxlX2lkYyA9PT0gNDQgfHwgcHJvZmlsZV9pZGMgPT09IDgzIHx8XG4gICAgICAgICAgICBwcm9maWxlX2lkYyA9PT0gODYgfHwgcHJvZmlsZV9pZGMgPT09IDExOCB8fCBwcm9maWxlX2lkYyA9PT0gMTI4IHx8XG4gICAgICAgICAgICBwcm9maWxlX2lkYyA9PT0gMTM4IHx8IHByb2ZpbGVfaWRjID09PSAxNDQpIHtcblxuICAgICAgICAgICAgY2hyb21hX2Zvcm1hdF9pZGMgPSBnYi5yZWFkVUVHKCk7XG4gICAgICAgICAgICBpZiAoY2hyb21hX2Zvcm1hdF9pZGMgPT09IDMpIHtcbiAgICAgICAgICAgICAgICBnYi5yZWFkQml0cygxKTsgIC8vIHNlcGFyYXRlX2NvbG91cl9wbGFuZV9mbGFnXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY2hyb21hX2Zvcm1hdF9pZGMgPD0gMykge1xuICAgICAgICAgICAgICAgIGNocm9tYV9mb3JtYXQgPSBjaHJvbWFfZm9ybWF0X3RhYmxlW2Nocm9tYV9mb3JtYXRfaWRjXTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYml0X2RlcHRoID0gZ2IucmVhZFVFRygpICsgODsgIC8vIGJpdF9kZXB0aF9sdW1hX21pbnVzOFxuICAgICAgICAgICAgZ2IucmVhZFVFRygpOyAgLy8gYml0X2RlcHRoX2Nocm9tYV9taW51czhcbiAgICAgICAgICAgIGdiLnJlYWRCaXRzKDEpOyAgLy8gcXBwcmltZV95X3plcm9fdHJhbnNmb3JtX2J5cGFzc19mbGFnXG4gICAgICAgICAgICBpZiAoZ2IucmVhZEJvb2woKSkgeyAgLy8gc2VxX3NjYWxpbmdfbWF0cml4X3ByZXNlbnRfZmxhZ1xuICAgICAgICAgICAgICAgIGxldCBzY2FsaW5nX2xpc3RfY291bnQgPSAoY2hyb21hX2Zvcm1hdF9pZGMgIT09IDMpID8gOCA6IDEyO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2NhbGluZ19saXN0X2NvdW50OyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGdiLnJlYWRCb29sKCkpIHsgIC8vIHNlcV9zY2FsaW5nX2xpc3RfcHJlc2VudF9mbGFnXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaSA8IDYpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBTUFNQYXJzZXIuX3NraXBTY2FsaW5nTGlzdChnYiwgMTYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBTUFNQYXJzZXIuX3NraXBTY2FsaW5nTGlzdChnYiwgNjQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGdiLnJlYWRVRUcoKTsgIC8vIGxvZzJfbWF4X2ZyYW1lX251bV9taW51czRcbiAgICAgICAgbGV0IHBpY19vcmRlcl9jbnRfdHlwZSA9IGdiLnJlYWRVRUcoKTtcbiAgICAgICAgaWYgKHBpY19vcmRlcl9jbnRfdHlwZSA9PT0gMCkge1xuICAgICAgICAgICAgZ2IucmVhZFVFRygpOyAgLy8gbG9nMl9tYXhfcGljX29yZGVyX2NudF9sc2JfbWludXNfNFxuICAgICAgICB9IGVsc2UgaWYgKHBpY19vcmRlcl9jbnRfdHlwZSA9PT0gMSkge1xuICAgICAgICAgICAgZ2IucmVhZEJpdHMoMSk7ICAvLyBkZWx0YV9waWNfb3JkZXJfYWx3YXlzX3plcm9fZmxhZ1xuICAgICAgICAgICAgZ2IucmVhZFNFRygpOyAgLy8gb2Zmc2V0X2Zvcl9ub25fcmVmX3BpY1xuICAgICAgICAgICAgZ2IucmVhZFNFRygpOyAgLy8gb2Zmc2V0X2Zvcl90b3BfdG9fYm90dG9tX2ZpZWxkXG4gICAgICAgICAgICBsZXQgbnVtX3JlZl9mcmFtZXNfaW5fcGljX29yZGVyX2NudF9jeWNsZSA9IGdiLnJlYWRVRUcoKTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtX3JlZl9mcmFtZXNfaW5fcGljX29yZGVyX2NudF9jeWNsZTsgaSsrKSB7XG4gICAgICAgICAgICAgICAgZ2IucmVhZFNFRygpOyAgLy8gb2Zmc2V0X2Zvcl9yZWZfZnJhbWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBnYi5yZWFkVUVHKCk7ICAvLyBtYXhfbnVtX3JlZl9mcmFtZXNcbiAgICAgICAgZ2IucmVhZEJpdHMoMSk7ICAvLyBnYXBzX2luX2ZyYW1lX251bV92YWx1ZV9hbGxvd2VkX2ZsYWdcblxuICAgICAgICBsZXQgcGljX3dpZHRoX2luX21ic19taW51czEgPSBnYi5yZWFkVUVHKCk7XG4gICAgICAgIGxldCBwaWNfaGVpZ2h0X2luX21hcF91bml0c19taW51czEgPSBnYi5yZWFkVUVHKCk7XG5cbiAgICAgICAgbGV0IGZyYW1lX21ic19vbmx5X2ZsYWcgPSBnYi5yZWFkQml0cygxKTtcbiAgICAgICAgaWYgKGZyYW1lX21ic19vbmx5X2ZsYWcgPT09IDApIHtcbiAgICAgICAgICAgIGdiLnJlYWRCaXRzKDEpOyAgLy8gbWJfYWRhcHRpdmVfZnJhbWVfZmllbGRfZmxhZ1xuICAgICAgICB9XG4gICAgICAgIGdiLnJlYWRCaXRzKDEpOyAgLy8gZGlyZWN0Xzh4OF9pbmZlcmVuY2VfZmxhZ1xuXG4gICAgICAgIGxldCBmcmFtZV9jcm9wX2xlZnRfb2Zmc2V0ID0gMDtcbiAgICAgICAgbGV0IGZyYW1lX2Nyb3BfcmlnaHRfb2Zmc2V0ID0gMDtcbiAgICAgICAgbGV0IGZyYW1lX2Nyb3BfdG9wX29mZnNldCA9IDA7XG4gICAgICAgIGxldCBmcmFtZV9jcm9wX2JvdHRvbV9vZmZzZXQgPSAwO1xuXG4gICAgICAgIGxldCBmcmFtZV9jcm9wcGluZ19mbGFnID0gZ2IucmVhZEJvb2woKTtcbiAgICAgICAgaWYgKGZyYW1lX2Nyb3BwaW5nX2ZsYWcpIHtcbiAgICAgICAgICAgIGZyYW1lX2Nyb3BfbGVmdF9vZmZzZXQgPSBnYi5yZWFkVUVHKCk7XG4gICAgICAgICAgICBmcmFtZV9jcm9wX3JpZ2h0X29mZnNldCA9IGdiLnJlYWRVRUcoKTtcbiAgICAgICAgICAgIGZyYW1lX2Nyb3BfdG9wX29mZnNldCA9IGdiLnJlYWRVRUcoKTtcbiAgICAgICAgICAgIGZyYW1lX2Nyb3BfYm90dG9tX29mZnNldCA9IGdiLnJlYWRVRUcoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBzYXJfd2lkdGggPSAxLCBzYXJfaGVpZ2h0ID0gMTtcbiAgICAgICAgbGV0IGZwcyA9IDAsIGZwc19maXhlZCA9IHRydWUsIGZwc19udW0gPSAwLCBmcHNfZGVuID0gMDtcblxuICAgICAgICBsZXQgdnVpX3BhcmFtZXRlcnNfcHJlc2VudF9mbGFnID0gZ2IucmVhZEJvb2woKTtcbiAgICAgICAgaWYgKHZ1aV9wYXJhbWV0ZXJzX3ByZXNlbnRfZmxhZykge1xuICAgICAgICAgICAgaWYgKGdiLnJlYWRCb29sKCkpIHsgIC8vIGFzcGVjdF9yYXRpb19pbmZvX3ByZXNlbnRfZmxhZ1xuICAgICAgICAgICAgICAgIGxldCBhc3BlY3RfcmF0aW9faWRjID0gZ2IucmVhZEJ5dGUoKTtcbiAgICAgICAgICAgICAgICBsZXQgc2FyX3dfdGFibGUgPSBbMSwgMTIsIDEwLCAxNiwgNDAsIDI0LCAyMCwgMzIsIDgwLCAxOCwgMTUsIDY0LCAxNjAsIDQsIDMsIDJdO1xuICAgICAgICAgICAgICAgIGxldCBzYXJfaF90YWJsZSA9IFsxLCAxMSwgMTEsIDExLCAzMywgMTEsIDExLCAxMSwgMzMsIDExLCAxMSwgMzMsICA5OSwgMywgMiwgMV07XG5cbiAgICAgICAgICAgICAgICBpZiAoYXNwZWN0X3JhdGlvX2lkYyA+IDAgJiYgYXNwZWN0X3JhdGlvX2lkYyA8IDE2KSB7XG4gICAgICAgICAgICAgICAgICAgIHNhcl93aWR0aCA9IHNhcl93X3RhYmxlW2FzcGVjdF9yYXRpb19pZGMgLSAxXTtcbiAgICAgICAgICAgICAgICAgICAgc2FyX2hlaWdodCA9IHNhcl9oX3RhYmxlW2FzcGVjdF9yYXRpb19pZGMgLSAxXTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGFzcGVjdF9yYXRpb19pZGMgPT09IDI1NSkge1xuICAgICAgICAgICAgICAgICAgICBzYXJfd2lkdGggPSBnYi5yZWFkQnl0ZSgpIDw8IDggfCBnYi5yZWFkQnl0ZSgpO1xuICAgICAgICAgICAgICAgICAgICBzYXJfaGVpZ2h0ID0gZ2IucmVhZEJ5dGUoKSA8PCA4IHwgZ2IucmVhZEJ5dGUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChnYi5yZWFkQm9vbCgpKSB7ICAvLyBvdmVyc2Nhbl9pbmZvX3ByZXNlbnRfZmxhZ1xuICAgICAgICAgICAgICAgIGdiLnJlYWRCb29sKCk7ICAvLyBvdmVyc2Nhbl9hcHByb3ByaWF0ZV9mbGFnXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZ2IucmVhZEJvb2woKSkgeyAgLy8gdmlkZW9fc2lnbmFsX3R5cGVfcHJlc2VudF9mbGFnXG4gICAgICAgICAgICAgICAgZ2IucmVhZEJpdHMoNCk7ICAvLyB2aWRlb19mb3JtYXQgJiB2aWRlb19mdWxsX3JhbmdlX2ZsYWdcbiAgICAgICAgICAgICAgICBpZiAoZ2IucmVhZEJvb2woKSkgeyAgLy8gY29sb3VyX2Rlc2NyaXB0aW9uX3ByZXNlbnRfZmxhZ1xuICAgICAgICAgICAgICAgICAgICBnYi5yZWFkQml0cygyNCk7ICAvLyBjb2xvdXJfcHJpbWFyaWVzICYgdHJhbnNmZXJfY2hhcmFjdGVyaXN0aWNzICYgbWF0cml4X2NvZWZmaWNpZW50c1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChnYi5yZWFkQm9vbCgpKSB7ICAvLyBjaHJvbWFfbG9jX2luZm9fcHJlc2VudF9mbGFnXG4gICAgICAgICAgICAgICAgZ2IucmVhZFVFRygpOyAgLy8gY2hyb21hX3NhbXBsZV9sb2NfdHlwZV90b3BfZmllbGRcbiAgICAgICAgICAgICAgICBnYi5yZWFkVUVHKCk7ICAvLyBjaHJvbWFfc2FtcGxlX2xvY190eXBlX2JvdHRvbV9maWVsZFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGdiLnJlYWRCb29sKCkpIHsgIC8vIHRpbWluZ19pbmZvX3ByZXNlbnRfZmxhZ1xuICAgICAgICAgICAgICAgIGxldCBudW1fdW5pdHNfaW5fdGljayA9IGdiLnJlYWRCaXRzKDMyKTtcbiAgICAgICAgICAgICAgICBsZXQgdGltZV9zY2FsZSA9IGdiLnJlYWRCaXRzKDMyKTtcbiAgICAgICAgICAgICAgICBmcHNfZml4ZWQgPSBnYi5yZWFkQm9vbCgpOyAgLy8gZml4ZWRfZnJhbWVfcmF0ZV9mbGFnXG5cbiAgICAgICAgICAgICAgICBmcHNfbnVtID0gdGltZV9zY2FsZTtcbiAgICAgICAgICAgICAgICBmcHNfZGVuID0gbnVtX3VuaXRzX2luX3RpY2sgKiAyO1xuICAgICAgICAgICAgICAgIGZwcyA9IGZwc19udW0gLyBmcHNfZGVuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHNhclNjYWxlID0gMTtcbiAgICAgICAgaWYgKHNhcl93aWR0aCAhPT0gMSB8fCBzYXJfaGVpZ2h0ICE9PSAxKSB7XG4gICAgICAgICAgICBzYXJTY2FsZSA9IHNhcl93aWR0aCAvIHNhcl9oZWlnaHQ7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgY3JvcF91bml0X3ggPSAwLCBjcm9wX3VuaXRfeSA9IDA7XG4gICAgICAgIGlmIChjaHJvbWFfZm9ybWF0X2lkYyA9PT0gMCkge1xuICAgICAgICAgICAgY3JvcF91bml0X3ggPSAxO1xuICAgICAgICAgICAgY3JvcF91bml0X3kgPSAyIC0gZnJhbWVfbWJzX29ubHlfZmxhZztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGxldCBzdWJfd2MgPSAoY2hyb21hX2Zvcm1hdF9pZGMgPT09IDMpID8gMSA6IDI7XG4gICAgICAgICAgICBsZXQgc3ViX2hjID0gKGNocm9tYV9mb3JtYXRfaWRjID09PSAxKSA/IDIgOiAxO1xuICAgICAgICAgICAgY3JvcF91bml0X3ggPSBzdWJfd2M7XG4gICAgICAgICAgICBjcm9wX3VuaXRfeSA9IHN1Yl9oYyAqICgyIC0gZnJhbWVfbWJzX29ubHlfZmxhZyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgY29kZWNfd2lkdGggPSAocGljX3dpZHRoX2luX21ic19taW51czEgKyAxKSAqIDE2O1xuICAgICAgICBsZXQgY29kZWNfaGVpZ2h0ID0gKDIgLSBmcmFtZV9tYnNfb25seV9mbGFnKSAqICgocGljX2hlaWdodF9pbl9tYXBfdW5pdHNfbWludXMxICsgMSkgKiAxNik7XG5cbiAgICAgICAgY29kZWNfd2lkdGggLT0gKGZyYW1lX2Nyb3BfbGVmdF9vZmZzZXQgKyBmcmFtZV9jcm9wX3JpZ2h0X29mZnNldCkgKiBjcm9wX3VuaXRfeDtcbiAgICAgICAgY29kZWNfaGVpZ2h0IC09IChmcmFtZV9jcm9wX3RvcF9vZmZzZXQgKyBmcmFtZV9jcm9wX2JvdHRvbV9vZmZzZXQpICogY3JvcF91bml0X3k7XG5cbiAgICAgICAgbGV0IHByZXNlbnRfd2lkdGggPSBNYXRoLmNlaWwoY29kZWNfd2lkdGggKiBzYXJTY2FsZSk7XG5cbiAgICAgICAgZ2IuZGVzdHJveSgpO1xuICAgICAgICBnYiA9IG51bGw7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHByb2ZpbGVfc3RyaW5nOiBwcm9maWxlX3N0cmluZywgIC8vIGJhc2VsaW5lLCBoaWdoLCBoaWdoMTAsIC4uLlxuICAgICAgICAgICAgbGV2ZWxfc3RyaW5nOiBsZXZlbF9zdHJpbmcsICAvLyAzLCAzLjEsIDQsIDQuMSwgNSwgNS4xLCAuLi5cbiAgICAgICAgICAgIGJpdF9kZXB0aDogYml0X2RlcHRoLCAgLy8gOGJpdCwgMTBiaXQsIC4uLlxuICAgICAgICAgICAgY2hyb21hX2Zvcm1hdDogY2hyb21hX2Zvcm1hdCwgIC8vIDQ6MjowLCA0OjI6MiwgLi4uXG4gICAgICAgICAgICBjaHJvbWFfZm9ybWF0X3N0cmluZzogU1BTUGFyc2VyLmdldENocm9tYUZvcm1hdFN0cmluZyhjaHJvbWFfZm9ybWF0KSxcblxuICAgICAgICAgICAgZnJhbWVfcmF0ZToge1xuICAgICAgICAgICAgICAgIGZpeGVkOiBmcHNfZml4ZWQsXG4gICAgICAgICAgICAgICAgZnBzOiBmcHMsXG4gICAgICAgICAgICAgICAgZnBzX2RlbjogZnBzX2RlbixcbiAgICAgICAgICAgICAgICBmcHNfbnVtOiBmcHNfbnVtXG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICBzYXJfcmF0aW86IHtcbiAgICAgICAgICAgICAgICB3aWR0aDogc2FyX3dpZHRoLFxuICAgICAgICAgICAgICAgIGhlaWdodDogc2FyX2hlaWdodFxuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgY29kZWNfc2l6ZToge1xuICAgICAgICAgICAgICAgIHdpZHRoOiBjb2RlY193aWR0aCxcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IGNvZGVjX2hlaWdodFxuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgcHJlc2VudF9zaXplOiB7XG4gICAgICAgICAgICAgICAgd2lkdGg6IHByZXNlbnRfd2lkdGgsXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiBjb2RlY19oZWlnaHRcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBzdGF0aWMgX3NraXBTY2FsaW5nTGlzdChnYiwgY291bnQpIHtcbiAgICAgICAgbGV0IGxhc3Rfc2NhbGUgPSA4LCBuZXh0X3NjYWxlID0gODtcbiAgICAgICAgbGV0IGRlbHRhX3NjYWxlID0gMDtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb3VudDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAobmV4dF9zY2FsZSAhPT0gMCkge1xuICAgICAgICAgICAgICAgIGRlbHRhX3NjYWxlID0gZ2IucmVhZFNFRygpO1xuICAgICAgICAgICAgICAgIG5leHRfc2NhbGUgPSAobGFzdF9zY2FsZSArIGRlbHRhX3NjYWxlICsgMjU2KSAlIDI1NjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxhc3Rfc2NhbGUgPSAobmV4dF9zY2FsZSA9PT0gMCkgPyBsYXN0X3NjYWxlIDogbmV4dF9zY2FsZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHN0YXRpYyBnZXRQcm9maWxlU3RyaW5nKHByb2ZpbGVfaWRjKSB7XG4gICAgICAgIHN3aXRjaCAocHJvZmlsZV9pZGMpIHtcbiAgICAgICAgICAgIGNhc2UgNjY6XG4gICAgICAgICAgICAgICAgcmV0dXJuICdCYXNlbGluZSc7XG4gICAgICAgICAgICBjYXNlIDc3OlxuICAgICAgICAgICAgICAgIHJldHVybiAnTWFpbic7XG4gICAgICAgICAgICBjYXNlIDg4OlxuICAgICAgICAgICAgICAgIHJldHVybiAnRXh0ZW5kZWQnO1xuICAgICAgICAgICAgY2FzZSAxMDA6XG4gICAgICAgICAgICAgICAgcmV0dXJuICdIaWdoJztcbiAgICAgICAgICAgIGNhc2UgMTEwOlxuICAgICAgICAgICAgICAgIHJldHVybiAnSGlnaDEwJztcbiAgICAgICAgICAgIGNhc2UgMTIyOlxuICAgICAgICAgICAgICAgIHJldHVybiAnSGlnaDQyMic7XG4gICAgICAgICAgICBjYXNlIDI0NDpcbiAgICAgICAgICAgICAgICByZXR1cm4gJ0hpZ2g0NDQnO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gJ1Vua25vd24nO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgc3RhdGljIGdldExldmVsU3RyaW5nKGxldmVsX2lkYykge1xuICAgICAgICByZXR1cm4gKGxldmVsX2lkYyAvIDEwKS50b0ZpeGVkKDEpO1xuICAgIH1cblxuICAgIHN0YXRpYyBnZXRDaHJvbWFGb3JtYXRTdHJpbmcoY2hyb21hKSB7XG4gICAgICAgIHN3aXRjaCAoY2hyb21hKSB7XG4gICAgICAgICAgICBjYXNlIDQyMDpcbiAgICAgICAgICAgICAgICByZXR1cm4gJzQ6MjowJztcbiAgICAgICAgICAgIGNhc2UgNDIyOlxuICAgICAgICAgICAgICAgIHJldHVybiAnNDoyOjInO1xuICAgICAgICAgICAgY2FzZSA0NDQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuICc0OjQ6NCc7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybiAnVW5rbm93bic7XG4gICAgICAgIH1cbiAgICB9XG5cbn1cblxuZXhwb3J0IGRlZmF1bHQgU1BTUGFyc2VyO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2pzL2Zsdi9zcHMtcGFyc2VyLmpzIl0sInNvdXJjZVJvb3QiOiIifQ==");

/***/ }),
/* 1 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * 代码借鉴了flv.js\n * 增加了自己的注释和写法\n */\nvar MP4 = function () {\n    function MP4() {\n        _classCallCheck(this, MP4);\n    }\n\n    _createClass(MP4, null, [{\n        key: 'init',\n        value: function init() {\n            MP4.types = {\n                avc1: [],\n                avcC: [],\n                btrt: [],\n                dinf: [],\n                dref: [],\n                esds: [],\n                ftyp: [],\n                hdlr: [],\n                mdat: [],\n                mdhd: [],\n                mdia: [],\n                mfhd: [],\n                minf: [],\n                moof: [],\n                moov: [],\n                mp4a: [],\n                mvex: [],\n                mvhd: [],\n                sdtp: [],\n                stbl: [],\n                stco: [],\n                stsc: [],\n                stsd: [],\n                stsz: [],\n                stts: [],\n                tfdt: [],\n                tfhd: [],\n                traf: [],\n                trak: [],\n                trun: [],\n                trex: [],\n                tkhd: [],\n                vmhd: [],\n                smhd: []\n            };\n\n            for (var name in MP4.types) {\n                if (MP4.types.hasOwnProperty(name)) {\n                    MP4.types[name] = [name.charCodeAt(0), name.charCodeAt(1), name.charCodeAt(2), name.charCodeAt(3)];\n                }\n            }\n\n            var constants = MP4.constants = {};\n\n            constants.FTYP = new Uint8Array([0x69, 0x73, 0x6F, 0x6D, // major_brand: isom\t\tisom\tMP4  Base Media v1 [IS0 14496-12:2003]\tISO\tYES\tvideo/mp4\n            0x0, 0x0, 0x0, 0x1, // minor_version: 0x01\n            0x69, 0x73, 0x6F, 0x6D, // isom\n            0x61, 0x76, 0x63, 0x31 // avc1\n            ]);\n\n            constants.STSD_PREFIX = new Uint8Array([0x00, 0x00, 0x00, 0x00, // version(0) + flags  version字段后会有一个entry count字段\n            0x00, 0x00, 0x00, 0x01 // entry_count\t根据entry的个数，每个entry会有type信息，如“vide”、“sund”等，根据type不同sample description会提供不同的信息，例如对于video track，会有“VisualSampleEntry”类型信息，对于audio track会有“AudioSampleEntry”类型信息。\n            ]);\n\n            constants.STTS = new Uint8Array([0x00, 0x00, 0x00, 0x00, // version(0) + flags\n            0x00, 0x00, 0x00, 0x00 // entry_count     0个索引\n            ]);\n\n            constants.STSC = constants.STCO = constants.STTS;\n\n            constants.STSZ = new Uint8Array([0x00, 0x00, 0x00, 0x00, // version(0) + flags\n            0x00, 0x00, 0x00, 0x00, // sample_size\n            0x00, 0x00, 0x00, 0x00 // sample_count\n            ]);\n\n            constants.HDLR_VIDEO = new Uint8Array([0x00, 0x00, 0x00, 0x00, // version(0) + flags\n            0x00, 0x00, 0x00, 0x00, // pre_defined\n            0x76, 0x69, 0x64, 0x65, // handler_type: 'vide' 在media box中，该值为4个字符\t\t“vide”— video track\n            0x00, 0x00, 0x00, 0x00, // reserved: 3 * 4 bytes\n            0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, //保留位\n            0x56, 0x69, 0x64, 0x65, 0x6F, 0x48, 0x61, 0x6E, 0x64, 0x6C, 0x65, 0x72, 0x00 // name: VideoHandler 长度不定\t\ttrack type name，以‘\\0’结尾的字符串\n            ]);\n\n            constants.HDLR_AUDIO = new Uint8Array([0x00, 0x00, 0x00, 0x00, // version(0) + flags\n            0x00, 0x00, 0x00, 0x00, // pre_defined\n            0x73, 0x6F, 0x75, 0x6E, // handler_type: 'soun'在media box中，该值为4个字符\t\t“soun”— audio track\n            0x00, 0x00, 0x00, 0x00, // reserved: 3 * 4 bytes\n            0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, //保留位\n            0x53, 0x6F, 0x75, 0x6E, 0x64, 0x48, 0x61, 0x6E, 0x64, 0x6C, 0x65, 0x72, 0x00 // name: SoundHandler 长度不定\t\ttrack type name，以‘\\0’结尾的字符串\n            ]);\n\n            constants.DREF = new Uint8Array([0x00, 0x00, 0x00, 0x00, // version(0) + flags\n            0x00, 0x00, 0x00, 0x01, // entry_count 1个url\t\n            //url\tbox开始\n            0x00, 0x00, 0x00, 0x0C, // entry_size\n            0x75, 0x72, 0x6C, 0x20, // type 'url '\n            0x00, 0x00, 0x00, 0x01 // version(0) + flags 当“url”或“urn”的box flag为1时，字符串均为空。\n            ]);\n\n            // Sound media header\n            constants.SMHD = new Uint8Array([0x00, 0x00, 0x00, 0x00, // version(0) + flags\tbox版本，0或1，一般为0。\n            0x00, 0x00, 0x00, 0x00 // balance(2) + reserved(2) 立体声平衡，[8.8] 格式值，一般为0，-1.0表示全部左声道，1.0表示全部右声道+2位保留位\n            ]);\n\n            // video media header\n            constants.VMHD = new Uint8Array([0x00, 0x00, 0x00, 0x01, // version(0) + flags\n            0x00, 0x00, // graphicsmode: 2 bytes 视频合成模式，为0时拷贝原始图像，否则与opcolor进行合成   //理论上是4位啊  暂时保留\n            0x00, 0x00, 0x00, 0x00, // opcolor: 3 * 2 bytes ｛red，green，blue｝\n            0x00, 0x00]);\n        }\n\n        /**\n         * 封装box\n         */\n\n    }, {\n        key: 'box',\n        value: function box(type) {\n            var size = 8;\n            var result = null;\n            var datas = Array.prototype.slice.call(arguments, 1);\n            var arrayCount = datas.length;\n\n            for (var i = 0; i < arrayCount; i++) {\n                size += datas[i].byteLength;\n            }\n            //box头部大小\n            result = new Uint8Array(size);\n            result[0] = size >>> 24 & 0xFF; // size\n            result[1] = size >>> 16 & 0xFF;\n            result[2] = size >>> 8 & 0xFF;\n            result[3] = size & 0xFF;\n            //写入box的type\n            result.set(type, 4); // type\n\n            var offset = 8;\n            for (var _i = 0; _i < arrayCount; _i++) {\n                // data body\n                result.set(datas[_i], offset);\n                offset += datas[_i].byteLength;\n            }\n\n            return result;\n        }\n\n        //创建ftyp&moov\n\n    }, {\n        key: 'generateInitSegment',\n        value: function generateInitSegment(meta) {\n            if (meta.constructor != Array) {\n                meta = [meta];\n            }\n            var ftyp = MP4.box(MP4.types.ftyp, MP4.constants.FTYP);\n            var moov = MP4.moov(meta);\n\n            var result = new Uint8Array(ftyp.byteLength + moov.byteLength);\n            result.set(ftyp, 0);\n            result.set(moov, ftyp.byteLength);\n            return result;\n        }\n\n        // Movie metadata box\n\n    }, {\n        key: 'moov',\n        value: function moov(meta) {\n            var mvhd = MP4.mvhd(meta[0].timescale, meta[0].duration); ///moov里面的第一个box\n            var vtrak = MP4.trak(meta[0]);\n            var atrak = void 0;\n            if (meta.length > 1) {\n                atrak = MP4.trak(meta[1]);\n            }\n\n            var mvex = MP4.mvex(meta);\n            if (meta.length > 1) return MP4.box(MP4.types.moov, mvhd, vtrak, atrak, mvex);else return MP4.box(MP4.types.moov, mvhd, vtrak, mvex);\n        }\n\n        // Movie header box\n\n    }, {\n        key: 'mvhd',\n        value: function mvhd(timescale, duration) {\n            return MP4.box(MP4.types.mvhd, new Uint8Array([0x00, 0x00, 0x00, 0x00, // version(0) + flags     1位的box版本+3位flags   box版本，0或1，一般为0。（以下字节数均按version=0）\n            0x00, 0x00, 0x00, 0x00, // creation_time    创建时间  （相对于UTC时间1904-01-01零点的秒数）\n            0x00, 0x00, 0x00, 0x00, // modification_time   修改时间\n            timescale >>> 24 & 0xFF, // timescale: 4 bytes\t\t文件媒体在1秒时间内的刻度值，可以理解为1秒长度\n            timescale >>> 16 & 0xFF, timescale >>> 8 & 0xFF, timescale & 0xFF, duration >>> 24 & 0xFF, // duration: 4 bytes\t该track的时间长度，用duration和time scale值可以计算track时长，比如audio track的time scale = 8000, duration = 560128，时长为70.016，video track的time scale = 600, duration = 42000，时长为70\n            duration >>> 16 & 0xFF, duration >>> 8 & 0xFF, duration & 0xFF, 0x00, 0x01, 0x00, 0x00, // Preferred rate: 1.0   推荐播放速率，高16位和低16位分别为小数点整数部分和小数部分，即[16.16] 格式，该值为1.0（0x00010000）表示正常前向播放\n            0x01, 0x00, 0x00, 0x00, // PreferredVolume(1.0, 2bytes) + reserved(2bytes)\t与rate类似，[8.8] 格式，1.0（0x0100）表示最大音量 \n            0x00, 0x00, 0x00, 0x00, // reserved: 4 + 4 bytes\t保留位\n            0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, // ----begin composition matrix----\n            0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, //视频变换矩阵   线性代数\n            0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x40, 0x00, 0x00, 0x00, // ----end composition matrix----\n            0x00, 0x00, 0x00, 0x00, // ----begin pre_defined 6 * 4 bytes----\n            0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, //pre-defined 保留位\n            0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, // ----end pre_defined 6 * 4 bytes----\n            0xFF, 0xFF, 0xFF, 0xFF // next_track_ID 下一个track使用的id号\n            ]));\n        }\n\n        // Track box\n\n    }, {\n        key: 'trak',\n        value: function trak(meta) {\n            return MP4.box(MP4.types.trak, MP4.tkhd(meta), MP4.mdia(meta));\n        }\n\n        // Track header box\n\n    }, {\n        key: 'tkhd',\n        value: function tkhd(meta) {\n            var trackId = meta.id,\n                duration = meta.duration;\n            var width = meta.presentWidth,\n                height = meta.presentHeight;\n\n            return MP4.box(MP4.types.tkhd, new Uint8Array([0x00, 0x00, 0x00, 0x07, // version(0) + flags 1位版本 box版本，0或1，一般为0。（以下字节数均按version=0）按位或操作结果值，预定义如下：\n            //0x000001 track_enabled，否则该track不被播放；\n            //0x000002 track_in_movie，表示该track在播放中被引用；\n            //0x000004 track_in_preview，表示该track在预览时被引用。\n            //一般该值为7，1+2+4 如果一个媒体所有track均未设置track_in_movie和track_in_preview，将被理解为所有track均设置了这两项；对于hint track，该值为0\n            //hint track  这个特殊的track并不包含媒体数据，而是包含了一些将其他数据track打包成流媒体的指示信息。\n            0x00, 0x00, 0x00, 0x00, // creation_time\t创建时间（相对于UTC时间1904-01-01零点的秒数）\n            0x00, 0x00, 0x00, 0x00, // modification_time\t修改时间\n            trackId >>> 24 & 0xFF, // track_ID: 4 bytes\tid号，不能重复且不能为0\n            trackId >>> 16 & 0xFF, trackId >>> 8 & 0xFF, trackId & 0xFF, 0x00, 0x00, 0x00, 0x00, // reserved: 4 bytes    保留位\n            duration >>> 24 & 0xFF, // duration: 4 bytes  \ttrack的时间长度\n            duration >>> 16 & 0xFF, duration >>> 8 & 0xFF, duration & 0xFF, 0x00, 0x00, 0x00, 0x00, // reserved: 2 * 4 bytes    保留位\n            0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, // layer(2bytes) + alternate_group(2bytes)  视频层，默认为0，值小的在上层.track分组信息，默认为0表示该track未与其他track有群组关系\n            0x00, 0x00, 0x00, 0x00, // volume(2bytes) + reserved(2bytes)    [8.8] 格式，如果为音频track，1.0（0x0100）表示最大音量；否则为0   +保留位\n            0x00, 0x01, 0x00, 0x00, // ----begin composition matrix----\n            0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, //视频变换矩阵\n            0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x40, 0x00, 0x00, 0x00, // ----end composition matrix----\n            width >>> 8 & 0xFF, // //宽度\n            width & 0xFF, 0x00, 0x00, height >>> 8 & 0xFF, //高度\n            height & 0xFF, 0x00, 0x00]));\n        }\n\n        /**\n         * “mdia”也是个container box，其子box的结构和种类还是比较复杂的。先来看一个“mdia”的实例结构树图。\n         * 总体来说，“mdia”定义了track媒体类型以及sample数据，描述sample信息。一般“mdia”包含一个“mdhd”，\n         * 一个“hdlr”和一个“minf”，其中“mdhd”为media header box，“hdlr”为handler reference box，\n         * “minf”为media information box。\n         * \n         * mdia\n         * \t\tmdhd\n         * \t\thdlr\n         * \t\tminf\n         * \t\t\tsmhd\n         * \t\t\tdinf\n         * \t\t\t\tdref\n         * \t\t\t\t\turl\n         * \t\t\tstbl\n         * \t\t\t\tstsd\n         * \t\t\t\t\tmp4a\n         * \t\t\t\t\t\tesds\n         * \t\t\t\tstts\n         * \t\t\t\tstsc\n         * \t\t\t\tstsz\n         * \t\t\t\tstco\n         */\n\n    }, {\n        key: 'mdia',\n        value: function mdia(meta) {\n            return MP4.box(MP4.types.mdia, MP4.mdhd(meta), MP4.hdlr(meta), MP4.minf(meta));\n        }\n\n        // Media header box\n\n    }, {\n        key: 'mdhd',\n        value: function mdhd(meta) {\n            var timescale = meta.timescale;\n            var duration = meta.duration;\n            return MP4.box(MP4.types.mdhd, new Uint8Array([0x00, 0x00, 0x00, 0x00, // version(0) + flags // version(0) + flags\t\tbox版本，0或1，一般为0。\n            0x00, 0x00, 0x00, 0x00, // creation_time    创建时间\n            0x00, 0x00, 0x00, 0x00, // modification_time修改时间\n            timescale >>> 24 & 0xFF, // timescale: 4 bytes    文件媒体在1秒时间内的刻度值，可以理解为1秒长度\n            timescale >>> 16 & 0xFF, timescale >>> 8 & 0xFF, timescale & 0xFF, duration >>> 24 & 0xFF, // duration: 4 bytes  track的时间长度\n            duration >>> 16 & 0xFF, duration >>> 8 & 0xFF, duration & 0xFF, 0x55, 0xC4, // language: und (undetermined) 媒体语言码。最高位为0，后面15位为3个字符（见ISO 639-2/T标准中定义）\n            0x00, 0x00 // pre_defined = 0\n            ]));\n        }\n\n        // Media handler reference box\n\n    }, {\n        key: 'hdlr',\n        value: function hdlr(meta) {\n            var data = null;\n            if (meta.type === 'audio') {\n                data = MP4.constants.HDLR_AUDIO;\n            } else {\n                data = MP4.constants.HDLR_VIDEO;\n            }\n            return MP4.box(MP4.types.hdlr, data);\n        }\n\n        /**\n        * “minf”存储了解释track媒体数据的handler-specific信息，media handler用这些信息将媒体时间映射到媒体数据并进行处理。“minf”中的信息格式和内容与媒体类型以及解释媒体数据的media handler密切相关，其他media handler不知道如何解释这些信息。“minf”是一个container box，其实际内容由子box说明。\n        一般情况下，“minf”包含一个header box，一个“dinf”和一个“stbl”，其中，header box根据track type（即media handler type）分为“vmhd”、“smhd”、“hmhd”和“nmhd”，“dinf”为data information box，“stbl”为sample table box。下面分别介绍。\n        * \n        */\n        // Media infomation box\n\n    }, {\n        key: 'minf',\n        value: function minf(meta) {\n            //header box根据track type（即media handler type）分为“vmhd”、“smhd”、“hmhd”和“nmhd”\n            var xmhd = null;\n            if (meta.type === 'audio') {\n                xmhd = MP4.box(MP4.types.smhd, MP4.constants.SMHD);\n            } else {\n                xmhd = MP4.box(MP4.types.vmhd, MP4.constants.VMHD);\n            }\n            return MP4.box(MP4.types.minf, xmhd, MP4.dinf(), MP4.stbl(meta));\n        }\n\n        /**\n         * Data Information Box\n         * “dinf”解释如何定位媒体信息，是一个container box。“dinf”一般包含一个“dref”，即data reference box；\n         * “dref”下会包含若干个“url”或“urn”，这些box组成一个表，用来定位track数据。\n         * 简单的说，track可以被分成若干段，每一段都可以根据“url”或“urn”指向的地址来获取数据，\n         * sample描述中会用这些片段的序号将这些片段组成一个完整的track。\n         * 一般情况下，当数据被完全包含在文件中时，“url”或“urn”中的定位字符串是空的。\n         */\n\n    }, {\n        key: 'dinf',\n        value: function dinf() {\n            var result = MP4.box(MP4.types.dinf, MP4.box(MP4.types.dref, MP4.constants.DREF));\n            return result;\n        }\n\n        /**\n        * Sample Table Box（stbl）\n        \t*\t“stbl”几乎是普通的MP4文件中最复杂的一个box了，首先需要回忆一下sample的概念。\n        * \tsample是媒体数据存储的单位，存储在media的chunk中，chunk和sample的长度均可互不相同，如下图所示。\n        “stbl”是一个container box，其子box包括：sample description box（stsd）、\n        * time to sample box（stts）、sample size box（stsz或stz2）、\n        * sample to chunk box（stsc）、chunk offset box（stco或co64）、\n        * composition time to sample box（ctts）、sync sample box（stss）\n        * stsd”必不可少，且至少包含一个条目，该box包含了data reference box进行sample数据检索的信息。\n        * 没有“stsd”就无法计算media sample的存储位置。“stsd”包含了编码的信息，其存储的信息随媒体类型不同而不同。\n        * \t\t\tstbl\n        * \t\t\t\tstsd\n        * \t\t\t\t\tavc1\n        * \t\t\t\t\t\tavcC\n        * \t\t\t\tstts\n        * \t\t\t\tstsc\n        * \t\t\t\tstsz\n        * \t\t\t\tstco\n        */\n\n    }, {\n        key: 'stbl',\n        value: function stbl(meta) {\n            var result = MP4.box(MP4.types.stbl, // type: stbl\n            MP4.stsd(meta), // Sample Description Table\n            MP4.box(MP4.types.stts, MP4.constants.STTS), // Time-To-Sample    因为stts的entry count 为0\n            //所以没有关键帧index 的stss\n            //也没有CTTS box CTTS是记录偏移量\n            MP4.box(MP4.types.stsc, MP4.constants.STSC), // Sample-To-Chunk\n            MP4.box(MP4.types.stsz, MP4.constants.STSZ), // Sample size\n            MP4.box(MP4.types.stco, MP4.constants.STCO) // Chunk offset\n            );\n            return result;\n        }\n\n        /**\n        * Sample Description Box（stsd）\n        \t\tbox header和version字段后会有一个entry count字段，\n        * \t\t\t根据entry的个数，每个entry会有type信息，如“vide”、“sund”等，\n        * \t\t根据type不同sample description会提供不同的信息，例如对于video track，\n        * 会有“VisualSampleEntry”类型信息，对于audio track会有“AudioSampleEntry”类型信息。\n        * * \t\t\t\tstsd\n        * \t\t\t\t\tmp4a\n        * \t\t\t\t\t\tesds\n        * \n        * \n        * \n        * \n        * \t\t 4 bytes - length in total\n        \t 4 bytes - 4 char code of sample description table (stsd)\n        \t 4 bytes - version & flags\n        \t 4 bytes - number of sample entries (num_sample_entries)\n        \t\t [\n        \t\t    4 bytes - length of sample entry (len_sample_entry)\n        \t\t    4 bytes - 4 char code of sample entry\n        \t\t    ('len_sample_entry' - 8) bytes of data\n        \t\t ] (repeated 'num_sample_entries' times)\n        \t(4 bytes - optional 0x00000000 as end of box marker )\n        */\n\n    }, {\n        key: 'stsd',\n        value: function stsd(meta) {\n            if (meta.type === 'audio') {\n                return MP4.box(MP4.types.stsd, MP4.constants.STSD_PREFIX, MP4.mp4a(meta));\n            } else {\n                return MP4.box(MP4.types.stsd, MP4.constants.STSD_PREFIX, MP4.avc1(meta));\n            }\n        }\n    }, {\n        key: 'mp4a',\n        value: function mp4a(meta) {\n            var channelCount = meta.channelCount;\n            var sampleRate = meta.audioSampleRate;\n\n            var data = new Uint8Array([0x00, 0x00, 0x00, 0x00, // reserved(4) 6个字节，设置为0；\n            0x00, 0x00, 0x00, 0x01, // reserved(2) + data_reference_index(2)\n            0x00, 0x00, 0x00, 0x00, // reserved: 2 * 4 bytes 保留位\n            0x00, 0x00, 0x00, 0x00, 0x00, channelCount, // channelCount(2) 单声道还是双声道\n            0x00, 0x10, // sampleSize(2)\n            0x00, 0x00, 0x00, 0x00, // reserved(4) 4字节保留位\n            sampleRate >>> 8 & 0xFF, // Audio sample rate 显然要右移16位才有意义\ttemplate unsigned int(32) samplerate = {timescale of media}<<16;\n            sampleRate & 0xFF, 0x00, 0x00]);\n\n            return MP4.box(MP4.types.mp4a, data, MP4.esds(meta));\n        }\n    }, {\n        key: 'esds',\n        value: function esds(meta) {\n            var config = meta.config;\n            var configSize = config.length;\n            var data = new Uint8Array([0x00, 0x00, 0x00, 0x00, // version 0 + flags\n\n            0x03, // descriptor_type    MP4ESDescrTag\n            0x17 + configSize, // length3\n            0x00, 0x01, // es_id\n            0x00, // stream_priority\n\n            0x04, // descriptor_type    MP4DecConfigDescrTag\n            0x0F + configSize, // length\n            0x40, // codec: mpeg4_audio\n            /**\n             *当objectTypeIndication为0x40时，为MPEG-4 Audio（MPEG-4 Audio generally is thought of as AAC \n             * but there is a whole framework of audio codecs that can Go in MPEG-4 Audio including AAC, BSAC, ALS, CELP, \n             * and something called MP3On4），如果想更细分format为aac还是mp3，\n             * 可以读取MP4DecSpecificDescr层data[0]的前五位\n             */\n            0x15, // stream_type: Audio\n            0x00, 0x00, 0x00, // buffer_size\n            0x00, 0x00, 0x00, 0x00, // maxBitrate\n            0x00, 0x00, 0x00, 0x00, // avgBitrate\n\n            0x05 // descriptor_type MP4DecSpecificDescrTag\n            ].concat([configSize]).concat(config).concat([0x06, 0x01, 0x02 // GASpecificConfig\n            ]));\n            return MP4.box(MP4.types.esds, data);\n        }\n\n        /**\n         * 改版\n         *stsd下的avc1视频解析 \n         */\n\n    }, {\n        key: 'avc1',\n        value: function avc1(meta) {\n            var avcc = meta.avcc;\n            var width = meta.codecWidth,\n                height = meta.codecHeight;\n\n            var data = new Uint8Array([0x00, 0x00, 0x00, 0x00, // // reserved(4)    6个 保留位\tReserved：6个字节，设置为0；\n            0x00, 0x00, 0x00, 0x01, // reserved(2) + {{{{data_reference_index(2)  数据引用索引}}}}\n            0x00, 0x00, 0x00, 0x00, // pre_defined(2) + reserved(2)\n            0x00, 0x00, 0x00, 0x00, // pre_defined: 3 * 4 bytes  3*4个字节的保留位\n            0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, width >>> 8 & 0xFF, // width: 2 bytes\n            width & 0xFF, height >>> 8 & 0xFF, // height: 2 bytes\n            height & 0xFF, 0x00, 0x48, 0x00, 0x00, // horizresolution: 4 bytes 常数\n            0x00, 0x48, 0x00, 0x00, // vertresolution: 4 bytes 常数\n            0x00, 0x00, 0x00, 0x00, // reserved: 4 bytes 保留位\n            0x00, 0x01, // frame_count\t\t\n            //frame_count表明多少帧压缩视频存储在每个样本。默认是1,每样一帧;它可能超过1每个样本的多个帧数\n            0x04, //\tstrlen compressorname: 32 bytes\t\t\tString[32]\n            //32个8 bit    第一个8bit表示长度,剩下31个8bit表示内容\n            0x67, 0x31, 0x31, 0x31, // compressorname: 32 bytes    翻译过来是g111\n            0x00, 0x00, 0x00, 0x00, //\n            0x00, 0x00, 0x00, 0x00, //\n            0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x18, // depth 颜色深度\n            0xFF, 0xFF // pre_defined = -1\n            ]);\n            return MP4.box(MP4.types.avc1, data, MP4.box(MP4.types.avcC, avcc));\n        }\n\n        // Movie Extends box\n\n    }, {\n        key: 'mvex',\n        value: function mvex(meta) {\n            if (meta.length > 1) return MP4.box(MP4.types.mvex, MP4.trex(meta[0]), MP4.trex(meta[1]));else return MP4.box(MP4.types.mvex, MP4.trex(meta[0]));\n        }\n\n        // Track Extends box\n\n    }, {\n        key: 'trex',\n        value: function trex(meta) {\n            var trackId = meta.id;\n            var data = new Uint8Array([0x00, 0x00, 0x00, 0x00, // version(0) + flags\n            trackId >>> 24 & 0xFF, // track_ID\n            trackId >>> 16 & 0xFF, trackId >>> 8 & 0xFF, trackId & 0xFF, 0x00, 0x00, 0x00, 0x01, // default_sample_description_index\n            0x00, 0x00, 0x00, 0x00, // default_sample_duration\n            0x00, 0x00, 0x00, 0x00, // default_sample_size\n            0x00, 0x01, 0x00, 0x01 // default_sample_flags\n            ]);\n            // if (meta.type !== 'video') {\n            //     data[data.length - 1] = 0x00;\n            // }\n            return MP4.box(MP4.types.trex, data);\n        }\n\n        // Movie fragment box\n\n    }, {\n        key: 'moof',\n        value: function moof(track, baseMediaDecodeTime) {\n            return MP4.box(MP4.types.moof, MP4.mfhd(track.sequenceNumber), MP4.traf(track, baseMediaDecodeTime));\n        }\n    }, {\n        key: 'mfhd',\n        value: function mfhd(sequenceNumber) {\n            var data = new Uint8Array([0x00, 0x00, 0x00, 0x00, sequenceNumber >>> 24 & 0xFF, // sequence_number: int32\n            sequenceNumber >>> 16 & 0xFF, sequenceNumber >>> 8 & 0xFF, sequenceNumber & 0xFF]);\n            return MP4.box(MP4.types.mfhd, data);\n        }\n\n        // Track fragment box\n\n    }, {\n        key: 'traf',\n        value: function traf(track, baseMediaDecodeTime) {\n            var trackId = track.id;\n\n            // Track fragment header box\n            var tfhd = MP4.box(MP4.types.tfhd, new Uint8Array([0x00, 0x00, 0x00, 0x00, // version(0) & flags\n            trackId >>> 24 & 0xFF, // track_ID\n            trackId >>> 16 & 0xFF, trackId >>> 8 & 0xFF, trackId & 0xFF]));\n            // Track Fragment Decode Time\n            var tfdt = MP4.box(MP4.types.tfdt, new Uint8Array([0x00, 0x00, 0x00, 0x00, // version(0) & flags\n            baseMediaDecodeTime >>> 24 & 0xFF, // baseMediaDecodeTime: int32\n            baseMediaDecodeTime >>> 16 & 0xFF, baseMediaDecodeTime >>> 8 & 0xFF, baseMediaDecodeTime & 0xFF]));\n            var sdtp = MP4.sdtp(track);\n            var trun = MP4.trun(track, sdtp.byteLength + 16 + 16 + 8 + 16 + 8 + 8);\n\n            return MP4.box(MP4.types.traf, tfhd, tfdt, trun, sdtp);\n        }\n\n        // Sample Dependency Type box\n\n    }, {\n        key: 'sdtp',\n        value: function sdtp(track) {\n            var samples = track.samples || [];\n            var sampleCount = samples.length;\n            var data = new Uint8Array(4 + sampleCount);\n            // 0~4 bytes: version(0) & flags\n            for (var i = 0; i < sampleCount; i++) {\n                var flags = samples[i].flags;\n                data[i + 4] = flags.isLeading << 6 | // is_leading: 2 (bit)\n                flags.dependsOn << 4 // sample_depends_on\n                | flags.isDependedOn << 2 // sample_is_depended_on\n                | flags.hasRedundancy; // sample_has_redundancy\n            }\n            return MP4.box(MP4.types.sdtp, data);\n        }\n\n        // Track fragment run box\n\n    }, {\n        key: 'trun',\n        value: function trun(track, offset) {\n            var samples = track.samples || [];\n            var sampleCount = samples.length;\n            var dataSize = 12 + 16 * sampleCount;\n            var data = new Uint8Array(dataSize);\n            offset += 8 + dataSize;\n\n            data.set([0x00, 0x00, 0x0F, 0x01, // version(0) & flags\n            sampleCount >>> 24 & 0xFF, // sample_count\n            sampleCount >>> 16 & 0xFF, sampleCount >>> 8 & 0xFF, sampleCount & 0xFF, offset >>> 24 & 0xFF, // data_offset\n            offset >>> 16 & 0xFF, offset >>> 8 & 0xFF, offset & 0xFF], 0);\n\n            for (var i = 0; i < sampleCount; i++) {\n\n                var duration = samples[i].duration;\n                console.log(duration);\n\n                var size = samples[i].size;\n                var flags = samples[i].flags;\n                var cts = samples[i].cts;\n                data.set([duration >>> 24 & 0xFF, // sample_duration\n                duration >>> 16 & 0xFF, duration >>> 8 & 0xFF, duration & 0xFF, size >>> 24 & 0xFF, // sample_size\n                size >>> 16 & 0xFF, size >>> 8 & 0xFF, size & 0xFF, flags.isLeading << 2 | flags.dependsOn, // sample_flags\n                flags.isDependedOn << 6 | flags.hasRedundancy << 4 | flags.isNonSync, 0x00, 0x00, // sample_degradation_priority\n                cts >>> 24 & 0xFF, // sample_composition_time_offset\n                cts >>> 16 & 0xFF, cts >>> 8 & 0xFF, cts & 0xFF], 12 + 16 * i);\n            }\n            return MP4.box(MP4.types.trun, data);\n        }\n    }, {\n        key: 'mdat',\n        value: function mdat(data) {\n            return MP4.box(MP4.types.mdat, data);\n        }\n    }]);\n\n    return MP4;\n}();\n\nMP4.init();\n\nexports.default = MP4;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9qcy9tcDQvbXA0cmVtdXguanM/OWY1YSJdLCJuYW1lcyI6WyJNUDQiLCJ0eXBlcyIsImF2YzEiLCJhdmNDIiwiYnRydCIsImRpbmYiLCJkcmVmIiwiZXNkcyIsImZ0eXAiLCJoZGxyIiwibWRhdCIsIm1kaGQiLCJtZGlhIiwibWZoZCIsIm1pbmYiLCJtb29mIiwibW9vdiIsIm1wNGEiLCJtdmV4IiwibXZoZCIsInNkdHAiLCJzdGJsIiwic3RjbyIsInN0c2MiLCJzdHNkIiwic3RzeiIsInN0dHMiLCJ0ZmR0IiwidGZoZCIsInRyYWYiLCJ0cmFrIiwidHJ1biIsInRyZXgiLCJ0a2hkIiwidm1oZCIsInNtaGQiLCJuYW1lIiwiaGFzT3duUHJvcGVydHkiLCJjaGFyQ29kZUF0IiwiY29uc3RhbnRzIiwiRlRZUCIsIlVpbnQ4QXJyYXkiLCJTVFNEX1BSRUZJWCIsIlNUVFMiLCJTVFNDIiwiU1RDTyIsIlNUU1oiLCJIRExSX1ZJREVPIiwiSERMUl9BVURJTyIsIkRSRUYiLCJTTUhEIiwiVk1IRCIsInR5cGUiLCJzaXplIiwicmVzdWx0IiwiZGF0YXMiLCJBcnJheSIsInByb3RvdHlwZSIsInNsaWNlIiwiY2FsbCIsImFyZ3VtZW50cyIsImFycmF5Q291bnQiLCJsZW5ndGgiLCJpIiwiYnl0ZUxlbmd0aCIsInNldCIsIm9mZnNldCIsIm1ldGEiLCJjb25zdHJ1Y3RvciIsImJveCIsInRpbWVzY2FsZSIsImR1cmF0aW9uIiwidnRyYWsiLCJhdHJhayIsInRyYWNrSWQiLCJpZCIsIndpZHRoIiwicHJlc2VudFdpZHRoIiwiaGVpZ2h0IiwicHJlc2VudEhlaWdodCIsImRhdGEiLCJ4bWhkIiwiY2hhbm5lbENvdW50Iiwic2FtcGxlUmF0ZSIsImF1ZGlvU2FtcGxlUmF0ZSIsImNvbmZpZyIsImNvbmZpZ1NpemUiLCJjb25jYXQiLCJhdmNjIiwiY29kZWNXaWR0aCIsImNvZGVjSGVpZ2h0IiwidHJhY2siLCJiYXNlTWVkaWFEZWNvZGVUaW1lIiwic2VxdWVuY2VOdW1iZXIiLCJzYW1wbGVzIiwic2FtcGxlQ291bnQiLCJmbGFncyIsImlzTGVhZGluZyIsImRlcGVuZHNPbiIsImlzRGVwZW5kZWRPbiIsImhhc1JlZHVuZGFuY3kiLCJkYXRhU2l6ZSIsImNvbnNvbGUiLCJsb2ciLCJjdHMiLCJpc05vblN5bmMiLCJpbml0Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQUE7Ozs7SUFJTUEsRzs7Ozs7OzsrQkFFWTtBQUNWQSxnQkFBSUMsS0FBSixHQUFZO0FBQ1JDLHNCQUFNLEVBREU7QUFFUkMsc0JBQU0sRUFGRTtBQUdSQyxzQkFBTSxFQUhFO0FBSVJDLHNCQUFNLEVBSkU7QUFLUkMsc0JBQU0sRUFMRTtBQU1SQyxzQkFBTSxFQU5FO0FBT1JDLHNCQUFNLEVBUEU7QUFRUkMsc0JBQU0sRUFSRTtBQVNSQyxzQkFBTSxFQVRFO0FBVVJDLHNCQUFNLEVBVkU7QUFXUkMsc0JBQU0sRUFYRTtBQVlSQyxzQkFBTSxFQVpFO0FBYVJDLHNCQUFNLEVBYkU7QUFjUkMsc0JBQU0sRUFkRTtBQWVSQyxzQkFBTSxFQWZFO0FBZ0JSQyxzQkFBTSxFQWhCRTtBQWlCUkMsc0JBQU0sRUFqQkU7QUFrQlJDLHNCQUFNLEVBbEJFO0FBbUJSQyxzQkFBTSxFQW5CRTtBQW9CUkMsc0JBQU0sRUFwQkU7QUFxQlJDLHNCQUFNLEVBckJFO0FBc0JSQyxzQkFBTSxFQXRCRTtBQXVCUkMsc0JBQU0sRUF2QkU7QUF3QlJDLHNCQUFNLEVBeEJFO0FBeUJSQyxzQkFBTSxFQXpCRTtBQTBCUkMsc0JBQU0sRUExQkU7QUEyQlJDLHNCQUFNLEVBM0JFO0FBNEJSQyxzQkFBTSxFQTVCRTtBQTZCUkMsc0JBQU0sRUE3QkU7QUE4QlJDLHNCQUFNLEVBOUJFO0FBK0JSQyxzQkFBTSxFQS9CRTtBQWdDUkMsc0JBQU0sRUFoQ0U7QUFpQ1JDLHNCQUFNLEVBakNFO0FBa0NSQyxzQkFBTTtBQWxDRSxhQUFaOztBQXFDQSxpQkFBSyxJQUFJQyxJQUFULElBQWlCcEMsSUFBSUMsS0FBckIsRUFBNEI7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QSxHQUFELEdBQVEsSUFmSCxDQUFULEVBZ0JHLEtBQUssS0FBS3pDLENBaEJiO0FBaUJIO0FBQ0QsbUJBQU8vRCxJQUFJcUUsR0FBSixDQUFRckUsSUFBSUMsS0FBSixDQUFVOEIsSUFBbEIsRUFBd0JpRCxJQUF4QixDQUFQO0FBQ0g7Ozs2QkFFV0EsSSxFQUFNO0FBQ2QsbUJBQU9oRixJQUFJcUUsR0FBSixDQUFRckUsSUFBSUMsS0FBSixDQUFVUyxJQUFsQixFQUF3QnNFLElBQXhCLENBQVA7QUFDSDs7Ozs7O0FBSUxoRixJQUFJMEcsSUFBSjs7a0JBRWUxRyxHIiwiZmlsZSI6IjEuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIOS7o+eggeWAn+mJtOS6hmZsdi5qc1xuICog5aKe5Yqg5LqG6Ieq5bex55qE5rOo6YeK5ZKM5YaZ5rOVXG4gKi9cbmNsYXNzIE1QNCB7XG5cbiAgICBzdGF0aWMgaW5pdCgpIHtcbiAgICAgICAgTVA0LnR5cGVzID0ge1xuICAgICAgICAgICAgYXZjMTogW10sXG4gICAgICAgICAgICBhdmNDOiBbXSxcbiAgICAgICAgICAgIGJ0cnQ6IFtdLFxuICAgICAgICAgICAgZGluZjogW10sXG4gICAgICAgICAgICBkcmVmOiBbXSxcbiAgICAgICAgICAgIGVzZHM6IFtdLFxuICAgICAgICAgICAgZnR5cDogW10sXG4gICAgICAgICAgICBoZGxyOiBbXSxcbiAgICAgICAgICAgIG1kYXQ6IFtdLFxuICAgICAgICAgICAgbWRoZDogW10sXG4gICAgICAgICAgICBtZGlhOiBbXSxcbiAgICAgICAgICAgIG1maGQ6IFtdLFxuICAgICAgICAgICAgbWluZjogW10sXG4gICAgICAgICAgICBtb29mOiBbXSxcbiAgICAgICAgICAgIG1vb3Y6IFtdLFxuICAgICAgICAgICAgbXA0YTogW10sXG4gICAgICAgICAgICBtdmV4OiBbXSxcbiAgICAgICAgICAgIG12aGQ6IFtdLFxuICAgICAgICAgICAgc2R0cDogW10sXG4gICAgICAgICAgICBzdGJsOiBbXSxcbiAgICAgICAgICAgIHN0Y286IFtdLFxuICAgICAgICAgICAgc3RzYzogW10sXG4gICAgICAgICAgICBzdHNkOiBbXSxcbiAgICAgICAgICAgIHN0c3o6IFtdLFxuICAgICAgICAgICAgc3R0czogW10sXG4gICAgICAgICAgICB0ZmR0OiBbXSxcbiAgICAgICAgICAgIHRmaGQ6IFtdLFxuICAgICAgICAgICAgdHJhZjogW10sXG4gICAgICAgICAgICB0cmFrOiBbXSxcbiAgICAgICAgICAgIHRydW46IFtdLFxuICAgICAgICAgICAgdHJleDogW10sXG4gICAgICAgICAgICB0a2hkOiBbXSxcbiAgICAgICAgICAgIHZtaGQ6IFtdLFxuICAgICAgICAgICAgc21oZDogW11cbiAgICAgICAgfTtcblxuICAgICAgICBmb3IgKGxldCBuYW1lIGluIE1QNC50eXBlcykge1xuICAgICAgICAgICAgaWYgKE1QNC50eXBlcy5oYXNPd25Qcm9wZXJ0eShuYW1lKSkge1xuICAgICAgICAgICAgICAgIE1QNC50eXBlc1tuYW1lXSA9IFtcbiAgICAgICAgICAgICAgICAgICAgbmFtZS5jaGFyQ29kZUF0KDApLFxuICAgICAgICAgICAgICAgICAgICBuYW1lLmNoYXJDb2RlQXQoMSksXG4gICAgICAgICAgICAgICAgICAgIG5hbWUuY2hhckNvZGVBdCgyKSxcbiAgICAgICAgICAgICAgICAgICAgbmFtZS5jaGFyQ29kZUF0KDMpXG4gICAgICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBjb25zdGFudHMgPSBNUDQuY29uc3RhbnRzID0ge307XG5cbiAgICAgICAgY29uc3RhbnRzLkZUWVAgPSBuZXcgVWludDhBcnJheShbXG4gICAgICAgICAgICAweDY5LCAweDczLCAweDZGLCAweDZELCAvLyBtYWpvcl9icmFuZDogaXNvbVx0XHRpc29tXHRNUDQgIEJhc2UgTWVkaWEgdjEgW0lTMCAxNDQ5Ni0xMjoyMDAzXVx0SVNPXHRZRVNcdHZpZGVvL21wNFxuICAgICAgICAgICAgMHgwLCAweDAsIDB4MCwgMHgxLCAvLyBtaW5vcl92ZXJzaW9uOiAweDAxXG4gICAgICAgICAgICAweDY5LCAweDczLCAweDZGLCAweDZELCAvLyBpc29tXG4gICAgICAgICAgICAweDYxLCAweDc2LCAweDYzLCAweDMxIC8vIGF2YzFcbiAgICAgICAgXSk7XG5cbiAgICAgICAgY29uc3RhbnRzLlNUU0RfUFJFRklYID0gbmV3IFVpbnQ4QXJyYXkoW1xuICAgICAgICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgLy8gdmVyc2lvbigwKSArIGZsYWdzICB2ZXJzaW9u5a2X5q615ZCO5Lya5pyJ5LiA5LiqZW50cnkgY291bnTlrZfmrrVcbiAgICAgICAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDEgLy8gZW50cnlfY291bnRcdOagueaNrmVudHJ555qE5Liq5pWw77yM5q+P5LiqZW50cnnkvJrmnIl0eXBl5L+h5oGv77yM5aaC4oCcdmlkZeKAneOAgeKAnHN1bmTigJ3nrYnvvIzmoLnmja50eXBl5LiN5ZCMc2FtcGxlIGRlc2NyaXB0aW9u5Lya5o+Q5L6b5LiN5ZCM55qE5L+h5oGv77yM5L6L5aaC5a+55LqOdmlkZW8gdHJhY2vvvIzkvJrmnInigJxWaXN1YWxTYW1wbGVFbnRyeeKAneexu+Wei+S/oeaBr++8jOWvueS6jmF1ZGlvIHRyYWNr5Lya5pyJ4oCcQXVkaW9TYW1wbGVFbnRyeeKAneexu+Wei+S/oeaBr+OAglxuICAgICAgICBdKTtcblxuICAgICAgICBjb25zdGFudHMuU1RUUyA9IG5ldyBVaW50OEFycmF5KFtcbiAgICAgICAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIC8vIHZlcnNpb24oMCkgKyBmbGFnc1xuICAgICAgICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCAvLyBlbnRyeV9jb3VudCAgICAgMOS4que0ouW8lVxuICAgICAgICBdKTtcblxuICAgICAgICBjb25zdGFudHMuU1RTQyA9IGNvbnN0YW50cy5TVENPID0gY29uc3RhbnRzLlNUVFM7XG5cbiAgICAgICAgY29uc3RhbnRzLlNUU1ogPSBuZXcgVWludDhBcnJheShbXG4gICAgICAgICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLCAvLyB2ZXJzaW9uKDApICsgZmxhZ3NcbiAgICAgICAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIC8vIHNhbXBsZV9zaXplXG4gICAgICAgICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwIC8vIHNhbXBsZV9jb3VudFxuICAgICAgICBdKTtcblxuICAgICAgICBjb25zdGFudHMuSERMUl9WSURFTyA9IG5ldyBVaW50OEFycmF5KFtcbiAgICAgICAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIC8vIHZlcnNpb24oMCkgKyBmbGFnc1xuICAgICAgICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgLy8gcHJlX2RlZmluZWRcbiAgICAgICAgICAgIDB4NzYsIDB4NjksIDB4NjQsIDB4NjUsIC8vIGhhbmRsZXJfdHlwZTogJ3ZpZGUnIOWcqG1lZGlhIGJveOS4re+8jOivpeWAvOS4ujTkuKrlrZfnrKZcdFx04oCcdmlkZeKAneKAlCB2aWRlbyB0cmFja1xuICAgICAgICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgLy8gcmVzZXJ2ZWQ6IDMgKiA0IGJ5dGVzXG4gICAgICAgICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLFxuICAgICAgICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgLy/kv53nlZnkvY1cbiAgICAgICAgICAgIDB4NTYsIDB4NjksIDB4NjQsIDB4NjUsXG4gICAgICAgICAgICAweDZGLCAweDQ4LCAweDYxLCAweDZFLFxuICAgICAgICAgICAgMHg2NCwgMHg2QywgMHg2NSwgMHg3MiwgMHgwMCAvLyBuYW1lOiBWaWRlb0hhbmRsZXIg6ZW/5bqm5LiN5a6aXHRcdHRyYWNrIHR5cGUgbmFtZe+8jOS7peKAmFxcMOKAmee7k+WwvueahOWtl+espuS4slxuICAgICAgICBdKTtcblxuICAgICAgICBjb25zdGFudHMuSERMUl9BVURJTyA9IG5ldyBVaW50OEFycmF5KFtcbiAgICAgICAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIC8vIHZlcnNpb24oMCkgKyBmbGFnc1xuICAgICAgICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgLy8gcHJlX2RlZmluZWRcbiAgICAgICAgICAgIDB4NzMsIDB4NkYsIDB4NzUsIDB4NkUsIC8vIGhhbmRsZXJfdHlwZTogJ3NvdW4n5ZyobWVkaWEgYm945Lit77yM6K+l5YC85Li6NOS4quWtl+esplx0XHTigJxzb3Vu4oCd4oCUIGF1ZGlvIHRyYWNrXG4gICAgICAgICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLCAvLyByZXNlcnZlZDogMyAqIDQgYnl0ZXNcbiAgICAgICAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsXG4gICAgICAgICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLCAvL+S/neeVmeS9jVxuICAgICAgICAgICAgMHg1MywgMHg2RiwgMHg3NSwgMHg2RSxcbiAgICAgICAgICAgIDB4NjQsIDB4NDgsIDB4NjEsIDB4NkUsXG4gICAgICAgICAgICAweDY0LCAweDZDLCAweDY1LCAweDcyLCAweDAwIC8vIG5hbWU6IFNvdW5kSGFuZGxlciDplb/luqbkuI3lrppcdFx0dHJhY2sgdHlwZSBuYW1l77yM5Lul4oCYXFww4oCZ57uT5bC+55qE5a2X56ym5LiyXG4gICAgICAgIF0pO1xuXG4gICAgICAgIGNvbnN0YW50cy5EUkVGID0gbmV3IFVpbnQ4QXJyYXkoW1xuICAgICAgICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgLy8gdmVyc2lvbigwKSArIGZsYWdzXG4gICAgICAgICAgICAweDAwLCAweDAwLCAweDAwLCAweDAxLCAvLyBlbnRyeV9jb3VudCAx5LiqdXJsXHRcbiAgICAgICAgICAgIC8vdXJsXHRib3jlvIDlp4tcbiAgICAgICAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MEMsIC8vIGVudHJ5X3NpemVcbiAgICAgICAgICAgIDB4NzUsIDB4NzIsIDB4NkMsIDB4MjAsIC8vIHR5cGUgJ3VybCAnXG4gICAgICAgICAgICAweDAwLCAweDAwLCAweDAwLCAweDAxIC8vIHZlcnNpb24oMCkgKyBmbGFncyDlvZPigJx1cmzigJ3miJbigJx1cm7igJ3nmoRib3ggZmxhZ+S4ujHml7bvvIzlrZfnrKbkuLLlnYfkuLrnqbrjgIJcbiAgICAgICAgXSk7XG5cbiAgICAgICAgLy8gU291bmQgbWVkaWEgaGVhZGVyXG4gICAgICAgIGNvbnN0YW50cy5TTUhEID0gbmV3IFVpbnQ4QXJyYXkoW1xuICAgICAgICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgLy8gdmVyc2lvbigwKSArIGZsYWdzXHRib3jniYjmnKzvvIww5oiWMe+8jOS4gOiIrOS4ujDjgIJcbiAgICAgICAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAgLy8gYmFsYW5jZSgyKSArIHJlc2VydmVkKDIpIOeri+S9k+WjsOW5s+ihoe+8jFs4LjhdIOagvOW8j+WAvO+8jOS4gOiIrOS4ujDvvIwtMS4w6KGo56S65YWo6YOo5bem5aOw6YGT77yMMS4w6KGo56S65YWo6YOo5Y+z5aOw6YGTKzLkvY3kv53nlZnkvY1cbiAgICAgICAgXSk7XG5cbiAgICAgICAgLy8gdmlkZW8gbWVkaWEgaGVhZGVyXG4gICAgICAgIGNvbnN0YW50cy5WTUhEID0gbmV3IFVpbnQ4QXJyYXkoW1xuICAgICAgICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMSwgLy8gdmVyc2lvbigwKSArIGZsYWdzXG4gICAgICAgICAgICAweDAwLCAweDAwLCAvLyBncmFwaGljc21vZGU6IDIgYnl0ZXMg6KeG6aKR5ZCI5oiQ5qih5byP77yM5Li6MOaXtuaLt+i0neWOn+Wni+WbvuWDj++8jOWQpuWImeS4jm9wY29sb3Lov5vooYzlkIjmiJAgICAvL+eQhuiuuuS4iuaYrzTkvY3llYogIOaaguaXtuS/neeVmVxuICAgICAgICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgLy8gb3Bjb2xvcjogMyAqIDIgYnl0ZXMg772bcmVk77yMZ3JlZW7vvIxibHVl772dXG4gICAgICAgICAgICAweDAwLCAweDAwXG4gICAgICAgIF0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIOWwgeijhWJveFxuICAgICAqL1xuICAgIHN0YXRpYyBib3godHlwZSkge1xuICAgICAgICBsZXQgc2l6ZSA9IDg7XG4gICAgICAgIGxldCByZXN1bHQgPSBudWxsO1xuICAgICAgICBsZXQgZGF0YXMgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpO1xuICAgICAgICBsZXQgYXJyYXlDb3VudCA9IGRhdGFzLmxlbmd0aDtcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFycmF5Q291bnQ7IGkrKykge1xuICAgICAgICAgICAgc2l6ZSArPSBkYXRhc1tpXS5ieXRlTGVuZ3RoO1xuICAgICAgICB9XG4gICAgICAgIC8vYm945aS06YOo5aSn5bCPXG4gICAgICAgIHJlc3VsdCA9IG5ldyBVaW50OEFycmF5KHNpemUpO1xuICAgICAgICByZXN1bHRbMF0gPSAoc2l6ZSA+Pj4gMjQpICYgMHhGRjsgLy8gc2l6ZVxuICAgICAgICByZXN1bHRbMV0gPSAoc2l6ZSA+Pj4gMTYpICYgMHhGRjtcbiAgICAgICAgcmVzdWx0WzJdID0gKHNpemUgPj4+IDgpICYgMHhGRjtcbiAgICAgICAgcmVzdWx0WzNdID0gKHNpemUpICYgMHhGRjtcbiAgICAgICAgLy/lhpnlhaVib3jnmoR0eXBlXG4gICAgICAgIHJlc3VsdC5zZXQodHlwZSwgNCk7IC8vIHR5cGVcblxuICAgICAgICBsZXQgb2Zmc2V0ID0gODtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhcnJheUNvdW50OyBpKyspIHsgLy8gZGF0YSBib2R5XG4gICAgICAgICAgICByZXN1bHQuc2V0KGRhdGFzW2ldLCBvZmZzZXQpO1xuICAgICAgICAgICAgb2Zmc2V0ICs9IGRhdGFzW2ldLmJ5dGVMZW5ndGg7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8v5Yib5bu6ZnR5cCZtb292XG4gICAgc3RhdGljIGdlbmVyYXRlSW5pdFNlZ21lbnQobWV0YSkge1xuICAgICAgICBpZiAobWV0YS5jb25zdHJ1Y3RvciAhPSBBcnJheSkge1xuICAgICAgICAgICAgbWV0YSA9IFttZXRhXTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgZnR5cCA9IE1QNC5ib3goTVA0LnR5cGVzLmZ0eXAsIE1QNC5jb25zdGFudHMuRlRZUCk7XG4gICAgICAgIGxldCBtb292ID0gTVA0Lm1vb3YobWV0YSk7XG5cbiAgICAgICAgbGV0IHJlc3VsdCA9IG5ldyBVaW50OEFycmF5KGZ0eXAuYnl0ZUxlbmd0aCArIG1vb3YuYnl0ZUxlbmd0aCk7XG4gICAgICAgIHJlc3VsdC5zZXQoZnR5cCwgMCk7XG4gICAgICAgIHJlc3VsdC5zZXQobW9vdiwgZnR5cC5ieXRlTGVuZ3RoKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvLyBNb3ZpZSBtZXRhZGF0YSBib3hcbiAgICBzdGF0aWMgbW9vdihtZXRhKSB7XG4gICAgICAgIGxldCBtdmhkID0gTVA0Lm12aGQobWV0YVswXS50aW1lc2NhbGUsIG1ldGFbMF0uZHVyYXRpb24pOyAvLy9tb2926YeM6Z2i55qE56ys5LiA5LiqYm94XG4gICAgICAgIGxldCB2dHJhayA9IE1QNC50cmFrKG1ldGFbMF0pO1xuICAgICAgICBsZXQgYXRyYWs7XG4gICAgICAgIGlmIChtZXRhLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgIGF0cmFrID0gTVA0LnRyYWsobWV0YVsxXSk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgbXZleCA9IE1QNC5tdmV4KG1ldGEpO1xuICAgICAgICBpZiAobWV0YS5sZW5ndGggPiAxKVxuICAgICAgICAgICAgcmV0dXJuIE1QNC5ib3goTVA0LnR5cGVzLm1vb3YsIG12aGQsIHZ0cmFrLCBhdHJhaywgbXZleCk7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIHJldHVybiBNUDQuYm94KE1QNC50eXBlcy5tb292LCBtdmhkLCB2dHJhaywgbXZleCk7XG4gICAgfVxuXG4gICAgLy8gTW92aWUgaGVhZGVyIGJveFxuICAgIHN0YXRpYyBtdmhkKHRpbWVzY2FsZSwgZHVyYXRpb24pIHtcbiAgICAgICAgcmV0dXJuIE1QNC5ib3goTVA0LnR5cGVzLm12aGQsIG5ldyBVaW50OEFycmF5KFtcbiAgICAgICAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIC8vIHZlcnNpb24oMCkgKyBmbGFncyAgICAgMeS9jeeahGJveOeJiOacrCsz5L2NZmxhZ3MgICBib3jniYjmnKzvvIww5oiWMe+8jOS4gOiIrOS4ujDjgILvvIjku6XkuIvlrZfoioLmlbDlnYfmjIl2ZXJzaW9uPTDvvIlcbiAgICAgICAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIC8vIGNyZWF0aW9uX3RpbWUgICAg5Yib5bu65pe26Ze0ICDvvIjnm7jlr7nkuo5VVEPml7bpl7QxOTA0LTAxLTAx6Zu254K555qE56eS5pWw77yJXG4gICAgICAgICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLCAvLyBtb2RpZmljYXRpb25fdGltZSAgIOS/ruaUueaXtumXtFxuICAgICAgICAgICAgKHRpbWVzY2FsZSA+Pj4gMjQpICYgMHhGRiwgLy8gdGltZXNjYWxlOiA0IGJ5dGVzXHRcdOaWh+S7tuWqkuS9k+WcqDHnp5Lml7bpl7TlhoXnmoTliLvluqblgLzvvIzlj6/ku6XnkIbop6PkuLox56eS6ZW/5bqmXG4gICAgICAgICAgICAodGltZXNjYWxlID4+PiAxNikgJiAweEZGLFxuICAgICAgICAgICAgKHRpbWVzY2FsZSA+Pj4gOCkgJiAweEZGLFxuICAgICAgICAgICAgKHRpbWVzY2FsZSkgJiAweEZGLFxuICAgICAgICAgICAgKGR1cmF0aW9uID4+PiAyNCkgJiAweEZGLCAvLyBkdXJhdGlvbjogNCBieXRlc1x06K+ldHJhY2vnmoTml7bpl7Tplb/luqbvvIznlKhkdXJhdGlvbuWSjHRpbWUgc2NhbGXlgLzlj6/ku6XorqHnrpd0cmFja+aXtumVv++8jOavlOWmgmF1ZGlvIHRyYWNr55qEdGltZSBzY2FsZSA9IDgwMDAsIGR1cmF0aW9uID0gNTYwMTI477yM5pe26ZW/5Li6NzAuMDE277yMdmlkZW8gdHJhY2vnmoR0aW1lIHNjYWxlID0gNjAwLCBkdXJhdGlvbiA9IDQyMDAw77yM5pe26ZW/5Li6NzBcbiAgICAgICAgICAgIChkdXJhdGlvbiA+Pj4gMTYpICYgMHhGRixcbiAgICAgICAgICAgIChkdXJhdGlvbiA+Pj4gOCkgJiAweEZGLFxuICAgICAgICAgICAgKGR1cmF0aW9uKSAmIDB4RkYsXG4gICAgICAgICAgICAweDAwLCAweDAxLCAweDAwLCAweDAwLCAvLyBQcmVmZXJyZWQgcmF0ZTogMS4wICAg5o6o6I2Q5pKt5pS+6YCf546H77yM6auYMTbkvY3lkozkvY4xNuS9jeWIhuWIq+S4uuWwj+aVsOeCueaVtOaVsOmDqOWIhuWSjOWwj+aVsOmDqOWIhu+8jOWNs1sxNi4xNl0g5qC85byP77yM6K+l5YC85Li6MS4w77yIMHgwMDAxMDAwMO+8ieihqOekuuato+W4uOWJjeWQkeaSreaUvlxuICAgICAgICAgICAgMHgwMSwgMHgwMCwgMHgwMCwgMHgwMCwgLy8gUHJlZmVycmVkVm9sdW1lKDEuMCwgMmJ5dGVzKSArIHJlc2VydmVkKDJieXRlcylcdOS4jnJhdGXnsbvkvLzvvIxbOC44XSDmoLzlvI/vvIwxLjDvvIgweDAxMDDvvInooajnpLrmnIDlpKfpn7Pph48gXG4gICAgICAgICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLCAvLyByZXNlcnZlZDogNCArIDQgYnl0ZXNcdOS/neeVmeS9jVxuICAgICAgICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCxcbiAgICAgICAgICAgIDB4MDAsIDB4MDEsIDB4MDAsIDB4MDAsIC8vIC0tLS1iZWdpbiBjb21wb3NpdGlvbiBtYXRyaXgtLS0tXG4gICAgICAgICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLFxuICAgICAgICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgLy/op4bpopHlj5jmjaLnn6npmLUgICDnur/mgKfku6PmlbBcbiAgICAgICAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsXG4gICAgICAgICAgICAweDAwLCAweDAxLCAweDAwLCAweDAwLFxuICAgICAgICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCxcbiAgICAgICAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsXG4gICAgICAgICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLFxuICAgICAgICAgICAgMHg0MCwgMHgwMCwgMHgwMCwgMHgwMCwgLy8gLS0tLWVuZCBjb21wb3NpdGlvbiBtYXRyaXgtLS0tXG4gICAgICAgICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLCAvLyAtLS0tYmVnaW4gcHJlX2RlZmluZWQgNiAqIDQgYnl0ZXMtLS0tXG4gICAgICAgICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLFxuICAgICAgICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgLy9wcmUtZGVmaW5lZCDkv53nlZnkvY1cbiAgICAgICAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsXG4gICAgICAgICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLFxuICAgICAgICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgLy8gLS0tLWVuZCBwcmVfZGVmaW5lZCA2ICogNCBieXRlcy0tLS1cbiAgICAgICAgICAgIDB4RkYsIDB4RkYsIDB4RkYsIDB4RkYgLy8gbmV4dF90cmFja19JRCDkuIvkuIDkuKp0cmFja+S9v+eUqOeahGlk5Y+3XG4gICAgICAgIF0pKTtcbiAgICB9XG5cbiAgICAvLyBUcmFjayBib3hcbiAgICBzdGF0aWMgdHJhayhtZXRhKSB7XG4gICAgICAgIHJldHVybiBNUDQuYm94KE1QNC50eXBlcy50cmFrLCBNUDQudGtoZChtZXRhKSwgTVA0Lm1kaWEobWV0YSkpO1xuICAgIH1cblxuICAgIC8vIFRyYWNrIGhlYWRlciBib3hcbiAgICBzdGF0aWMgdGtoZChtZXRhKSB7XG4gICAgICAgIGxldCB0cmFja0lkID0gbWV0YS5pZCxcbiAgICAgICAgICAgIGR1cmF0aW9uID0gbWV0YS5kdXJhdGlvbjtcbiAgICAgICAgbGV0IHdpZHRoID0gbWV0YS5wcmVzZW50V2lkdGgsXG4gICAgICAgICAgICBoZWlnaHQgPSBtZXRhLnByZXNlbnRIZWlnaHQ7XG5cbiAgICAgICAgcmV0dXJuIE1QNC5ib3goTVA0LnR5cGVzLnRraGQsIG5ldyBVaW50OEFycmF5KFtcbiAgICAgICAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDcsIC8vIHZlcnNpb24oMCkgKyBmbGFncyAx5L2N54mI5pysIGJveOeJiOacrO+8jDDmiJYx77yM5LiA6Iis5Li6MOOAgu+8iOS7peS4i+Wtl+iKguaVsOWdh+aMiXZlcnNpb249MO+8ieaMieS9jeaIluaTjeS9nOe7k+aenOWAvO+8jOmihOWumuS5ieWmguS4i++8mlxuICAgICAgICAgICAgLy8weDAwMDAwMSB0cmFja19lbmFibGVk77yM5ZCm5YiZ6K+ldHJhY2vkuI3ooqvmkq3mlL7vvJtcbiAgICAgICAgICAgIC8vMHgwMDAwMDIgdHJhY2tfaW5fbW92aWXvvIzooajnpLror6V0cmFja+WcqOaSreaUvuS4reiiq+W8leeUqO+8m1xuICAgICAgICAgICAgLy8weDAwMDAwNCB0cmFja19pbl9wcmV2aWV377yM6KGo56S66K+ldHJhY2vlnKjpooTop4jml7booqvlvJXnlKjjgIJcbiAgICAgICAgICAgIC8v5LiA6Iis6K+l5YC85Li6N++8jDErMis0IOWmguaenOS4gOS4quWqkuS9k+aJgOaciXRyYWNr5Z2H5pyq6K6+572udHJhY2tfaW5fbW92aWXlkox0cmFja19pbl9wcmV2aWV377yM5bCG6KKr55CG6Kej5Li65omA5pyJdHJhY2vlnYforr7nva7kuobov5nkuKTpobnvvJvlr7nkuo5oaW50IHRyYWNr77yM6K+l5YC85Li6MFxuICAgICAgICAgICAgLy9oaW50IHRyYWNrwqAg6L+Z5Liq54m55q6K55qEdHJhY2vlubbkuI3ljIXlkKvlqpLkvZPmlbDmja7vvIzogIzmmK/ljIXlkKvkuobkuIDkupvlsIblhbbku5bmlbDmja50cmFja+aJk+WMheaIkOa1geWqkuS9k+eahOaMh+ekuuS/oeaBr+OAglxuICAgICAgICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgLy8gY3JlYXRpb25fdGltZVx05Yib5bu65pe26Ze077yI55u45a+55LqOVVRD5pe26Ze0MTkwNC0wMS0wMembtueCueeahOenkuaVsO+8iVxuICAgICAgICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgLy8gbW9kaWZpY2F0aW9uX3RpbWVcdOS/ruaUueaXtumXtFxuICAgICAgICAgICAgKHRyYWNrSWQgPj4+IDI0KSAmIDB4RkYsIC8vIHRyYWNrX0lEOiA0IGJ5dGVzXHRpZOWPt++8jOS4jeiDvemHjeWkjeS4lOS4jeiDveS4ujBcbiAgICAgICAgICAgICh0cmFja0lkID4+PiAxNikgJiAweEZGLFxuICAgICAgICAgICAgKHRyYWNrSWQgPj4+IDgpICYgMHhGRixcbiAgICAgICAgICAgICh0cmFja0lkKSAmIDB4RkYsXG4gICAgICAgICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLCAvLyByZXNlcnZlZDogNCBieXRlcyAgICDkv53nlZnkvY1cbiAgICAgICAgICAgIChkdXJhdGlvbiA+Pj4gMjQpICYgMHhGRiwgLy8gZHVyYXRpb246IDQgYnl0ZXMgIFx0dHJhY2vnmoTml7bpl7Tplb/luqZcbiAgICAgICAgICAgIChkdXJhdGlvbiA+Pj4gMTYpICYgMHhGRixcbiAgICAgICAgICAgIChkdXJhdGlvbiA+Pj4gOCkgJiAweEZGLFxuICAgICAgICAgICAgKGR1cmF0aW9uKSAmIDB4RkYsXG4gICAgICAgICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLCAvLyByZXNlcnZlZDogMiAqIDQgYnl0ZXMgICAg5L+d55WZ5L2NXG4gICAgICAgICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLFxuICAgICAgICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgLy8gbGF5ZXIoMmJ5dGVzKSArIGFsdGVybmF0ZV9ncm91cCgyYnl0ZXMpICDop4bpopHlsYLvvIzpu5jorqTkuLow77yM5YC85bCP55qE5Zyo5LiK5bGCLnRyYWNr5YiG57uE5L+h5oGv77yM6buY6K6k5Li6MOihqOekuuivpXRyYWNr5pyq5LiO5YW25LuWdHJhY2vmnInnvqTnu4TlhbPns7tcbiAgICAgICAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIC8vIHZvbHVtZSgyYnl0ZXMpICsgcmVzZXJ2ZWQoMmJ5dGVzKSAgICBbOC44XSDmoLzlvI/vvIzlpoLmnpzkuLrpn7PpopF0cmFja++8jDEuMO+8iDB4MDEwMO+8ieihqOekuuacgOWkp+mfs+mHj++8m+WQpuWImeS4ujAgICAr5L+d55WZ5L2NXG4gICAgICAgICAgICAweDAwLCAweDAxLCAweDAwLCAweDAwLCAvLyAtLS0tYmVnaW4gY29tcG9zaXRpb24gbWF0cml4LS0tLVxuICAgICAgICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCxcbiAgICAgICAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsXG4gICAgICAgICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLFxuICAgICAgICAgICAgMHgwMCwgMHgwMSwgMHgwMCwgMHgwMCwgLy/op4bpopHlj5jmjaLnn6npmLVcbiAgICAgICAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsXG4gICAgICAgICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLFxuICAgICAgICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCxcbiAgICAgICAgICAgIDB4NDAsIDB4MDAsIDB4MDAsIDB4MDAsIC8vIC0tLS1lbmQgY29tcG9zaXRpb24gbWF0cml4LS0tLVxuICAgICAgICAgICAgKHdpZHRoID4+PiA4KSAmIDB4RkYsIC8vIC8v5a695bqmXG4gICAgICAgICAgICAod2lkdGgpICYgMHhGRixcbiAgICAgICAgICAgIDB4MDAsIDB4MDAsXG4gICAgICAgICAgICAoaGVpZ2h0ID4+PiA4KSAmIDB4RkYsIC8v6auY5bqmXG4gICAgICAgICAgICAoaGVpZ2h0KSAmIDB4RkYsXG4gICAgICAgICAgICAweDAwLCAweDAwXG4gICAgICAgIF0pKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiDigJxtZGlh4oCd5Lmf5piv5LiqY29udGFpbmVyIGJveO+8jOWFtuWtkGJveOeahOe7k+aehOWSjOenjeexu+i/mOaYr+avlOi+g+WkjeadgueahOOAguWFiOadpeeci+S4gOS4quKAnG1kaWHigJ3nmoTlrp7kvovnu5PmnoTmoJHlm77jgIJcbiAgICAgKiDmgLvkvZPmnaXor7TvvIzigJxtZGlh4oCd5a6a5LmJ5LqGdHJhY2vlqpLkvZPnsbvlnovku6Xlj4pzYW1wbGXmlbDmja7vvIzmj4/ov7BzYW1wbGXkv6Hmga/jgILkuIDoiKzigJxtZGlh4oCd5YyF5ZCr5LiA5Liq4oCcbWRoZOKAne+8jFxuICAgICAqIOS4gOS4quKAnGhkbHLigJ3lkozkuIDkuKrigJxtaW5m4oCd77yM5YW25Lit4oCcbWRoZOKAneS4um1lZGlhIGhlYWRlciBib3jvvIzigJxoZGxy4oCd5Li6aGFuZGxlciByZWZlcmVuY2UgYm9477yMXG4gICAgICog4oCcbWluZuKAneS4um1lZGlhIGluZm9ybWF0aW9uIGJveOOAglxuICAgICAqIFxuICAgICAqIG1kaWFcbiAgICAgKiBcdFx0bWRoZFxuICAgICAqIFx0XHRoZGxyXG4gICAgICogXHRcdG1pbmZcbiAgICAgKiBcdFx0XHRzbWhkXG4gICAgICogXHRcdFx0ZGluZlxuICAgICAqIFx0XHRcdFx0ZHJlZlxuICAgICAqIFx0XHRcdFx0XHR1cmxcbiAgICAgKiBcdFx0XHRzdGJsXG4gICAgICogXHRcdFx0XHRzdHNkXG4gICAgICogXHRcdFx0XHRcdG1wNGFcbiAgICAgKiBcdFx0XHRcdFx0XHRlc2RzXG4gICAgICogXHRcdFx0XHRzdHRzXG4gICAgICogXHRcdFx0XHRzdHNjXG4gICAgICogXHRcdFx0XHRzdHN6XG4gICAgICogXHRcdFx0XHRzdGNvXG4gICAgICovXG4gICAgc3RhdGljIG1kaWEobWV0YSkge1xuICAgICAgICByZXR1cm4gTVA0LmJveChNUDQudHlwZXMubWRpYSwgTVA0Lm1kaGQobWV0YSksIE1QNC5oZGxyKG1ldGEpLCBNUDQubWluZihtZXRhKSk7XG4gICAgfVxuXG4gICAgLy8gTWVkaWEgaGVhZGVyIGJveFxuICAgIHN0YXRpYyBtZGhkKG1ldGEpIHtcbiAgICAgICAgbGV0IHRpbWVzY2FsZSA9IG1ldGEudGltZXNjYWxlO1xuICAgICAgICBsZXQgZHVyYXRpb24gPSBtZXRhLmR1cmF0aW9uO1xuICAgICAgICByZXR1cm4gTVA0LmJveChNUDQudHlwZXMubWRoZCwgbmV3IFVpbnQ4QXJyYXkoW1xuICAgICAgICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgLy8gdmVyc2lvbigwKSArIGZsYWdzIC8vIHZlcnNpb24oMCkgKyBmbGFnc1x0XHRib3jniYjmnKzvvIww5oiWMe+8jOS4gOiIrOS4ujDjgIJcbiAgICAgICAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIC8vIGNyZWF0aW9uX3RpbWUgICAg5Yib5bu65pe26Ze0XG4gICAgICAgICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLCAvLyBtb2RpZmljYXRpb25fdGltZeS/ruaUueaXtumXtFxuICAgICAgICAgICAgKHRpbWVzY2FsZSA+Pj4gMjQpICYgMHhGRiwgLy8gdGltZXNjYWxlOiA0IGJ5dGVzICAgIOaWh+S7tuWqkuS9k+WcqDHnp5Lml7bpl7TlhoXnmoTliLvluqblgLzvvIzlj6/ku6XnkIbop6PkuLox56eS6ZW/5bqmXG4gICAgICAgICAgICAodGltZXNjYWxlID4+PiAxNikgJiAweEZGLFxuICAgICAgICAgICAgKHRpbWVzY2FsZSA+Pj4gOCkgJiAweEZGLFxuICAgICAgICAgICAgKHRpbWVzY2FsZSkgJiAweEZGLFxuICAgICAgICAgICAgKGR1cmF0aW9uID4+PiAyNCkgJiAweEZGLCAvLyBkdXJhdGlvbjogNCBieXRlcyAgdHJhY2vnmoTml7bpl7Tplb/luqZcbiAgICAgICAgICAgIChkdXJhdGlvbiA+Pj4gMTYpICYgMHhGRixcbiAgICAgICAgICAgIChkdXJhdGlvbiA+Pj4gOCkgJiAweEZGLFxuICAgICAgICAgICAgKGR1cmF0aW9uKSAmIDB4RkYsXG4gICAgICAgICAgICAweDU1LCAweEM0LCAvLyBsYW5ndWFnZTogdW5kICh1bmRldGVybWluZWQpIOWqkuS9k+ivreiogOeggeOAguacgOmrmOS9jeS4ujDvvIzlkI7pnaIxNeS9jeS4ujPkuKrlrZfnrKbvvIjop4FJU08gNjM5LTIvVOagh+WHhuS4reWumuS5ie+8iVxuICAgICAgICAgICAgMHgwMCwgMHgwMCAvLyBwcmVfZGVmaW5lZCA9IDBcbiAgICAgICAgXSkpO1xuICAgIH1cblxuICAgIC8vIE1lZGlhIGhhbmRsZXIgcmVmZXJlbmNlIGJveFxuICAgIHN0YXRpYyBoZGxyKG1ldGEpIHtcbiAgICAgICAgbGV0IGRhdGEgPSBudWxsO1xuICAgICAgICBpZiAobWV0YS50eXBlID09PSAnYXVkaW8nKSB7XG4gICAgICAgICAgICBkYXRhID0gTVA0LmNvbnN0YW50cy5IRExSX0FVRElPO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZGF0YSA9IE1QNC5jb25zdGFudHMuSERMUl9WSURFTztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gTVA0LmJveChNUDQudHlwZXMuaGRsciwgZGF0YSk7XG4gICAgfVxuXG4gICAgLyoqXG5cdFx0ICog4oCcbWluZuKAneWtmOWCqOS6huino+mHinRyYWNr5aqS5L2T5pWw5o2u55qEaGFuZGxlci1zcGVjaWZpY+S/oeaBr++8jG1lZGlhIGhhbmRsZXLnlKjov5nkupvkv6Hmga/lsIblqpLkvZPml7bpl7TmmKDlsITliLDlqpLkvZPmlbDmja7lubbov5vooYzlpITnkIbjgILigJxtaW5m4oCd5Lit55qE5L+h5oGv5qC85byP5ZKM5YaF5a655LiO5aqS5L2T57G75Z6L5Lul5Y+K6Kej6YeK5aqS5L2T5pWw5o2u55qEbWVkaWEgaGFuZGxlcuWvhuWIh+ebuOWFs++8jOWFtuS7lm1lZGlhIGhhbmRsZXLkuI3nn6XpgZPlpoLkvZXop6Pph4rov5nkupvkv6Hmga/jgILigJxtaW5m4oCd5piv5LiA5LiqY29udGFpbmVyIGJveO+8jOWFtuWunumZheWGheWuueeUseWtkGJveOivtOaYjuOAglxuwqDCoMKgIOS4gOiIrOaDheWGteS4i++8jOKAnG1pbmbigJ3ljIXlkKvkuIDkuKpoZWFkZXIgYm9477yM5LiA5Liq4oCcZGluZuKAneWSjOS4gOS4quKAnHN0YmzigJ3vvIzlhbbkuK3vvIxoZWFkZXIgYm945qC55o2udHJhY2sgdHlwZe+8iOWNs21lZGlhIGhhbmRsZXIgdHlwZe+8ieWIhuS4uuKAnHZtaGTigJ3jgIHigJxzbWhk4oCd44CB4oCcaG1oZOKAneWSjOKAnG5taGTigJ3vvIzigJxkaW5m4oCd5Li6ZGF0YSBpbmZvcm1hdGlvbiBib3jvvIzigJxzdGJs4oCd5Li6c2FtcGxlIHRhYmxlIGJveOOAguS4i+mdouWIhuWIq+S7i+e7jeOAglxuXG5cdFx0ICogXG5cdFx0ICovXG4gICAgLy8gTWVkaWEgaW5mb21hdGlvbiBib3hcbiAgICBzdGF0aWMgbWluZihtZXRhKSB7XG4gICAgICAgIC8vaGVhZGVyIGJveOagueaNrnRyYWNrIHR5cGXvvIjljbNtZWRpYSBoYW5kbGVyIHR5cGXvvInliIbkuLrigJx2bWhk4oCd44CB4oCcc21oZOKAneOAgeKAnGhtaGTigJ3lkozigJxubWhk4oCdXG4gICAgICAgIGxldCB4bWhkID0gbnVsbDtcbiAgICAgICAgaWYgKG1ldGEudHlwZSA9PT0gJ2F1ZGlvJykge1xuICAgICAgICAgICAgeG1oZCA9IE1QNC5ib3goTVA0LnR5cGVzLnNtaGQsIE1QNC5jb25zdGFudHMuU01IRCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB4bWhkID0gTVA0LmJveChNUDQudHlwZXMudm1oZCwgTVA0LmNvbnN0YW50cy5WTUhEKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gTVA0LmJveChNUDQudHlwZXMubWluZiwgeG1oZCwgTVA0LmRpbmYoKSwgTVA0LnN0YmwobWV0YSkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIERhdGEgSW5mb3JtYXRpb24gQm94XG4gICAgICog4oCcZGluZuKAneino+mHiuWmguS9leWumuS9jeWqkuS9k+S/oeaBr++8jOaYr+S4gOS4qmNvbnRhaW5lciBib3jjgILigJxkaW5m4oCd5LiA6Iis5YyF5ZCr5LiA5Liq4oCcZHJlZuKAne+8jOWNs2RhdGEgcmVmZXJlbmNlIGJveO+8m1xuICAgICAqIOKAnGRyZWbigJ3kuIvkvJrljIXlkKvoi6XlubLkuKrigJx1cmzigJ3miJbigJx1cm7igJ3vvIzov5nkuptib3jnu4TmiJDkuIDkuKrooajvvIznlKjmnaXlrprkvY10cmFja+aVsOaNruOAglxuICAgICAqIOeugOWNleeahOivtO+8jHRyYWNr5Y+v5Lul6KKr5YiG5oiQ6Iul5bmy5q6177yM5q+P5LiA5q616YO95Y+v5Lul5qC55o2u4oCcdXJs4oCd5oiW4oCcdXJu4oCd5oyH5ZCR55qE5Zyw5Z2A5p2l6I635Y+W5pWw5o2u77yMXG4gICAgICogc2FtcGxl5o+P6L+w5Lit5Lya55So6L+Z5Lqb54mH5q6155qE5bqP5Y+35bCG6L+Z5Lqb54mH5q6157uE5oiQ5LiA5Liq5a6M5pW055qEdHJhY2vjgIJcbiAgICAgKiDkuIDoiKzmg4XlhrXkuIvvvIzlvZPmlbDmja7ooqvlrozlhajljIXlkKvlnKjmlofku7bkuK3ml7bvvIzigJx1cmzigJ3miJbigJx1cm7igJ3kuK3nmoTlrprkvY3lrZfnrKbkuLLmmK/nqbrnmoTjgIJcbiAgICAgKi9cbiAgICBzdGF0aWMgZGluZigpIHtcbiAgICAgICAgbGV0IHJlc3VsdCA9IE1QNC5ib3goTVA0LnR5cGVzLmRpbmYsXG4gICAgICAgICAgICBNUDQuYm94KE1QNC50eXBlcy5kcmVmLCBNUDQuY29uc3RhbnRzLkRSRUYpXG4gICAgICAgICk7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLyoqXG5cdFx0ICogU2FtcGxlIFRhYmxlIEJveO+8iHN0YmzvvIlcbsKgwqDCoCBcdCpcdOKAnHN0YmzigJ3lh6DkuY7mmK/mma7pgJrnmoRNUDTmlofku7bkuK3mnIDlpI3mnYLnmoTkuIDkuKpib3jkuobvvIzpppblhYjpnIDopoHlm57lv4bkuIDkuItzYW1wbGXnmoTmpoLlv7XjgIJcbiBcdFx0KiBcdHNhbXBsZeaYr+WqkuS9k+aVsOaNruWtmOWCqOeahOWNleS9je+8jOWtmOWCqOWcqG1lZGlh55qEY2h1bmvkuK3vvIxjaHVua+WSjHNhbXBsZeeahOmVv+W6puWdh+WPr+S6kuS4jeebuOWQjO+8jOWmguS4i+WbvuaJgOekuuOAglxuXHRcdFx04oCcc3RibOKAneaYr+S4gOS4qmNvbnRhaW5lciBib3jvvIzlhbblrZBib3jljIXmi6zvvJpzYW1wbGUgZGVzY3JpcHRpb24gYm9477yIc3RzZO+8ieOAgVxuXHRcdFx0ICogdGltZSB0byBzYW1wbGUgYm9477yIc3R0c++8ieOAgXNhbXBsZSBzaXplIGJveO+8iHN0c3rmiJZzdHoy77yJ44CBXG5cdFx0XHQgKiBzYW1wbGUgdG8gY2h1bmsgYm9477yIc3RzY++8ieOAgWNodW5rIG9mZnNldCBib3jvvIhzdGNv5oiWY282NO+8ieOAgVxuXHRcdFx0ICogY29tcG9zaXRpb24gdGltZSB0byBzYW1wbGUgYm9477yIY3R0c++8ieOAgXN5bmMgc2FtcGxlIGJveO+8iHN0c3PvvIlcblx0XHRcdCAqIHN0c2TigJ3lv4XkuI3lj6/lsJHvvIzkuJToh7PlsJHljIXlkKvkuIDkuKrmnaHnm67vvIzor6Vib3jljIXlkKvkuoZkYXRhIHJlZmVyZW5jZSBib3jov5vooYxzYW1wbGXmlbDmja7mo4DntKLnmoTkv6Hmga/jgIJcblx0XHRcdCAqIOayoeacieKAnHN0c2TigJ3lsLHml6Dms5XorqHnrpdtZWRpYSBzYW1wbGXnmoTlrZjlgqjkvY3nva7jgILigJxzdHNk4oCd5YyF5ZCr5LqG57yW56CB55qE5L+h5oGv77yM5YW25a2Y5YKo55qE5L+h5oGv6ZqP5aqS5L2T57G75Z6L5LiN5ZCM6ICM5LiN5ZCM44CCXG5cdFx0XHQgKiBcdFx0XHRzdGJsXG5cdFx0XHQgKiBcdFx0XHRcdHN0c2Rcblx0XHRcdCAqIFx0XHRcdFx0XHRhdmMxXG5cdFx0XHQgKiBcdFx0XHRcdFx0XHRhdmNDXG5cdFx0XHQgKiBcdFx0XHRcdHN0dHNcblx0XHRcdCAqIFx0XHRcdFx0c3RzY1xuXHRcdFx0ICogXHRcdFx0XHRzdHN6XG5cdFx0XHQgKiBcdFx0XHRcdHN0Y29cblx0XHQgKi9cbiAgICBzdGF0aWMgc3RibChtZXRhKSB7XG4gICAgICAgIGxldCByZXN1bHQgPSBNUDQuYm94KE1QNC50eXBlcy5zdGJsLCAvLyB0eXBlOiBzdGJsXG4gICAgICAgICAgICBNUDQuc3RzZChtZXRhKSwgLy8gU2FtcGxlIERlc2NyaXB0aW9uIFRhYmxlXG4gICAgICAgICAgICBNUDQuYm94KE1QNC50eXBlcy5zdHRzLCBNUDQuY29uc3RhbnRzLlNUVFMpLCAvLyBUaW1lLVRvLVNhbXBsZSAgICDlm6DkuLpzdHRz55qEZW50cnkgY291bnQg5Li6MFxuICAgICAgICAgICAgLy/miYDku6XmsqHmnInlhbPplK7luKdpbmRleCDnmoRzdHNzXG4gICAgICAgICAgICAvL+S5n+ayoeaciUNUVFMgYm94IENUVFPmmK/orrDlvZXlgY/np7vph49cbiAgICAgICAgICAgIE1QNC5ib3goTVA0LnR5cGVzLnN0c2MsIE1QNC5jb25zdGFudHMuU1RTQyksIC8vIFNhbXBsZS1Uby1DaHVua1xuICAgICAgICAgICAgTVA0LmJveChNUDQudHlwZXMuc3RzeiwgTVA0LmNvbnN0YW50cy5TVFNaKSwgLy8gU2FtcGxlIHNpemVcbiAgICAgICAgICAgIE1QNC5ib3goTVA0LnR5cGVzLnN0Y28sIE1QNC5jb25zdGFudHMuU1RDTykgLy8gQ2h1bmsgb2Zmc2V0XG4gICAgICAgICk7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLyoqXG5cdFx0ICogU2FtcGxlIERlc2NyaXB0aW9uIEJveO+8iHN0c2TvvIlcbsKgwqDCoMKgXHRcdGJveCBoZWFkZXLlkox2ZXJzaW9u5a2X5q615ZCO5Lya5pyJ5LiA5LiqZW50cnkgY291bnTlrZfmrrXvvIxcbiAqIFx0XHRcdOagueaNrmVudHJ555qE5Liq5pWw77yM5q+P5LiqZW50cnnkvJrmnIl0eXBl5L+h5oGv77yM5aaC4oCcdmlkZeKAneOAgeKAnHN1bmTigJ3nrYnvvIxcbiAqIFx0XHTmoLnmja50eXBl5LiN5ZCMc2FtcGxlIGRlc2NyaXB0aW9u5Lya5o+Q5L6b5LiN5ZCM55qE5L+h5oGv77yM5L6L5aaC5a+55LqOdmlkZW8gdHJhY2vvvIxcbiAqIOS8muacieKAnFZpc3VhbFNhbXBsZUVudHJ54oCd57G75Z6L5L+h5oGv77yM5a+55LqOYXVkaW8gdHJhY2vkvJrmnInigJxBdWRpb1NhbXBsZUVudHJ54oCd57G75Z6L5L+h5oGv44CCXG5cblx0XHQgKiAqIFx0XHRcdFx0c3RzZFxuXHRcdFx0KiBcdFx0XHRcdFx0bXA0YVxuXHRcdFx0KiBcdFx0XHRcdFx0XHRlc2RzXG5cdFx0XHQgKiBcblx0XHRcdCAqIFxuXHRcdFx0ICogXG5cdFx0XHQgKiBcblx0XHRcdCAqIFx0XHQgNCBieXRlcyAtIGxlbmd0aCBpbiB0b3RhbFxuXHRcdFx0XHRcdCA0IGJ5dGVzIC0gNCBjaGFyIGNvZGUgb2Ygc2FtcGxlIGRlc2NyaXB0aW9uIHRhYmxlIChzdHNkKVxuXHRcdFx0XHRcdCA0IGJ5dGVzIC0gdmVyc2lvbiAmIGZsYWdzXG5cdFx0XHRcdFx0IDQgYnl0ZXMgLSBudW1iZXIgb2Ygc2FtcGxlIGVudHJpZXMgKG51bV9zYW1wbGVfZW50cmllcylcblx0XHRcdFx0XHRcdCBbXG5cdFx0XHRcdFx0XHQgICAgNCBieXRlcyAtIGxlbmd0aCBvZiBzYW1wbGUgZW50cnkgKGxlbl9zYW1wbGVfZW50cnkpXG5cdFx0XHRcdFx0XHQgICAgNCBieXRlcyAtIDQgY2hhciBjb2RlIG9mIHNhbXBsZSBlbnRyeVxuXHRcdFx0XHRcdFx0ICAgICgnbGVuX3NhbXBsZV9lbnRyeScgLSA4KSBieXRlcyBvZiBkYXRhXG5cdFx0XHRcdFx0XHQgXSAocmVwZWF0ZWQgJ251bV9zYW1wbGVfZW50cmllcycgdGltZXMpXG5cdFx0XHRcdFx0KDQgYnl0ZXMgLSBvcHRpb25hbCAweDAwMDAwMDAwIGFzIGVuZCBvZiBib3ggbWFya2VyIClcblx0XHQgKi9cbiAgICBzdGF0aWMgc3RzZChtZXRhKSB7XG4gICAgICAgIGlmIChtZXRhLnR5cGUgPT09ICdhdWRpbycpIHtcbiAgICAgICAgICAgIHJldHVybiBNUDQuYm94KE1QNC50eXBlcy5zdHNkLCBNUDQuY29uc3RhbnRzLlNUU0RfUFJFRklYLCBNUDQubXA0YShtZXRhKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gTVA0LmJveChNUDQudHlwZXMuc3RzZCwgTVA0LmNvbnN0YW50cy5TVFNEX1BSRUZJWCwgTVA0LmF2YzEobWV0YSkpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgc3RhdGljIG1wNGEobWV0YSkge1xuICAgICAgICBsZXQgY2hhbm5lbENvdW50ID0gbWV0YS5jaGFubmVsQ291bnQ7XG4gICAgICAgIGxldCBzYW1wbGVSYXRlID0gbWV0YS5hdWRpb1NhbXBsZVJhdGU7XG5cbiAgICAgICAgbGV0IGRhdGEgPSBuZXcgVWludDhBcnJheShbXG4gICAgICAgICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLCAvLyByZXNlcnZlZCg0KSA25Liq5a2X6IqC77yM6K6+572u5Li6MO+8m1xuICAgICAgICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMSwgLy8gcmVzZXJ2ZWQoMikgKyBkYXRhX3JlZmVyZW5jZV9pbmRleCgyKVxuICAgICAgICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgLy8gcmVzZXJ2ZWQ6IDIgKiA0IGJ5dGVzIOS/neeVmeS9jVxuICAgICAgICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCxcbiAgICAgICAgICAgIDB4MDAsIGNoYW5uZWxDb3VudCwgLy8gY2hhbm5lbENvdW50KDIpIOWNleWjsOmBk+i/mOaYr+WPjOWjsOmBk1xuICAgICAgICAgICAgMHgwMCwgMHgxMCwgLy8gc2FtcGxlU2l6ZSgyKVxuICAgICAgICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgLy8gcmVzZXJ2ZWQoNCkgNOWtl+iKguS/neeVmeS9jVxuICAgICAgICAgICAgKHNhbXBsZVJhdGUgPj4+IDgpICYgMHhGRiwgLy8gQXVkaW8gc2FtcGxlIHJhdGUg5pi+54S26KaB5Y+z56e7MTbkvY3miY3mnInmhI/kuYlcdHRlbXBsYXRlIHVuc2lnbmVkIGludCgzMikgc2FtcGxlcmF0ZSA9IHt0aW1lc2NhbGUgb2YgbWVkaWF9PDwxNjtcbiAgICAgICAgICAgIChzYW1wbGVSYXRlKSAmIDB4RkYsXG4gICAgICAgICAgICAweDAwLCAweDAwXG4gICAgICAgIF0pO1xuXG4gICAgICAgIHJldHVybiBNUDQuYm94KE1QNC50eXBlcy5tcDRhLCBkYXRhLCBNUDQuZXNkcyhtZXRhKSk7XG4gICAgfVxuXG4gICAgc3RhdGljIGVzZHMobWV0YSkge1xuICAgICAgICBsZXQgY29uZmlnID0gbWV0YS5jb25maWc7XG4gICAgICAgIGxldCBjb25maWdTaXplID0gY29uZmlnLmxlbmd0aDtcbiAgICAgICAgbGV0IGRhdGEgPSBuZXcgVWludDhBcnJheShbXG4gICAgICAgICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLCAvLyB2ZXJzaW9uIDAgKyBmbGFnc1xuXG4gICAgICAgICAgICAweDAzLCAvLyBkZXNjcmlwdG9yX3R5cGUgICAgTVA0RVNEZXNjclRhZ1xuICAgICAgICAgICAgMHgxNyArIGNvbmZpZ1NpemUsIC8vIGxlbmd0aDNcbiAgICAgICAgICAgIDB4MDAsIDB4MDEsIC8vIGVzX2lkXG4gICAgICAgICAgICAweDAwLCAvLyBzdHJlYW1fcHJpb3JpdHlcblxuICAgICAgICAgICAgMHgwNCwgLy8gZGVzY3JpcHRvcl90eXBlICAgIE1QNERlY0NvbmZpZ0Rlc2NyVGFnXG4gICAgICAgICAgICAweDBGICsgY29uZmlnU2l6ZSwgLy8gbGVuZ3RoXG4gICAgICAgICAgICAweDQwLCAvLyBjb2RlYzogbXBlZzRfYXVkaW9cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICrlvZNvYmplY3RUeXBlSW5kaWNhdGlvbuS4ujB4NDDml7bvvIzkuLpNUEVHLTQgQXVkaW/vvIhNUEVHLTQgQXVkaW8gZ2VuZXJhbGx5IGlzIHRob3VnaHQgb2YgYXMgQUFDIFxuICAgICAgICAgICAgICogYnV0IHRoZXJlIGlzIGEgd2hvbGUgZnJhbWV3b3JrIG9mIGF1ZGlvIGNvZGVjcyB0aGF0IGNhbiBHbyBpbiBNUEVHLTQgQXVkaW8gaW5jbHVkaW5nIEFBQywgQlNBQywgQUxTLCBDRUxQLCBcbiAgICAgICAgICAgICAqIGFuZCBzb21ldGhpbmcgY2FsbGVkIE1QM09uNO+8ie+8jOWmguaenOaDs+abtOe7huWIhmZvcm1hdOS4umFhY+i/mOaYr21wM++8jFxuICAgICAgICAgICAgICog5Y+v5Lul6K+75Y+WTVA0RGVjU3BlY2lmaWNEZXNjcuWxgmRhdGFbMF3nmoTliY3kupTkvY1cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgMHgxNSwgLy8gc3RyZWFtX3R5cGU6IEF1ZGlvXG4gICAgICAgICAgICAweDAwLCAweDAwLCAweDAwLCAvLyBidWZmZXJfc2l6ZVxuICAgICAgICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgLy8gbWF4Qml0cmF0ZVxuICAgICAgICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgLy8gYXZnQml0cmF0ZVxuXG4gICAgICAgICAgICAweDA1IC8vIGRlc2NyaXB0b3JfdHlwZSBNUDREZWNTcGVjaWZpY0Rlc2NyVGFnXG4gICAgICAgIF0uY29uY2F0KFtcbiAgICAgICAgICAgIGNvbmZpZ1NpemVcbiAgICAgICAgXSkuY29uY2F0KFxuICAgICAgICAgICAgY29uZmlnXG4gICAgICAgICkuY29uY2F0KFtcbiAgICAgICAgICAgIDB4MDYsIDB4MDEsIDB4MDIgLy8gR0FTcGVjaWZpY0NvbmZpZ1xuICAgICAgICBdKSk7XG4gICAgICAgIHJldHVybiBNUDQuYm94KE1QNC50eXBlcy5lc2RzLCBkYXRhKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiDmlLnniYhcbiAgICAgKnN0c2TkuIvnmoRhdmMx6KeG6aKR6Kej5p6QIFxuICAgICAqL1xuICAgIHN0YXRpYyBhdmMxKG1ldGEpIHtcbiAgICAgICAgbGV0IGF2Y2MgPSBtZXRhLmF2Y2M7XG4gICAgICAgIGxldCB3aWR0aCA9IG1ldGEuY29kZWNXaWR0aCxcbiAgICAgICAgICAgIGhlaWdodCA9IG1ldGEuY29kZWNIZWlnaHQ7XG5cbiAgICAgICAgbGV0IGRhdGEgPSBuZXcgVWludDhBcnJheShbXG4gICAgICAgICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLCAvLyAvLyByZXNlcnZlZCg0KSAgICA25LiqwqDkv53nlZnkvY1cdFJlc2VydmVk77yaNuS4quWtl+iKgu+8jOiuvue9ruS4ujDvvJtcbiAgICAgICAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDEsIC8vIHJlc2VydmVkKDIpICsge3t7e2RhdGFfcmVmZXJlbmNlX2luZGV4KDIpICDmlbDmja7lvJXnlKjntKLlvJV9fX19XG4gICAgICAgICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLCAvLyBwcmVfZGVmaW5lZCgyKSArIHJlc2VydmVkKDIpXG4gICAgICAgICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLCAvLyBwcmVfZGVmaW5lZDogMyAqIDQgYnl0ZXMgIDMqNOS4quWtl+iKgueahOS/neeVmeS9jVxuICAgICAgICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCxcbiAgICAgICAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsXG4gICAgICAgICAgICAod2lkdGggPj4+IDgpICYgMHhGRiwgLy8gd2lkdGg6IDIgYnl0ZXNcbiAgICAgICAgICAgICh3aWR0aCkgJiAweEZGLFxuICAgICAgICAgICAgKGhlaWdodCA+Pj4gOCkgJiAweEZGLCAvLyBoZWlnaHQ6IDIgYnl0ZXNcbiAgICAgICAgICAgIChoZWlnaHQpICYgMHhGRixcbiAgICAgICAgICAgIDB4MDAsIDB4NDgsIDB4MDAsIDB4MDAsIC8vIGhvcml6cmVzb2x1dGlvbjogNCBieXRlcyDluLjmlbBcbiAgICAgICAgICAgIDB4MDAsIDB4NDgsIDB4MDAsIDB4MDAsIC8vIHZlcnRyZXNvbHV0aW9uOiA0IGJ5dGVzIOW4uOaVsFxuICAgICAgICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgLy8gcmVzZXJ2ZWQ6IDQgYnl0ZXMg5L+d55WZ5L2NXG4gICAgICAgICAgICAweDAwLCAweDAxLCAvLyBmcmFtZV9jb3VudFx0XHRcbiAgICAgICAgICAgIC8vZnJhbWVfY291bnTooajmmI7lpJrlsJHluKfljovnvKnop4bpopHlrZjlgqjlnKjmr4/kuKrmoLfmnKzjgILpu5jorqTmmK8xLOavj+agt+S4gOW4pzvlroPlj6/og73otoXov4cx5q+P5Liq5qC35pys55qE5aSa5Liq5bin5pWwXG4gICAgICAgICAgICAweDA0LCAvL1x0c3RybGVuIGNvbXByZXNzb3JuYW1lOiAzMiBieXRlc1x0XHRcdFN0cmluZ1szMl1cbiAgICAgICAgICAgIC8vMzLkuKo4IGJpdCAgICDnrKzkuIDkuKo4Yml06KGo56S66ZW/5bqmLOWJqeS4izMx5LiqOGJpdOihqOekuuWGheWuuVxuICAgICAgICAgICAgMHg2NywgMHgzMSwgMHgzMSwgMHgzMSwgLy8gY29tcHJlc3Nvcm5hbWU6IDMyIGJ5dGVzICAgIOe/u+ivkei/h+adpeaYr2cxMTFcbiAgICAgICAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIC8vXG4gICAgICAgICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLCAvL1xuICAgICAgICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCxcbiAgICAgICAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsXG4gICAgICAgICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLFxuICAgICAgICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCxcbiAgICAgICAgICAgIDB4MDAsIDB4MDAsIDB4MDAsXG4gICAgICAgICAgICAweDAwLCAweDE4LCAvLyBkZXB0aCDpopzoibLmt7HluqZcbiAgICAgICAgICAgIDB4RkYsIDB4RkYgLy8gcHJlX2RlZmluZWQgPSAtMVxuICAgICAgICBdKTtcbiAgICAgICAgcmV0dXJuIE1QNC5ib3goTVA0LnR5cGVzLmF2YzEsIGRhdGEsIE1QNC5ib3goTVA0LnR5cGVzLmF2Y0MsIGF2Y2MpKTtcbiAgICB9XG5cbiAgICAvLyBNb3ZpZSBFeHRlbmRzIGJveFxuICAgIHN0YXRpYyBtdmV4KG1ldGEpIHtcbiAgICAgICAgaWYgKG1ldGEubGVuZ3RoID4gMSlcbiAgICAgICAgICAgIHJldHVybiBNUDQuYm94KE1QNC50eXBlcy5tdmV4LCBNUDQudHJleChtZXRhWzBdKSwgTVA0LnRyZXgobWV0YVsxXSkpO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICByZXR1cm4gTVA0LmJveChNUDQudHlwZXMubXZleCwgTVA0LnRyZXgobWV0YVswXSkpO1xuICAgIH1cblxuICAgIC8vIFRyYWNrIEV4dGVuZHMgYm94XG4gICAgc3RhdGljIHRyZXgobWV0YSkge1xuICAgICAgICBsZXQgdHJhY2tJZCA9IG1ldGEuaWQ7XG4gICAgICAgIGxldCBkYXRhID0gbmV3IFVpbnQ4QXJyYXkoW1xuICAgICAgICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgLy8gdmVyc2lvbigwKSArIGZsYWdzXG4gICAgICAgICAgICAodHJhY2tJZCA+Pj4gMjQpICYgMHhGRiwgLy8gdHJhY2tfSURcbiAgICAgICAgICAgICh0cmFja0lkID4+PiAxNikgJiAweEZGLFxuICAgICAgICAgICAgKHRyYWNrSWQgPj4+IDgpICYgMHhGRixcbiAgICAgICAgICAgICh0cmFja0lkKSAmIDB4RkYsXG4gICAgICAgICAgICAweDAwLCAweDAwLCAweDAwLCAweDAxLCAvLyBkZWZhdWx0X3NhbXBsZV9kZXNjcmlwdGlvbl9pbmRleFxuICAgICAgICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgLy8gZGVmYXVsdF9zYW1wbGVfZHVyYXRpb25cbiAgICAgICAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIC8vIGRlZmF1bHRfc2FtcGxlX3NpemVcbiAgICAgICAgICAgIDB4MDAsIDB4MDEsIDB4MDAsIDB4MDEgLy8gZGVmYXVsdF9zYW1wbGVfZmxhZ3NcbiAgICAgICAgXSk7XG4gICAgICAgIC8vIGlmIChtZXRhLnR5cGUgIT09ICd2aWRlbycpIHtcbiAgICAgICAgLy8gICAgIGRhdGFbZGF0YS5sZW5ndGggLSAxXSA9IDB4MDA7XG4gICAgICAgIC8vIH1cbiAgICAgICAgcmV0dXJuIE1QNC5ib3goTVA0LnR5cGVzLnRyZXgsIGRhdGEpO1xuICAgIH1cblxuICAgIC8vIE1vdmllIGZyYWdtZW50IGJveFxuICAgIHN0YXRpYyBtb29mKHRyYWNrLCBiYXNlTWVkaWFEZWNvZGVUaW1lKSB7XG4gICAgICAgIHJldHVybiBNUDQuYm94KE1QNC50eXBlcy5tb29mLCBNUDQubWZoZCh0cmFjay5zZXF1ZW5jZU51bWJlciksIE1QNC50cmFmKHRyYWNrLCBiYXNlTWVkaWFEZWNvZGVUaW1lKSk7XG4gICAgfVxuXG4gICAgc3RhdGljIG1maGQoc2VxdWVuY2VOdW1iZXIpIHtcbiAgICAgICAgbGV0IGRhdGEgPSBuZXcgVWludDhBcnJheShbXG4gICAgICAgICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLFxuICAgICAgICAgICAgKHNlcXVlbmNlTnVtYmVyID4+PiAyNCkgJiAweEZGLCAvLyBzZXF1ZW5jZV9udW1iZXI6IGludDMyXG4gICAgICAgICAgICAoc2VxdWVuY2VOdW1iZXIgPj4+IDE2KSAmIDB4RkYsXG4gICAgICAgICAgICAoc2VxdWVuY2VOdW1iZXIgPj4+IDgpICYgMHhGRixcbiAgICAgICAgICAgIChzZXF1ZW5jZU51bWJlcikgJiAweEZGXG4gICAgICAgIF0pO1xuICAgICAgICByZXR1cm4gTVA0LmJveChNUDQudHlwZXMubWZoZCwgZGF0YSk7XG4gICAgfVxuXG4gICAgLy8gVHJhY2sgZnJhZ21lbnQgYm94XG4gICAgc3RhdGljIHRyYWYodHJhY2ssIGJhc2VNZWRpYURlY29kZVRpbWUpIHtcbiAgICAgICAgbGV0IHRyYWNrSWQgPSB0cmFjay5pZDtcblxuICAgICAgICAvLyBUcmFjayBmcmFnbWVudCBoZWFkZXIgYm94XG4gICAgICAgIGxldCB0ZmhkID0gTVA0LmJveChNUDQudHlwZXMudGZoZCwgbmV3IFVpbnQ4QXJyYXkoW1xuICAgICAgICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgLy8gdmVyc2lvbigwKSAmIGZsYWdzXG4gICAgICAgICAgICAodHJhY2tJZCA+Pj4gMjQpICYgMHhGRiwgLy8gdHJhY2tfSURcbiAgICAgICAgICAgICh0cmFja0lkID4+PiAxNikgJiAweEZGLFxuICAgICAgICAgICAgKHRyYWNrSWQgPj4+IDgpICYgMHhGRixcbiAgICAgICAgICAgICh0cmFja0lkKSAmIDB4RkZcbiAgICAgICAgXSkpO1xuICAgICAgICAvLyBUcmFjayBGcmFnbWVudCBEZWNvZGUgVGltZVxuICAgICAgICBsZXQgdGZkdCA9IE1QNC5ib3goTVA0LnR5cGVzLnRmZHQsIG5ldyBVaW50OEFycmF5KFtcbiAgICAgICAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIC8vIHZlcnNpb24oMCkgJiBmbGFnc1xuICAgICAgICAgICAgKGJhc2VNZWRpYURlY29kZVRpbWUgPj4+IDI0KSAmIDB4RkYsIC8vIGJhc2VNZWRpYURlY29kZVRpbWU6IGludDMyXG4gICAgICAgICAgICAoYmFzZU1lZGlhRGVjb2RlVGltZSA+Pj4gMTYpICYgMHhGRixcbiAgICAgICAgICAgIChiYXNlTWVkaWFEZWNvZGVUaW1lID4+PiA4KSAmIDB4RkYsXG4gICAgICAgICAgICAoYmFzZU1lZGlhRGVjb2RlVGltZSkgJiAweEZGXG4gICAgICAgIF0pKTtcbiAgICAgICAgbGV0IHNkdHAgPSBNUDQuc2R0cCh0cmFjayk7XG4gICAgICAgIGxldCB0cnVuID0gTVA0LnRydW4odHJhY2ssIHNkdHAuYnl0ZUxlbmd0aCArIDE2ICsgMTYgKyA4ICsgMTYgKyA4ICsgOCk7XG5cbiAgICAgICAgcmV0dXJuIE1QNC5ib3goTVA0LnR5cGVzLnRyYWYsIHRmaGQsIHRmZHQsIHRydW4sIHNkdHApO1xuICAgIH1cblxuICAgIC8vIFNhbXBsZSBEZXBlbmRlbmN5IFR5cGUgYm94XG4gICAgc3RhdGljIHNkdHAodHJhY2spIHtcbiAgICAgICAgbGV0IHNhbXBsZXMgPSB0cmFjay5zYW1wbGVzIHx8IFtdO1xuICAgICAgICBsZXQgc2FtcGxlQ291bnQgPSBzYW1wbGVzLmxlbmd0aDtcbiAgICAgICAgbGV0IGRhdGEgPSBuZXcgVWludDhBcnJheSg0ICsgc2FtcGxlQ291bnQpO1xuICAgICAgICAvLyAwfjQgYnl0ZXM6IHZlcnNpb24oMCkgJiBmbGFnc1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNhbXBsZUNvdW50OyBpKyspIHtcbiAgICAgICAgICAgIGxldCBmbGFncyA9IHNhbXBsZXNbaV0uZmxhZ3M7XG4gICAgICAgICAgICBkYXRhW2kgKyA0XSA9IChmbGFncy5pc0xlYWRpbmcgPDwgNikgLy8gaXNfbGVhZGluZzogMiAoYml0KVxuICAgICAgICAgICAgICAgIHxcbiAgICAgICAgICAgICAgICAoZmxhZ3MuZGVwZW5kc09uIDw8IDQpIC8vIHNhbXBsZV9kZXBlbmRzX29uXG4gICAgICAgICAgICAgICAgfFxuICAgICAgICAgICAgICAgIChmbGFncy5pc0RlcGVuZGVkT24gPDwgMikgLy8gc2FtcGxlX2lzX2RlcGVuZGVkX29uXG4gICAgICAgICAgICAgICAgfFxuICAgICAgICAgICAgICAgIChmbGFncy5oYXNSZWR1bmRhbmN5KTsgLy8gc2FtcGxlX2hhc19yZWR1bmRhbmN5XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIE1QNC5ib3goTVA0LnR5cGVzLnNkdHAsIGRhdGEpO1xuICAgIH1cblxuICAgIC8vIFRyYWNrIGZyYWdtZW50IHJ1biBib3hcbiAgICBzdGF0aWMgdHJ1bih0cmFjaywgb2Zmc2V0KSB7XG4gICAgICAgIGxldCBzYW1wbGVzID0gdHJhY2suc2FtcGxlcyB8fCBbXTtcbiAgICAgICAgbGV0IHNhbXBsZUNvdW50ID0gc2FtcGxlcy5sZW5ndGg7XG4gICAgICAgIGxldCBkYXRhU2l6ZSA9IDEyICsgMTYgKiBzYW1wbGVDb3VudDtcbiAgICAgICAgbGV0IGRhdGEgPSBuZXcgVWludDhBcnJheShkYXRhU2l6ZSk7XG4gICAgICAgIG9mZnNldCArPSA4ICsgZGF0YVNpemU7XG5cbiAgICAgICAgZGF0YS5zZXQoW1xuICAgICAgICAgICAgMHgwMCwgMHgwMCwgMHgwRiwgMHgwMSwgLy8gdmVyc2lvbigwKSAmIGZsYWdzXG4gICAgICAgICAgICAoc2FtcGxlQ291bnQgPj4+IDI0KSAmIDB4RkYsIC8vIHNhbXBsZV9jb3VudFxuICAgICAgICAgICAgKHNhbXBsZUNvdW50ID4+PiAxNikgJiAweEZGLFxuICAgICAgICAgICAgKHNhbXBsZUNvdW50ID4+PiA4KSAmIDB4RkYsXG4gICAgICAgICAgICAoc2FtcGxlQ291bnQpICYgMHhGRixcbiAgICAgICAgICAgIChvZmZzZXQgPj4+IDI0KSAmIDB4RkYsIC8vIGRhdGFfb2Zmc2V0XG4gICAgICAgICAgICAob2Zmc2V0ID4+PiAxNikgJiAweEZGLFxuICAgICAgICAgICAgKG9mZnNldCA+Pj4gOCkgJiAweEZGLFxuICAgICAgICAgICAgKG9mZnNldCkgJiAweEZGXG4gICAgICAgIF0sIDApO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2FtcGxlQ291bnQ7IGkrKykge1xuXG4gICAgICAgICAgICBsZXQgZHVyYXRpb24gPSBzYW1wbGVzW2ldLmR1cmF0aW9uO1xuICAgICAgICAgICAgY29uc29sZS5sb2coZHVyYXRpb24pO1xuXG4gICAgICAgICAgICBsZXQgc2l6ZSA9IHNhbXBsZXNbaV0uc2l6ZTtcbiAgICAgICAgICAgIGxldCBmbGFncyA9IHNhbXBsZXNbaV0uZmxhZ3M7XG4gICAgICAgICAgICBsZXQgY3RzID0gc2FtcGxlc1tpXS5jdHM7XG4gICAgICAgICAgICBkYXRhLnNldChbXG4gICAgICAgICAgICAgICAgKGR1cmF0aW9uID4+PiAyNCkgJiAweEZGLCAvLyBzYW1wbGVfZHVyYXRpb25cbiAgICAgICAgICAgICAgICAoZHVyYXRpb24gPj4+IDE2KSAmIDB4RkYsXG4gICAgICAgICAgICAgICAgKGR1cmF0aW9uID4+PiA4KSAmIDB4RkYsXG4gICAgICAgICAgICAgICAgKGR1cmF0aW9uKSAmIDB4RkYsXG4gICAgICAgICAgICAgICAgKHNpemUgPj4+IDI0KSAmIDB4RkYsIC8vIHNhbXBsZV9zaXplXG4gICAgICAgICAgICAgICAgKHNpemUgPj4+IDE2KSAmIDB4RkYsXG4gICAgICAgICAgICAgICAgKHNpemUgPj4+IDgpICYgMHhGRixcbiAgICAgICAgICAgICAgICAoc2l6ZSkgJiAweEZGLFxuICAgICAgICAgICAgICAgIChmbGFncy5pc0xlYWRpbmcgPDwgMikgfCBmbGFncy5kZXBlbmRzT24sIC8vIHNhbXBsZV9mbGFnc1xuICAgICAgICAgICAgICAgIChmbGFncy5pc0RlcGVuZGVkT24gPDwgNikgfCAoZmxhZ3MuaGFzUmVkdW5kYW5jeSA8PCA0KSB8IGZsYWdzLmlzTm9uU3luYyxcbiAgICAgICAgICAgICAgICAweDAwLCAweDAwLCAvLyBzYW1wbGVfZGVncmFkYXRpb25fcHJpb3JpdHlcbiAgICAgICAgICAgICAgICAoY3RzID4+PiAyNCkgJiAweEZGLCAvLyBzYW1wbGVfY29tcG9zaXRpb25fdGltZV9vZmZzZXRcbiAgICAgICAgICAgICAgICAoY3RzID4+PiAxNikgJiAweEZGLFxuICAgICAgICAgICAgICAgIChjdHMgPj4+IDgpICYgMHhGRixcbiAgICAgICAgICAgICAgICAoY3RzKSAmIDB4RkZcbiAgICAgICAgICAgIF0sIDEyICsgMTYgKiBpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gTVA0LmJveChNUDQudHlwZXMudHJ1biwgZGF0YSk7XG4gICAgfVxuXG4gICAgc3RhdGljIG1kYXQoZGF0YSkge1xuICAgICAgICByZXR1cm4gTVA0LmJveChNUDQudHlwZXMubWRhdCwgZGF0YSk7XG4gICAgfVxuXG59XG5cbk1QNC5pbml0KCk7XG5cbmV4cG9ydCBkZWZhdWx0IE1QNDtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9qcy9tcDQvbXA0cmVtdXguanMiXSwic291cmNlUm9vdCI6IiJ9");

/***/ }),
/* 2 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar _flvParse = __webpack_require__(5);\n\nvar _flvParse2 = _interopRequireDefault(_flvParse);\n\nvar _tagdemux = __webpack_require__(9);\n\nvar _tagdemux2 = _interopRequireDefault(_tagdemux);\n\nvar _mp4remux = __webpack_require__(1);\n\nvar _mp4remux2 = _interopRequireDefault(_mp4remux);\n\nvar _mp4moof = __webpack_require__(12);\n\nvar _mp4moof2 = _interopRequireDefault(_mp4moof);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nwindow.flvParse = {\n    mp4File: null,\n    succ: null,\n    // ftyp_moov:null,\n    tracks: [],\n    setFlv: function setFlv(uint8) {\n        _flvParse2.default.setFlv(uint8);\n\n        _tagdemux2.default._onTrackMetadata = Metadata.bind(this);\n        _tagdemux2.default._onMediaInfo = flvParse.metaSucc.bind(this);\n        _tagdemux2.default.parseMetadata(_flvParse2.default.arrTag[0].body);\n        _tagdemux2.default.parseChunks(_flvParse2.default.arrTag[1]);\n        console.log(_flvParse2.default.arrTag[2]);\n        _tagdemux2.default.parseChunks(_flvParse2.default.arrTag[2]);\n        //用来获取moov\n    },\n    nextTag: function nextTag() {},\n    mp4FileSucc: function mp4FileSucc(f) {\n        succ = f;\n    },\n    metaSucc: function metaSucc(mi) {\n        //获取ftyp和moov\n        window.ftyp_moov = _mp4remux2.default.generateInitSegment(metas);\n\n        //产出moof\n        window.tracks = new Array();\n        var mediaSeg = _flvParse2.default.arrTag.slice(3);\n\n        _tagdemux2.default.moofTag(mediaSeg);\n        _tagdemux2.default._videoTrack.sequenceNumber = 0;\n        _tagdemux2.default._audioTrack.sequenceNumber = 1;\n        console.log(_tagdemux2.default._videoTrack, _tagdemux2.default._audioTrack);\n        var m4mof = new _mp4moof2.default({ _isLive: false });\n        m4mof.onMediaSegment = flvParse.onMdiaSegment.bind(this);\n        m4mof.remux(_tagdemux2.default._audioTrack, _tagdemux2.default._videoTrack);\n    },\n    onMdiaSegment: function onMdiaSegment(track, value) {\n        console.log(track, value, new Uint8Array(value.data));\n        window.tracks.push(new Uint8Array(value.data));\n\n        if (window.tracks.length > 1) {\n            var u8a = new Uint8Array(window.ftyp_moov.length + window.tracks[0].length + window.tracks[1].length);\n            u8a.set(window.ftyp_moov, 0);\n            u8a.set(window.tracks[0], window.ftyp_moov.length);\n            u8a.set(window.tracks[1], window.ftyp_moov.length + window.tracks[0].length);\n            if (window.mp4Succ) {\n                // window.mp4Succ(new Blob([u8a.buffer]))\n                window.mp4Succ(u8a);\n            }\n        }\n    }\n\n};\nvar metas = [];\n\nfunction Metadata(type, meta) {\n    switch (type) {\n        case 'video':\n            metas.push(meta);\n            break;\n        case 'audio':\n            metas.push(meta);\n            break;\n    }\n}//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9qcy9mbHZFbnRlci5qcz9iZGJiIl0sIm5hbWVzIjpbIndpbmRvdyIsImZsdlBhcnNlIiwibXA0RmlsZSIsInN1Y2MiLCJ0cmFja3MiLCJzZXRGbHYiLCJ1aW50OCIsIl9vblRyYWNrTWV0YWRhdGEiLCJNZXRhZGF0YSIsImJpbmQiLCJfb25NZWRpYUluZm8iLCJtZXRhU3VjYyIsInBhcnNlTWV0YWRhdGEiLCJhcnJUYWciLCJib2R5IiwicGFyc2VDaHVua3MiLCJjb25zb2xlIiwibG9nIiwibmV4dFRhZyIsIm1wNEZpbGVTdWNjIiwiZiIsIm1pIiwiZnR5cF9tb292IiwiZ2VuZXJhdGVJbml0U2VnbWVudCIsIm1ldGFzIiwiQXJyYXkiLCJtZWRpYVNlZyIsInNsaWNlIiwibW9vZlRhZyIsIl92aWRlb1RyYWNrIiwic2VxdWVuY2VOdW1iZXIiLCJfYXVkaW9UcmFjayIsIm00bW9mIiwiX2lzTGl2ZSIsIm9uTWVkaWFTZWdtZW50Iiwib25NZGlhU2VnbWVudCIsInJlbXV4IiwidHJhY2siLCJ2YWx1ZSIsIlVpbnQ4QXJyYXkiLCJkYXRhIiwicHVzaCIsImxlbmd0aCIsInU4YSIsInNldCIsIm1wNFN1Y2MiLCJ0eXBlIiwibWV0YSJdLCJtYXBwaW5ncyI6Ijs7QUFBQTs7OztBQUNBOzs7O0FBQ0E7Ozs7QUFDQTs7Ozs7O0FBQ0FBLE9BQU9DLFFBQVAsR0FBa0I7QUFDZEMsYUFBUyxJQURLO0FBRWRDLFVBQU0sSUFGUTtBQUdkO0FBQ0FDLFlBQVEsRUFKTTtBQUtkQyxZQUFRLGdCQUFTQyxLQUFULEVBQWdCO0FBQ3BCLDJCQUFTRCxNQUFULENBQWdCQyxLQUFoQjs7QUFFQSwyQkFBU0MsZ0JBQVQsR0FBNEJDLFNBQVNDLElBQVQsQ0FBYyxJQUFkLENBQTVCO0FBQ0EsMkJBQVNDLFlBQVQsR0FBd0JULFNBQVNVLFFBQVQsQ0FBa0JGLElBQWxCLENBQXVCLElBQXZCLENBQXhCO0FBQ0EsMkJBQVNHLGFBQVQsQ0FBdUIsbUJBQVNDLE1BQVQs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QU5SO0FBUUgiLCJmaWxlIjoiMi5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBmbHZwYXJzZSBmcm9tICcuL2Zsdi9mbHZQYXJzZSdcbmltcG9ydCB0YWdkZW11eCBmcm9tICcuL2Zsdi90YWdkZW11eCdcbmltcG9ydCBtcDRyZW11eCBmcm9tICcuL21wNC9tcDRyZW11eCdcbmltcG9ydCBtcDRtb29mIGZyb20gJy4vbXA0L21wNG1vb2YnXG53aW5kb3cuZmx2UGFyc2UgPSB7XG4gICAgbXA0RmlsZTogbnVsbCxcbiAgICBzdWNjOiBudWxsLFxuICAgIC8vIGZ0eXBfbW9vdjpudWxsLFxuICAgIHRyYWNrczogW10sXG4gICAgc2V0Rmx2OiBmdW5jdGlvbih1aW50OCkge1xuICAgICAgICBmbHZwYXJzZS5zZXRGbHYodWludDgpO1xuXG4gICAgICAgIHRhZ2RlbXV4Ll9vblRyYWNrTWV0YWRhdGEgPSBNZXRhZGF0YS5iaW5kKHRoaXMpO1xuICAgICAgICB0YWdkZW11eC5fb25NZWRpYUluZm8gPSBmbHZQYXJzZS5tZXRhU3VjYy5iaW5kKHRoaXMpXG4gICAgICAgIHRhZ2RlbXV4LnBhcnNlTWV0YWRhdGEoZmx2cGFyc2UuYXJyVGFnWzBdLmJvZHkpO1xuICAgICAgICB0YWdkZW11eC5wYXJzZUNodW5rcyhmbHZwYXJzZS5hcnJUYWdbMV0pXG4gICAgICAgIGNvbnNvbGUubG9nKGZsdnBhcnNlLmFyclRhZ1syXSlcbiAgICAgICAgdGFnZGVtdXgucGFyc2VDaHVua3MoZmx2cGFyc2UuYXJyVGFnWzJdKVxuICAgICAgICAgICAgLy/nlKjmnaXojrflj5Ztb292XG5cbiAgICB9LFxuICAgIG5leHRUYWc6IGZ1bmN0aW9uKCkge1xuXG4gICAgfSxcbiAgICBtcDRGaWxlU3VjYzogZnVuY3Rpb24oZikge1xuICAgICAgICBzdWNjID0gZjtcbiAgICB9LFxuICAgIG1ldGFTdWNjOiBmdW5jdGlvbihtaSkge1xuICAgICAgICAvL+iOt+WPlmZ0eXDlkoxtb292XG4gICAgICAgIHdpbmRvdy5mdHlwX21vb3YgPSBtcDRyZW11eC5nZW5lcmF0ZUluaXRTZWdtZW50KG1ldGFzKTtcblxuXG4gICAgICAgIC8v5Lqn5Ye6bW9vZlxuICAgICAgICB3aW5kb3cudHJhY2tzID0gbmV3IEFycmF5KCk7XG4gICAgICAgIGxldCBtZWRpYVNlZyA9IGZsdnBhcnNlLmFyclRhZy5zbGljZSgzKTtcblxuXG5cbiAgICAgICAgdGFnZGVtdXgubW9vZlRhZyhtZWRpYVNlZyk7XG4gICAgICAgIHRhZ2RlbXV4Ll92aWRlb1RyYWNrLnNlcXVlbmNlTnVtYmVyID0gMDtcbiAgICAgICAgdGFnZGVtdXguX2F1ZGlvVHJhY2suc2VxdWVuY2VOdW1iZXIgPSAxO1xuICAgICAgICBjb25zb2xlLmxvZyh0YWdkZW11eC5fdmlkZW9UcmFjaywgdGFnZGVtdXguX2F1ZGlvVHJhY2spO1xuICAgICAgICBsZXQgbTRtb2YgPSBuZXcgbXA0bW9vZih7IF9pc0xpdmU6IGZhbHNlIH0pXG4gICAgICAgIG00bW9mLm9uTWVkaWFTZWdtZW50ID0gZmx2UGFyc2Uub25NZGlhU2VnbWVudC5iaW5kKHRoaXMpO1xuICAgICAgICBtNG1vZi5yZW11eCh0YWdkZW11eC5fYXVkaW9UcmFjaywgdGFnZGVtdXguX3ZpZGVvVHJhY2spO1xuXG5cblxuICAgIH0sXG4gICAgb25NZGlhU2VnbWVudDogZnVuY3Rpb24odHJhY2ssIHZhbHVlKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKHRyYWNrLCB2YWx1ZSwgbmV3IFVpbnQ4QXJyYXkodmFsdWUuZGF0YSkpXG4gICAgICAgIHdpbmRvdy50cmFja3MucHVzaChuZXcgVWludDhBcnJheSh2YWx1ZS5kYXRhKSk7XG5cblxuXG4gICAgICAgIGlmICh3aW5kb3cudHJhY2tzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgIGxldCB1OGEgPSBuZXcgVWludDhBcnJheSh3aW5kb3cuZnR5cF9tb292Lmxlbmd0aCArIHdpbmRvdy50cmFja3NbMF0ubGVuZ3RoICsgd2luZG93LnRyYWNrc1sxXS5sZW5ndGgpXG4gICAgICAgICAgICB1OGEuc2V0KHdpbmRvdy5mdHlwX21vb3YsIDApXG4gICAgICAgICAgICB1OGEuc2V0KHdpbmRvdy50cmFja3NbMF0sIHdpbmRvdy5mdHlwX21vb3YubGVuZ3RoKVxuICAgICAgICAgICAgdThhLnNldCh3aW5kb3cudHJhY2tzWzFdLCB3aW5kb3cuZnR5cF9tb292Lmxlbmd0aCArIHdpbmRvdy50cmFja3NbMF0ubGVuZ3RoKVxuICAgICAgICAgICAgaWYgKHdpbmRvdy5tcDRTdWNjKSB7XG4gICAgICAgICAgICAgICAgLy8gd2luZG93Lm1wNFN1Y2MobmV3IEJsb2IoW3U4YS5idWZmZXJdKSlcbiAgICAgICAgICAgICAgICB3aW5kb3cubXA0U3VjYyh1OGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG5cbn1cbmxldCBtZXRhcyA9IFtdO1xuXG5mdW5jdGlvbiBNZXRhZGF0YSh0eXBlLCBtZXRhKSB7XG4gICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgIGNhc2UgJ3ZpZGVvJzpcbiAgICAgICAgICAgIG1ldGFzLnB1c2gobWV0YSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnYXVkaW8nOlxuICAgICAgICAgICAgbWV0YXMucHVzaChtZXRhKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgIH1cbn1cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9qcy9mbHZFbnRlci5qcyJdLCJzb3VyY2VSb290IjoiIn0=");

/***/ }),
/* 3 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nfunction decodeUTF8(uint8array) {\n    var out = [];\n    var input = uint8array;\n    var i = 0;\n    var length = uint8array.length;\n\n    while (i < length) {\n        if (input[i] < 0x80) {\n            out.push(String.fromCharCode(input[i]));\n            ++i;\n            continue;\n        } else if (input[i] < 0xC0) {\n            // fallthrough\n        } else if (input[i] < 0xE0) {\n            if (checkContinuation(input, i, 1)) {\n                var ucs4 = (input[i] & 0x1F) << 6 | input[i + 1] & 0x3F;\n                if (ucs4 >= 0x80) {\n                    out.push(String.fromCharCode(ucs4 & 0xFFFF));\n                    i += 2;\n                    continue;\n                }\n            }\n        } else if (input[i] < 0xF0) {\n            if (checkContinuation(input, i, 2)) {\n                var _ucs = (input[i] & 0xF) << 12 | (input[i + 1] & 0x3F) << 6 | input[i + 2] & 0x3F;\n                if (_ucs >= 0x800 && (_ucs & 0xF800) !== 0xD800) {\n                    out.push(String.fromCharCode(_ucs & 0xFFFF));\n                    i += 3;\n                    continue;\n                }\n            }\n        } else if (input[i] < 0xF8) {\n            if (checkContinuation(input, i, 3)) {\n                var _ucs2 = (input[i] & 0x7) << 18 | (input[i + 1] & 0x3F) << 12 | (input[i + 2] & 0x3F) << 6 | input[i + 3] & 0x3F;\n                if (_ucs2 > 0x10000 && _ucs2 < 0x110000) {\n                    _ucs2 -= 0x10000;\n                    out.push(String.fromCharCode(_ucs2 >>> 10 | 0xD800));\n                    out.push(String.fromCharCode(_ucs2 & 0x3FF | 0xDC00));\n                    i += 4;\n                    continue;\n                }\n            }\n        }\n        out.push(String.fromCharCode(0xFFFD));\n        ++i;\n    }\n\n    return out.join('');\n}\n\nexports.default = decodeUTF8;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9qcy9kZWNvZGVVVEY4LmpzPzQ3ZWQiXSwibmFtZXMiOlsiZGVjb2RlVVRGOCIsInVpbnQ4YXJyYXkiLCJvdXQiLCJpbnB1dCIsImkiLCJsZW5ndGgiLCJwdXNoIiwiU3RyaW5nIiwiZnJvbUNoYXJDb2RlIiwiY2hlY2tDb250aW51YXRpb24iLCJ1Y3M0Iiwiam9pbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSxTQUFTQSxVQUFULENBQW9CQyxVQUFwQixFQUFnQztBQUM1QixRQUFJQyxNQUFNLEVBQVY7QUFDQSxRQUFJQyxRQUFRRixVQUFaO0FBQ0EsUUFBSUcsSUFBSSxDQUFSO0FBQ0EsUUFBSUMsU0FBU0osV0FBV0ksTUFBeEI7O0FBRUEsV0FBT0QsSUFBSUMsTUFBWCxFQUFtQjtBQUNmLFlBQUlGLE1BQU1DLENBQU4sSUFBVyxJQUFmLEVBQXFCO0FBQ2pCRixnQkFBSUksSUFBSixDQUFTQyxPQUFPQyxZQUFQLENBQW9CTCxNQUFNQyxDQUFOLENBQXBCLENBQVQ7QUFDQSxjQUFFQSxDQUFGO0FBQ0E7QUFDSCxTQUpELE1BSU8sSUFBSUQsTUFBTUMsQ0FBTixJQUFXLElBQWYsRUFBcUI7QUFDeEI7QUFDSCxTQUZNLE1BRUEsSUFBSUQsTUFBTUMsQ0FBTixJQUFXLElBQWYsRUFBcUI7QUFDeEIsZ0JBQUlLLGtCQUFrQk4sS0FBbEIsRUFBeUJDLENBQXpCLEVBQTRCLENBQTVCLENBQUosRUFBb0M7QUFDaEMsb0JBQUlNLE9BQU8sQ0FBQ1AsTUFBTUMsQ0FBTixJQUFXLElBQVosS0FBcUIsQ0FBckIsR0FBMEJELE1BQU1DLElBQUksQ0FBVixJQUFlLElBQXBEO0FBQ0Esb0JBQUlNLFFBQVEsSUFBWixFQUFrQjtBQUNkUix3QkFBSUksSUFBSixDQUFTQyxPQUFPQyxZQUFQLENBQW9CRSxPQUFPLE1BQTNCLENBQVQ7QUFDQU4seUJBQUssQ0FBTDtBQUNBO0FBQ0g7QUFDSjtBQUNKLFNBVE0sTUFTQSxJQUFJRCxNQUFNQyxDQUFOLElBQVcsSUFBZixFQUFxQjtBQUN4QixnQkFBSUssa0JBQWtCTixLQUFsQixFQUF5QkMsQ0FBekIsRUFBNEIsQ0FBNUIsQ0FBSixFQUFvQztBQUNoQyxvQkFBSU0sT0FBTyxDQUFDUCxNQUFNQyxDQUFOLElBQVcsR0FBWixLQUFvQixFQUFwQixHQUF5QixDQUFDRCxNQUFNQyxJQUFJLENBQVYsSUFBZSxJQUFoQixLQUF5QixDQUFsRCxHQUFzREQsTUFBTUMsSUFBSSxDQUFWLElBQWUsSUFBaEY7QUFDQSxvQkFBSU0sUUFBUSxLQUFSLElBQWlCLENBQUNBLE9BQU8sTUFBUixNQUFvQixNQUF6QyxFQUFpRDtBQUM3Q1Isd0JBQUlJLElBQUosQ0FBU0MsT0FBT0MsWUFBUCxDQUFvQkUsT0FBTyxNQUEzQixDQUFUO0FBQ0FOLHlCQUFLLENBQUw7QUFDQTtBQUNIO0FBQ0o7QUFDSixTQVRNLE1BU0EsSUFBSUQsTUFBTUMsQ0FBTixJQUFXLElBQWYsRUFBcUI7QUFDeEIsZ0JBQUlLLGtCQUFrQk4sS0FBbEIsRUFBeUJDLENBQXpCLEVBQTRCLENBQTVCLENBQUosRUFBb0M7QUFDaEMsb0JBQUlNLFFBQU8sQ0FBQ1AsTUFBTUMsQ0FBTixJQUFXLEdBQVosS0FBb0IsRUFBcEIsR0FBeUIsQ0FBQ0QsTUFBTUMsSUFBSSxDQUFWLElBQWUsSUFBaEIsS0FBeUIsRUFBbEQsR0FDUCxDQUFDRCxNQUFNQyxJQUFJLENBQVYsSUFBZSxJQUFoQixLQUF5QixDQURsQixHQUN1QkQsTUFBTUMsSUFBSSxDQUFWLElBQWUsSUFEakQ7QUFFQSxvQkFBSU0sUUFBTyxPQUFQLElBQWtCQSxRQUFPLFFBQTdCLEVBQXVDO0FBQ25DQSw2QkFBUSxPQUFSO0FBQ0FSLHdCQUFJSSxJQUFKLENBQVNDLE9BQU9DLFlBQVAsQ0FBcUJFLFVBQVMsRUFBVixHQUFnQixNQUFwQyxDQUFUO0FBQ0FSLHdCQUFJSSxJQUFKLENBQVNDLE9BQU9DLFlBQVAsQ0FBcUJFLFFBQU8sS0FBUixHQUFpQixNQUFyQyxDQUFUO0FBQ0FOLHlCQUFLLENBQUw7QUFDQTtBQUNIO0FBQ0o7QUFDSjtBQUNERixZQUFJSSxJQUFKLENBQVNDLE9BQU9DLFlBQVAsQ0FBb0IsTUFBcEIsQ0FBVDtBQUNBLFVBQUVKLENBQUY7QUFDSDs7QUFFRCxXQUFPRixJQUFJUyxJQUFKLENBQVMsRUFBVCxDQUFQO0FBQ0g7O2tCQUVjWCxVIiwiZmlsZSI6IjMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBkZWNvZGVVVEY4KHVpbnQ4YXJyYXkpIHtcbiAgICBsZXQgb3V0ID0gW107XG4gICAgbGV0IGlucHV0ID0gdWludDhhcnJheTtcbiAgICBsZXQgaSA9IDA7XG4gICAgbGV0IGxlbmd0aCA9IHVpbnQ4YXJyYXkubGVuZ3RoO1xuXG4gICAgd2hpbGUgKGkgPCBsZW5ndGgpIHtcbiAgICAgICAgaWYgKGlucHV0W2ldIDwgMHg4MCkge1xuICAgICAgICAgICAgb3V0LnB1c2goU3RyaW5nLmZyb21DaGFyQ29kZShpbnB1dFtpXSkpO1xuICAgICAgICAgICAgKytpO1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH0gZWxzZSBpZiAoaW5wdXRbaV0gPCAweEMwKSB7XG4gICAgICAgICAgICAvLyBmYWxsdGhyb3VnaFxuICAgICAgICB9IGVsc2UgaWYgKGlucHV0W2ldIDwgMHhFMCkge1xuICAgICAgICAgICAgaWYgKGNoZWNrQ29udGludWF0aW9uKGlucHV0LCBpLCAxKSkge1xuICAgICAgICAgICAgICAgIGxldCB1Y3M0ID0gKGlucHV0W2ldICYgMHgxRikgPDwgNiB8IChpbnB1dFtpICsgMV0gJiAweDNGKTtcbiAgICAgICAgICAgICAgICBpZiAodWNzNCA+PSAweDgwKSB7XG4gICAgICAgICAgICAgICAgICAgIG91dC5wdXNoKFN0cmluZy5mcm9tQ2hhckNvZGUodWNzNCAmIDB4RkZGRikpO1xuICAgICAgICAgICAgICAgICAgICBpICs9IDI7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChpbnB1dFtpXSA8IDB4RjApIHtcbiAgICAgICAgICAgIGlmIChjaGVja0NvbnRpbnVhdGlvbihpbnB1dCwgaSwgMikpIHtcbiAgICAgICAgICAgICAgICBsZXQgdWNzNCA9IChpbnB1dFtpXSAmIDB4RikgPDwgMTIgfCAoaW5wdXRbaSArIDFdICYgMHgzRikgPDwgNiB8IGlucHV0W2kgKyAyXSAmIDB4M0Y7XG4gICAgICAgICAgICAgICAgaWYgKHVjczQgPj0gMHg4MDAgJiYgKHVjczQgJiAweEY4MDApICE9PSAweEQ4MDApIHtcbiAgICAgICAgICAgICAgICAgICAgb3V0LnB1c2goU3RyaW5nLmZyb21DaGFyQ29kZSh1Y3M0ICYgMHhGRkZGKSk7XG4gICAgICAgICAgICAgICAgICAgIGkgKz0gMztcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKGlucHV0W2ldIDwgMHhGOCkge1xuICAgICAgICAgICAgaWYgKGNoZWNrQ29udGludWF0aW9uKGlucHV0LCBpLCAzKSkge1xuICAgICAgICAgICAgICAgIGxldCB1Y3M0ID0gKGlucHV0W2ldICYgMHg3KSA8PCAxOCB8IChpbnB1dFtpICsgMV0gJiAweDNGKSA8PCAxMiB8XG4gICAgICAgICAgICAgICAgICAgIChpbnB1dFtpICsgMl0gJiAweDNGKSA8PCA2IHwgKGlucHV0W2kgKyAzXSAmIDB4M0YpO1xuICAgICAgICAgICAgICAgIGlmICh1Y3M0ID4gMHgxMDAwMCAmJiB1Y3M0IDwgMHgxMTAwMDApIHtcbiAgICAgICAgICAgICAgICAgICAgdWNzNCAtPSAweDEwMDAwO1xuICAgICAgICAgICAgICAgICAgICBvdXQucHVzaChTdHJpbmcuZnJvbUNoYXJDb2RlKCh1Y3M0ID4+PiAxMCkgfCAweEQ4MDApKTtcbiAgICAgICAgICAgICAgICAgICAgb3V0LnB1c2goU3RyaW5nLmZyb21DaGFyQ29kZSgodWNzNCAmIDB4M0ZGKSB8IDB4REMwMCkpO1xuICAgICAgICAgICAgICAgICAgICBpICs9IDQ7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBvdXQucHVzaChTdHJpbmcuZnJvbUNoYXJDb2RlKDB4RkZGRCkpO1xuICAgICAgICArK2k7XG4gICAgfVxuXG4gICAgcmV0dXJuIG91dC5qb2luKCcnKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZGVjb2RlVVRGODtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9qcy9kZWNvZGVVVEY4LmpzIl0sInNvdXJjZVJvb3QiOiIifQ==");

/***/ }),
/* 4 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/*\n * Copyright (C) 2016 Bilibili. All Rights Reserved.\n *\n * @author zheng qian <xqq@xqq.im>\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n// Exponential-Golomb buffer decoder\nvar ExpGolomb = function () {\n    function ExpGolomb(uint8array) {\n        _classCallCheck(this, ExpGolomb);\n\n        this.TAG = this.constructor.name;\n\n        this._buffer = uint8array;\n        this._buffer_index = 0;\n        this._total_bytes = uint8array.byteLength;\n        this._total_bits = uint8array.byteLength * 8;\n        this._current_word = 0;\n        this._current_word_bits_left = 0;\n    }\n\n    _createClass(ExpGolomb, [{\n        key: 'destroy',\n        value: function destroy() {\n            this._buffer = null;\n        }\n    }, {\n        key: '_fillCurrentWord',\n        value: function _fillCurrentWord() {\n            var buffer_bytes_left = this._total_bytes - this._buffer_index;\n            if (buffer_bytes_left <= 0) throw new IllegalStateException('ExpGolomb: _fillCurrentWord() but no bytes available');\n\n            var bytes_read = Math.min(4, buffer_bytes_left);\n            var word = new Uint8Array(4);\n            word.set(this._buffer.subarray(this._buffer_index, this._buffer_index + bytes_read));\n            this._current_word = new DataView(word.buffer).getUint32(0, false);\n\n            this._buffer_index += bytes_read;\n            this._current_word_bits_left = bytes_read * 8;\n        }\n    }, {\n        key: 'readBits',\n        value: function readBits(bits) {\n            if (bits > 32) throw new InvalidArgumentException('ExpGolomb: readBits() bits exceeded max 32bits!');\n\n            if (bits <= this._current_word_bits_left) {\n                var _result = this._current_word >>> 32 - bits;\n                this._current_word <<= bits;\n                this._current_word_bits_left -= bits;\n                return _result;\n            }\n\n            var result = this._current_word_bits_left ? this._current_word : 0;\n            result = result >>> 32 - this._current_word_bits_left;\n            var bits_need_left = bits - this._current_word_bits_left;\n\n            this._fillCurrentWord();\n            var bits_read_next = Math.min(bits_need_left, this._current_word_bits_left);\n\n            var result2 = this._current_word >>> 32 - bits_read_next;\n            this._current_word <<= bits_read_next;\n            this._current_word_bits_left -= bits_read_next;\n\n            result = result << bits_read_next | result2;\n            return result;\n        }\n    }, {\n        key: 'readBool',\n        value: function readBool() {\n            return this.readBits(1) === 1;\n        }\n    }, {\n        key: 'readByte',\n        value: function readByte() {\n            return this.readBits(8);\n        }\n    }, {\n        key: '_skipLeadingZero',\n        value: function _skipLeadingZero() {\n            var zero_count = void 0;\n            for (zero_count = 0; zero_count < this._current_word_bits_left; zero_count++) {\n                if (0 !== (this._current_word & 0x80000000 >>> zero_count)) {\n                    this._current_word <<= zero_count;\n                    this._current_word_bits_left -= zero_count;\n                    return zero_count;\n                }\n            }\n            this._fillCurrentWord();\n            return zero_count + this._skipLeadingZero();\n        }\n    }, {\n        key: 'readUEG',\n        value: function readUEG() {\n            // unsigned exponential golomb\n            var leading_zeros = this._skipLeadingZero();\n            return this.readBits(leading_zeros + 1) - 1;\n        }\n    }, {\n        key: 'readSEG',\n        value: function readSEG() {\n            // signed exponential golomb\n            var value = this.readUEG();\n            if (value & 0x01) {\n                return value + 1 >>> 1;\n            } else {\n                return -1 * (value >>> 1);\n            }\n        }\n    }]);\n\n    return ExpGolomb;\n}();\n\nexports.default = ExpGolomb;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9qcy9mbHYvZXhwLWdvbG9tYi5qcz8zY2M5Il0sIm5hbWVzIjpbIkV4cEdvbG9tYiIsInVpbnQ4YXJyYXkiLCJUQUciLCJjb25zdHJ1Y3RvciIsIm5hbWUiLCJfYnVmZmVyIiwiX2J1ZmZlcl9pbmRleCIsIl90b3RhbF9ieXRlcyIsImJ5dGVMZW5ndGgiLCJfdG90YWxfYml0cyIsIl9jdXJyZW50X3dvcmQiLCJfY3VycmVudF93b3JkX2JpdHNfbGVmdCIsImJ1ZmZlcl9ieXRlc19sZWZ0IiwiSWxsZWdhbFN0YXRlRXhjZXB0aW9uIiwiYnl0ZXNfcmVhZCIsIk1hdGgiLCJtaW4iLCJ3b3JkIiwiVWludDhBcnJheSIsInNldCIsInN1YmFycmF5IiwiRGF0YVZpZXciLCJidWZmZXIiLCJnZXRVaW50MzIiLCJiaXRzIiwiSW52YWxpZEFyZ3VtZW50RXhjZXB0aW9uIiwicmVzdWx0IiwiYml0c19uZWVkX2xlZnQiLCJfZmlsbEN1cnJlbnRXb3JkIiwiYml0c19yZWFkX25leHQiLCJyZXN1bHQyIiwicmVhZEJpdHMiLCJ6ZXJvX2NvdW50IiwiX3NraXBMZWFkaW5nWmVybyIsImxlYWRpbmdfemVyb3MiLCJ2YWx1ZSIsInJlYWRVRUciXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBb0JBO0lBQ01BLFM7QUFFRix1QkFBWUMsVUFBWixFQUF3QjtBQUFBOztBQUNwQixhQUFLQyxHQUFMLEdBQVcsS0FBS0MsV0FBTCxDQUFpQkMsSUFBNUI7O0FBRUEsYUFBS0MsT0FBTCxHQUFlSixVQUFmO0FBQ0EsYUFBS0ssYUFBTCxHQUFxQixDQUFyQjtBQUNBLGFBQUtDLFlBQUwsR0FBb0JOLFdBQVdPLFVBQS9CO0FBQ0EsYUFBS0MsV0FBTCxHQUFtQlIsV0FBV08sVUFBWCxHQUF3QixDQUEzQztBQUNBLGFBQUtFLGFBQUwsR0FBcUIsQ0FBckI7QUFDQSxhQUFLQyx1QkFBTCxHQUErQixDQUEvQjtBQUNIOzs7O2tDQUVT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LGFBRkQsTUFFTztBQUNILHVCQUFPLENBQUMsQ0FBRCxJQUFNQSxVQUFVLENBQWhCLENBQVA7QUFDSDtBQUNKOzs7Ozs7a0JBSVVuQyxTIiwiZmlsZSI6IjQuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuICogQ29weXJpZ2h0IChDKSAyMDE2IEJpbGliaWxpLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIEBhdXRob3IgemhlbmcgcWlhbiA8eHFxQHhxcS5pbT5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuXG5cbi8vIEV4cG9uZW50aWFsLUdvbG9tYiBidWZmZXIgZGVjb2RlclxuY2xhc3MgRXhwR29sb21iIHtcblxuICAgIGNvbnN0cnVjdG9yKHVpbnQ4YXJyYXkpIHtcbiAgICAgICAgdGhpcy5UQUcgPSB0aGlzLmNvbnN0cnVjdG9yLm5hbWU7XG5cbiAgICAgICAgdGhpcy5fYnVmZmVyID0gdWludDhhcnJheTtcbiAgICAgICAgdGhpcy5fYnVmZmVyX2luZGV4ID0gMDtcbiAgICAgICAgdGhpcy5fdG90YWxfYnl0ZXMgPSB1aW50OGFycmF5LmJ5dGVMZW5ndGg7XG4gICAgICAgIHRoaXMuX3RvdGFsX2JpdHMgPSB1aW50OGFycmF5LmJ5dGVMZW5ndGggKiA4O1xuICAgICAgICB0aGlzLl9jdXJyZW50X3dvcmQgPSAwO1xuICAgICAgICB0aGlzLl9jdXJyZW50X3dvcmRfYml0c19sZWZ0ID0gMDtcbiAgICB9XG5cbiAgICBkZXN0cm95KCkge1xuICAgICAgICB0aGlzLl9idWZmZXIgPSBudWxsO1xuICAgIH1cblxuICAgIF9maWxsQ3VycmVudFdvcmQoKSB7XG4gICAgICAgIGxldCBidWZmZXJfYnl0ZXNfbGVmdCA9IHRoaXMuX3RvdGFsX2J5dGVzIC0gdGhpcy5fYnVmZmVyX2luZGV4O1xuICAgICAgICBpZiAoYnVmZmVyX2J5dGVzX2xlZnQgPD0gMClcbiAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsU3RhdGVFeGNlcHRpb24oJ0V4cEdvbG9tYjogX2ZpbGxDdXJyZW50V29yZCgpIGJ1dCBubyBieXRlcyBhdmFpbGFibGUnKTtcblxuICAgICAgICBsZXQgYnl0ZXNfcmVhZCA9IE1hdGgubWluKDQsIGJ1ZmZlcl9ieXRlc19sZWZ0KTtcbiAgICAgICAgbGV0IHdvcmQgPSBuZXcgVWludDhBcnJheSg0KTtcbiAgICAgICAgd29yZC5zZXQodGhpcy5fYnVmZmVyLnN1YmFycmF5KHRoaXMuX2J1ZmZlcl9pbmRleCwgdGhpcy5fYnVmZmVyX2luZGV4ICsgYnl0ZXNfcmVhZCkpO1xuICAgICAgICB0aGlzLl9jdXJyZW50X3dvcmQgPSBuZXcgRGF0YVZpZXcod29yZC5idWZmZXIpLmdldFVpbnQzMigwLCBmYWxzZSk7XG5cbiAgICAgICAgdGhpcy5fYnVmZmVyX2luZGV4ICs9IGJ5dGVzX3JlYWQ7XG4gICAgICAgIHRoaXMuX2N1cnJlbnRfd29yZF9iaXRzX2xlZnQgPSBieXRlc19yZWFkICogODtcbiAgICB9XG5cbiAgICByZWFkQml0cyhiaXRzKSB7XG4gICAgICAgIGlmIChiaXRzID4gMzIpXG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXhjZXB0aW9uKCdFeHBHb2xvbWI6IHJlYWRCaXRzKCkgYml0cyBleGNlZWRlZCBtYXggMzJiaXRzIScpO1xuXG4gICAgICAgIGlmIChiaXRzIDw9IHRoaXMuX2N1cnJlbnRfd29yZF9iaXRzX2xlZnQpIHtcbiAgICAgICAgICAgIGxldCByZXN1bHQgPSB0aGlzLl9jdXJyZW50X3dvcmQgPj4+ICgzMiAtIGJpdHMpO1xuICAgICAgICAgICAgdGhpcy5fY3VycmVudF93b3JkIDw8PSBiaXRzO1xuICAgICAgICAgICAgdGhpcy5fY3VycmVudF93b3JkX2JpdHNfbGVmdCAtPSBiaXRzO1xuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCByZXN1bHQgPSB0aGlzLl9jdXJyZW50X3dvcmRfYml0c19sZWZ0ID8gdGhpcy5fY3VycmVudF93b3JkIDogMDtcbiAgICAgICAgcmVzdWx0ID0gcmVzdWx0ID4+PiAoMzIgLSB0aGlzLl9jdXJyZW50X3dvcmRfYml0c19sZWZ0KTtcbiAgICAgICAgbGV0IGJpdHNfbmVlZF9sZWZ0ID0gYml0cyAtIHRoaXMuX2N1cnJlbnRfd29yZF9iaXRzX2xlZnQ7XG5cbiAgICAgICAgdGhpcy5fZmlsbEN1cnJlbnRXb3JkKCk7XG4gICAgICAgIGxldCBiaXRzX3JlYWRfbmV4dCA9IE1hdGgubWluKGJpdHNfbmVlZF9sZWZ0LCB0aGlzLl9jdXJyZW50X3dvcmRfYml0c19sZWZ0KTtcblxuICAgICAgICBsZXQgcmVzdWx0MiA9IHRoaXMuX2N1cnJlbnRfd29yZCA+Pj4gKDMyIC0gYml0c19yZWFkX25leHQpO1xuICAgICAgICB0aGlzLl9jdXJyZW50X3dvcmQgPDw9IGJpdHNfcmVhZF9uZXh0O1xuICAgICAgICB0aGlzLl9jdXJyZW50X3dvcmRfYml0c19sZWZ0IC09IGJpdHNfcmVhZF9uZXh0O1xuXG4gICAgICAgIHJlc3VsdCA9IChyZXN1bHQgPDwgYml0c19yZWFkX25leHQpIHwgcmVzdWx0MjtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICByZWFkQm9vbCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVhZEJpdHMoMSkgPT09IDE7XG4gICAgfVxuXG4gICAgcmVhZEJ5dGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlYWRCaXRzKDgpO1xuICAgIH1cblxuICAgIF9za2lwTGVhZGluZ1plcm8oKSB7XG4gICAgICAgIGxldCB6ZXJvX2NvdW50O1xuICAgICAgICBmb3IgKHplcm9fY291bnQgPSAwOyB6ZXJvX2NvdW50IDwgdGhpcy5fY3VycmVudF93b3JkX2JpdHNfbGVmdDsgemVyb19jb3VudCsrKSB7XG4gICAgICAgICAgICBpZiAoMCAhPT0gKHRoaXMuX2N1cnJlbnRfd29yZCAmICgweDgwMDAwMDAwID4+PiB6ZXJvX2NvdW50KSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9jdXJyZW50X3dvcmQgPDw9IHplcm9fY291bnQ7XG4gICAgICAgICAgICAgICAgdGhpcy5fY3VycmVudF93b3JkX2JpdHNfbGVmdCAtPSB6ZXJvX2NvdW50O1xuICAgICAgICAgICAgICAgIHJldHVybiB6ZXJvX2NvdW50O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2ZpbGxDdXJyZW50V29yZCgpO1xuICAgICAgICByZXR1cm4gemVyb19jb3VudCArIHRoaXMuX3NraXBMZWFkaW5nWmVybygpO1xuICAgIH1cblxuICAgIHJlYWRVRUcoKSB7IC8vIHVuc2lnbmVkIGV4cG9uZW50aWFsIGdvbG9tYlxuICAgICAgICBsZXQgbGVhZGluZ196ZXJvcyA9IHRoaXMuX3NraXBMZWFkaW5nWmVybygpO1xuICAgICAgICByZXR1cm4gdGhpcy5yZWFkQml0cyhsZWFkaW5nX3plcm9zICsgMSkgLSAxO1xuICAgIH1cblxuICAgIHJlYWRTRUcoKSB7IC8vIHNpZ25lZCBleHBvbmVudGlhbCBnb2xvbWJcbiAgICAgICAgbGV0IHZhbHVlID0gdGhpcy5yZWFkVUVHKCk7XG4gICAgICAgIGlmICh2YWx1ZSAmIDB4MDEpIHtcbiAgICAgICAgICAgIHJldHVybiAodmFsdWUgKyAxKSA+Pj4gMTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiAtMSAqICh2YWx1ZSA+Pj4gMSk7XG4gICAgICAgIH1cbiAgICB9XG5cbn1cblxuZXhwb3J0IGRlZmF1bHQgRXhwR29sb21iO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2pzL2Zsdi9leHAtZ29sb21iLmpzIl0sInNvdXJjZVJvb3QiOiIifQ==");

/***/ }),
/* 5 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _flvTag = __webpack_require__(6);\n\nvar _flvTag2 = _interopRequireDefault(_flvTag);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar FlvParse = function () {\n    function FlvParse() {\n        _classCallCheck(this, FlvParse);\n\n        this.tempUint8 = new Uint8Array();\n        this.arrTag = [];\n        this.index = 0;\n        this.tempArr = [];\n        this.stop = false;\n        this.offset = 0;\n        this.frist = true;\n    }\n\n    /**\n     * 接受 外部的flv二进制数据\n     */\n\n\n    _createClass(FlvParse, [{\n        key: \"setFlv\",\n        value: function setFlv(uint8) {\n            this.index = 0;\n            this.tempUint8 = uint8;\n            if (this.tempUint8.length > 13 && this.frist) {\n                this.read(9); //略掉9个字节的flv header tag\n                this.read(4); //略掉第一个4字节的 tag size\n                this.frist = false;\n            } else if (!this.frist) {\n                return this.parse();\n            } else {\n                return this.offset;\n            }\n        }\n\n        /**\n         * 开始解析\n         */\n\n    }, {\n        key: \"parse\",\n        value: function parse() {\n\n            while (this.index < this.tempUint8.length && !this.stop) {\n                this.offset = this.index;\n\n                var t = new _flvTag2.default();\n                if (this.tempUint8.length - this.index >= 11) {\n                    t.tagType = this.read(1)[0]; //取出tag类型\n                    t.dataSize = this.read(3); //取出包体大小\n                    t.Timestamp = this.read(4); //取出解码时间\n                    t.StreamID = this.read(3); //取出stream id\n                } else {\n                    this.stop = true;\n                    continue;\n                }\n                if (this.tempUint8.length - this.index >= this.getBodySum(t.dataSize) + 4) {\n                    t.body = this.read(this.getBodySum(t.dataSize)); //取出body\n                    this.arrTag.push(t);\n                    this.read(4);\n                } else {\n                    this.stop = true;\n                    continue;\n                }\n                this.offset = this.index;\n            }\n\n            return this.offset;\n        }\n    }, {\n        key: \"read\",\n        value: function read(length) {\n            var u8a = new Uint8Array(length);\n            u8a.set(this.tempUint8.subarray(this.index, this.index + length), 0);\n            this.index += length;\n            return u8a;\n        }\n\n        /**\n         * 计算tag包体大小\n         */\n\n    }, {\n        key: \"getBodySum\",\n        value: function getBodySum(arr) {\n            var _str = \"\";\n            _str += arr[0].toString(16).length == 1 ? \"0\" + arr[0].toString(16) : arr[0].toString(16);\n            _str += arr[1].toString(16).length == 1 ? \"0\" + arr[1].toString(16) : arr[1].toString(16);\n            _str += arr[2].toString(16).length == 1 ? \"0\" + arr[2].toString(16) : arr[2].toString(16);\n            return parseInt(_str, 16);\n        }\n    }]);\n\n    return FlvParse;\n}();\n\nexports.default = new FlvParse();//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9qcy9mbHYvZmx2UGFyc2UuanM/Y2FlOCJdLCJuYW1lcyI6WyJGbHZQYXJzZSIsInRlbXBVaW50OCIsIlVpbnQ4QXJyYXkiLCJhcnJUYWciLCJpbmRleCIsInRlbXBBcnIiLCJzdG9wIiwib2Zmc2V0IiwiZnJpc3QiLCJ1aW50OCIsImxlbmd0aCIsInJlYWQiLCJwYXJzZSIsInQiLCJ0YWdUeXBlIiwiZGF0YVNpemUiLCJUaW1lc3RhbXAiLCJTdHJlYW1JRCIsImdldEJvZHlTdW0iLCJib2R5IiwicHVzaCIsInU4YSIsInNldCIsInN1YmFycmF5IiwiYXJyIiwiX3N0ciIsInRvU3RyaW5nIiwicGFyc2VJbnQiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUE7Ozs7Ozs7O0lBQ01BLFE7QUFDRix3QkFBYztBQUFBOztBQUNWLGFBQUtDLFNBQUwsR0FBaUIsSUFBSUMsVUFBSixFQUFqQjtBQUNBLGFBQUtDLE1BQUwsR0FBYyxFQUFkO0FBQ0EsYUFBS0MsS0FBTCxHQUFhLENBQWI7QUFDQSxhQUFLQyxPQUFMLEdBQWUsRUFBZjtBQUNBLGFBQUtDLElBQUwsR0FBWSxLQUFaO0FBQ0EsYUFBS0MsTUFBTCxHQUFjLENBQWQ7QUFDQSxhQUFLQyxLQUFMLEdBQWEsSUFBYjtBQUNIOztBQUVEOzs7Ozs7OytCQUdPQyxLLEVBQU87QUFDVixpQkFBS0wsS0FBTCxHQUFhLENBQWI7QUFDQSxpQkFBS0gsU0FBTCxHQUFpQlEsS0FBakI7QUFDQSxnQkFBSSxLQUFLUixTQUFMLENBQWVTLE1BQWYsR0FBd0IsRUFBeEIsSUFBOEIsS0FBS0YsS0FBdkMsRUFBOEM7QUFDMUMscUJBQUtHLElBQUwsQ0FBVSxDQUFWLEVBRDBDLENBQzVCO0FBQ2QscUJBQUtBLElBQUwsQ0FBVSxDQUFWLEVBRjBDLENBRTVCO0FBQ2QscUJBQUtILEtBQUwsR0FBYSxLQUFiO0FBQ0gsYUFKRCxNQUlPLElBQUksQ0FBQyxLQUFLQSxLQUFWLEVBQWlCO0FBQ3BCLHVCQUFPLEtBQUtJ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Ozs7a0JBRVUsSUFBSXpCLFFBQUosRSIsImZpbGUiOiI1LmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHRhZyBmcm9tICcuL2ZsdlRhZy5qcydcbmNsYXNzIEZsdlBhcnNlIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy50ZW1wVWludDggPSBuZXcgVWludDhBcnJheSgpO1xuICAgICAgICB0aGlzLmFyclRhZyA9IFtdO1xuICAgICAgICB0aGlzLmluZGV4ID0gMDtcbiAgICAgICAgdGhpcy50ZW1wQXJyID0gW107XG4gICAgICAgIHRoaXMuc3RvcCA9IGZhbHNlO1xuICAgICAgICB0aGlzLm9mZnNldCA9IDA7XG4gICAgICAgIHRoaXMuZnJpc3QgPSB0cnVlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIOaOpeWPlyDlpJbpg6jnmoRmbHbkuozov5vliLbmlbDmja5cbiAgICAgKi9cbiAgICBzZXRGbHYodWludDgpIHtcbiAgICAgICAgdGhpcy5pbmRleCA9IDA7XG4gICAgICAgIHRoaXMudGVtcFVpbnQ4ID0gdWludDg7XG4gICAgICAgIGlmICh0aGlzLnRlbXBVaW50OC5sZW5ndGggPiAxMyAmJiB0aGlzLmZyaXN0KSB7XG4gICAgICAgICAgICB0aGlzLnJlYWQoOSk7IC8v55Wl5o6JOeS4quWtl+iKgueahGZsdiBoZWFkZXIgdGFnXG4gICAgICAgICAgICB0aGlzLnJlYWQoNCk7IC8v55Wl5o6J56ys5LiA5LiqNOWtl+iKgueahCB0YWcgc2l6ZVxuICAgICAgICAgICAgdGhpcy5mcmlzdCA9IGZhbHNlO1xuICAgICAgICB9IGVsc2UgaWYgKCF0aGlzLmZyaXN0KSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wYXJzZSgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMub2Zmc2V0O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICog5byA5aeL6Kej5p6QXG4gICAgICovXG4gICAgcGFyc2UoKSB7XG5cbiAgICAgICAgd2hpbGUgKHRoaXMuaW5kZXggPCB0aGlzLnRlbXBVaW50OC5sZW5ndGggJiYgIXRoaXMuc3RvcCkge1xuICAgICAgICAgICAgdGhpcy5vZmZzZXQgPSB0aGlzLmluZGV4O1xuXG4gICAgICAgICAgICBsZXQgdCA9IG5ldyB0YWcoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnRlbXBVaW50OC5sZW5ndGggLSB0aGlzLmluZGV4ID49IDExKSB7XG4gICAgICAgICAgICAgICAgdC50YWdUeXBlID0gKHRoaXMucmVhZCgxKVswXSk7IC8v5Y+W5Ye6dGFn57G75Z6LXG4gICAgICAgICAgICAgICAgdC5kYXRhU2l6ZSA9IHRoaXMucmVhZCgzKTsgLy/lj5blh7rljIXkvZPlpKflsI9cbiAgICAgICAgICAgICAgICB0LlRpbWVzdGFtcCA9IHRoaXMucmVhZCg0KTsgLy/lj5blh7rop6PnoIHml7bpl7RcbiAgICAgICAgICAgICAgICB0LlN0cmVhbUlEID0gdGhpcy5yZWFkKDMpOyAvL+WPluWHunN0cmVhbSBpZFxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnN0b3AgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMudGVtcFVpbnQ4Lmxlbmd0aCAtIHRoaXMuaW5kZXggPj0gKHRoaXMuZ2V0Qm9keVN1bSh0LmRhdGFTaXplKSArIDQpKSB7XG4gICAgICAgICAgICAgICAgdC5ib2R5ID0gdGhpcy5yZWFkKHRoaXMuZ2V0Qm9keVN1bSh0LmRhdGFTaXplKSk7IC8v5Y+W5Ye6Ym9keVxuICAgICAgICAgICAgICAgIHRoaXMuYXJyVGFnLnB1c2godCk7XG4gICAgICAgICAgICAgICAgdGhpcy5yZWFkKDQpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnN0b3AgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5vZmZzZXQgPSB0aGlzLmluZGV4O1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMub2Zmc2V0O1xuICAgIH1cbiAgICByZWFkKGxlbmd0aCkge1xuICAgICAgICBsZXQgdThhID0gbmV3IFVpbnQ4QXJyYXkobGVuZ3RoKTtcbiAgICAgICAgdThhLnNldCh0aGlzLnRlbXBVaW50OC5zdWJhcnJheSh0aGlzLmluZGV4LCB0aGlzLmluZGV4ICsgbGVuZ3RoKSwgMCk7XG4gICAgICAgIHRoaXMuaW5kZXggKz0gbGVuZ3RoO1xuICAgICAgICByZXR1cm4gdThhO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIOiuoeeul3RhZ+WMheS9k+Wkp+Wwj1xuICAgICAqL1xuICAgIGdldEJvZHlTdW0oYXJyKSB7XG4gICAgICAgIGxldCBfc3RyID0gXCJcIjtcbiAgICAgICAgX3N0ciArPSAoYXJyWzBdLnRvU3RyaW5nKDE2KS5sZW5ndGggPT0gMSA/IFwiMFwiICsgYXJyWzBdLnRvU3RyaW5nKDE2KSA6IGFyclswXS50b1N0cmluZygxNikpO1xuICAgICAgICBfc3RyICs9IChhcnJbMV0udG9TdHJpbmcoMTYpLmxlbmd0aCA9PSAxID8gXCIwXCIgKyBhcnJbMV0udG9TdHJpbmcoMTYpIDogYXJyWzFdLnRvU3RyaW5nKDE2KSk7XG4gICAgICAgIF9zdHIgKz0gKGFyclsyXS50b1N0cmluZygxNikubGVuZ3RoID09IDEgPyBcIjBcIiArIGFyclsyXS50b1N0cmluZygxNikgOiBhcnJbMl0udG9TdHJpbmcoMTYpKTtcbiAgICAgICAgcmV0dXJuIHBhcnNlSW50KF9zdHIsIDE2KTtcbiAgICB9XG59XG5leHBvcnQgZGVmYXVsdCBuZXcgRmx2UGFyc2UoKTtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9qcy9mbHYvZmx2UGFyc2UuanMiXSwic291cmNlUm9vdCI6IiJ9");

/***/ }),
/* 6 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar FlvTag = function () {\n    function FlvTag() {\n        _classCallCheck(this, FlvTag);\n\n        this.tagType = -1;\n        this.dataSize = -1;\n        this.Timestamp = -1;\n        this.StreamID = -1;\n        this.body = -1;\n        this.time = -1;\n        this.arr = [];\n    }\n\n    _createClass(FlvTag, [{\n        key: \"getTime\",\n        value: function getTime() {\n            // this.Timestamp.pop();\n            this.arr = [];\n            for (var i = 0; i < this.Timestamp.length; i++) {\n                this.arr.push(this.Timestamp[i].toString(16).length == 1 ? \"0\" + this.Timestamp[i].toString(16) : this.Timestamp[i].toString(16));\n            }\n            this.arr.pop();\n            var time = this.arr.join('');\n            this.time = parseInt(time, 16);\n            return parseInt(time, 16);\n        }\n    }]);\n\n    return FlvTag;\n}();\n\nexports.default = FlvTag;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9qcy9mbHYvZmx2VGFnLmpzPzg1OTgiXSwibmFtZXMiOlsiRmx2VGFnIiwidGFnVHlwZSIsImRhdGFTaXplIiwiVGltZXN0YW1wIiwiU3RyZWFtSUQiLCJib2R5IiwidGltZSIsImFyciIsImkiLCJsZW5ndGgiLCJwdXNoIiwidG9TdHJpbmciLCJwb3AiLCJqb2luIiwicGFyc2VJbnQiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7SUFBcUJBLE07QUFDakIsc0JBQWM7QUFBQTs7QUFDVixhQUFLQyxPQUFMLEdBQWUsQ0FBQyxDQUFoQjtBQUNBLGFBQUtDLFFBQUwsR0FBZ0IsQ0FBQyxDQUFqQjtBQUNBLGFBQUtDLFNBQUwsR0FBaUIsQ0FBQyxDQUFsQjtBQUNBLGFBQUtDLFFBQUwsR0FBZ0IsQ0FBQyxDQUFqQjtBQUNBLGFBQUtDLElBQUwsR0FBWSxDQUFDLENBQWI7QUFDQSxhQUFLQyxJQUFMLEdBQVksQ0FBQyxDQUFiO0FBQ0EsYUFBS0MsR0FBTCxHQUFXLEVBQVg7QUFDSDs7OztrQ0FDUztBQUNOO0FBQ0EsaUJBQUtBLEdBQUwsR0FBVyxFQUFYO0FBQ0EsaUJBQUssSUFBSUMsSUFBSSxDQUFiLEVBQWdCQSxJQUFJLEtBQUtMLFNBQUwsQ0FBZU0sTUFBbkMsRUFBMkNELEdBQTNDLEVBQWdEO0FBQzVDLHFCQUFLRCxHQUFMLENBQVNHLElBQVQsQ0FBZSxLQUFLUCxTQUFMLENBQWVLLENBQWYsRUFBa0JHLFFBQWxCLENBQTJCLEVBQTNCLEVBQStCRixNQUEvQixJQUF5QyxDQUF6QyxHQUE2QyxNQUFNLEtBQUtOLFNBQUwsQ0FBZUssQ0FBZixFQUFrQkcsUUFBbEIsQ0FBMkIsRUFBM0IsQ0FBbkQsR0FBb0YsS0FBS1IsU0FBTCxDQUFlSyxDQUFmLEVBQWtCRyxRQUFsQixDQUEyQixFQUEzQixDQUFuRztBQUNIO0FBQ0QsaUJBQUtKLEdBQUwsQ0FBU0ssR0FBVDtBQUNBLGdCQUFJTixPQUFPLEtBQUtDLEdBQUwsQ0FBU00sSUFBVCxDQUFjLEVBQWQsQ0FBWDtBQUNBLGlCQUFLUCxJQUFMLEdBQVlRLFNBQVNSLElBQVQsRUFBZSxFQUFmLENBQVo7QUFDQSxtQkFBT1EsU0FBU1IsSUFBVCxFQUFlLEVBQWYsQ0FBUDtBQUNIOzs7Ozs7a0JBcEJnQk4sTSIsImZpbGUiOiI2LmpzIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRmx2VGFnIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy50YWdUeXBlID0gLTE7XG4gICAgICAgIHRoaXMuZGF0YVNpemUgPSAtMTtcbiAgICAgICAgdGhpcy5UaW1lc3RhbXAgPSAtMTtcbiAgICAgICAgdGhpcy5TdHJlYW1JRCA9IC0xO1xuICAgICAgICB0aGlzLmJvZHkgPSAtMTtcbiAgICAgICAgdGhpcy50aW1lID0gLTE7XG4gICAgICAgIHRoaXMuYXJyID0gW107XG4gICAgfVxuICAgIGdldFRpbWUoKSB7XG4gICAgICAgIC8vIHRoaXMuVGltZXN0YW1wLnBvcCgpO1xuICAgICAgICB0aGlzLmFyciA9IFtdO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuVGltZXN0YW1wLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB0aGlzLmFyci5wdXNoKCh0aGlzLlRpbWVzdGFtcFtpXS50b1N0cmluZygxNikubGVuZ3RoID09IDEgPyBcIjBcIiArIHRoaXMuVGltZXN0YW1wW2ldLnRvU3RyaW5nKDE2KSA6IHRoaXMuVGltZXN0YW1wW2ldLnRvU3RyaW5nKDE2KSkpXG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5hcnIucG9wKCk7XG4gICAgICAgIGxldCB0aW1lID0gdGhpcy5hcnIuam9pbignJyk7XG4gICAgICAgIHRoaXMudGltZSA9IHBhcnNlSW50KHRpbWUsIDE2KTtcbiAgICAgICAgcmV0dXJuIHBhcnNlSW50KHRpbWUsIDE2KTtcbiAgICB9XG59XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vanMvZmx2L2ZsdlRhZy5qcyJdLCJzb3VyY2VSb290IjoiIn0=");

/***/ }),
/* 7 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _decodeUTF = __webpack_require__(3);\n\nvar _decodeUTF2 = _interopRequireDefault(_decodeUTF);\n\nvar _spsParser = __webpack_require__(0);\n\nvar _spsParser2 = _interopRequireDefault(_spsParser);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar le = function () {\n    var buf = new ArrayBuffer(2);\n    new DataView(buf).setInt16(0, 256, true); // little-endian write\n    return new Int16Array(buf)[0] === 256; // platform-spec read, if equal then LE\n}();\n\nvar flvDemux = function () {\n    function flvDemux() {\n        _classCallCheck(this, flvDemux);\n    }\n\n    _createClass(flvDemux, null, [{\n        key: 'parseObject',\n        value: function parseObject(arrayBuffer, dataOffset, dataSize) {\n\n            var name = flvDemux.parseString(arrayBuffer, dataOffset, dataSize);\n            var value = flvDemux.parseScript(arrayBuffer, dataOffset + name.size);\n            var isObjectEnd = value.objectEnd;\n\n            return {\n                data: {\n                    name: name.data,\n                    value: value.data\n                },\n                size: value.size,\n                objectEnd: isObjectEnd\n            };\n        }\n    }, {\n        key: 'parseVariable',\n        value: function parseVariable(arrayBuffer, dataOffset, dataSize) {\n            return flvDemux.parseObject(arrayBuffer, dataOffset, dataSize);\n        }\n    }, {\n        key: 'parseLongString',\n        value: function parseLongString(arrayBuffer, dataOffset, dataSize) {\n            if (dataSize < 4) {\n                throw new IllegalStateException('Data not enough when parse LongString');\n            }\n            var v = new DataView(arrayBuffer, dataOffset);\n            var length = v.getUint32(0, !le);\n\n            var str = void 0;\n            if (length > 0) {\n                str = (0, _decodeUTF2.default)(new Uint8Array(arrayBuffer, dataOffset + 4, length));\n            } else {\n                str = '';\n            }\n\n            return {\n                data: str,\n                size: 4 + length\n            };\n        }\n    }, {\n        key: 'parseDate',\n        value: function parseDate(arrayBuffer, dataOffset, dataSize) {\n            if (dataSize < 10) {\n                throw new IllegalStateException('Data size invalid when parse Date');\n            }\n            var v = new DataView(arrayBuffer, dataOffset);\n            var timestamp = v.getFloat64(0, !le);\n            var localTimeOffset = v.getInt16(8, !le);\n            timestamp += localTimeOffset * 60 * 1000; // get UTC time\n\n            return {\n                data: new Date(timestamp),\n                size: 8 + 2\n            };\n        }\n    }, {\n        key: 'parseString',\n        value: function parseString(arrayBuffer, dataOffset, dataSize) {\n            var v = new DataView(arrayBuffer, dataOffset);\n            var length = v.getUint16(0, !le);\n            var str = void 0;\n            if (length > 0) {\n                str = (0, _decodeUTF2.default)(new Uint8Array(arrayBuffer, dataOffset + 2, length));\n            } else {\n                str = '';\n            }\n            return {\n                data: str,\n                size: 2 + length\n            };\n        }\n\n        /**\n         * 解析metadata\n         */\n\n    }, {\n        key: 'parseMetadata',\n        value: function parseMetadata(arr) {\n            var name = flvDemux.parseScript(arr, 0);\n            var value = flvDemux.parseScript(arr, name.size, arr.length - name.size);\n            // return {}\n            var data = {};\n            data[name.data] = value.data;\n            return data;\n        }\n    }, {\n        key: 'parseScript',\n        value: function parseScript(arr, offset, dataSize) {\n            var dataOffset = offset;\n            var object = {};\n            var uint8 = new Uint8Array(arr);\n            var buffer = uint8.buffer;\n            var dv = new DataView(buffer, 0, dataSize);\n            var value = null;\n\n            var type = dv.getUint8(dataOffset);\n            dataOffset += 1;\n            switch (type) {\n                case 0:\n                    // Number(Double) type\n                    value = dv.getFloat64(dataOffset, !le);\n                    dataOffset += 8;\n                    break;\n                case 1:\n                    {\n                        // Boolean type\n                        var b = dv.getUint8(dataOffset);\n                        value = b ? true : false;\n                        dataOffset += 1;\n                        break;\n                    }\n                case 2:\n                    {\n                        // String type\n                        // dataOffset += 1;\n                        var amfstr = flvDemux.parseString(buffer, dataOffset);\n                        value = amfstr.data;\n                        dataOffset += amfstr.size;\n                        break;\n                    }\n                case 3:\n\n                    {\n                        // Object(s) type\n                        value = {};\n                        var terminal = 0; // workaround for malformed Objects which has missing ScriptDataObjectEnd\n                        if ((dv.getUint32(dataSize - 4, !le) & 0x00FFFFFF) === 9) {\n                            terminal = 3;\n                        }\n                        while (offset < dataSize - 4) {\n                            // 4 === type(UI8) + ScriptDataObjectEnd(UI24)\n                            var amfobj = flvDemux.parseObject(buffer, dataOffset, dataSize - offset - terminal);\n\n                            if (amfobj.objectEnd) break;\n                            value[amfobj.data.name] = amfobj.data.value;\n                            dataOffset += amfobj.size;\n                        }\n                        if (offset <= dataSize - 3) {\n                            var marker = v.getUint32(dataOffset - 1, !le) & 0x00FFFFFF;\n                            if (marker === 9) {\n                                dataOffset += 3;\n                            }\n                        }\n                        break;\n                    }\n                case 8:\n                    {\n                        // ECMA array type (Mixed array)\n                        value = {};\n                        // dataOffset += 1;\n                        dataOffset += 4; // ECMAArrayLength(UI32)\n                        var _terminal = 0; // workaround for malformed MixedArrays which has missing ScriptDataObjectEnd\n                        if ((dv.getUint32(dataSize - 4, !le) & 0x00FFFFFF) === 9) {\n                            _terminal = 3;\n                        }\n                        while (dataOffset < dataSize - 8) {\n                            // 8 === type(UI8) + ECMAArrayLength(UI32) + ScriptDataVariableEnd(UI24)\n                            var amfvar = flvDemux.parseVariable(buffer, dataOffset);\n\n                            if (amfvar.objectEnd) break;\n                            value[amfvar.data.name] = amfvar.data.value;\n                            dataOffset = amfvar.size;\n                        }\n                        if (dataOffset <= dataSize - 3) {\n                            var _marker = dv.getUint32(dataOffset - 1, !le) & 0x00FFFFFF;\n                            if (_marker === 9) {\n                                dataOffset += 3;\n                            }\n                        }\n                        break;\n                    }\n                case 9:\n                    // ScriptDataObjectEnd\n                    value = undefined;\n                    dataOffset = 1;\n                    objectEnd = true;\n                    break;\n                case 10:\n                    {\n                        // Strict array type\n                        // ScriptDataValue[n]. NOTE: according to video_file_format_spec_v10_1.pdf\n                        value = [];\n                        var strictArrayLength = dv.getUint32(dataOffset, !le);\n                        dataOffset += 4;\n                        for (var i = 0; i < strictArrayLength; i++) {\n                            var val = flvDemux.parseScript(buffer, dataOffset);\n                            value.push(val.data);\n                            dataOffset = val.size;\n                        }\n                        break;\n                    }\n                case 11:\n                    {\n                        // Date type\n                        var date = flvDemux.parseDate(buffer, dataOffset + 1, dataSize - 1);\n                        value = date.data;\n                        dataOffset += date.size;\n                        break;\n                    }\n                case 12:\n                    {\n                        // Long string type\n                        var amfLongStr = flvDemux.parseString(buffer, dataOffset + 1, dataSize - 1);\n                        value = amfLongStr.data;\n                        dataOffset += amfLongStr.size;\n                        break;\n                    }\n                default:\n                    // ignore and skip\n                    dataOffset = dataSize;\n                    console.log('AMF', 'Unsupported AMF value type ' + type);\n            }\n            return {\n                data: value,\n                size: dataOffset\n            };\n        }\n    }]);\n\n    return flvDemux;\n}();\n\nexports.default = flvDemux;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9qcy9mbHYvZmx2ZGVtdXguanM/YjdhYSJdLCJuYW1lcyI6WyJsZSIsImJ1ZiIsIkFycmF5QnVmZmVyIiwiRGF0YVZpZXciLCJzZXRJbnQxNiIsIkludDE2QXJyYXkiLCJmbHZEZW11eCIsImFycmF5QnVmZmVyIiwiZGF0YU9mZnNldCIsImRhdGFTaXplIiwibmFtZSIsInBhcnNlU3RyaW5nIiwidmFsdWUiLCJwYXJzZVNjcmlwdCIsInNpemUiLCJpc09iamVjdEVuZCIsIm9iamVjdEVuZCIsImRhdGEiLCJwYXJzZU9iamVjdCIsIklsbGVnYWxTdGF0ZUV4Y2VwdGlvbiIsInYiLCJsZW5ndGgiLCJnZXRVaW50MzIiLCJzdHIiLCJVaW50OEFycmF5IiwidGltZXN0YW1wIiwiZ2V0RmxvYXQ2NCIsImxvY2FsVGltZU9mZnNldCIsImdldEludDE2IiwiRGF0ZSIsImdldFVpbnQxNiIsImFyciIsIm9mZnNldCIsIm9iamVjdCIsInVpbnQ4IiwiYnVmZmVyIiwiZHYiLCJ0eXBlIiwiZ2V0VWludDgiLCJiIiwiYW1mc3RyIiwidGVybWluYWwiLCJhbWZvYmoiLCJtYXJrZXIiLCJhbWZ2YXIiLCJwYXJzZVZhcmlhYmxlIiwidW5kZWZpbmVkIiwic3RyaWN0QXJyYXlMZW5ndGgiLCJpIiwidmFsIiwicHVzaCIsImRhdGUiLCJwYXJzZURhdGUiLCJhbWZMb25nU3RyIiwiY29uc29sZSIsImxvZyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQTs7OztBQUNBOzs7Ozs7OztBQUNBLElBQUlBLEtBQU0sWUFBVztBQUNqQixRQUFJQyxNQUFNLElBQUlDLFdBQUosQ0FBZ0IsQ0FBaEIsQ0FBVjtBQUNDLFFBQUlDLFFBQUosQ0FBYUYsR0FBYixDQUFELENBQW9CRyxRQUFwQixDQUE2QixDQUE3QixFQUFnQyxHQUFoQyxFQUFxQyxJQUFyQyxFQUZpQixDQUUyQjtBQUM1QyxXQUFRLElBQUlDLFVBQUosQ0FBZUosR0FBZixDQUFELENBQXNCLENBQXRCLE1B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SUFBakI7QUFDSDtBQUNEO0FBQ0g7QUFDTCxxQkFBSyxFQUFMO0FBQ0k7QUFBRTtBQUNFLDRCQUFJcUMsT0FBTzdDLFNBQVM4QyxTQUFULENBQW1CakIsTUFBbkIsRUFBMkIzQixhQUFhLENBQXhDLEVBQTJDQyxXQUFXLENBQXRELENBQVg7QUFDQUcsZ0NBQVF1QyxLQUFLbEMsSUFBYjtBQUNBVCxzQ0FBYzJDLEtBQUtyQyxJQUFuQjtBQUNBO0FBQ0g7QUFDTCxxQkFBSyxFQUFMO0FBQ0k7QUFBRTtBQUNFLDRCQUFJdUMsYUFBYS9DLFNBQVNLLFdBQVQsQ0FBcUJ3QixNQUFyQixFQUE2QjNCLGFBQWEsQ0FBMUMsRUFBNkNDLFdBQVcsQ0FBeEQsQ0FBakI7QUFDQUcsZ0NBQVF5QyxXQUFXcEMsSUFBbkI7QUFDQVQsc0NBQWM2QyxXQUFXdkMsSUFBekI7QUFDQTtBQUNIO0FBQ0w7QUFDSTtBQUNBTixpQ0FBYUMsUUFBYjtBQUNBNkMsNEJBQVFDLEdBQVIsQ0FBWSxLQUFaLEVBQW1CLGdDQUFnQ2xCLElBQW5EO0FBeEdSO0FBMEdBLG1CQUFPO0FBQ0hwQixzQkFBTUwsS0FESDtBQUVIRSxzQkFBTU47QUFGSCxhQUFQO0FBSUg7Ozs7OztrQkEvTWdCRixRIiwiZmlsZSI6IjcuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZGVjb2RlVVRGOCBmcm9tICcuLi9kZWNvZGVVVEY4JztcbmltcG9ydCBTUFNQYXJzZXIgZnJvbSAnLi9zcHMtcGFyc2VyJ1xubGV0IGxlID0gKGZ1bmN0aW9uKCkge1xuICAgIGxldCBidWYgPSBuZXcgQXJyYXlCdWZmZXIoMik7XG4gICAgKG5ldyBEYXRhVmlldyhidWYpKS5zZXRJbnQxNigwLCAyNTYsIHRydWUpOyAvLyBsaXR0bGUtZW5kaWFuIHdyaXRlXG4gICAgcmV0dXJuIChuZXcgSW50MTZBcnJheShidWYpKVswXSA9PT0gMjU2OyAvLyBwbGF0Zm9ybS1zcGVjIHJlYWQsIGlmIGVxdWFsIHRoZW4gTEVcbn0pKCk7XG5leHBvcnQgZGVmYXVsdCBjbGFzcyBmbHZEZW11eCB7XG5cbiAgICBjb25zdHJ1Y3RvcigpIHtcblxuICAgIH1cbiAgICBzdGF0aWMgcGFyc2VPYmplY3QoYXJyYXlCdWZmZXIsIGRhdGFPZmZzZXQsIGRhdGFTaXplKSB7XG5cbiAgICAgICAgbGV0IG5hbWUgPSBmbHZEZW11eC5wYXJzZVN0cmluZyhhcnJheUJ1ZmZlciwgZGF0YU9mZnNldCwgZGF0YVNpemUpO1xuICAgICAgICBsZXQgdmFsdWUgPSBmbHZEZW11eC5wYXJzZVNjcmlwdChhcnJheUJ1ZmZlciwgZGF0YU9mZnNldCArIG5hbWUuc2l6ZSk7XG4gICAgICAgIGxldCBpc09iamVjdEVuZCA9IHZhbHVlLm9iamVjdEVuZDtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgIG5hbWU6IG5hbWUuZGF0YSxcbiAgICAgICAgICAgICAgICB2YWx1ZTogdmFsdWUuZGF0YVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNpemU6IHZhbHVlLnNpemUsXG4gICAgICAgICAgICBvYmplY3RFbmQ6IGlzT2JqZWN0RW5kXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgc3RhdGljIHBhcnNlVmFyaWFibGUoYXJyYXlCdWZmZXIsIGRhdGFPZmZzZXQsIGRhdGFTaXplKSB7XG4gICAgICAgIHJldHVybiBmbHZEZW11eC5wYXJzZU9iamVjdChhcnJheUJ1ZmZlciwgZGF0YU9mZnNldCwgZGF0YVNpemUpO1xuICAgIH1cbiAgICBzdGF0aWMgcGFyc2VMb25nU3RyaW5nKGFycmF5QnVmZmVyLCBkYXRhT2Zmc2V0LCBkYXRhU2l6ZSkge1xuICAgICAgICBpZiAoZGF0YVNpemUgPCA0KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbFN0YXRlRXhjZXB0aW9uKCdEYXRhIG5vdCBlbm91Z2ggd2hlbiBwYXJzZSBMb25nU3RyaW5nJyk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHYgPSBuZXcgRGF0YVZpZXcoYXJyYXlCdWZmZXIsIGRhdGFPZmZzZXQpO1xuICAgICAgICBsZXQgbGVuZ3RoID0gdi5nZXRVaW50MzIoMCwgIWxlKTtcblxuICAgICAgICBsZXQgc3RyO1xuICAgICAgICBpZiAobGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgc3RyID0gZGVjb2RlVVRGOChuZXcgVWludDhBcnJheShhcnJheUJ1ZmZlciwgZGF0YU9mZnNldCArIDQsIGxlbmd0aCkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc3RyID0gJyc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZGF0YTogc3RyLFxuICAgICAgICAgICAgc2l6ZTogNCArIGxlbmd0aFxuICAgICAgICB9O1xuICAgIH1cbiAgICBzdGF0aWMgcGFyc2VEYXRlKGFycmF5QnVmZmVyLCBkYXRhT2Zmc2V0LCBkYXRhU2l6ZSkge1xuICAgICAgICBpZiAoZGF0YVNpemUgPCAxMCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxTdGF0ZUV4Y2VwdGlvbignRGF0YSBzaXplIGludmFsaWQgd2hlbiBwYXJzZSBEYXRlJyk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHYgPSBuZXcgRGF0YVZpZXcoYXJyYXlCdWZmZXIsIGRhdGFPZmZzZXQpO1xuICAgICAgICBsZXQgdGltZXN0YW1wID0gdi5nZXRGbG9hdDY0KDAsICFsZSk7XG4gICAgICAgIGxldCBsb2NhbFRpbWVPZmZzZXQgPSB2LmdldEludDE2KDgsICFsZSk7XG4gICAgICAgIHRpbWVzdGFtcCArPSBsb2NhbFRpbWVPZmZzZXQgKiA2MCAqIDEwMDA7IC8vIGdldCBVVEMgdGltZVxuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBkYXRhOiBuZXcgRGF0ZSh0aW1lc3RhbXApLFxuICAgICAgICAgICAgc2l6ZTogOCArIDJcbiAgICAgICAgfTtcbiAgICB9XG4gICAgc3RhdGljIHBhcnNlU3RyaW5nKGFycmF5QnVmZmVyLCBkYXRhT2Zmc2V0LCBkYXRhU2l6ZSkge1xuICAgICAgICBsZXQgdiA9IG5ldyBEYXRhVmlldyhhcnJheUJ1ZmZlciwgZGF0YU9mZnNldCk7XG4gICAgICAgIGxldCBsZW5ndGggPSB2LmdldFVpbnQxNigwLCAhbGUpO1xuICAgICAgICBsZXQgc3RyO1xuICAgICAgICBpZiAobGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgc3RyID0gZGVjb2RlVVRGOChuZXcgVWludDhBcnJheShhcnJheUJ1ZmZlciwgZGF0YU9mZnNldCArIDIsIGxlbmd0aCkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc3RyID0gJyc7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGRhdGE6IHN0cixcbiAgICAgICAgICAgIHNpemU6IDIgKyBsZW5ndGhcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiDop6PmnpBtZXRhZGF0YVxuICAgICAqL1xuICAgIHN0YXRpYyBwYXJzZU1ldGFkYXRhKGFycikge1xuICAgICAgICBsZXQgbmFtZSA9IGZsdkRlbXV4LnBhcnNlU2NyaXB0KGFyciwgMCk7XG4gICAgICAgIGxldCB2YWx1ZSA9IGZsdkRlbXV4LnBhcnNlU2NyaXB0KGFyciwgbmFtZS5zaXplLCBhcnIubGVuZ3RoIC0gbmFtZS5zaXplKTtcbiAgICAgICAgLy8gcmV0dXJuIHt9XG4gICAgICAgIGxldCBkYXRhID0ge307XG4gICAgICAgIGRhdGFbbmFtZS5kYXRhXSA9IHZhbHVlLmRhdGE7XG4gICAgICAgIHJldHVybiBkYXRhO1xuICAgIH1cblxuXG5cblxuICAgIHN0YXRpYyBwYXJzZVNjcmlwdChhcnIsIG9mZnNldCwgZGF0YVNpemUpIHtcbiAgICAgICAgbGV0IGRhdGFPZmZzZXQgPSBvZmZzZXQ7XG4gICAgICAgIGxldCBvYmplY3QgPSB7fTtcbiAgICAgICAgbGV0IHVpbnQ4ID0gbmV3IFVpbnQ4QXJyYXkoYXJyKTtcbiAgICAgICAgbGV0IGJ1ZmZlciA9IHVpbnQ4LmJ1ZmZlcjtcbiAgICAgICAgbGV0IGR2ID0gbmV3IERhdGFWaWV3KGJ1ZmZlciwgMCwgZGF0YVNpemUpO1xuICAgICAgICBsZXQgdmFsdWUgPSBudWxsO1xuXG4gICAgICAgIGxldCB0eXBlID0gKGR2LmdldFVpbnQ4KGRhdGFPZmZzZXQpKTtcbiAgICAgICAgZGF0YU9mZnNldCArPSAxO1xuICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgMDogLy8gTnVtYmVyKERvdWJsZSkgdHlwZVxuICAgICAgICAgICAgICAgIHZhbHVlID0gZHYuZ2V0RmxvYXQ2NChkYXRhT2Zmc2V0LCAhbGUpO1xuICAgICAgICAgICAgICAgIGRhdGFPZmZzZXQgKz0gODtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICB7IC8vIEJvb2xlYW4gdHlwZVxuICAgICAgICAgICAgICAgICAgICBsZXQgYiA9IGR2LmdldFVpbnQ4KGRhdGFPZmZzZXQpO1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IGIgPyB0cnVlIDogZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIGRhdGFPZmZzZXQgKz0gMTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgIHsgLy8gU3RyaW5nIHR5cGVcbiAgICAgICAgICAgICAgICAgICAgLy8gZGF0YU9mZnNldCArPSAxO1xuICAgICAgICAgICAgICAgICAgICBsZXQgYW1mc3RyID0gZmx2RGVtdXgucGFyc2VTdHJpbmcoYnVmZmVyLCBkYXRhT2Zmc2V0KTtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBhbWZzdHIuZGF0YTtcbiAgICAgICAgICAgICAgICAgICAgZGF0YU9mZnNldCArPSBhbWZzdHIuc2l6ZTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSAzOlxuXG4gICAgICAgICAgICAgICAgeyAvLyBPYmplY3QocykgdHlwZVxuICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IHt9O1xuICAgICAgICAgICAgICAgICAgICBsZXQgdGVybWluYWwgPSAwOyAvLyB3b3JrYXJvdW5kIGZvciBtYWxmb3JtZWQgT2JqZWN0cyB3aGljaCBoYXMgbWlzc2luZyBTY3JpcHREYXRhT2JqZWN0RW5kXG4gICAgICAgICAgICAgICAgICAgIGlmICgoZHYuZ2V0VWludDMyKGRhdGFTaXplIC0gNCwgIWxlKSAmIDB4MDBGRkZGRkYpID09PSA5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXJtaW5hbCA9IDM7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKG9mZnNldCA8IGRhdGFTaXplIC0gNCkgeyAvLyA0ID09PSB0eXBlKFVJOCkgKyBTY3JpcHREYXRhT2JqZWN0RW5kKFVJMjQpXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgYW1mb2JqID0gZmx2RGVtdXgucGFyc2VPYmplY3QoYnVmZmVyLCBkYXRhT2Zmc2V0LCBkYXRhU2l6ZSAtIG9mZnNldCAtIHRlcm1pbmFsKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFtZm9iai5vYmplY3RFbmQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZVthbWZvYmouZGF0YS5uYW1lXSA9IGFtZm9iai5kYXRhLnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YU9mZnNldCArPSBhbWZvYmouc2l6ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAob2Zmc2V0IDw9IGRhdGFTaXplIC0gMykge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG1hcmtlciA9IHYuZ2V0VWludDMyKGRhdGFPZmZzZXQgLSAxLCAhbGUpICYgMHgwMEZGRkZGRjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtYXJrZXIgPT09IDkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhT2Zmc2V0ICs9IDM7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSA4OlxuICAgICAgICAgICAgICAgIHsgLy8gRUNNQSBhcnJheSB0eXBlIChNaXhlZCBhcnJheSlcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgLy8gZGF0YU9mZnNldCArPSAxO1xuICAgICAgICAgICAgICAgICAgICBkYXRhT2Zmc2V0ICs9IDQ7IC8vIEVDTUFBcnJheUxlbmd0aChVSTMyKVxuICAgICAgICAgICAgICAgICAgICBsZXQgdGVybWluYWwgPSAwOyAvLyB3b3JrYXJvdW5kIGZvciBtYWxmb3JtZWQgTWl4ZWRBcnJheXMgd2hpY2ggaGFzIG1pc3NpbmcgU2NyaXB0RGF0YU9iamVjdEVuZFxuICAgICAgICAgICAgICAgICAgICBpZiAoKGR2LmdldFVpbnQzMihkYXRhU2l6ZSAtIDQsICFsZSkgJiAweDAwRkZGRkZGKSA9PT0gOSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGVybWluYWwgPSAzO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChkYXRhT2Zmc2V0IDwgZGF0YVNpemUgLSA4KSB7IC8vIDggPT09IHR5cGUoVUk4KSArIEVDTUFBcnJheUxlbmd0aChVSTMyKSArIFNjcmlwdERhdGFWYXJpYWJsZUVuZChVSTI0KVxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGFtZnZhciA9IGZsdkRlbXV4LnBhcnNlVmFyaWFibGUoYnVmZmVyLCBkYXRhT2Zmc2V0KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFtZnZhci5vYmplY3RFbmQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZVthbWZ2YXIuZGF0YS5uYW1lXSA9IGFtZnZhci5kYXRhLnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YU9mZnNldCA9IGFtZnZhci5zaXplO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChkYXRhT2Zmc2V0IDw9IGRhdGFTaXplIC0gMykge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG1hcmtlciA9IGR2LmdldFVpbnQzMihkYXRhT2Zmc2V0IC0gMSwgIWxlKSAmIDB4MDBGRkZGRkY7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobWFya2VyID09PSA5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YU9mZnNldCArPSAzO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgOTogLy8gU2NyaXB0RGF0YU9iamVjdEVuZFxuICAgICAgICAgICAgICAgIHZhbHVlID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIGRhdGFPZmZzZXQgPSAxO1xuICAgICAgICAgICAgICAgIG9iamVjdEVuZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDEwOlxuICAgICAgICAgICAgICAgIHsgLy8gU3RyaWN0IGFycmF5IHR5cGVcbiAgICAgICAgICAgICAgICAgICAgLy8gU2NyaXB0RGF0YVZhbHVlW25dLiBOT1RFOiBhY2NvcmRpbmcgdG8gdmlkZW9fZmlsZV9mb3JtYXRfc3BlY192MTBfMS5wZGZcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHN0cmljdEFycmF5TGVuZ3RoID0gZHYuZ2V0VWludDMyKGRhdGFPZmZzZXQsICFsZSk7XG4gICAgICAgICAgICAgICAgICAgIGRhdGFPZmZzZXQgKz0gNDtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdHJpY3RBcnJheUxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgdmFsID0gZmx2RGVtdXgucGFyc2VTY3JpcHQoYnVmZmVyLCBkYXRhT2Zmc2V0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlLnB1c2godmFsLmRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YU9mZnNldCA9IHZhbC5zaXplO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgMTE6XG4gICAgICAgICAgICAgICAgeyAvLyBEYXRlIHR5cGVcbiAgICAgICAgICAgICAgICAgICAgbGV0IGRhdGUgPSBmbHZEZW11eC5wYXJzZURhdGUoYnVmZmVyLCBkYXRhT2Zmc2V0ICsgMSwgZGF0YVNpemUgLSAxKTtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBkYXRlLmRhdGE7XG4gICAgICAgICAgICAgICAgICAgIGRhdGFPZmZzZXQgKz0gZGF0ZS5zaXplO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlIDEyOlxuICAgICAgICAgICAgICAgIHsgLy8gTG9uZyBzdHJpbmcgdHlwZVxuICAgICAgICAgICAgICAgICAgICBsZXQgYW1mTG9uZ1N0ciA9IGZsdkRlbXV4LnBhcnNlU3RyaW5nKGJ1ZmZlciwgZGF0YU9mZnNldCArIDEsIGRhdGFTaXplIC0gMSk7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gYW1mTG9uZ1N0ci5kYXRhO1xuICAgICAgICAgICAgICAgICAgICBkYXRhT2Zmc2V0ICs9IGFtZkxvbmdTdHIuc2l6ZTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAvLyBpZ25vcmUgYW5kIHNraXBcbiAgICAgICAgICAgICAgICBkYXRhT2Zmc2V0ID0gZGF0YVNpemU7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0FNRicsICdVbnN1cHBvcnRlZCBBTUYgdmFsdWUgdHlwZSAnICsgdHlwZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGRhdGE6IHZhbHVlLFxuICAgICAgICAgICAgc2l6ZTogZGF0YU9mZnNldCxcbiAgICAgICAgfTtcbiAgICB9XG59XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vanMvZmx2L2ZsdmRlbXV4LmpzIl0sInNvdXJjZVJvb3QiOiIifQ==");

/***/ }),
/* 8 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/*\n * Copyright (C) 2016 Bilibili. All Rights Reserved.\n *\n * @author zheng qian <xqq@xqq.im>\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nvar MediaInfo = function () {\n    function MediaInfo() {\n        _classCallCheck(this, MediaInfo);\n\n        this.mimeType = null;\n        this.duration = null;\n\n        this.hasAudio = null;\n        this.hasVideo = null;\n        this.audioCodec = null;\n        this.videoCodec = null;\n        this.audioDataRate = null;\n        this.videoDataRate = null;\n\n        this.audioSampleRate = null;\n        this.audioChannelCount = null;\n\n        this.width = null;\n        this.height = null;\n        this.fps = null;\n        this.profile = null;\n        this.level = null;\n        this.chromaFormat = null;\n        this.sarNum = null;\n        this.sarDen = null;\n\n        this.metadata = null;\n        this.segments = null; // MediaInfo[]\n        this.segmentCount = null;\n        this.hasKeyframesIndex = null;\n        this.keyframesIndex = null;\n    }\n\n    _createClass(MediaInfo, [{\n        key: \"isComplete\",\n        value: function isComplete() {\n            var audioInfoComplete = this.hasAudio === false || this.hasAudio === true && this.audioCodec != null && this.audioSampleRate != null && this.audioChannelCount != null;\n\n            var videoInfoComplete = this.hasVideo === false || this.hasVideo === true && this.videoCodec != null && this.width != null && this.height != null && this.fps != null && this.profile != null && this.level != null && this.chromaFormat != null && this.sarNum != null && this.sarDen != null;\n\n            // keyframesIndex may not be present\n            return this.mimeType != null && this.duration != null && this.metadata != null && this.hasKeyframesIndex != null && audioInfoComplete && videoInfoComplete;\n        }\n    }, {\n        key: \"isSeekable\",\n        value: function isSeekable() {\n            return this.hasKeyframesIndex === true;\n        }\n    }, {\n        key: \"getNearestKeyframe\",\n        value: function getNearestKeyframe(milliseconds) {\n            if (this.keyframesIndex == null) {\n                return null;\n            }\n\n            var table = this.keyframesIndex;\n            var keyframeIdx = this._search(table.times, milliseconds);\n\n            return {\n                index: keyframeIdx,\n                milliseconds: table.times[keyframeIdx],\n                fileposition: table.filepositions[keyframeIdx]\n            };\n        }\n    }, {\n        key: \"_search\",\n        value: function _search(list, value) {\n            var idx = 0;\n\n            var last = list.length - 1;\n            var mid = 0;\n            var lbound = 0;\n            var ubound = last;\n\n            if (value < list[0]) {\n                idx = 0;\n                lbound = ubound + 1; // skip search\n            }\n\n            while (lbound <= ubound) {\n                mid = lbound + Math.floor((ubound - lbound) / 2);\n                if (mid === last || value >= list[mid] && value < list[mid + 1]) {\n                    idx = mid;\n                    break;\n                } else if (list[mid] < value) {\n                    lbound = mid + 1;\n                } else {\n                    ubound = mid - 1;\n                }\n            }\n\n            return idx;\n        }\n    }]);\n\n    return MediaInfo;\n}();\n\nexports.default = MediaInfo;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9qcy9mbHYvbWVkaWEtaW5mby5qcz9lYzg5Il0sIm5hbWVzIjpbIk1lZGlhSW5mbyIsIm1pbWVUeXBlIiwiZHVyYXRpb24iLCJoYXNBdWRpbyIsImhhc1ZpZGVvIiwiYXVkaW9Db2RlYyIsInZpZGVvQ29kZWMiLCJhdWRpb0RhdGFSYXRlIiwidmlkZW9EYXRhUmF0ZSIsImF1ZGlvU2FtcGxlUmF0ZSIsImF1ZGlvQ2hhbm5lbENvdW50Iiwid2lkdGgiLCJoZWlnaHQiLCJmcHMiLCJwcm9maWxlIiwibGV2ZWwiLCJjaHJvbWFGb3JtYXQiLCJzYXJOdW0iLCJzYXJEZW4iLCJtZXRhZGF0YSIsInNlZ21lbnRzIiwic2VnbWVudENvdW50IiwiaGFzS2V5ZnJhbWVzSW5kZXgiLCJrZXlmcmFtZXNJbmRleCIsImF1ZGlvSW5mb0NvbXBsZXRlIiwidmlkZW9JbmZvQ29tcGxldGUiLCJtaWxsaXNlY29uZHMiLCJ0YWJsZSIsImtleWZyYW1lSWR4IiwiX3NlYXJjaCIsInRpbWVzIiwiaW5kZXgiLCJmaWxlcG9zaXRpb24iLCJmaWxlcG9zaXRpb25zIiwibGlzdCIsInZhbHVlIiwiaWR4IiwibGFzdCIsImxlbmd0aCIsIm1pZCIsImxib3VuZCIsInVib3VuZCIsIk1hdGgiLCJmbG9vciJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7SUFrQk1BLFM7QUFFRix5QkFBYztBQUFBOztBQUNWLGFBQUtDLFFBQUwsR0FBZ0IsSUFBaEI7QUFDQSxhQUFLQyxRQUFMLEdBQWdCLElBQWhCOztBQUVBLGFBQUtDLFFBQUwsR0FBZ0IsSUFBaEI7QUFDQSxhQUFLQyxRQUFMLEdBQWdCLElBQWhCO0FBQ0EsYUFBS0MsVUFBTCxHQUFrQixJQUFsQjtBQUNBLGFBQUtDLFVBQUwsR0FBa0IsSUFBbEI7QUFDQSxhQUFLQyxhQUFMLEdBQXFCLElBQXJCO0FBQ0EsYUFBS0MsYUFBTCxHQUFxQixJQUFyQjs7QUFFQSxhQUFLQyxlQUFMLEdBQXVCLElBQXZCO0FBQ0EsYUFBS0MsaUJBQUwsR0FBeUIsSUFBekI7O0FBRUEsYUFBS0MsS0FBTCxHQUFhLElBQWI7QUFDQSxhQUFLQyxNQUFMLEdBQWMsSUFBZDtBQUNBLGFBQUtDLEdBQUwsR0FBVyxJQUFYO0FBQ0EsYUFBS0MsT0FBTCxHQUFlLElBQWY7QUFDQSxhQUFLQyxLQUFMLEdBQWEsSUFBYjtBQUNBLGFBQUtDLFlBQUwsR0FBb0IsSUFBcEI7QUFDQSxhQUFLQyxNQUFMLEdBQWMsSUFBZDtBQUNBLGFBQUtDLE1BQUwsR0FBYyxJQUFkOztBQUVBLGFBQUtDLFFBQUwsR0FBZ0IsSUFBaEI7QUFDQSxhQUFLQyxRQUFMLEdBQWdCLElBQWhCLENBeEJVLENBd0JhO0FBQ3ZCLGFBQUtDLFlBQUwsR0FBb0IsSUFBcEI7QUFDQSxhQUFLQyxpQkFBTCxHQUF5QixJQUF6QjtBQUNBLGFBQUtDLGNBQUwsR0FBc0IsSUFBdEI7QUFDSDs7OztxQ0FFWTtBQUNULGdCQUFJQyxvQkFBcUIsS0FBS3JCLFFBQUwsS0FBa0IsS0FBbkIsSUFDQyxLQUFLQSxRQUFMLEtBQWtCLElBQWxCLElBQ0EsS0FBS0UsVUFBTCxJQUFtQixJQURuQixJQUVBLEtBQUtJLGVBQUwsSUFBd0IsSUFGeEIsSUFHQSxLQUFLQyxpQkFBTCxJQUEwQixJQUpuRDs7QUFNQSxnQkFBSWUsb0JBQXFCLEtBQUtyQixRQUFMLEtBQWtCLEtBQW5CLElBQ0MsS0FBS0EsUUFBTCxLQUFrQixJQUFsQixJQUNBLEtBQUtFLFVBQUwsSUFBbUIsSUFEbkIsSUFFQSxLQUFLSyxLQUFMLElBQWMsSUFGZCxJQUdBLEtBQUtDLE1BQUwsSUFBZSxJQUhmLElBSUEsS0FBS0MsR0FBTCxJQUFZLElBSlosSUFLQSxLQUFLQyxPQUFMLElBQWdCLElBTGhCLElBTUEsS0FBS0MsS0FBTCxJQUFjLElBTmQsSUFPQSxLQUFLQyxZQUFMLElBQXFCLElBUHJCLElBUUEsS0FBS0MsTUFBTCxJQUFlLElBUmYsSUFTQSxLQUFLQyxNQUFMLElBQWUsSUFWeEM7O0FBWUE7QUFDQSxtQkFBTyxLQUFLakIsUUFBTCxJQUFpQixJQUFqQixJQUNBLEtBQUtDLFFBQUwsSUFBaUIsSUFEakIsSUFFQSxLQUFLaUIsUUFBTCxJQUFpQixJQUZqQixJQUdBLEtBQUtHLGlCQUFMLElBQTBCLElBSDFCLElBSUFFLGlCQUpBLElBS0FDLGlCQUxQO0FBTUg7OztxQ0FFWTtBQUNULG1CQUFPLEtBQUtILGlCQUFMLEtBQTJCLElBQWxDO0FBQ0g7OzsyQ0FFa0JJLFksRUFBYztBQUM3QixnQkFBSSxLQUFLSCxjQUFMLElBQXVCLElBQTNCLEVBQWlDO0FBQzdCLHVCQUFPLElBQVA7QUFDSDs7QUFFRCxnQkFBSUksUUFBUSxLQUFLSixjQUFqQjtBQUNBLGdCQUFJSyxjQUFjLEtBQUtDLE9BQUwsQ0FBYUYsTUFBTUcsS0FBbkIsRUFBMEJKLFlBQTFCLENBQWxCOztBQUVBLG1CQUFPO0FBQ0hLLHVCQUFPSCxXQURKO0FBRUhGLDhCQUFjQyxNQUFNRyxLQUFOLENBQVlGLFdBQVosQ0FGWDtBQUdISSw4QkFBY0wsTUFBTU0sYUFBTixDQUFvQkwsV0FBcEI7QUFIWCxhQUFQO0FBS0g7OztnQ0FFT00sSSxFQUFNQyxLLEVBQU87QUFDakIsZ0JBQUlDLE1BQU0sQ0FBVjs7QUFFQSxnQkFBSUMsT0FBT0gsS0FBS0ksTUFBTCxHQUFjLENBQXpCO0FBQ0EsZ0JBQUlDLE1BQU0sQ0FBVjtBQUNBLGdCQUFJQyxTQUFTLENBQWI7QUFDQSxnQkFBSUMsU0FBU0osSUFBYjs7QUFFQSxnQkFBSUYsUUFBUUQsS0FBSyxDQUFMLENBQVosRUFBcUI7QUFDakJFLHNCQUFNLENBQU47QUFDQUkseUJBQVNDLFNBQVMsQ0FBbEIsQ0FGaUIsQ0FFSztBQUN6Qjs7QUFFRCxtQkFBT0QsVUFBVUMsTUFBakIsRUFBeUI7QUFDckJGLHNCQUFNQyxTQUFTRSxLQUFLQyxLQUFMLENBQVcsQ0FBQ0YsU0FBU0QsTUFBVixJQUFvQixDQUEvQixDQUFmO0FBQ0Esb0JBQUlELFFBQVFGLElBQVIsSUFBaUJGLFNBQVNELEtBQUtLLEdBQUwsQ0FBVCxJQUFzQkosUUFBUUQsS0FBS0ssTUFBTSxDQUFYLENBQW5ELEVBQW1FO0FBQy9ESCwwQkFBTUcsR0FBTjtBQUNBO0FBQ0gsaUJBSEQsTUFHTyxJQUFJTCxLQUFLSyxHQUFMLElBQVlKLEtBQWhCLEVBQXVCO0FBQzFCSyw2QkFBU0QsTUFBTSxDQUFmO0FBQ0gsaUJBRk0sTUFFQTtBQUNIRSw2QkFBU0YsTUFBTSxDQUFmO0FBQ0g7QUFDSjs7QUFFRCxtQkFBT0gsR0FBUDtBQUNIOzs7Ozs7a0JBSVVwQyxTIiwiZmlsZSI6IjguanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuICogQ29weXJpZ2h0IChDKSAyMDE2IEJpbGliaWxpLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIEBhdXRob3IgemhlbmcgcWlhbiA8eHFxQHhxcS5pbT5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuY2xhc3MgTWVkaWFJbmZvIHtcblxuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLm1pbWVUeXBlID0gbnVsbDtcbiAgICAgICAgdGhpcy5kdXJhdGlvbiA9IG51bGw7XG5cbiAgICAgICAgdGhpcy5oYXNBdWRpbyA9IG51bGw7XG4gICAgICAgIHRoaXMuaGFzVmlkZW8gPSBudWxsO1xuICAgICAgICB0aGlzLmF1ZGlvQ29kZWMgPSBudWxsO1xuICAgICAgICB0aGlzLnZpZGVvQ29kZWMgPSBudWxsO1xuICAgICAgICB0aGlzLmF1ZGlvRGF0YVJhdGUgPSBudWxsO1xuICAgICAgICB0aGlzLnZpZGVvRGF0YVJhdGUgPSBudWxsO1xuXG4gICAgICAgIHRoaXMuYXVkaW9TYW1wbGVSYXRlID0gbnVsbDtcbiAgICAgICAgdGhpcy5hdWRpb0NoYW5uZWxDb3VudCA9IG51bGw7XG5cbiAgICAgICAgdGhpcy53aWR0aCA9IG51bGw7XG4gICAgICAgIHRoaXMuaGVpZ2h0ID0gbnVsbDtcbiAgICAgICAgdGhpcy5mcHMgPSBudWxsO1xuICAgICAgICB0aGlzLnByb2ZpbGUgPSBudWxsO1xuICAgICAgICB0aGlzLmxldmVsID0gbnVsbDtcbiAgICAgICAgdGhpcy5jaHJvbWFGb3JtYXQgPSBudWxsO1xuICAgICAgICB0aGlzLnNhck51bSA9IG51bGw7XG4gICAgICAgIHRoaXMuc2FyRGVuID0gbnVsbDtcblxuICAgICAgICB0aGlzLm1ldGFkYXRhID0gbnVsbDtcbiAgICAgICAgdGhpcy5zZWdtZW50cyA9IG51bGw7ICAvLyBNZWRpYUluZm9bXVxuICAgICAgICB0aGlzLnNlZ21lbnRDb3VudCA9IG51bGw7XG4gICAgICAgIHRoaXMuaGFzS2V5ZnJhbWVzSW5kZXggPSBudWxsO1xuICAgICAgICB0aGlzLmtleWZyYW1lc0luZGV4ID0gbnVsbDtcbiAgICB9XG5cbiAgICBpc0NvbXBsZXRlKCkge1xuICAgICAgICBsZXQgYXVkaW9JbmZvQ29tcGxldGUgPSAodGhpcy5oYXNBdWRpbyA9PT0gZmFsc2UpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLmhhc0F1ZGlvID09PSB0cnVlICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmF1ZGlvQ29kZWMgIT0gbnVsbCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hdWRpb1NhbXBsZVJhdGUgIT0gbnVsbCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hdWRpb0NoYW5uZWxDb3VudCAhPSBudWxsKTtcblxuICAgICAgICBsZXQgdmlkZW9JbmZvQ29tcGxldGUgPSAodGhpcy5oYXNWaWRlbyA9PT0gZmFsc2UpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLmhhc1ZpZGVvID09PSB0cnVlICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnZpZGVvQ29kZWMgIT0gbnVsbCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy53aWR0aCAhPSBudWxsICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmhlaWdodCAhPSBudWxsICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZwcyAhPSBudWxsICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByb2ZpbGUgIT0gbnVsbCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sZXZlbCAhPSBudWxsICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNocm9tYUZvcm1hdCAhPSBudWxsICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNhck51bSAhPSBudWxsICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNhckRlbiAhPSBudWxsKTtcblxuICAgICAgICAvLyBrZXlmcmFtZXNJbmRleCBtYXkgbm90IGJlIHByZXNlbnRcbiAgICAgICAgcmV0dXJuIHRoaXMubWltZVR5cGUgIT0gbnVsbCAmJlxuICAgICAgICAgICAgICAgdGhpcy5kdXJhdGlvbiAhPSBudWxsICYmXG4gICAgICAgICAgICAgICB0aGlzLm1ldGFkYXRhICE9IG51bGwgJiZcbiAgICAgICAgICAgICAgIHRoaXMuaGFzS2V5ZnJhbWVzSW5kZXggIT0gbnVsbCAmJlxuICAgICAgICAgICAgICAgYXVkaW9JbmZvQ29tcGxldGUgJiZcbiAgICAgICAgICAgICAgIHZpZGVvSW5mb0NvbXBsZXRlO1xuICAgIH1cblxuICAgIGlzU2Vla2FibGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmhhc0tleWZyYW1lc0luZGV4ID09PSB0cnVlO1xuICAgIH1cblxuICAgIGdldE5lYXJlc3RLZXlmcmFtZShtaWxsaXNlY29uZHMpIHtcbiAgICAgICAgaWYgKHRoaXMua2V5ZnJhbWVzSW5kZXggPT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgdGFibGUgPSB0aGlzLmtleWZyYW1lc0luZGV4O1xuICAgICAgICBsZXQga2V5ZnJhbWVJZHggPSB0aGlzLl9zZWFyY2godGFibGUudGltZXMsIG1pbGxpc2Vjb25kcyk7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGluZGV4OiBrZXlmcmFtZUlkeCxcbiAgICAgICAgICAgIG1pbGxpc2Vjb25kczogdGFibGUudGltZXNba2V5ZnJhbWVJZHhdLFxuICAgICAgICAgICAgZmlsZXBvc2l0aW9uOiB0YWJsZS5maWxlcG9zaXRpb25zW2tleWZyYW1lSWR4XVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIF9zZWFyY2gobGlzdCwgdmFsdWUpIHtcbiAgICAgICAgbGV0IGlkeCA9IDA7XG5cbiAgICAgICAgbGV0IGxhc3QgPSBsaXN0Lmxlbmd0aCAtIDE7XG4gICAgICAgIGxldCBtaWQgPSAwO1xuICAgICAgICBsZXQgbGJvdW5kID0gMDtcbiAgICAgICAgbGV0IHVib3VuZCA9IGxhc3Q7XG5cbiAgICAgICAgaWYgKHZhbHVlIDwgbGlzdFswXSkge1xuICAgICAgICAgICAgaWR4ID0gMDtcbiAgICAgICAgICAgIGxib3VuZCA9IHVib3VuZCArIDE7ICAvLyBza2lwIHNlYXJjaFxuICAgICAgICB9XG5cbiAgICAgICAgd2hpbGUgKGxib3VuZCA8PSB1Ym91bmQpIHtcbiAgICAgICAgICAgIG1pZCA9IGxib3VuZCArIE1hdGguZmxvb3IoKHVib3VuZCAtIGxib3VuZCkgLyAyKTtcbiAgICAgICAgICAgIGlmIChtaWQgPT09IGxhc3QgfHwgKHZhbHVlID49IGxpc3RbbWlkXSAmJiB2YWx1ZSA8IGxpc3RbbWlkICsgMV0pKSB7XG4gICAgICAgICAgICAgICAgaWR4ID0gbWlkO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChsaXN0W21pZF0gPCB2YWx1ZSkge1xuICAgICAgICAgICAgICAgIGxib3VuZCA9IG1pZCArIDE7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHVib3VuZCA9IG1pZCAtIDE7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gaWR4O1xuICAgIH1cblxufVxuXG5leHBvcnQgZGVmYXVsdCBNZWRpYUluZm87XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vanMvZmx2L21lZGlhLWluZm8uanMiXSwic291cmNlUm9vdCI6IiJ9");

/***/ }),
/* 9 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _flvdemux = __webpack_require__(7);\n\nvar _flvdemux2 = _interopRequireDefault(_flvdemux);\n\nvar _mediaInfo = __webpack_require__(8);\n\nvar _mediaInfo2 = _interopRequireDefault(_mediaInfo);\n\nvar _spsParser = __webpack_require__(0);\n\nvar _spsParser2 = _interopRequireDefault(_spsParser);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar tagDemux = function () {\n    function tagDemux() {\n        _classCallCheck(this, tagDemux);\n\n        this.TAG = this.constructor.name;\n\n        this._config = {};\n\n        this._onError = null;\n        this._onMediaInfo = null;\n        this._onTrackMetadata = null;\n        this._onDataAvailable = null;\n\n        this._dataOffset = 0;\n        this._firstParse = true;\n        this._dispatch = false;\n\n        this._hasAudio = false;\n        this._hasVideo = false;\n\n        this._audioInitialMetadataDispatched = false;\n        this._videoInitialMetadataDispatched = false;\n\n        this._mediaInfo = new _mediaInfo2.default();\n        this._mediaInfo.hasAudio = this._hasAudio;\n        this._mediaInfo.hasVideo = this._hasVideo;\n        this._metadata = null;\n        this._audioMetadata = null;\n        this._videoMetadata = null;\n\n        this._naluLengthSize = 4;\n        this._timestampBase = 0; // int32, in milliseconds\n        this._timescale = 1000;\n        this._duration = 0; // int32, in milliseconds\n        this._durationOverrided = false;\n        this._referenceFrameRate = {\n            fixed: true,\n            fps: 23.976,\n            fps_num: 23976,\n            fps_den: 1000\n        };\n\n        this._videoTrack = { type: 'video', id: 1, sequenceNumber: 0, samples: [], length: 0 };\n        this._audioTrack = { type: 'audio', id: 2, sequenceNumber: 0, samples: [], length: 0 };\n\n        this._littleEndian = function () {\n            var buf = new ArrayBuffer(2);\n            new DataView(buf).setInt16(0, 256, true); // little-endian write\n            return new Int16Array(buf)[0] === 256; // platform-spec read, if equal then LE\n        }();\n    }\n\n    _createClass(tagDemux, [{\n        key: 'onMediaInfo',\n        value: function onMediaInfo(callback) {\n            this._onMediaInfo = callback;\n        }\n    }, {\n        key: 'parseMetadata',\n        value: function parseMetadata(arr) {\n            var data = _flvdemux2.default.parseMetadata(arr);\n            this._parseScriptData(data);\n            console.log(this._mediaInfo, this._mediaInfo.isComplete());\n        }\n    }, {\n        key: '_parseScriptData',\n        value: function _parseScriptData(obj) {\n            var scriptData = obj;\n\n            if (scriptData.hasOwnProperty('onMetaData')) {\n                if (this._metadata) {\n                    Log.w(this.TAG, 'Found another onMetaData tag!');\n                }\n                this._metadata = scriptData;\n                var onMetaData = this._metadata.onMetaData;\n\n                if (typeof onMetaData.hasAudio === 'boolean') {\n                    // hasAudio\n                    this._hasAudio = onMetaData.hasAudio;\n                    this._mediaInfo.hasAudio = this._hasAudio;\n                }\n                if (typeof onMetaData.hasVideo === 'boolean') {\n                    // hasVideo\n                    this._hasVideo = onMetaData.hasVideo;\n                    this._mediaInfo.hasVideo = this._hasVideo;\n                }\n                if (typeof onMetaData.audiodatarate === 'number') {\n                    // audiodatarate\n                    this._mediaInfo.audioDataRate = onMetaData.audiodatarate;\n                }\n                if (typeof onMetaData.videodatarate === 'number') {\n                    // videodatarate\n                    this._mediaInfo.videoDataRate = onMetaData.videodatarate;\n                }\n                if (typeof onMetaData.width === 'number') {\n                    // width\n                    this._mediaInfo.width = onMetaData.width;\n                }\n                if (typeof onMetaData.height === 'number') {\n                    // height\n                    this._mediaInfo.height = onMetaData.height;\n                }\n                if (typeof onMetaData.duration === 'number') {\n                    // duration\n                    if (!this._durationOverrided) {\n                        var duration = Math.floor(onMetaData.duration * this._timescale);\n                        this._duration = duration;\n                        this._mediaInfo.duration = duration;\n                    }\n                } else {\n                    this._mediaInfo.duration = 0;\n                }\n                if (typeof onMetaData.framerate === 'number') {\n                    // framerate\n                    var fps_num = Math.floor(onMetaData.framerate * 1000);\n                    if (fps_num > 0) {\n                        var fps = fps_num / 1000;\n                        this._referenceFrameRate.fixed = true;\n                        this._referenceFrameRate.fps = fps;\n                        this._referenceFrameRate.fps_num = fps_num;\n                        this._referenceFrameRate.fps_den = 1000;\n                        this._mediaInfo.fps = fps;\n                    }\n                }\n                if (_typeof(onMetaData.keyframes) === 'object') {\n                    // keyframes\n                    this._mediaInfo.hasKeyframesIndex = true;\n                    var keyframes = onMetaData.keyframes;\n                    keyframes.times = onMetaData.times;\n                    keyframes.filepositions = onMetaData.filepositions;\n                    this._mediaInfo.keyframesIndex = this._parseKeyframesIndex(keyframes);\n                    onMetaData.keyframes = null; // keyframes has been extracted, remove it\n                } else {\n                    this._mediaInfo.hasKeyframesIndex = false;\n                }\n                this._dispatch = false;\n                this._mediaInfo.metadata = onMetaData;\n                console.log(this.TAG, 'Parsed onMetaData');\n                // if (this._mediaInfo.isComplete()) {\n                // this._onMediaInfo(this._mediaInfo);\n                // }\n                return this._mediaInfo;\n            }\n        }\n    }, {\n        key: '_parseKeyframesIndex',\n        value: function _parseKeyframesIndex(keyframes) {\n            var times = [];\n            var filepositions = [];\n\n            // ignore first keyframe which is actually AVC Sequence Header (AVCDecoderConfigurationRecord)\n            for (var i = 1; i < keyframes.times.length; i++) {\n                var time = this._timestampBase + Math.floor(keyframes.times[i] * 1000);\n                times.push(time);\n                filepositions.push(keyframes.filepositions[i]);\n            }\n\n            return {\n                times: times,\n                filepositions: filepositions\n            };\n        }\n\n        /**\n         * 传入tags输出moof和mdat\n         * \n         * @param {any} tags \n         * \n         * @memberof tagDemux\n         */\n\n    }, {\n        key: 'moofTag',\n        value: function moofTag(tags) {\n            for (var i = 0; i < tags.length; i++) {\n                this.parseChunks(tags[i]);\n                // console.log(\"tagTimestamp\", tags[i].getTime(), tags[i]);\n            }\n        }\n    }, {\n        key: 'parseChunks',\n        value: function parseChunks(flvtag) {\n            switch (flvtag.tagType) {\n                case 8:\n                    // Audio\n                    this._parseAudioData(flvtag.body.buffer, 0, flvtag.body.length, flvtag.getTime());\n                    break;\n                case 9:\n                    // Video\n                    this._parseVideoData(flvtag.body.buffer, 0, flvtag.body.length, flvtag.getTime(), 0);\n                    break;\n                case 18:\n                    // ScriptDataObject\n                    this._parseScriptData(flvtag.body, 0, flvtag.body.length);\n                    break;\n            }\n        }\n    }, {\n        key: '_parseVideoData',\n        value: function _parseVideoData(arrayBuffer, dataOffset, dataSize, tagTimestamp, tagPosition) {\n            console.log(\"tagTimestamp\", tagTimestamp);\n            if (dataSize <= 1) {\n                Log.w(this.TAG, 'Flv: Invalid video packet, missing VideoData payload!');\n                return;\n            }\n            //获取 video tag body 第一字节\n            var spec = new Uint8Array(arrayBuffer, dataOffset, dataSize)[0];\n            //获取是否是关键帧\n            var frameType = (spec & 240) >>> 4;\n            //获取编码格式\n            var codecId = spec & 15;\n\n            if (codecId !== 7) {\n                this._onError(DemuxErrors.CODEC_UNSUPPORTED, 'Flv: Unsupported codec in video frame: ' + codecId);\n                return;\n            }\n\n            this._parseAVCVideoPacket(arrayBuffer, dataOffset + 1, dataSize - 1, tagTimestamp, tagPosition, frameType);\n        }\n    }, {\n        key: '_parseAVCVideoPacket',\n        value: function _parseAVCVideoPacket(arrayBuffer, dataOffset, dataSize, tagTimestamp, tagPosition, frameType) {\n            if (dataSize < 4) {\n                Log.w(this.TAG, 'Flv: Invalid AVC packet, missing AVCPacketType or/and CompositionTime');\n                return;\n            }\n\n            var le = this._littleEndian;\n            //获取 video tag body 第2字节到结尾\n            var v = new DataView(arrayBuffer, dataOffset, dataSize);\n\n            //IF CodecID == 7  AVCPacketType\n            // 0 = AVC sequence header\n            // 1 = AVC NALU\n            // 2 = AVC end of sequence (lower level NALU sequence ender is not required or supported)\n            var packetType = v.getUint8(0);\n            // 3字节\n            // IF AVCPacketType == 1\n            //  Composition time offset\n            // ELSE\n            //  0\n            var cts = v.getUint32(0, !le) & 0x00FFFFFF;\n\n            //IF AVCPacketType == 0 AVCDecoderConfigurationRecord（AVC sequence header）\n            //IF AVCPacketType == 1 One or more NALUs (Full frames are required)\n\n            /**\n             *AVCDecoderConfigurationRecord.包含着是H.264解码相关比较重要的sps和pps信息，\n             *再给AVC解码器送数据 流之前一定要把sps和pps信息送出，否则的话解码器不能正常解码。\n             *而且在解码器stop之后再次start之前，如seek、快进快退状态切换等，\n             *都 需要重新送一遍sps和pps的信息.AVCDecoderConfigurationRecord在FLV文件中一般情况也是出现1次，\n             *也就是第一个 video tag.\n             */\n            if (packetType === 0) {\n                // AVCDecoderConfigurationRecord\n                this._parseAVCDecoderConfigurationRecord(arrayBuffer, dataOffset + 4, dataSize - 4);\n            } else if (packetType === 1) {\n                // One or more Nalus\n                this._parseAVCVideoData(arrayBuffer, dataOffset + 4, dataSize - 4, tagTimestamp, tagPosition, frameType, cts);\n            } else if (packetType === 2) {\n                // empty, AVC end of sequence\n            } else {\n                this._onError(DemuxErrors.FORMAT_ERROR, 'Flv: Invalid video packet type ' + packetType);\n                return;\n            }\n        }\n\n        /**\n         * AVC 初始化\n         */\n\n    }, {\n        key: '_parseAVCDecoderConfigurationRecord',\n        value: function _parseAVCDecoderConfigurationRecord(arrayBuffer, dataOffset, dataSize) {\n            if (dataSize < 7) {\n                Log.w(this.TAG, 'Flv: Invalid AVCDecoderConfigurationRecord, lack of data!');\n                return;\n            }\n\n            var meta = this._videoMetadata;\n            var track = this._videoTrack;\n            var le = this._littleEndian;\n            var v = new DataView(arrayBuffer, dataOffset, dataSize);\n\n            if (!meta) {\n                meta = this._videoMetadata = {};\n                meta.type = 'video';\n                meta.id = track.id;\n                meta.timescale = this._timescale;\n                meta.duration = this._duration;\n            } else {\n                if (typeof meta.avcc !== 'undefined') {\n                    Log.w(this.TAG, 'Found another AVCDecoderConfigurationRecord!');\n                }\n            }\n\n            var version = v.getUint8(0); // configurationVersion\n            var avcProfile = v.getUint8(1); // avcProfileIndication\n            var profileCompatibility = v.getUint8(2); // profile_compatibility\n            var avcLevel = v.getUint8(3); // AVCLevelIndication\n\n            if (version !== 1 || avcProfile === 0) {\n                this._onError(DemuxErrors.FORMAT_ERROR, 'Flv: Invalid AVCDecoderConfigurationRecord');\n                return;\n            }\n\n            this._naluLengthSize = (v.getUint8(4) & 3) + 1; // lengthSizeMinusOne\n            if (this._naluLengthSize !== 3 && this._naluLengthSize !== 4) {\n                // holy shit!!!\n                this._onError(DemuxErrors.FORMAT_ERROR, 'Flv: Strange NaluLengthSizeMinusOne: ' + (this._naluLengthSize - 1));\n                return;\n            }\n\n            var spsCount = v.getUint8(5) & 31; // numOfSequenceParameterSets\n            if (spsCount === 0 || spsCount > 1) {\n                this._onError(DemuxErrors.FORMAT_ERROR, 'Flv: Invalid H264 SPS count: ' + spsCount);\n                return;\n            }\n\n            var offset = 6;\n\n            for (var i = 0; i < spsCount; i++) {\n                var len = v.getUint16(offset, !le); // sequenceParameterSetLength\n                offset += 2;\n\n                if (len === 0) {\n                    continue;\n                }\n\n                // Notice: Nalu without startcode header (00 00 00 01)\n                var sps = new Uint8Array(arrayBuffer, dataOffset + offset, len);\n                offset += len;\n\n                var config = _spsParser2.default.parseSPS(sps);\n                meta.codecWidth = config.codec_size.width;\n                meta.codecHeight = config.codec_size.height;\n                meta.presentWidth = config.present_size.width;\n                meta.presentHeight = config.present_size.height;\n\n                meta.profile = config.profile_string;\n                meta.level = config.level_string;\n                meta.bitDepth = config.bit_depth;\n                meta.chromaFormat = config.chroma_format;\n                meta.sarRatio = config.sar_ratio;\n                meta.frameRate = config.frame_rate;\n\n                if (config.frame_rate.fixed === false || config.frame_rate.fps_num === 0 || config.frame_rate.fps_den === 0) {\n                    meta.frameRate = this._referenceFrameRate;\n                }\n\n                var fps_den = meta.frameRate.fps_den;\n                var fps_num = meta.frameRate.fps_num;\n                meta.refSampleDuration = Math.floor(meta.timescale * (fps_den / fps_num));\n\n                var codecArray = sps.subarray(1, 4);\n                var codecString = 'avc1.';\n                for (var j = 0; j < 3; j++) {\n                    var h = codecArray[j].toString(16);\n                    if (h.length < 2) {\n                        h = '0' + h;\n                    }\n                    codecString += h;\n                }\n                meta.codec = codecString;\n\n                var mi = this._mediaInfo;\n                mi.width = meta.codecWidth;\n                mi.height = meta.codecHeight;\n                mi.fps = meta.frameRate.fps;\n                mi.profile = meta.profile;\n                mi.level = meta.level;\n                mi.chromaFormat = config.chroma_format_string;\n                mi.sarNum = meta.sarRatio.width;\n                mi.sarDen = meta.sarRatio.height;\n                mi.videoCodec = codecString;\n\n                if (mi.hasAudio) {\n                    if (mi.audioCodec != null) {\n                        mi.mimeType = 'video/x-flv; codecs=\"' + mi.videoCodec + ',' + mi.audioCodec + '\"';\n                    }\n                } else {\n                    mi.mimeType = 'video/x-flv; codecs=\"' + mi.videoCodec + '\"';\n                }\n                if (mi.isComplete()) {\n                    this._onMediaInfo(mi);\n                }\n            }\n\n            var ppsCount = v.getUint8(offset); // numOfPictureParameterSets\n            if (ppsCount === 0 || ppsCount > 1) {\n                this._onError(DemuxErrors.FORMAT_ERROR, 'Flv: Invalid H264 PPS count: ' + ppsCount);\n                return;\n            }\n\n            offset++;\n\n            for (var _i = 0; _i < ppsCount; _i++) {\n                var _len = v.getUint16(offset, !le); // pictureParameterSetLength\n                offset += 2;\n\n                if (_len === 0) {\n                    continue;\n                }\n\n                // pps is useless for extracting video information\n                offset += _len;\n            }\n\n            meta.avcc = new Uint8Array(dataSize);\n            meta.avcc.set(new Uint8Array(arrayBuffer, dataOffset, dataSize), 0);\n            console.log(this.TAG, 'Parsed AVCDecoderConfigurationRecord');\n\n            if (this._isInitialMetadataDispatched()) {\n                // flush parsed frames\n                if (this._dispatch && (this._audioTrack.length || this._videoTrack.length)) {\n                    this._onDataAvailable(this._audioTrack, this._videoTrack);\n                }\n            } else {\n                this._videoInitialMetadataDispatched = true;\n            }\n            // notify new metadata\n            this._dispatch = false;\n            // if (this._onTrackMetadata) {\n            //     this._onTrackMetadata.call(null, meta);\n            // }\n\n            this._onTrackMetadata('video', meta);\n        }\n\n        /**\n         * 普通的AVC 片段\n         */\n\n    }, {\n        key: '_parseAVCVideoData',\n        value: function _parseAVCVideoData(arrayBuffer, dataOffset, dataSize, tagTimestamp, tagPosition, frameType, cts) {\n            var le = this._littleEndian;\n            var v = new DataView(arrayBuffer, dataOffset, dataSize);\n\n            var units = [],\n                length = 0;\n\n            var offset = 0;\n            var lengthSize = this._naluLengthSize;\n            var dts = this._timestampBase + tagTimestamp;\n            var keyframe = frameType === 1; // from FLV Frame Type constants\n\n            while (offset < dataSize) {\n                if (offset + 4 >= dataSize) {\n                    Log.w(this.TAG, 'Malformed Nalu near timestamp ' + dts + ', offset = ' + offset + ', dataSize = ' + dataSize);\n                    break; // data not enough for next Nalu\n                }\n                // Nalu with length-header (AVC1)\n                var naluSize = v.getUint32(offset, !le); // Big-Endian read\n                if (lengthSize === 3) {\n                    naluSize >>>= 8;\n                }\n                if (naluSize > dataSize - lengthSize) {\n                    Log.w(this.TAG, 'Malformed Nalus near timestamp ' + dts + ', NaluSize > DataSize!');\n                    return;\n                }\n\n                var unitType = v.getUint8(offset + lengthSize) & 0x1F;\n\n                if (unitType === 5) {\n                    // IDR\n                    keyframe = true;\n                }\n\n                var data = new Uint8Array(arrayBuffer, dataOffset + offset, lengthSize + naluSize);\n                var unit = { type: unitType, data: data };\n                units.push(unit);\n                length += data.byteLength;\n\n                offset += lengthSize + naluSize;\n            }\n\n            if (units.length) {\n                var track = this._videoTrack;\n                var avcSample = {\n                    units: units,\n                    length: length,\n                    isKeyframe: keyframe,\n                    dts: dts,\n                    cts: cts,\n                    pts: dts + cts\n                };\n                if (keyframe) {\n                    avcSample.fileposition = tagPosition;\n                }\n                track.samples.push(avcSample);\n                track.length += length;\n            }\n        }\n    }, {\n        key: '_parseAudioData',\n        value: function _parseAudioData(arrayBuffer, dataOffset, dataSize, tagTimestamp) {\n            if (dataSize <= 1) {\n                Log.w(this.TAG, 'Flv: Invalid audio packet, missing SoundData payload!');\n                return;\n            }\n\n            var meta = this._audioMetadata;\n            var track = this._audioTrack;\n\n            if (!meta || !meta.codec) {\n                // initial metadata\n                meta = this._audioMetadata = {};\n                meta.type = 'audio';\n                meta.id = track.id;\n                meta.timescale = this._timescale;\n                meta.duration = this._duration;\n\n                var le = this._littleEndian;\n                var v = new DataView(arrayBuffer, dataOffset, dataSize);\n\n                var soundSpec = v.getUint8(0);\n\n                var soundFormat = soundSpec >>> 4;\n                if (soundFormat !== 10) {\n                    // AAC\n                    // TODO: support MP3 audio codec\n                    this._onError(DemuxErrors.CODEC_UNSUPPORTED, 'Flv: Unsupported audio codec idx: ' + soundFormat);\n                    return;\n                }\n\n                var soundRate = 0;\n                var soundRateIndex = (soundSpec & 12) >>> 2;\n\n                var soundRateTable = [5500, 11025, 22050, 44100, 48000];\n\n                if (soundRateIndex < soundRateTable.length) {\n                    soundRate = soundRateTable[soundRateIndex];\n                } else {\n                    this._onError(DemuxErrors.FORMAT_ERROR, 'Flv: Invalid audio sample rate idx: ' + soundRateIndex);\n                    return;\n                }\n\n                var soundSize = (soundSpec & 2) >>> 1; // unused\n                var soundType = soundSpec & 1;\n\n                meta.audioSampleRate = soundRate;\n                meta.channelCount = soundType === 0 ? 1 : 2;\n                meta.refSampleDuration = Math.floor(1024 / meta.audioSampleRate * meta.timescale);\n                meta.codec = 'mp4a.40.5';\n            }\n\n            var aacData = this._parseAACAudioData(arrayBuffer, dataOffset + 1, dataSize - 1);\n            if (aacData == undefined) {\n                return;\n            }\n\n            if (aacData.packetType === 0) {\n                // AAC sequence header (AudioSpecificConfig)\n                if (meta.config) {\n                    Log.w(this.TAG, 'Found another AudioSpecificConfig!');\n                }\n                var misc = aacData.data;\n                meta.audioSampleRate = misc.samplingRate;\n                meta.channelCount = misc.channelCount;\n                meta.codec = misc.codec;\n                meta.config = misc.config;\n                // The decode result of an aac sample is 1024 PCM samples\n                meta.refSampleDuration = Math.floor(1024 / meta.audioSampleRate * meta.timescale);\n                console.log(this.TAG, 'Parsed AudioSpecificConfig');\n\n                if (this._isInitialMetadataDispatched()) {\n                    // Non-initial metadata, force dispatch (or flush) parsed frames to remuxer\n                    if (this._dispatch && (this._audioTrack.length || this._videoTrack.length)) {\n                        this._onDataAvailable(this._audioTrack, this._videoTrack);\n                    }\n                } else {\n                    this._audioInitialMetadataDispatched = true;\n                }\n                // then notify new metadata\n                this._dispatch = false;\n                this._onTrackMetadata('audio', meta);\n\n                var mi = this._mediaInfo;\n                mi.audioCodec = 'mp4a.40.' + misc.originalAudioObjectType;\n                mi.audioSampleRate = meta.audioSampleRate;\n                mi.audioChannelCount = meta.channelCount;\n                if (mi.hasVideo) {\n                    if (mi.videoCodec != null) {\n                        mi.mimeType = 'video/x-flv; codecs=\"' + mi.videoCodec + ',' + mi.audioCodec + '\"';\n                    }\n                } else {\n                    mi.mimeType = 'video/x-flv; codecs=\"' + mi.audioCodec + '\"';\n                }\n                if (mi.isComplete()) {\n                    this._onMediaInfo(mi);\n                }\n                return;\n            } else if (aacData.packetType === 1) {\n                // AAC raw frame data\n                var dts = this._timestampBase + tagTimestamp;\n                var aacSample = { unit: aacData.data, dts: dts, pts: dts };\n                track.samples.push(aacSample);\n                track.length += aacData.data.length;\n            } else {\n                console.log(this.TAG, 'Flv: Unsupported AAC data type ' + aacData.packetType);\n            }\n        }\n    }, {\n        key: '_parseAACAudioData',\n        value: function _parseAACAudioData(arrayBuffer, dataOffset, dataSize) {\n            if (dataSize <= 1) {\n                console.log(this.TAG, 'Flv: Invalid AAC packet, missing AACPacketType or/and Data!');\n                return;\n            }\n\n            var result = {};\n            var array = new Uint8Array(arrayBuffer, dataOffset, dataSize);\n\n            result.packetType = array[0];\n\n            if (array[0] === 0) {\n                result.data = this._parseAACAudioSpecificConfig(arrayBuffer, dataOffset + 1, dataSize - 1);\n            } else {\n                result.data = array.subarray(1);\n            }\n\n            return result;\n        }\n    }, {\n        key: '_parseAACAudioSpecificConfig',\n        value: function _parseAACAudioSpecificConfig(arrayBuffer, dataOffset, dataSize) {\n            var array = new Uint8Array(arrayBuffer, dataOffset, dataSize);\n            var config = null;\n\n            var mpegSamplingRates = [96000, 88200, 64000, 48000, 44100, 32000, 24000, 22050, 16000, 12000, 11025, 8000, 7350];\n\n            /* Audio Object Type:\n               0: Null\n               1: AAC Main\n               2: AAC LC\n               3: AAC SSR (Scalable Sample Rate)\n               4: AAC LTP (Long Term Prediction)\n               5: HE-AAC / SBR (Spectral Band Replication)\n               6: AAC Scalable\n            */\n\n            var audioObjectType = 0;\n            var originalAudioObjectType = 0;\n            var audioExtensionObjectType = null;\n            var samplingIndex = 0;\n            var extensionSamplingIndex = null;\n            // debugger;\n            // 5 bits\n            audioObjectType = originalAudioObjectType = array[0] >>> 3;\n            // 4 bits\n            samplingIndex = (array[0] & 0x07) << 1 | array[1] >>> 7;\n            if (samplingIndex < 0 || samplingIndex >= mpegSamplingRates.length) {\n                this._onError(DemuxErrors.FORMAT_ERROR, 'Flv: AAC invalid sampling frequency index!');\n                return;\n            }\n\n            var samplingFrequence = mpegSamplingRates[samplingIndex];\n\n            // 4 bits\n            var channelConfig = (array[1] & 0x78) >>> 3;\n            if (channelConfig < 0 || channelConfig >= 8) {\n                this._onError(DemuxErrors.FORMAT_ERROR, 'Flv: AAC invalid channel configuration');\n                return;\n            }\n\n            if (audioObjectType === 5) {\n                // HE-AAC?\n                // 4 bits\n                extensionSamplingIndex = (array[1] & 0x07) << 1 | array[2] >>> 7;\n                // 5 bits\n                audioExtensionObjectType = (array[2] & 0x7C) >>> 2;\n            }\n\n            // workarounds for various browsers\n            var userAgent = self.navigator.userAgent.toLowerCase();\n\n            if (userAgent.indexOf('firefox') !== -1) {\n                // firefox: use SBR (HE-AAC) if freq less than 24kHz\n                if (samplingIndex >= 6) {\n                    audioObjectType = 5;\n                    config = new Array(4);\n                    extensionSamplingIndex = samplingIndex - 3;\n                } else {\n                    // use LC-AAC\n                    audioObjectType = 2;\n                    config = new Array(2);\n                    extensionSamplingIndex = samplingIndex;\n                }\n            } else if (userAgent.indexOf('android') !== -1) {\n                // android: always use LC-AAC\n                audioObjectType = 2;\n                config = new Array(2);\n                extensionSamplingIndex = samplingIndex;\n            } else {\n                // for other browsers, e.g. chrome...\n                // Always use HE-AAC to make it easier to switch aac codec profile\n                audioObjectType = 5;\n                extensionSamplingIndex = samplingIndex;\n                config = new Array(4);\n\n                if (samplingIndex >= 6) {\n                    extensionSamplingIndex = samplingIndex - 3;\n                } else if (channelConfig === 1) {\n                    // Mono channel\n                    audioObjectType = 2;\n                    config = new Array(2);\n                    extensionSamplingIndex = samplingIndex;\n                }\n            }\n\n            config[0] = audioObjectType << 3;\n            config[0] |= (samplingIndex & 0x0F) >>> 1;\n            config[1] = (samplingIndex & 0x0F) << 7;\n            config[1] |= (channelConfig & 0x0F) << 3;\n            if (audioObjectType === 5) {\n                config[1] |= (extensionSamplingIndex & 0x0F) >>> 1;\n                config[2] = (extensionSamplingIndex & 0x01) << 7;\n                // extended audio object type: force to 2 (LC-AAC)\n                config[2] |= 2 << 2;\n                config[3] = 0;\n            }\n\n            return {\n                config: config,\n                samplingRate: samplingFrequence,\n                channelCount: channelConfig,\n                codec: 'mp4a.40.' + audioObjectType,\n                originalAudioObjectType: originalAudioObjectType\n            };\n        }\n    }, {\n        key: '_isInitialMetadataDispatched',\n        value: function _isInitialMetadataDispatched() {\n            if (this._hasAudio && this._hasVideo) {\n                // both audio & video\n                return this._audioInitialMetadataDispatched && this._videoInitialMetadataDispatched;\n            }\n            if (this._hasAudio && !this._hasVideo) {\n                // audio only\n                return this._audioInitialMetadataDispatched;\n            }\n            if (!this._hasAudio && this._hasVideo) {\n                // video only\n                return this._videoInitialMetadataDispatched;\n            }\n        }\n    }]);\n\n    return tagDemux;\n}();\n\nexports.default = new tagDemux();//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9qcy9mbHYvdGFnZGVtdXguanM/MTM1YyJdLCJuYW1lcyI6WyJ0YWdEZW11eCIsIlRBRyIsImNvbnN0cnVjdG9yIiwibmFtZSIsIl9jb25maWciLCJfb25FcnJvciIsIl9vbk1lZGlhSW5mbyIsIl9vblRyYWNrTWV0YWRhdGEiLCJfb25EYXRhQXZhaWxhYmxlIiwiX2RhdGFPZmZzZXQiLCJfZmlyc3RQYXJzZSIsIl9kaXNwYXRjaCIsIl9oYXNBdWRpbyIsIl9oYXNWaWRlbyIsIl9hdWRpb0luaXRpYWxNZXRhZGF0YURpc3BhdGNoZWQiLCJfdmlkZW9Jbml0aWFsTWV0YWRhdGFEaXNwYXRjaGVkIiwiX21lZGlhSW5mbyIsImhhc0F1ZGlvIiwiaGFzVmlkZW8iLCJfbWV0YWRhdGEiLCJfYXVkaW9NZXRhZGF0YSIsIl92aWRlb01ldGFkYXRhIiwiX25hbHVMZW5ndGhTaXplIiwiX3RpbWVzdGFtcEJhc2UiLCJfdGltZXNjYWxlIiwiX2R1cmF0aW9uIiwiX2R1cmF0aW9uT3ZlcnJpZGVkIiwiX3JlZmVyZW5jZUZyYW1lUmF0ZSIsImZpeGVkIiwiZnBzIiwiZnBzX251bSIsImZwc19kZW4iLCJfdmlkZW9UcmFjayIsInR5cGUiLCJpZCIsInNlcXVlbmNlTnVtYmVyIiwic2FtcGxlcyIsImxlbmd0aCIsIl9hdWRpb1RyYWNrIiwiX2xpdHRsZUVuZGlhbiIsImJ1ZiIsIkFycmF5QnVmZmVyIiwiRGF0YVZpZXciLCJzZXRJbnQxNiIsIkludDE2QXJyYXkiLCJjYWxsYmFjayIsImFyciIsImRhdGEiLCJwYXJzZU1ldGFkYXRhIiwiX3BhcnNlU2NyaXB0RGF0YSIsImNvbnNvbGUiLCJsb2ciLCJpc0NvbXBsZXRlIiwib2JqIiwic2NyaXB0RGF0YSIsImhhc093blByb3BlcnR5IiwiTG9nIiwidyIsIm9uTWV0YURhdGEiLCJhdWRpb2RhdGFyYXRlIiwiYXVkaW9EYXRhUmF0ZSIsInZpZGVvZGF0YXJhdGUiLCJ2aWRlb0RhdGFSYXRlIiwid2lkdGgiLCJoZWlnaHQiLCJkdXJhdGlvbiIsIk1hdGgiLCJmbG9vciIsImZyYW1lcmF0ZSIsImtleWZyYW1lcyIsImhhc0tleWZyYW1lc0luZGV4IiwidGltZXMiLCJmaWxlcG9zaXRpb25zIiwia2V5ZnJhbWVzSW5kZXgiLCJfcGFyc2VLZXlmcmFtZXNJbmRleCIsIm1ldGFkYXRhIiwiaSIsInRpbWUiLCJwdXNoIiwidGFncyIsInBhcnNlQ2h1bmtzIiwiZmx2dGFnIiwidGFnVHlwZSIsIl9wYXJzZUF1ZGlvRGF0YSIsImJvZHkiLCJidWZmZXIiLCJnZXRUaW1lIiwiX3BhcnNlVmlkZW9EYXRhIiwiYXJyYXlCdWZmZXIiLCJkYXRhT2Zmc2V0IiwiZGF0YVNpemUiLCJ0YWdUaW1lc3RhbXAiLCJ0YWdQb3NpdGlvbiIsInNwZWMiLCJVaW50OEFycmF5IiwiZnJhbWVUeXBlIiwiY29kZWNJZCIsIkRlbXV4RXJyb3JzIiwiQ09ERUNfVU5TVVBQT1JURUQiLCJfcGFyc2VBVkNWaWRlb1BhY2tldCIsImxlIiwidiIsInBhY2tldFR5cGUiLCJnZXRVaW50OCIsImN0cyIsImdldFVpbnQzMiIsIl9wYXJzZUFWQ0RlY29kZXJDb25maWd1cmF0aW9uUmVjb3JkIiwiX3BhcnNlQVZDVmlkZW9EYXRhIiwiRk9STUFUX0VSUk9SIiwibWV0YSIsInRyYWNrIiwidGltZXNjYWxlIiwiYXZjYyIsInZlcnNpb24iLCJhdmNQcm9maWxlIiwicHJvZmlsZUNvbXBhdGliaWxpdHkiLCJhdmNMZXZlbCIsInNwc0NvdW50Iiwib2Zmc2V0IiwibGVuIiwiZ2V0VWludDE2Iiwic3BzIiwiY29uZmlnIiwicGFyc2VTUFMiLCJjb2RlY1dpZHRoIiwiY29kZWNfc2l6ZSIsImNvZGVjSGVpZ2h0IiwicHJlc2VudFdpZHRoIiwicHJlc2VudF9zaXplIiwicHJlc2VudEhlaWdodCIsInByb2ZpbGUiLCJwcm9maWxlX3N0cmluZyIsImxldmVsIiwibGV2ZWxfc3RyaW5nIiwiYml0RGVwdGgiLCJiaXRfZGVwdGgiLCJjaHJvbWFGb3JtYXQiLCJjaHJvbWFfZm9ybWF0Iiwic2FyUmF0aW8iLCJzYXJfcmF0aW8iLCJmcmFtZVJhdGUiLCJmcmFtZV9yYXRlIiwicmVmU2FtcGxlRHVyYXRpb24iLCJjb2RlY0FycmF5Iiwic3ViYXJyYXkiLCJjb2RlY1N0cmluZyIsImoiLCJoIiwidG9TdHJpbmciLCJjb2RlYyIsIm1pIiwiY2hyb21hX2Zvcm1hdF9zdHJpbmciLCJzYXJOdW0iLCJzYXJEZW4iLCJ2aWRlb0NvZGVjIiwiYXVkaW9Db2RlYyIsIm1pbWVUeXBlIiwicHBzQ291bnQiLCJzZXQiLCJfaXNJbml0aWFsTWV0YWRhdGFEaXNwYXRjaGVkIiwidW5pdHMiLCJsZW5ndGhTaXplIiwiZHRzIiwia2V5ZnJhbWUiLCJuYWx1U2l6ZSIsInVuaXRUeXBlIiwidW5pdCIsImJ5dGVMZW5ndGgiLCJhdmNTYW1wbGUiLCJpc0tleWZyYW1lIiwicHRzIiwiZmlsZXBvc2l0aW9uIiwic291bmRTcGVjIiwic291bmRGb3JtYXQiLCJzb3VuZFJhdGUiLCJzb3VuZFJhdGVJbmRleCIsInNvdW5kUmF0ZVRhYmxlIiwic291bmRTaXplIiwic291bmRUeXBlIiwiYXVkaW9TYW1wbGVSYXRlIiwiY2hhbm5lbENvdW50IiwiYWFjRGF0YSIsIl9wYXJzZUFBQ0F1ZGlvRGF0YSIsInVuZGVmaW5lZCIsIm1pc2MiLCJzYW1wbGluZ1JhdGUiLCJvcmlnaW5hbEF1ZGlvT2JqZWN0VHlwZSIsImF1ZGlvQ2hhbm5lbENvdW50IiwiYWFjU2FtcGxlIiwicmVzdWx0IiwiYXJyYXkiLCJfcGFyc2VBQUNBdWRpb1NwZWNpZmljQ29uZmlnIiwibXBlZ1NhbXBsaW5nUmF0ZXMiLCJhdWRpb09iamVjdFR5cGUiLCJhdWRpb0V4dGVuc2lvbk9iamVjdFR5cGUiLCJzYW1wbGluZ0luZGV4IiwiZXh0ZW5zaW9uU2FtcGxpbmdJbmRleCIsInNhbXBsaW5nRnJlcXVlbmNlIiwiY2hhbm5lbENvbmZpZyIsInVzZXJBZ2VudCIsInNlbGYiLCJuYXZpZ2F0b3IiLCJ0b0xvd2VyQ2FzZSIsImluZGV4T2YiLCJB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QUFPLENBQVAsS0FBYSxDQUFDeUUsZ0JBQWdCLElBQWpCLE1BQTJCLENBQXhDO0FBQ0F6RSxtQkFBTyxDQUFQLElBQVksQ0FBQ3lFLGdCQUFnQixJQUFqQixLQUEwQixDQUF0QztBQUNBekUsbUJBQU8sQ0FBUCxLQUFhLENBQUM0RSxnQkFBZ0IsSUFBakIsS0FBMEIsQ0FBdkM7QUFDQSxnQkFBSUwsb0JBQW9CLENBQXhCLEVBQTJCO0FBQ3ZCdkUsdUJBQU8sQ0FBUCxLQUFjLENBQUMwRSx5QkFBeUIsSUFBMUIsTUFBb0MsQ0FBbEQ7QUFDQTFFLHVCQUFPLENBQVAsSUFBWSxDQUFDMEUseUJBQXlCLElBQTFCLEtBQW1DLENBQS9DO0FBQ0E7QUFDQTFFLHVCQUFPLENBQVAsS0FBYyxLQUFLLENBQW5CO0FBQ0FBLHVCQUFPLENBQVAsSUFBWSxDQUFaO0FBQ0g7O0FBRUQsbUJBQU87QUFDSEEsd0JBQVFBLE1BREw7QUFFSCtELDhCQUFjWSxpQkFGWDtBQUdIakIsOEJBQWNrQixhQUhYO0FBSUhqRCx1QkFBTyxhQUFhNEMsZUFKakI7QUFLSFAseUNBQXlCQTtBQUx0QixhQUFQO0FBT0g7Ozt1REFDOEI7QUFDM0IsZ0JBQUksS0FBSzlLLFNBQUwsSUFBa0IsS0FBS0MsU0FBM0IsRUFBc0M7QUFBRTtBQUNwQyx1QkFBTyxLQUFLQywrQkFBTCxJQUF3QyxLQUFLQywrQkFBcEQ7QUFDSDtBQUNELGdCQUFJLEtBQUtILFNBQUwsSUFBa0IsQ0FBQyxLQUFLQyxTQUE1QixFQUF1QztBQUFFO0FBQ3JDLHVCQUFPLEtBQUtDLCtCQUFaO0FBQ0g7QUFDRCxnQkFBSSxDQUFDLEtBQUtGLFNBQU4sSUFBbUIsS0FBS0MsU0FBNUIsRUFBdUM7QUFBRTtBQUNyQyx1QkFBTyxLQUFLRSwrQkFBWjtBQUNIO0FBQ0o7Ozs7OztrQkFFVSxJQUFJZixRQUFKLEUiLCJmaWxlIjoiOS5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBmbHZEZW11eCBmcm9tICcuL2ZsdmRlbXV4J1xuaW1wb3J0IG1lZGlhaW5mbyBmcm9tICcuL21lZGlhLWluZm8nXG5pbXBvcnQgU1BTUGFyc2VyIGZyb20gJy4vc3BzLXBhcnNlcidcbmNsYXNzIHRhZ0RlbXV4IHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5UQUcgPSB0aGlzLmNvbnN0cnVjdG9yLm5hbWU7XG5cbiAgICAgICAgdGhpcy5fY29uZmlnID0ge307XG5cbiAgICAgICAgdGhpcy5fb25FcnJvciA9IG51bGw7XG4gICAgICAgIHRoaXMuX29uTWVkaWFJbmZvID0gbnVsbDtcbiAgICAgICAgdGhpcy5fb25UcmFja01ldGFkYXRhID0gbnVsbDtcbiAgICAgICAgdGhpcy5fb25EYXRhQXZhaWxhYmxlID0gbnVsbDtcblxuICAgICAgICB0aGlzLl9kYXRhT2Zmc2V0ID0gMDtcbiAgICAgICAgdGhpcy5fZmlyc3RQYXJzZSA9IHRydWU7XG4gICAgICAgIHRoaXMuX2Rpc3BhdGNoID0gZmFsc2U7XG5cbiAgICAgICAgdGhpcy5faGFzQXVkaW8gPSBmYWxzZTtcbiAgICAgICAgdGhpcy5faGFzVmlkZW8gPSBmYWxzZTtcblxuICAgICAgICB0aGlzLl9hdWRpb0luaXRpYWxNZXRhZGF0YURpc3BhdGNoZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5fdmlkZW9Jbml0aWFsTWV0YWRhdGFEaXNwYXRjaGVkID0gZmFsc2U7XG5cbiAgICAgICAgdGhpcy5fbWVkaWFJbmZvID0gbmV3IG1lZGlhaW5mbygpO1xuICAgICAgICB0aGlzLl9tZWRpYUluZm8uaGFzQXVkaW8gPSB0aGlzLl9oYXNBdWRpbztcbiAgICAgICAgdGhpcy5fbWVkaWFJbmZvLmhhc1ZpZGVvID0gdGhpcy5faGFzVmlkZW87XG4gICAgICAgIHRoaXMuX21ldGFkYXRhID0gbnVsbDtcbiAgICAgICAgdGhpcy5fYXVkaW9NZXRhZGF0YSA9IG51bGw7XG4gICAgICAgIHRoaXMuX3ZpZGVvTWV0YWRhdGEgPSBudWxsO1xuXG4gICAgICAgIHRoaXMuX25hbHVMZW5ndGhTaXplID0gNDtcbiAgICAgICAgdGhpcy5fdGltZXN0YW1wQmFzZSA9IDA7IC8vIGludDMyLCBpbiBtaWxsaXNlY29uZHNcbiAgICAgICAgdGhpcy5fdGltZXNjYWxlID0gMTAwMDtcbiAgICAgICAgdGhpcy5fZHVyYXRpb24gPSAwOyAvLyBpbnQzMiwgaW4gbWlsbGlzZWNvbmRzXG4gICAgICAgIHRoaXMuX2R1cmF0aW9uT3ZlcnJpZGVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuX3JlZmVyZW5jZUZyYW1lUmF0ZSA9IHtcbiAgICAgICAgICAgIGZpeGVkOiB0cnVlLFxuICAgICAgICAgICAgZnBzOiAyMy45NzYsXG4gICAgICAgICAgICBmcHNfbnVtOiAyMzk3NixcbiAgICAgICAgICAgIGZwc19kZW46IDEwMDBcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLl92aWRlb1RyYWNrID0geyB0eXBlOiAndmlkZW8nLCBpZDogMSwgc2VxdWVuY2VOdW1iZXI6IDAsIHNhbXBsZXM6IFtdLCBsZW5ndGg6IDAgfTtcbiAgICAgICAgdGhpcy5fYXVkaW9UcmFjayA9IHsgdHlwZTogJ2F1ZGlvJywgaWQ6IDIsIHNlcXVlbmNlTnVtYmVyOiAwLCBzYW1wbGVzOiBbXSwgbGVuZ3RoOiAwIH07XG5cbiAgICAgICAgdGhpcy5fbGl0dGxlRW5kaWFuID0gKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgbGV0IGJ1ZiA9IG5ldyBBcnJheUJ1ZmZlcigyKTtcbiAgICAgICAgICAgIChuZXcgRGF0YVZpZXcoYnVmKSkuc2V0SW50MTYoMCwgMjU2LCB0cnVlKTsgLy8gbGl0dGxlLWVuZGlhbiB3cml0ZVxuICAgICAgICAgICAgcmV0dXJuIChuZXcgSW50MTZBcnJheShidWYpKVswXSA9PT0gMjU2OyAvLyBwbGF0Zm9ybS1zcGVjIHJlYWQsIGlmIGVxdWFsIHRoZW4gTEVcbiAgICAgICAgfSkoKTtcbiAgICB9XG4gICAgb25NZWRpYUluZm8oY2FsbGJhY2spIHtcbiAgICAgICAgdGhpcy5fb25NZWRpYUluZm8gPSBjYWxsYmFjaztcbiAgICB9XG4gICAgcGFyc2VNZXRhZGF0YShhcnIpIHtcbiAgICAgICAgbGV0IGRhdGEgPSBmbHZEZW11eC5wYXJzZU1ldGFkYXRhKGFycik7XG4gICAgICAgIHRoaXMuX3BhcnNlU2NyaXB0RGF0YShkYXRhKTtcbiAgICAgICAgY29uc29sZS5sb2codGhpcy5fbWVkaWFJbmZvLCB0aGlzLl9tZWRpYUluZm8uaXNDb21wbGV0ZSgpKTtcbiAgICB9XG4gICAgX3BhcnNlU2NyaXB0RGF0YShvYmopIHtcbiAgICAgICAgbGV0IHNjcmlwdERhdGEgPSBvYmo7XG5cbiAgICAgICAgaWYgKHNjcmlwdERhdGEuaGFzT3duUHJvcGVydHkoJ29uTWV0YURhdGEnKSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuX21ldGFkYXRhKSB7XG4gICAgICAgICAgICAgICAgTG9nLncodGhpcy5UQUcsICdGb3VuZCBhbm90aGVyIG9uTWV0YURhdGEgdGFnIScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5fbWV0YWRhdGEgPSBzY3JpcHREYXRhO1xuICAgICAgICAgICAgbGV0IG9uTWV0YURhdGEgPSB0aGlzLl9tZXRhZGF0YS5vbk1ldGFEYXRhO1xuXG4gICAgICAgICAgICBpZiAodHlwZW9mIG9uTWV0YURhdGEuaGFzQXVkaW8gPT09ICdib29sZWFuJykgeyAvLyBoYXNBdWRpb1xuICAgICAgICAgICAgICAgIHRoaXMuX2hhc0F1ZGlvID0gb25NZXRhRGF0YS5oYXNBdWRpbztcbiAgICAgICAgICAgICAgICB0aGlzLl9tZWRpYUluZm8uaGFzQXVkaW8gPSB0aGlzLl9oYXNBdWRpbztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0eXBlb2Ygb25NZXRhRGF0YS5oYXNWaWRlbyA9PT0gJ2Jvb2xlYW4nKSB7IC8vIGhhc1ZpZGVvXG4gICAgICAgICAgICAgICAgdGhpcy5faGFzVmlkZW8gPSBvbk1ldGFEYXRhLmhhc1ZpZGVvO1xuICAgICAgICAgICAgICAgIHRoaXMuX21lZGlhSW5mby5oYXNWaWRlbyA9IHRoaXMuX2hhc1ZpZGVvO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHR5cGVvZiBvbk1ldGFEYXRhLmF1ZGlvZGF0YXJhdGUgPT09ICdudW1iZXInKSB7IC8vIGF1ZGlvZGF0YXJhdGVcbiAgICAgICAgICAgICAgICB0aGlzLl9tZWRpYUluZm8uYXVkaW9EYXRhUmF0ZSA9IG9uTWV0YURhdGEuYXVkaW9kYXRhcmF0ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0eXBlb2Ygb25NZXRhRGF0YS52aWRlb2RhdGFyYXRlID09PSAnbnVtYmVyJykgeyAvLyB2aWRlb2RhdGFyYXRlXG4gICAgICAgICAgICAgICAgdGhpcy5fbWVkaWFJbmZvLnZpZGVvRGF0YVJhdGUgPSBvbk1ldGFEYXRhLnZpZGVvZGF0YXJhdGU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodHlwZW9mIG9uTWV0YURhdGEud2lkdGggPT09ICdudW1iZXInKSB7IC8vIHdpZHRoXG4gICAgICAgICAgICAgICAgdGhpcy5fbWVkaWFJbmZvLndpZHRoID0gb25NZXRhRGF0YS53aWR0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0eXBlb2Ygb25NZXRhRGF0YS5oZWlnaHQgPT09ICdudW1iZXInKSB7IC8vIGhlaWdodFxuICAgICAgICAgICAgICAgIHRoaXMuX21lZGlhSW5mby5oZWlnaHQgPSBvbk1ldGFEYXRhLmhlaWdodDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0eXBlb2Ygb25NZXRhRGF0YS5kdXJhdGlvbiA9PT0gJ251bWJlcicpIHsgLy8gZHVyYXRpb25cbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuX2R1cmF0aW9uT3ZlcnJpZGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBkdXJhdGlvbiA9IE1hdGguZmxvb3Iob25NZXRhRGF0YS5kdXJhdGlvbiAqIHRoaXMuX3RpbWVzY2FsZSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2R1cmF0aW9uID0gZHVyYXRpb247XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX21lZGlhSW5mby5kdXJhdGlvbiA9IGR1cmF0aW9uO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fbWVkaWFJbmZvLmR1cmF0aW9uID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0eXBlb2Ygb25NZXRhRGF0YS5mcmFtZXJhdGUgPT09ICdudW1iZXInKSB7IC8vIGZyYW1lcmF0ZVxuICAgICAgICAgICAgICAgIGxldCBmcHNfbnVtID0gTWF0aC5mbG9vcihvbk1ldGFEYXRhLmZyYW1lcmF0ZSAqIDEwMDApO1xuICAgICAgICAgICAgICAgIGlmIChmcHNfbnVtID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgZnBzID0gZnBzX251bSAvIDEwMDA7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3JlZmVyZW5jZUZyYW1lUmF0ZS5maXhlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3JlZmVyZW5jZUZyYW1lUmF0ZS5mcHMgPSBmcHM7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3JlZmVyZW5jZUZyYW1lUmF0ZS5mcHNfbnVtID0gZnBzX251bTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fcmVmZXJlbmNlRnJhbWVSYXRlLmZwc19kZW4gPSAxMDAwO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9tZWRpYUluZm8uZnBzID0gZnBzO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0eXBlb2Ygb25NZXRhRGF0YS5rZXlmcmFtZXMgPT09ICdvYmplY3QnKSB7IC8vIGtleWZyYW1lc1xuICAgICAgICAgICAgICAgIHRoaXMuX21lZGlhSW5mby5oYXNLZXlmcmFtZXNJbmRleCA9IHRydWU7XG4gICAgICAgICAgICAgICAgbGV0IGtleWZyYW1lcyA9IG9uTWV0YURhdGEua2V5ZnJhbWVzO1xuICAgICAgICAgICAgICAgIGtleWZyYW1lcy50aW1lcyA9IG9uTWV0YURhdGEudGltZXM7XG4gICAgICAgICAgICAgICAga2V5ZnJhbWVzLmZpbGVwb3NpdGlvbnMgPSBvbk1ldGFEYXRhLmZpbGVwb3NpdGlvbnM7XG4gICAgICAgICAgICAgICAgdGhpcy5fbWVkaWFJbmZvLmtleWZyYW1lc0luZGV4ID0gdGhpcy5fcGFyc2VLZXlmcmFtZXNJbmRleChrZXlmcmFtZXMpO1xuICAgICAgICAgICAgICAgIG9uTWV0YURhdGEua2V5ZnJhbWVzID0gbnVsbDsgLy8ga2V5ZnJhbWVzIGhhcyBiZWVuIGV4dHJhY3RlZCwgcmVtb3ZlIGl0XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuX21lZGlhSW5mby5oYXNLZXlmcmFtZXNJbmRleCA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5fZGlzcGF0Y2ggPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuX21lZGlhSW5mby5tZXRhZGF0YSA9IG9uTWV0YURhdGE7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLlRBRywgJ1BhcnNlZCBvbk1ldGFEYXRhJyk7XG4gICAgICAgICAgICAvLyBpZiAodGhpcy5fbWVkaWFJbmZvLmlzQ29tcGxldGUoKSkge1xuICAgICAgICAgICAgLy8gdGhpcy5fb25NZWRpYUluZm8odGhpcy5fbWVkaWFJbmZvKTtcbiAgICAgICAgICAgIC8vIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9tZWRpYUluZm87XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBfcGFyc2VLZXlmcmFtZXNJbmRleChrZXlmcmFtZXMpIHtcbiAgICAgICAgbGV0IHRpbWVzID0gW107XG4gICAgICAgIGxldCBmaWxlcG9zaXRpb25zID0gW107XG5cbiAgICAgICAgLy8gaWdub3JlIGZpcnN0IGtleWZyYW1lIHdoaWNoIGlzIGFjdHVhbGx5IEFWQyBTZXF1ZW5jZSBIZWFkZXIgKEFWQ0RlY29kZXJDb25maWd1cmF0aW9uUmVjb3JkKVxuICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8IGtleWZyYW1lcy50aW1lcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgbGV0IHRpbWUgPSB0aGlzLl90aW1lc3RhbXBCYXNlICsgTWF0aC5mbG9vcihrZXlmcmFtZXMudGltZXNbaV0gKiAxMDAwKTtcbiAgICAgICAgICAgIHRpbWVzLnB1c2godGltZSk7XG4gICAgICAgICAgICBmaWxlcG9zaXRpb25zLnB1c2goa2V5ZnJhbWVzLmZpbGVwb3NpdGlvbnNbaV0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHRpbWVzOiB0aW1lcyxcbiAgICAgICAgICAgIGZpbGVwb3NpdGlvbnM6IGZpbGVwb3NpdGlvbnNcbiAgICAgICAgfTtcbiAgICB9XG5cblxuICAgIC8qKlxuICAgICAqIOS8oOWFpXRhZ3PovpPlh7ptb29m5ZKMbWRhdFxuICAgICAqIFxuICAgICAqIEBwYXJhbSB7YW55fSB0YWdzIFxuICAgICAqIFxuICAgICAqIEBtZW1iZXJvZiB0YWdEZW11eFxuICAgICAqL1xuICAgIG1vb2ZUYWcodGFncykge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRhZ3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHRoaXMucGFyc2VDaHVua3ModGFnc1tpXSk7XG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhcInRhZ1RpbWVzdGFtcFwiLCB0YWdzW2ldLmdldFRpbWUoKSwgdGFnc1tpXSk7XG4gICAgICAgIH1cblxuICAgIH1cblxuICAgIHBhcnNlQ2h1bmtzKGZsdnRhZykge1xuICAgICAgICBzd2l0Y2ggKGZsdnRhZy50YWdUeXBlKSB7XG4gICAgICAgICAgICBjYXNlIDg6IC8vIEF1ZGlvXG4gICAgICAgICAgICAgICAgdGhpcy5fcGFyc2VBdWRpb0RhdGEoZmx2dGFnLmJvZHkuYnVmZmVyLCAwLCBmbHZ0YWcuYm9keS5sZW5ndGgsIGZsdnRhZy5nZXRUaW1lKCkpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSA5OiAvLyBWaWRlb1xuICAgICAgICAgICAgICAgIHRoaXMuX3BhcnNlVmlkZW9EYXRhKGZsdnRhZy5ib2R5LmJ1ZmZlciwgMCwgZmx2dGFnLmJvZHkubGVuZ3RoLCBmbHZ0YWcuZ2V0VGltZSgpLCAwKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgMTg6IC8vIFNjcmlwdERhdGFPYmplY3RcbiAgICAgICAgICAgICAgICB0aGlzLl9wYXJzZVNjcmlwdERhdGEoZmx2dGFnLmJvZHksIDAsIGZsdnRhZy5ib2R5Lmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBfcGFyc2VWaWRlb0RhdGEoYXJyYXlCdWZmZXIsIGRhdGFPZmZzZXQsIGRhdGFTaXplLCB0YWdUaW1lc3RhbXAsIHRhZ1Bvc2l0aW9uKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwidGFnVGltZXN0YW1wXCIsIHRhZ1RpbWVzdGFtcCk7XG4gICAgICAgIGlmIChkYXRhU2l6ZSA8PSAxKSB7XG4gICAgICAgICAgICBMb2cudyh0aGlzLlRBRywgJ0ZsdjogSW52YWxpZCB2aWRlbyBwYWNrZXQsIG1pc3NpbmcgVmlkZW9EYXRhIHBheWxvYWQhJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy/ojrflj5YgdmlkZW8gdGFnIGJvZHkg56ys5LiA5a2X6IqCXG4gICAgICAgIGxldCBzcGVjID0gKG5ldyBVaW50OEFycmF5KGFycmF5QnVmZmVyLCBkYXRhT2Zmc2V0LCBkYXRhU2l6ZSkpWzBdO1xuICAgICAgICAvL+iOt+WPluaYr+WQpuaYr+WFs+mUruW4p1xuICAgICAgICBsZXQgZnJhbWVUeXBlID0gKHNwZWMgJiAyNDApID4+PiA0O1xuICAgICAgICAvL+iOt+WPlue8lueggeagvOW8j1xuICAgICAgICBsZXQgY29kZWNJZCA9IHNwZWMgJiAxNTtcblxuICAgICAgICBpZiAoY29kZWNJZCAhPT0gNykge1xuICAgICAgICAgICAgdGhpcy5fb25FcnJvcihEZW11eEVycm9ycy5DT0RFQ19VTlNVUFBPUlRFRCwgYEZsdjogVW5zdXBwb3J0ZWQgY29kZWMgaW4gdmlkZW8gZnJhbWU6ICR7Y29kZWNJZH1gKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX3BhcnNlQVZDVmlkZW9QYWNrZXQoYXJyYXlCdWZmZXIsIGRhdGFPZmZzZXQgKyAxLCBkYXRhU2l6ZSAtIDEsIHRhZ1RpbWVzdGFtcCwgdGFnUG9zaXRpb24sIGZyYW1lVHlwZSk7XG4gICAgfVxuXG4gICAgX3BhcnNlQVZDVmlkZW9QYWNrZXQoYXJyYXlCdWZmZXIsIGRhdGFPZmZzZXQsIGRhdGFTaXplLCB0YWdUaW1lc3RhbXAsIHRhZ1Bvc2l0aW9uLCBmcmFtZVR5cGUpIHtcbiAgICAgICAgaWYgKGRhdGFTaXplIDwgNCkge1xuICAgICAgICAgICAgTG9nLncodGhpcy5UQUcsICdGbHY6IEludmFsaWQgQVZDIHBhY2tldCwgbWlzc2luZyBBVkNQYWNrZXRUeXBlIG9yL2FuZCBDb21wb3NpdGlvblRpbWUnKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBsZSA9IHRoaXMuX2xpdHRsZUVuZGlhbjtcbiAgICAgICAgLy/ojrflj5YgdmlkZW8gdGFnIGJvZHkg56ysMuWtl+iKguWIsOe7k+WwvlxuICAgICAgICBsZXQgdiA9IG5ldyBEYXRhVmlldyhhcnJheUJ1ZmZlciwgZGF0YU9mZnNldCwgZGF0YVNpemUpO1xuXG4gICAgICAgIC8vSUYgQ29kZWNJRCA9PSA3ICBBVkNQYWNrZXRUeXBlXG4gICAgICAgIC8vIDAgPSBBVkMgc2VxdWVuY2UgaGVhZGVyXG4gICAgICAgIC8vIDEgPSBBVkMgTkFMVVxuICAgICAgICAvLyAyID0gQVZDIGVuZCBvZiBzZXF1ZW5jZSAobG93ZXIgbGV2ZWwgTkFMVSBzZXF1ZW5jZSBlbmRlciBpcyBub3QgcmVxdWlyZWQgb3Igc3VwcG9ydGVkKVxuICAgICAgICBsZXQgcGFja2V0VHlwZSA9IHYuZ2V0VWludDgoMCk7XG4gICAgICAgIC8vIDPlrZfoioJcbiAgICAgICAgLy8gSUYgQVZDUGFja2V0VHlwZSA9PSAxXG4gICAgICAgIC8vICBDb21wb3NpdGlvbiB0aW1lIG9mZnNldFxuICAgICAgICAvLyBFTFNFXG4gICAgICAgIC8vICAwXG4gICAgICAgIGxldCBjdHMgPSB2LmdldFVpbnQzMigwLCAhbGUpICYgMHgwMEZGRkZGRjtcblxuICAgICAgICAvL0lGIEFWQ1BhY2tldFR5cGUgPT0gMCBBVkNEZWNvZGVyQ29uZmlndXJhdGlvblJlY29yZO+8iEFWQyBzZXF1ZW5jZSBoZWFkZXLvvIlcbiAgICAgICAgLy9JRiBBVkNQYWNrZXRUeXBlID09IDEgT25lIG9yIG1vcmUgTkFMVXMgKEZ1bGwgZnJhbWVzIGFyZSByZXF1aXJlZClcblxuICAgICAgICAvKipcbiAgICAgICAgICpBVkNEZWNvZGVyQ29uZmlndXJhdGlvblJlY29yZC7ljIXlkKvnnYDmmK9ILjI2NOino+eggeebuOWFs+avlOi+g+mHjeimgeeahHNwc+WSjHBwc+S/oeaBr++8jFxuICAgICAgICAgKuWGjee7mUFWQ+ino+eggeWZqOmAgeaVsOaNriDmtYHkuYvliY3kuIDlrpropoHmiopzcHPlkoxwcHPkv6Hmga/pgIHlh7rvvIzlkKbliJnnmoTor53op6PnoIHlmajkuI3og73mraPluLjop6PnoIHjgIJcbiAgICAgICAgICrogIzkuJTlnKjop6PnoIHlmahzdG9w5LmL5ZCO5YaN5qyhc3RhcnTkuYvliY3vvIzlpoJzZWVr44CB5b+r6L+b5b+r6YCA54q25oCB5YiH5o2i562J77yMXG4gICAgICAgICAq6YO9IOmcgOimgemHjeaWsOmAgeS4gOmBjXNwc+WSjHBwc+eahOS/oeaBry5BVkNEZWNvZGVyQ29uZmlndXJhdGlvblJlY29yZOWcqEZMVuaWh+S7tuS4reS4gOiIrOaDheWGteS5n+aYr+WHuueOsDHmrKHvvIxcbiAgICAgICAgICrkuZ/lsLHmmK/nrKzkuIDkuKogdmlkZW8gdGFnLlxuICAgICAgICAgKi9cbiAgICAgICAgaWYgKHBhY2tldFR5cGUgPT09IDApIHsgLy8gQVZDRGVjb2RlckNvbmZpZ3VyYXRpb25SZWNvcmRcbiAgICAgICAgICAgIHRoaXMuX3BhcnNlQVZDRGVjb2RlckNvbmZpZ3VyYXRpb25SZWNvcmQoYXJyYXlCdWZmZXIsIGRhdGFPZmZzZXQgKyA0LCBkYXRhU2l6ZSAtIDQpO1xuICAgICAgICB9IGVsc2UgaWYgKHBhY2tldFR5cGUgPT09IDEpIHsgLy8gT25lIG9yIG1vcmUgTmFsdXNcbiAgICAgICAgICAgIHRoaXMuX3BhcnNlQVZDVmlkZW9EYXRhKGFycmF5QnVmZmVyLCBkYXRhT2Zmc2V0ICsgNCwgZGF0YVNpemUgLSA0LCB0YWdUaW1lc3RhbXAsIHRhZ1Bvc2l0aW9uLCBmcmFtZVR5cGUsIGN0cyk7XG4gICAgICAgIH0gZWxzZSBpZiAocGFja2V0VHlwZSA9PT0gMikge1xuICAgICAgICAgICAgLy8gZW1wdHksIEFWQyBlbmQgb2Ygc2VxdWVuY2VcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX29uRXJyb3IoRGVtdXhFcnJvcnMuRk9STUFUX0VSUk9SLCBgRmx2OiBJbnZhbGlkIHZpZGVvIHBhY2tldCB0eXBlICR7cGFja2V0VHlwZX1gKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFWQyDliJ3lp4vljJZcbiAgICAgKi9cbiAgICBfcGFyc2VBVkNEZWNvZGVyQ29uZmlndXJhdGlvblJlY29yZChhcnJheUJ1ZmZlciwgZGF0YU9mZnNldCwgZGF0YVNpemUpIHtcbiAgICAgICAgaWYgKGRhdGFTaXplIDwgNykge1xuICAgICAgICAgICAgTG9nLncodGhpcy5UQUcsICdGbHY6IEludmFsaWQgQVZDRGVjb2RlckNvbmZpZ3VyYXRpb25SZWNvcmQsIGxhY2sgb2YgZGF0YSEnKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBtZXRhID0gdGhpcy5fdmlkZW9NZXRhZGF0YTtcbiAgICAgICAgbGV0IHRyYWNrID0gdGhpcy5fdmlkZW9UcmFjaztcbiAgICAgICAgbGV0IGxlID0gdGhpcy5fbGl0dGxlRW5kaWFuO1xuICAgICAgICBsZXQgdiA9IG5ldyBEYXRhVmlldyhhcnJheUJ1ZmZlciwgZGF0YU9mZnNldCwgZGF0YVNpemUpO1xuXG4gICAgICAgIGlmICghbWV0YSkge1xuICAgICAgICAgICAgbWV0YSA9IHRoaXMuX3ZpZGVvTWV0YWRhdGEgPSB7fTtcbiAgICAgICAgICAgIG1ldGEudHlwZSA9ICd2aWRlbyc7XG4gICAgICAgICAgICBtZXRhLmlkID0gdHJhY2suaWQ7XG4gICAgICAgICAgICBtZXRhLnRpbWVzY2FsZSA9IHRoaXMuX3RpbWVzY2FsZTtcbiAgICAgICAgICAgIG1ldGEuZHVyYXRpb24gPSB0aGlzLl9kdXJhdGlvbjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgbWV0YS5hdmNjICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgIExvZy53KHRoaXMuVEFHLCAnRm91bmQgYW5vdGhlciBBVkNEZWNvZGVyQ29uZmlndXJhdGlvblJlY29yZCEnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGxldCB2ZXJzaW9uID0gdi5nZXRVaW50OCgwKTsgLy8gY29uZmlndXJhdGlvblZlcnNpb25cbiAgICAgICAgbGV0IGF2Y1Byb2ZpbGUgPSB2LmdldFVpbnQ4KDEpOyAvLyBhdmNQcm9maWxlSW5kaWNhdGlvblxuICAgICAgICBsZXQgcHJvZmlsZUNvbXBhdGliaWxpdHkgPSB2LmdldFVpbnQ4KDIpOyAvLyBwcm9maWxlX2NvbXBhdGliaWxpdHlcbiAgICAgICAgbGV0IGF2Y0xldmVsID0gdi5nZXRVaW50OCgzKTsgLy8gQVZDTGV2ZWxJbmRpY2F0aW9uXG5cbiAgICAgICAgaWYgKHZlcnNpb24gIT09IDEgfHwgYXZjUHJvZmlsZSA9PT0gMCkge1xuICAgICAgICAgICAgdGhpcy5fb25FcnJvcihEZW11eEVycm9ycy5GT1JNQVRfRVJST1IsICdGbHY6IEludmFsaWQgQVZDRGVjb2RlckNvbmZpZ3VyYXRpb25SZWNvcmQnKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX25hbHVMZW5ndGhTaXplID0gKHYuZ2V0VWludDgoNCkgJiAzKSArIDE7IC8vIGxlbmd0aFNpemVNaW51c09uZVxuICAgICAgICBpZiAodGhpcy5fbmFsdUxlbmd0aFNpemUgIT09IDMgJiYgdGhpcy5fbmFsdUxlbmd0aFNpemUgIT09IDQpIHsgLy8gaG9seSBzaGl0ISEhXG4gICAgICAgICAgICB0aGlzLl9vbkVycm9yKERlbXV4RXJyb3JzLkZPUk1BVF9FUlJPUiwgYEZsdjogU3RyYW5nZSBOYWx1TGVuZ3RoU2l6ZU1pbnVzT25lOiAke3RoaXMuX25hbHVMZW5ndGhTaXplIC0gMX1gKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBzcHNDb3VudCA9IHYuZ2V0VWludDgoNSkgJiAzMTsgLy8gbnVtT2ZTZXF1ZW5jZVBhcmFtZXRlclNldHNcbiAgICAgICAgaWYgKHNwc0NvdW50ID09PSAwIHx8IHNwc0NvdW50ID4gMSkge1xuICAgICAgICAgICAgdGhpcy5fb25FcnJvcihEZW11eEVycm9ycy5GT1JNQVRfRVJST1IsIGBGbHY6IEludmFsaWQgSDI2NCBTUFMgY291bnQ6ICR7c3BzQ291bnR9YCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgb2Zmc2V0ID0gNjtcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNwc0NvdW50OyBpKyspIHtcbiAgICAgICAgICAgIGxldCBsZW4gPSB2LmdldFVpbnQxNihvZmZzZXQsICFsZSk7IC8vIHNlcXVlbmNlUGFyYW1ldGVyU2V0TGVuZ3RoXG4gICAgICAgICAgICBvZmZzZXQgKz0gMjtcblxuICAgICAgICAgICAgaWYgKGxlbiA9PT0gMCkge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBOb3RpY2U6IE5hbHUgd2l0aG91dCBzdGFydGNvZGUgaGVhZGVyICgwMCAwMCAwMCAwMSlcbiAgICAgICAgICAgIGxldCBzcHMgPSBuZXcgVWludDhBcnJheShhcnJheUJ1ZmZlciwgZGF0YU9mZnNldCArIG9mZnNldCwgbGVuKTtcbiAgICAgICAgICAgIG9mZnNldCArPSBsZW47XG5cbiAgICAgICAgICAgIGxldCBjb25maWcgPSBTUFNQYXJzZXIucGFyc2VTUFMoc3BzKTtcbiAgICAgICAgICAgIG1ldGEuY29kZWNXaWR0aCA9IGNvbmZpZy5jb2RlY19zaXplLndpZHRoO1xuICAgICAgICAgICAgbWV0YS5jb2RlY0hlaWdodCA9IGNvbmZpZy5jb2RlY19zaXplLmhlaWdodDtcbiAgICAgICAgICAgIG1ldGEucHJlc2VudFdpZHRoID0gY29uZmlnLnByZXNlbnRfc2l6ZS53aWR0aDtcbiAgICAgICAgICAgIG1ldGEucHJlc2VudEhlaWdodCA9IGNvbmZpZy5wcmVzZW50X3NpemUuaGVpZ2h0O1xuXG4gICAgICAgICAgICBtZXRhLnByb2ZpbGUgPSBjb25maWcucHJvZmlsZV9zdHJpbmc7XG4gICAgICAgICAgICBtZXRhLmxldmVsID0gY29uZmlnLmxldmVsX3N0cmluZztcbiAgICAgICAgICAgIG1ldGEuYml0RGVwdGggPSBjb25maWcuYml0X2RlcHRoO1xuICAgICAgICAgICAgbWV0YS5jaHJvbWFGb3JtYXQgPSBjb25maWcuY2hyb21hX2Zvcm1hdDtcbiAgICAgICAgICAgIG1ldGEuc2FyUmF0aW8gPSBjb25maWcuc2FyX3JhdGlvO1xuICAgICAgICAgICAgbWV0YS5mcmFtZVJhdGUgPSBjb25maWcuZnJhbWVfcmF0ZTtcblxuICAgICAgICAgICAgaWYgKGNvbmZpZy5mcmFtZV9yYXRlLmZpeGVkID09PSBmYWxzZSB8fFxuICAgICAgICAgICAgICAgIGNvbmZpZy5mcmFtZV9yYXRlLmZwc19udW0gPT09IDAgfHxcbiAgICAgICAgICAgICAgICBjb25maWcuZnJhbWVfcmF0ZS5mcHNfZGVuID09PSAwKSB7XG4gICAgICAgICAgICAgICAgbWV0YS5mcmFtZVJhdGUgPSB0aGlzLl9yZWZlcmVuY2VGcmFtZVJhdGU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGxldCBmcHNfZGVuID0gbWV0YS5mcmFtZVJhdGUuZnBzX2RlbjtcbiAgICAgICAgICAgIGxldCBmcHNfbnVtID0gbWV0YS5mcmFtZVJhdGUuZnBzX251bTtcbiAgICAgICAgICAgIG1ldGEucmVmU2FtcGxlRHVyYXRpb24gPSBNYXRoLmZsb29yKG1ldGEudGltZXNjYWxlICogKGZwc19kZW4gLyBmcHNfbnVtKSk7XG5cbiAgICAgICAgICAgIGxldCBjb2RlY0FycmF5ID0gc3BzLnN1YmFycmF5KDEsIDQpO1xuICAgICAgICAgICAgbGV0IGNvZGVjU3RyaW5nID0gJ2F2YzEuJztcbiAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgMzsgaisrKSB7XG4gICAgICAgICAgICAgICAgbGV0IGggPSBjb2RlY0FycmF5W2pdLnRvU3RyaW5nKDE2KTtcbiAgICAgICAgICAgICAgICBpZiAoaC5sZW5ndGggPCAyKSB7XG4gICAgICAgICAgICAgICAgICAgIGggPSAnMCcgKyBoO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb2RlY1N0cmluZyArPSBoO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbWV0YS5jb2RlYyA9IGNvZGVjU3RyaW5nO1xuXG4gICAgICAgICAgICBsZXQgbWkgPSB0aGlzLl9tZWRpYUluZm87XG4gICAgICAgICAgICBtaS53aWR0aCA9IG1ldGEuY29kZWNXaWR0aDtcbiAgICAgICAgICAgIG1pLmhlaWdodCA9IG1ldGEuY29kZWNIZWlnaHQ7XG4gICAgICAgICAgICBtaS5mcHMgPSBtZXRhLmZyYW1lUmF0ZS5mcHM7XG4gICAgICAgICAgICBtaS5wcm9maWxlID0gbWV0YS5wcm9maWxlO1xuICAgICAgICAgICAgbWkubGV2ZWwgPSBtZXRhLmxldmVsO1xuICAgICAgICAgICAgbWkuY2hyb21hRm9ybWF0ID0gY29uZmlnLmNocm9tYV9mb3JtYXRfc3RyaW5nO1xuICAgICAgICAgICAgbWkuc2FyTnVtID0gbWV0YS5zYXJSYXRpby53aWR0aDtcbiAgICAgICAgICAgIG1pLnNhckRlbiA9IG1ldGEuc2FyUmF0aW8uaGVpZ2h0O1xuICAgICAgICAgICAgbWkudmlkZW9Db2RlYyA9IGNvZGVjU3RyaW5nO1xuXG4gICAgICAgICAgICBpZiAobWkuaGFzQXVkaW8pIHtcbiAgICAgICAgICAgICAgICBpZiAobWkuYXVkaW9Db2RlYyAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIG1pLm1pbWVUeXBlID0gJ3ZpZGVvL3gtZmx2OyBjb2RlY3M9XCInICsgbWkudmlkZW9Db2RlYyArICcsJyArIG1pLmF1ZGlvQ29kZWMgKyAnXCInO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbWkubWltZVR5cGUgPSAndmlkZW8veC1mbHY7IGNvZGVjcz1cIicgKyBtaS52aWRlb0NvZGVjICsgJ1wiJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChtaS5pc0NvbXBsZXRlKCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9vbk1lZGlhSW5mbyhtaSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgcHBzQ291bnQgPSB2LmdldFVpbnQ4KG9mZnNldCk7IC8vIG51bU9mUGljdHVyZVBhcmFtZXRlclNldHNcbiAgICAgICAgaWYgKHBwc0NvdW50ID09PSAwIHx8IHBwc0NvdW50ID4gMSkge1xuICAgICAgICAgICAgdGhpcy5fb25FcnJvcihEZW11eEVycm9ycy5GT1JNQVRfRVJST1IsIGBGbHY6IEludmFsaWQgSDI2NCBQUFMgY291bnQ6ICR7cHBzQ291bnR9YCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBvZmZzZXQrKztcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBwc0NvdW50OyBpKyspIHtcbiAgICAgICAgICAgIGxldCBsZW4gPSB2LmdldFVpbnQxNihvZmZzZXQsICFsZSk7IC8vIHBpY3R1cmVQYXJhbWV0ZXJTZXRMZW5ndGhcbiAgICAgICAgICAgIG9mZnNldCArPSAyO1xuXG4gICAgICAgICAgICBpZiAobGVuID09PSAwKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIHBwcyBpcyB1c2VsZXNzIGZvciBleHRyYWN0aW5nIHZpZGVvIGluZm9ybWF0aW9uXG4gICAgICAgICAgICBvZmZzZXQgKz0gbGVuO1xuICAgICAgICB9XG5cbiAgICAgICAgbWV0YS5hdmNjID0gbmV3IFVpbnQ4QXJyYXkoZGF0YVNpemUpO1xuICAgICAgICBtZXRhLmF2Y2Muc2V0KG5ldyBVaW50OEFycmF5KGFycmF5QnVmZmVyLCBkYXRhT2Zmc2V0LCBkYXRhU2l6ZSksIDApO1xuICAgICAgICBjb25zb2xlLmxvZyh0aGlzLlRBRywgJ1BhcnNlZCBBVkNEZWNvZGVyQ29uZmlndXJhdGlvblJlY29yZCcpO1xuXG4gICAgICAgIGlmICh0aGlzLl9pc0luaXRpYWxNZXRhZGF0YURpc3BhdGNoZWQoKSkge1xuICAgICAgICAgICAgLy8gZmx1c2ggcGFyc2VkIGZyYW1lc1xuICAgICAgICAgICAgaWYgKHRoaXMuX2Rpc3BhdGNoICYmICh0aGlzLl9hdWRpb1RyYWNrLmxlbmd0aCB8fCB0aGlzLl92aWRlb1RyYWNrLmxlbmd0aCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9vbkRhdGFBdmFpbGFibGUodGhpcy5fYXVkaW9UcmFjaywgdGhpcy5fdmlkZW9UcmFjayk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl92aWRlb0luaXRpYWxNZXRhZGF0YURpc3BhdGNoZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIC8vIG5vdGlmeSBuZXcgbWV0YWRhdGFcbiAgICAgICAgdGhpcy5fZGlzcGF0Y2ggPSBmYWxzZTtcbiAgICAgICAgLy8gaWYgKHRoaXMuX29uVHJhY2tNZXRhZGF0YSkge1xuICAgICAgICAvLyAgICAgdGhpcy5fb25UcmFja01ldGFkYXRhLmNhbGwobnVsbCwgbWV0YSk7XG4gICAgICAgIC8vIH1cblxuICAgICAgICB0aGlzLl9vblRyYWNrTWV0YWRhdGEoJ3ZpZGVvJywgbWV0YSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICog5pmu6YCa55qEQVZDIOeJh+autVxuICAgICAqL1xuICAgIF9wYXJzZUFWQ1ZpZGVvRGF0YShhcnJheUJ1ZmZlciwgZGF0YU9mZnNldCwgZGF0YVNpemUsIHRhZ1RpbWVzdGFtcCwgdGFnUG9zaXRpb24sIGZyYW1lVHlwZSwgY3RzKSB7XG4gICAgICAgIGxldCBsZSA9IHRoaXMuX2xpdHRsZUVuZGlhbjtcbiAgICAgICAgbGV0IHYgPSBuZXcgRGF0YVZpZXcoYXJyYXlCdWZmZXIsIGRhdGFPZmZzZXQsIGRhdGFTaXplKTtcblxuICAgICAgICBsZXQgdW5pdHMgPSBbXSxcbiAgICAgICAgICAgIGxlbmd0aCA9IDA7XG5cbiAgICAgICAgbGV0IG9mZnNldCA9IDA7XG4gICAgICAgIGNvbnN0IGxlbmd0aFNpemUgPSB0aGlzLl9uYWx1TGVuZ3RoU2l6ZTtcbiAgICAgICAgbGV0IGR0cyA9IHRoaXMuX3RpbWVzdGFtcEJhc2UgKyB0YWdUaW1lc3RhbXA7XG4gICAgICAgIGxldCBrZXlmcmFtZSA9IChmcmFtZVR5cGUgPT09IDEpOyAvLyBmcm9tIEZMViBGcmFtZSBUeXBlIGNvbnN0YW50c1xuXG4gICAgICAgIHdoaWxlIChvZmZzZXQgPCBkYXRhU2l6ZSkge1xuICAgICAgICAgICAgaWYgKG9mZnNldCArIDQgPj0gZGF0YVNpemUpIHtcbiAgICAgICAgICAgICAgICBMb2cudyh0aGlzLlRBRywgYE1hbGZvcm1lZCBOYWx1IG5lYXIgdGltZXN0YW1wICR7ZHRzfSwgb2Zmc2V0ID0gJHtvZmZzZXR9LCBkYXRhU2l6ZSA9ICR7ZGF0YVNpemV9YCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7IC8vIGRhdGEgbm90IGVub3VnaCBmb3IgbmV4dCBOYWx1XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBOYWx1IHdpdGggbGVuZ3RoLWhlYWRlciAoQVZDMSlcbiAgICAgICAgICAgIGxldCBuYWx1U2l6ZSA9IHYuZ2V0VWludDMyKG9mZnNldCwgIWxlKTsgLy8gQmlnLUVuZGlhbiByZWFkXG4gICAgICAgICAgICBpZiAobGVuZ3RoU2l6ZSA9PT0gMykge1xuICAgICAgICAgICAgICAgIG5hbHVTaXplID4+Pj0gODtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChuYWx1U2l6ZSA+IGRhdGFTaXplIC0gbGVuZ3RoU2l6ZSkge1xuICAgICAgICAgICAgICAgIExvZy53KHRoaXMuVEFHLCBgTWFsZm9ybWVkIE5hbHVzIG5lYXIgdGltZXN0YW1wICR7ZHRzfSwgTmFsdVNpemUgPiBEYXRhU2l6ZSFgKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGxldCB1bml0VHlwZSA9IHYuZ2V0VWludDgob2Zmc2V0ICsgbGVuZ3RoU2l6ZSkgJiAweDFGO1xuXG4gICAgICAgICAgICBpZiAodW5pdFR5cGUgPT09IDUpIHsgLy8gSURSXG4gICAgICAgICAgICAgICAga2V5ZnJhbWUgPSB0cnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBsZXQgZGF0YSA9IG5ldyBVaW50OEFycmF5KGFycmF5QnVmZmVyLCBkYXRhT2Zmc2V0ICsgb2Zmc2V0LCBsZW5ndGhTaXplICsgbmFsdVNpemUpO1xuICAgICAgICAgICAgbGV0IHVuaXQgPSB7IHR5cGU6IHVuaXRUeXBlLCBkYXRhOiBkYXRhIH07XG4gICAgICAgICAgICB1bml0cy5wdXNoKHVuaXQpO1xuICAgICAgICAgICAgbGVuZ3RoICs9IGRhdGEuYnl0ZUxlbmd0aDtcblxuICAgICAgICAgICAgb2Zmc2V0ICs9IGxlbmd0aFNpemUgKyBuYWx1U2l6ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh1bml0cy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGxldCB0cmFjayA9IHRoaXMuX3ZpZGVvVHJhY2s7XG4gICAgICAgICAgICBsZXQgYXZjU2FtcGxlID0ge1xuICAgICAgICAgICAgICAgIHVuaXRzOiB1bml0cyxcbiAgICAgICAgICAgICAgICBsZW5ndGg6IGxlbmd0aCxcbiAgICAgICAgICAgICAgICBpc0tleWZyYW1lOiBrZXlmcmFtZSxcbiAgICAgICAgICAgICAgICBkdHM6IGR0cyxcbiAgICAgICAgICAgICAgICBjdHM6IGN0cyxcbiAgICAgICAgICAgICAgICBwdHM6IChkdHMgKyBjdHMpXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKGtleWZyYW1lKSB7XG4gICAgICAgICAgICAgICAgYXZjU2FtcGxlLmZpbGVwb3NpdGlvbiA9IHRhZ1Bvc2l0aW9uO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdHJhY2suc2FtcGxlcy5wdXNoKGF2Y1NhbXBsZSk7XG4gICAgICAgICAgICB0cmFjay5sZW5ndGggKz0gbGVuZ3RoO1xuICAgICAgICB9XG4gICAgfVxuICAgIF9wYXJzZUF1ZGlvRGF0YShhcnJheUJ1ZmZlciwgZGF0YU9mZnNldCwgZGF0YVNpemUsIHRhZ1RpbWVzdGFtcCkge1xuICAgICAgICBpZiAoZGF0YVNpemUgPD0gMSkge1xuICAgICAgICAgICAgTG9nLncodGhpcy5UQUcsICdGbHY6IEludmFsaWQgYXVkaW8gcGFja2V0LCBtaXNzaW5nIFNvdW5kRGF0YSBwYXlsb2FkIScpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IG1ldGEgPSB0aGlzLl9hdWRpb01ldGFkYXRhO1xuICAgICAgICBsZXQgdHJhY2sgPSB0aGlzLl9hdWRpb1RyYWNrO1xuXG4gICAgICAgIGlmICghbWV0YSB8fCAhbWV0YS5jb2RlYykge1xuICAgICAgICAgICAgLy8gaW5pdGlhbCBtZXRhZGF0YVxuICAgICAgICAgICAgbWV0YSA9IHRoaXMuX2F1ZGlvTWV0YWRhdGEgPSB7fTtcbiAgICAgICAgICAgIG1ldGEudHlwZSA9ICdhdWRpbyc7XG4gICAgICAgICAgICBtZXRhLmlkID0gdHJhY2suaWQ7XG4gICAgICAgICAgICBtZXRhLnRpbWVzY2FsZSA9IHRoaXMuX3RpbWVzY2FsZTtcbiAgICAgICAgICAgIG1ldGEuZHVyYXRpb24gPSB0aGlzLl9kdXJhdGlvbjtcblxuICAgICAgICAgICAgbGV0IGxlID0gdGhpcy5fbGl0dGxlRW5kaWFuO1xuICAgICAgICAgICAgbGV0IHYgPSBuZXcgRGF0YVZpZXcoYXJyYXlCdWZmZXIsIGRhdGFPZmZzZXQsIGRhdGFTaXplKTtcblxuICAgICAgICAgICAgbGV0IHNvdW5kU3BlYyA9IHYuZ2V0VWludDgoMCk7XG5cbiAgICAgICAgICAgIGxldCBzb3VuZEZvcm1hdCA9IHNvdW5kU3BlYyA+Pj4gNDtcbiAgICAgICAgICAgIGlmIChzb3VuZEZvcm1hdCAhPT0gMTApIHsgLy8gQUFDXG4gICAgICAgICAgICAgICAgLy8gVE9ETzogc3VwcG9ydCBNUDMgYXVkaW8gY29kZWNcbiAgICAgICAgICAgICAgICB0aGlzLl9vbkVycm9yKERlbXV4RXJyb3JzLkNPREVDX1VOU1VQUE9SVEVELCAnRmx2OiBVbnN1cHBvcnRlZCBhdWRpbyBjb2RlYyBpZHg6ICcgKyBzb3VuZEZvcm1hdCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBsZXQgc291bmRSYXRlID0gMDtcbiAgICAgICAgICAgIGxldCBzb3VuZFJhdGVJbmRleCA9IChzb3VuZFNwZWMgJiAxMikgPj4+IDI7XG5cbiAgICAgICAgICAgIGxldCBzb3VuZFJhdGVUYWJsZSA9IFs1NTAwLCAxMTAyNSwgMjIwNTAsIDQ0MTAwLCA0ODAwMF07XG5cbiAgICAgICAgICAgIGlmIChzb3VuZFJhdGVJbmRleCA8IHNvdW5kUmF0ZVRhYmxlLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHNvdW5kUmF0ZSA9IHNvdW5kUmF0ZVRhYmxlW3NvdW5kUmF0ZUluZGV4XTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fb25FcnJvcihEZW11eEVycm9ycy5GT1JNQVRfRVJST1IsICdGbHY6IEludmFsaWQgYXVkaW8gc2FtcGxlIHJhdGUgaWR4OiAnICsgc291bmRSYXRlSW5kZXgpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbGV0IHNvdW5kU2l6ZSA9IChzb3VuZFNwZWMgJiAyKSA+Pj4gMTsgLy8gdW51c2VkXG4gICAgICAgICAgICBsZXQgc291bmRUeXBlID0gKHNvdW5kU3BlYyAmIDEpO1xuXG4gICAgICAgICAgICBtZXRhLmF1ZGlvU2FtcGxlUmF0ZSA9IHNvdW5kUmF0ZTtcbiAgICAgICAgICAgIG1ldGEuY2hhbm5lbENvdW50ID0gKHNvdW5kVHlwZSA9PT0gMCA/IDEgOiAyKTtcbiAgICAgICAgICAgIG1ldGEucmVmU2FtcGxlRHVyYXRpb24gPSBNYXRoLmZsb29yKDEwMjQgLyBtZXRhLmF1ZGlvU2FtcGxlUmF0ZSAqIG1ldGEudGltZXNjYWxlKTtcbiAgICAgICAgICAgIG1ldGEuY29kZWMgPSAnbXA0YS40MC41JztcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBhYWNEYXRhID0gdGhpcy5fcGFyc2VBQUNBdWRpb0RhdGEoYXJyYXlCdWZmZXIsIGRhdGFPZmZzZXQgKyAxLCBkYXRhU2l6ZSAtIDEpO1xuICAgICAgICBpZiAoYWFjRGF0YSA9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChhYWNEYXRhLnBhY2tldFR5cGUgPT09IDApIHsgLy8gQUFDIHNlcXVlbmNlIGhlYWRlciAoQXVkaW9TcGVjaWZpY0NvbmZpZylcbiAgICAgICAgICAgIGlmIChtZXRhLmNvbmZpZykge1xuICAgICAgICAgICAgICAgIExvZy53KHRoaXMuVEFHLCAnRm91bmQgYW5vdGhlciBBdWRpb1NwZWNpZmljQ29uZmlnIScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IG1pc2MgPSBhYWNEYXRhLmRhdGE7XG4gICAgICAgICAgICBtZXRhLmF1ZGlvU2FtcGxlUmF0ZSA9IG1pc2Muc2FtcGxpbmdSYXRlO1xuICAgICAgICAgICAgbWV0YS5jaGFubmVsQ291bnQgPSBtaXNjLmNoYW5uZWxDb3VudDtcbiAgICAgICAgICAgIG1ldGEuY29kZWMgPSBtaXNjLmNvZGVjO1xuICAgICAgICAgICAgbWV0YS5jb25maWcgPSBtaXNjLmNvbmZpZztcbiAgICAgICAgICAgIC8vIFRoZSBkZWNvZGUgcmVzdWx0IG9mIGFuIGFhYyBzYW1wbGUgaXMgMTAyNCBQQ00gc2FtcGxlc1xuICAgICAgICAgICAgbWV0YS5yZWZTYW1wbGVEdXJhdGlvbiA9IE1hdGguZmxvb3IoMTAyNCAvIG1ldGEuYXVkaW9TYW1wbGVSYXRlICogbWV0YS50aW1lc2NhbGUpO1xuICAgICAgICAgICAgY29uc29sZS5sb2codGhpcy5UQUcsICdQYXJzZWQgQXVkaW9TcGVjaWZpY0NvbmZpZycpO1xuXG4gICAgICAgICAgICBpZiAodGhpcy5faXNJbml0aWFsTWV0YWRhdGFEaXNwYXRjaGVkKCkpIHtcbiAgICAgICAgICAgICAgICAvLyBOb24taW5pdGlhbCBtZXRhZGF0YSwgZm9yY2UgZGlzcGF0Y2ggKG9yIGZsdXNoKSBwYXJzZWQgZnJhbWVzIHRvIHJlbXV4ZXJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5fZGlzcGF0Y2ggJiYgKHRoaXMuX2F1ZGlvVHJhY2subGVuZ3RoIHx8IHRoaXMuX3ZpZGVvVHJhY2subGVuZ3RoKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9vbkRhdGFBdmFpbGFibGUodGhpcy5fYXVkaW9UcmFjaywgdGhpcy5fdmlkZW9UcmFjayk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9hdWRpb0luaXRpYWxNZXRhZGF0YURpc3BhdGNoZWQgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gdGhlbiBub3RpZnkgbmV3IG1ldGFkYXRhXG4gICAgICAgICAgICB0aGlzLl9kaXNwYXRjaCA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5fb25UcmFja01ldGFkYXRhKCdhdWRpbycsIG1ldGEpO1xuXG4gICAgICAgICAgICBsZXQgbWkgPSB0aGlzLl9tZWRpYUluZm87XG4gICAgICAgICAgICBtaS5hdWRpb0NvZGVjID0gJ21wNGEuNDAuJyArIG1pc2Mub3JpZ2luYWxBdWRpb09iamVjdFR5cGU7XG4gICAgICAgICAgICBtaS5hdWRpb1NhbXBsZVJhdGUgPSBtZXRhLmF1ZGlvU2FtcGxlUmF0ZTtcbiAgICAgICAgICAgIG1pLmF1ZGlvQ2hhbm5lbENvdW50ID0gbWV0YS5jaGFubmVsQ291bnQ7XG4gICAgICAgICAgICBpZiAobWkuaGFzVmlkZW8pIHtcbiAgICAgICAgICAgICAgICBpZiAobWkudmlkZW9Db2RlYyAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIG1pLm1pbWVUeXBlID0gJ3ZpZGVvL3gtZmx2OyBjb2RlY3M9XCInICsgbWkudmlkZW9Db2RlYyArICcsJyArIG1pLmF1ZGlvQ29kZWMgKyAnXCInO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbWkubWltZVR5cGUgPSAndmlkZW8veC1mbHY7IGNvZGVjcz1cIicgKyBtaS5hdWRpb0NvZGVjICsgJ1wiJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChtaS5pc0NvbXBsZXRlKCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9vbk1lZGlhSW5mbyhtaSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH0gZWxzZSBpZiAoYWFjRGF0YS5wYWNrZXRUeXBlID09PSAxKSB7IC8vIEFBQyByYXcgZnJhbWUgZGF0YVxuICAgICAgICAgICAgbGV0IGR0cyA9IHRoaXMuX3RpbWVzdGFtcEJhc2UgKyB0YWdUaW1lc3RhbXA7XG4gICAgICAgICAgICBsZXQgYWFjU2FtcGxlID0geyB1bml0OiBhYWNEYXRhLmRhdGEsIGR0czogZHRzLCBwdHM6IGR0cyB9O1xuICAgICAgICAgICAgdHJhY2suc2FtcGxlcy5wdXNoKGFhY1NhbXBsZSk7XG4gICAgICAgICAgICB0cmFjay5sZW5ndGggKz0gYWFjRGF0YS5kYXRhLmxlbmd0aDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMuVEFHLCBgRmx2OiBVbnN1cHBvcnRlZCBBQUMgZGF0YSB0eXBlICR7YWFjRGF0YS5wYWNrZXRUeXBlfWApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgX3BhcnNlQUFDQXVkaW9EYXRhKGFycmF5QnVmZmVyLCBkYXRhT2Zmc2V0LCBkYXRhU2l6ZSkge1xuICAgICAgICBpZiAoZGF0YVNpemUgPD0gMSkge1xuICAgICAgICAgICAgY29uc29sZS5sb2codGhpcy5UQUcsICdGbHY6IEludmFsaWQgQUFDIHBhY2tldCwgbWlzc2luZyBBQUNQYWNrZXRUeXBlIG9yL2FuZCBEYXRhIScpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHJlc3VsdCA9IHt9O1xuICAgICAgICBsZXQgYXJyYXkgPSBuZXcgVWludDhBcnJheShhcnJheUJ1ZmZlciwgZGF0YU9mZnNldCwgZGF0YVNpemUpO1xuXG4gICAgICAgIHJlc3VsdC5wYWNrZXRUeXBlID0gYXJyYXlbMF07XG5cbiAgICAgICAgaWYgKGFycmF5WzBdID09PSAwKSB7XG4gICAgICAgICAgICByZXN1bHQuZGF0YSA9IHRoaXMuX3BhcnNlQUFDQXVkaW9TcGVjaWZpY0NvbmZpZyhhcnJheUJ1ZmZlciwgZGF0YU9mZnNldCArIDEsIGRhdGFTaXplIC0gMSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXN1bHQuZGF0YSA9IGFycmF5LnN1YmFycmF5KDEpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICBfcGFyc2VBQUNBdWRpb1NwZWNpZmljQ29uZmlnKGFycmF5QnVmZmVyLCBkYXRhT2Zmc2V0LCBkYXRhU2l6ZSkge1xuICAgICAgICBsZXQgYXJyYXkgPSBuZXcgVWludDhBcnJheShhcnJheUJ1ZmZlciwgZGF0YU9mZnNldCwgZGF0YVNpemUpO1xuICAgICAgICBsZXQgY29uZmlnID0gbnVsbDtcblxuICAgICAgICBsZXQgbXBlZ1NhbXBsaW5nUmF0ZXMgPSBbXG4gICAgICAgICAgICA5NjAwMCwgODgyMDAsIDY0MDAwLCA0ODAwMCwgNDQxMDAsIDMyMDAwLFxuICAgICAgICAgICAgMjQwMDAsIDIyMDUwLCAxNjAwMCwgMTIwMDAsIDExMDI1LCA4MDAwLCA3MzUwXG4gICAgICAgIF07XG5cbiAgICAgICAgLyogQXVkaW8gT2JqZWN0IFR5cGU6XG4gICAgICAgICAgIDA6IE51bGxcbiAgICAgICAgICAgMTogQUFDIE1haW5cbiAgICAgICAgICAgMjogQUFDIExDXG4gICAgICAgICAgIDM6IEFBQyBTU1IgKFNjYWxhYmxlIFNhbXBsZSBSYXRlKVxuICAgICAgICAgICA0OiBBQUMgTFRQIChMb25nIFRlcm0gUHJlZGljdGlvbilcbiAgICAgICAgICAgNTogSEUtQUFDIC8gU0JSIChTcGVjdHJhbCBCYW5kIFJlcGxpY2F0aW9uKVxuICAgICAgICAgICA2OiBBQUMgU2NhbGFibGVcbiAgICAgICAgKi9cblxuICAgICAgICBsZXQgYXVkaW9PYmplY3RUeXBlID0gMDtcbiAgICAgICAgbGV0IG9yaWdpbmFsQXVkaW9PYmplY3RUeXBlID0gMDtcbiAgICAgICAgbGV0IGF1ZGlvRXh0ZW5zaW9uT2JqZWN0VHlwZSA9IG51bGw7XG4gICAgICAgIGxldCBzYW1wbGluZ0luZGV4ID0gMDtcbiAgICAgICAgbGV0IGV4dGVuc2lvblNhbXBsaW5nSW5kZXggPSBudWxsO1xuICAgICAgICAvLyBkZWJ1Z2dlcjtcbiAgICAgICAgLy8gNSBiaXRzXG4gICAgICAgIGF1ZGlvT2JqZWN0VHlwZSA9IG9yaWdpbmFsQXVkaW9PYmplY3RUeXBlID0gYXJyYXlbMF0gPj4+IDM7XG4gICAgICAgIC8vIDQgYml0c1xuICAgICAgICBzYW1wbGluZ0luZGV4ID0gKChhcnJheVswXSAmIDB4MDcpIDw8IDEpIHwgKGFycmF5WzFdID4+PiA3KTtcbiAgICAgICAgaWYgKHNhbXBsaW5nSW5kZXggPCAwIHx8IHNhbXBsaW5nSW5kZXggPj0gbXBlZ1NhbXBsaW5nUmF0ZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICB0aGlzLl9vbkVycm9yKERlbXV4RXJyb3JzLkZPUk1BVF9FUlJPUiwgJ0ZsdjogQUFDIGludmFsaWQgc2FtcGxpbmcgZnJlcXVlbmN5IGluZGV4IScpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHNhbXBsaW5nRnJlcXVlbmNlID0gbXBlZ1NhbXBsaW5nUmF0ZXNbc2FtcGxpbmdJbmRleF07XG5cbiAgICAgICAgLy8gNCBiaXRzXG4gICAgICAgIGxldCBjaGFubmVsQ29uZmlnID0gKGFycmF5WzFdICYgMHg3OCkgPj4+IDM7XG4gICAgICAgIGlmIChjaGFubmVsQ29uZmlnIDwgMCB8fCBjaGFubmVsQ29uZmlnID49IDgpIHtcbiAgICAgICAgICAgIHRoaXMuX29uRXJyb3IoRGVtdXhFcnJvcnMuRk9STUFUX0VSUk9SLCAnRmx2OiBBQUMgaW52YWxpZCBjaGFubmVsIGNvbmZpZ3VyYXRpb24nKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChhdWRpb09iamVjdFR5cGUgPT09IDUpIHsgLy8gSEUtQUFDP1xuICAgICAgICAgICAgLy8gNCBiaXRzXG4gICAgICAgICAgICBleHRlbnNpb25TYW1wbGluZ0luZGV4ID0gKChhcnJheVsxXSAmIDB4MDcpIDw8IDEpIHwgKGFycmF5WzJdID4+PiA3KTtcbiAgICAgICAgICAgIC8vIDUgYml0c1xuICAgICAgICAgICAgYXVkaW9FeHRlbnNpb25PYmplY3RUeXBlID0gKGFycmF5WzJdICYgMHg3QykgPj4+IDI7XG4gICAgICAgIH1cblxuICAgICAgICAvLyB3b3JrYXJvdW5kcyBmb3IgdmFyaW91cyBicm93c2Vyc1xuICAgICAgICBsZXQgdXNlckFnZW50ID0gc2VsZi5uYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCk7XG5cbiAgICAgICAgaWYgKHVzZXJBZ2VudC5pbmRleE9mKCdmaXJlZm94JykgIT09IC0xKSB7XG4gICAgICAgICAgICAvLyBmaXJlZm94OiB1c2UgU0JSIChIRS1BQUMpIGlmIGZyZXEgbGVzcyB0aGFuIDI0a0h6XG4gICAgICAgICAgICBpZiAoc2FtcGxpbmdJbmRleCA+PSA2KSB7XG4gICAgICAgICAgICAgICAgYXVkaW9PYmplY3RUeXBlID0gNTtcbiAgICAgICAgICAgICAgICBjb25maWcgPSBuZXcgQXJyYXkoNCk7XG4gICAgICAgICAgICAgICAgZXh0ZW5zaW9uU2FtcGxpbmdJbmRleCA9IHNhbXBsaW5nSW5kZXggLSAzO1xuICAgICAgICAgICAgfSBlbHNlIHsgLy8gdXNlIExDLUFBQ1xuICAgICAgICAgICAgICAgIGF1ZGlvT2JqZWN0VHlwZSA9IDI7XG4gICAgICAgICAgICAgICAgY29uZmlnID0gbmV3IEFycmF5KDIpO1xuICAgICAgICAgICAgICAgIGV4dGVuc2lvblNhbXBsaW5nSW5kZXggPSBzYW1wbGluZ0luZGV4O1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHVzZXJBZ2VudC5pbmRleE9mKCdhbmRyb2lkJykgIT09IC0xKSB7XG4gICAgICAgICAgICAvLyBhbmRyb2lkOiBhbHdheXMgdXNlIExDLUFBQ1xuICAgICAgICAgICAgYXVkaW9PYmplY3RUeXBlID0gMjtcbiAgICAgICAgICAgIGNvbmZpZyA9IG5ldyBBcnJheSgyKTtcbiAgICAgICAgICAgIGV4dGVuc2lvblNhbXBsaW5nSW5kZXggPSBzYW1wbGluZ0luZGV4O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gZm9yIG90aGVyIGJyb3dzZXJzLCBlLmcuIGNocm9tZS4uLlxuICAgICAgICAgICAgLy8gQWx3YXlzIHVzZSBIRS1BQUMgdG8gbWFrZSBpdCBlYXNpZXIgdG8gc3dpdGNoIGFhYyBjb2RlYyBwcm9maWxlXG4gICAgICAgICAgICBhdWRpb09iamVjdFR5cGUgPSA1O1xuICAgICAgICAgICAgZXh0ZW5zaW9uU2FtcGxpbmdJbmRleCA9IHNhbXBsaW5nSW5kZXg7XG4gICAgICAgICAgICBjb25maWcgPSBuZXcgQXJyYXkoNCk7XG5cbiAgICAgICAgICAgIGlmIChzYW1wbGluZ0luZGV4ID49IDYpIHtcbiAgICAgICAgICAgICAgICBleHRlbnNpb25TYW1wbGluZ0luZGV4ID0gc2FtcGxpbmdJbmRleCAtIDM7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGNoYW5uZWxDb25maWcgPT09IDEpIHsgLy8gTW9ubyBjaGFubmVsXG4gICAgICAgICAgICAgICAgYXVkaW9PYmplY3RUeXBlID0gMjtcbiAgICAgICAgICAgICAgICBjb25maWcgPSBuZXcgQXJyYXkoMik7XG4gICAgICAgICAgICAgICAgZXh0ZW5zaW9uU2FtcGxpbmdJbmRleCA9IHNhbXBsaW5nSW5kZXg7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBjb25maWdbMF0gPSBhdWRpb09iamVjdFR5cGUgPDwgMztcbiAgICAgICAgY29uZmlnWzBdIHw9IChzYW1wbGluZ0luZGV4ICYgMHgwRikgPj4+IDE7XG4gICAgICAgIGNvbmZpZ1sxXSA9IChzYW1wbGluZ0luZGV4ICYgMHgwRikgPDwgNztcbiAgICAgICAgY29uZmlnWzFdIHw9IChjaGFubmVsQ29uZmlnICYgMHgwRikgPDwgMztcbiAgICAgICAgaWYgKGF1ZGlvT2JqZWN0VHlwZSA9PT0gNSkge1xuICAgICAgICAgICAgY29uZmlnWzFdIHw9ICgoZXh0ZW5zaW9uU2FtcGxpbmdJbmRleCAmIDB4MEYpID4+PiAxKTtcbiAgICAgICAgICAgIGNvbmZpZ1syXSA9IChleHRlbnNpb25TYW1wbGluZ0luZGV4ICYgMHgwMSkgPDwgNztcbiAgICAgICAgICAgIC8vIGV4dGVuZGVkIGF1ZGlvIG9iamVjdCB0eXBlOiBmb3JjZSB0byAyIChMQy1BQUMpXG4gICAgICAgICAgICBjb25maWdbMl0gfD0gKDIgPDwgMik7XG4gICAgICAgICAgICBjb25maWdbM10gPSAwO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGNvbmZpZzogY29uZmlnLFxuICAgICAgICAgICAgc2FtcGxpbmdSYXRlOiBzYW1wbGluZ0ZyZXF1ZW5jZSxcbiAgICAgICAgICAgIGNoYW5uZWxDb3VudDogY2hhbm5lbENvbmZpZyxcbiAgICAgICAgICAgIGNvZGVjOiAnbXA0YS40MC4nICsgYXVkaW9PYmplY3RUeXBlLFxuICAgICAgICAgICAgb3JpZ2luYWxBdWRpb09iamVjdFR5cGU6IG9yaWdpbmFsQXVkaW9PYmplY3RUeXBlXG4gICAgICAgIH07XG4gICAgfVxuICAgIF9pc0luaXRpYWxNZXRhZGF0YURpc3BhdGNoZWQoKSB7XG4gICAgICAgIGlmICh0aGlzLl9oYXNBdWRpbyAmJiB0aGlzLl9oYXNWaWRlbykgeyAvLyBib3RoIGF1ZGlvICYgdmlkZW9cbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9hdWRpb0luaXRpYWxNZXRhZGF0YURpc3BhdGNoZWQgJiYgdGhpcy5fdmlkZW9Jbml0aWFsTWV0YWRhdGFEaXNwYXRjaGVkO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLl9oYXNBdWRpbyAmJiAhdGhpcy5faGFzVmlkZW8pIHsgLy8gYXVkaW8gb25seVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2F1ZGlvSW5pdGlhbE1ldGFkYXRhRGlzcGF0Y2hlZDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuX2hhc0F1ZGlvICYmIHRoaXMuX2hhc1ZpZGVvKSB7IC8vIHZpZGVvIG9ubHlcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl92aWRlb0luaXRpYWxNZXRhZGF0YURpc3BhdGNoZWQ7XG4gICAgICAgIH1cbiAgICB9XG59XG5leHBvcnQgZGVmYXVsdCBuZXcgdGFnRGVtdXgoKTtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9qcy9mbHYvdGFnZGVtdXguanMiXSwic291cmNlUm9vdCI6IiJ9");

/***/ }),
/* 10 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/*\n * Copyright (C) 2016 Bilibili. All Rights Reserved.\n *\n * This file is modified from dailymotion's hls.js library (hls.js/src/helper/aac.js)\n * @author zheng qian <xqq@xqq.im>\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nvar AAC = function () {\n    function AAC() {\n        _classCallCheck(this, AAC);\n    }\n\n    _createClass(AAC, null, [{\n        key: \"getSilentFrame\",\n        value: function getSilentFrame(channelCount) {\n            if (channelCount === 1) {\n                return new Uint8Array([0x00, 0xc8, 0x00, 0x80, 0x23, 0x80]);\n            } else if (channelCount === 2) {\n                return new Uint8Array([0x21, 0x00, 0x49, 0x90, 0x02, 0x19, 0x00, 0x23, 0x80]);\n            } else if (channelCount === 3) {\n                return new Uint8Array([0x00, 0xc8, 0x00, 0x80, 0x20, 0x84, 0x01, 0x26, 0x40, 0x08, 0x64, 0x00, 0x8e]);\n            } else if (channelCount === 4) {\n                return new Uint8Array([0x00, 0xc8, 0x00, 0x80, 0x20, 0x84, 0x01, 0x26, 0x40, 0x08, 0x64, 0x00, 0x80, 0x2c, 0x80, 0x08, 0x02, 0x38]);\n            } else if (channelCount === 5) {\n                return new Uint8Array([0x00, 0xc8, 0x00, 0x80, 0x20, 0x84, 0x01, 0x26, 0x40, 0x08, 0x64, 0x00, 0x82, 0x30, 0x04, 0x99, 0x00, 0x21, 0x90, 0x02, 0x38]);\n            } else if (channelCount === 6) {\n                return new Uint8Array([0x00, 0xc8, 0x00, 0x80, 0x20, 0x84, 0x01, 0x26, 0x40, 0x08, 0x64, 0x00, 0x82, 0x30, 0x04, 0x99, 0x00, 0x21, 0x90, 0x02, 0x00, 0xb2, 0x00, 0x20, 0x08, 0xe0]);\n            }\n            return null;\n        }\n    }]);\n\n    return AAC;\n}();\n\nexports.default = AAC;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9qcy9tcDQvYWFjLXNpbGVudC5qcz84YWU3Il0sIm5hbWVzIjpbIkFBQyIsImNoYW5uZWxDb3VudCIsIlVpbnQ4QXJyYXkiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7OztJQW1CTUEsRzs7Ozs7Ozt1Q0FFb0JDLFksRUFBYztBQUNoQyxnQkFBSUEsaUJBQWlCLENBQXJCLEVBQXdCO0FBQ3BCLHVCQUFPLElBQUlDLFVBQUosQ0FBZSxDQUFDLElBQUQsRUFBTyxJQUFQLEVBQWEsSUFBYixFQUFtQixJQUFuQixFQUF5QixJQUF6QixFQUErQixJQUEvQixDQUFmLENBQVA7QUFDSCxhQUZELE1BRU8sSUFBSUQsaUJBQWlCLENBQXJCLEVBQXdCO0FBQzNCLHVCQUFPLElBQUlDLFVBQUosQ0FBZSxDQUFDLElBQUQsRUFBTyxJQUFQLEVBQWEsSUFBYixFQUFtQixJQUFuQixFQUF5QixJQUF6QixFQUErQixJQUEvQixFQUFxQyxJQUFyQyxFQUEyQyxJQUEzQyxFQUFpRCxJQUFqRCxDQUFmLENBQVA7QUFDSCxhQUZNLE1BRUEsSUFBSUQsaUJBQWlCLENBQXJCLEVBQXdCO0FBQzNCLHVCQUFPLElBQUlDLFVBQUosQ0FBZSxDQUFDLElBQUQsRUFBTyxJQUFQLEVBQWEsSUFBYixFQUFtQixJQUFuQixFQUF5QixJQUF6QixFQUErQixJQUEvQixFQUFxQyxJQUFyQyxFQUEyQyxJQUEzQyxFQUFpRCxJQUFqRCxFQUF1RCxJQUF2RCxFQUE2RCxJQUE3RCxFQUFtRSxJQUFuRSxFQUF5RSxJQUF6RSxDQUFmLENBQVA7QUFDSCxhQUZNLE1BRUEsSUFBSUQsaUJBQWlCLENBQXJCLEVBQXdCO0FBQzNCLHVCQUFPLElBQUlDLFVBQUosQ0FBZSxDQUFDLElBQUQsRUFBTyxJQUFQLEVBQWEsSUFBYixFQUFtQixJQUFuQixFQUF5QixJQUF6QixFQUErQixJQUEvQixFQUFxQyxJQUFyQyxFQUEyQyxJQUEzQyxFQUFpRCxJQUFqRCxFQUF1RCxJQUF2RCxFQUE2RCxJQUE3RCxFQUFtRSxJQUFuRSxFQUF5RSxJQUF6RSxFQUErRSxJQUEvRSxFQUFxRixJQUFyRixFQUEyRixJQUEzRixFQUFpRyxJQUFqRyxFQUF1RyxJQUF2RyxDQUFmLENBQVA7QUFDSCxhQUZNLE1BRUEsSUFBSUQsaUJBQWlCLENBQXJCLEVBQXdCO0FBQzNCLHVCQUFPLElBQUlDLFVBQUosQ0FBZSxDQUFDLElBQUQsRUFBTyxJQUFQLEVBQWEsSUFBYixFQUFtQixJQUFuQixFQUF5QixJQUF6QixFQUErQixJQUEvQixFQUFxQyxJQUFyQyxFQUEyQyxJQUEzQyxFQUFpRCxJQUFqRCxFQUF1RCxJQUF2RCxFQUE2RCxJQUE3RCxFQUFtRSxJQUFuRSxFQUF5RSxJQUF6RSxFQUErRSxJQUEvRSxFQUFxRixJQUFyRixFQUEyRixJQUEzRixFQUFpRyxJQUFqRyxFQUF1RyxJQUF2RyxFQUE2RyxJQUE3RyxFQUFtSCxJQUFuSCxFQUF5SCxJQUF6SCxDQUFmLENBQVA7QUFDSCxhQUZNLE1BRUEsSUFBSUQsaUJBQWlCLENBQXJCLEVBQXdCO0FBQzNCLHVCQUFPLElBQUlDLFVBQUosQ0FBZSxDQUFDLElBQUQsRUFBTyxJQUFQLEVBQWEsSUFBYixFQUFtQixJQUFuQixFQUF5QixJQUF6QixFQUErQixJQUEvQixFQUFxQyxJQUFyQyxFQUEyQyxJQUEzQyxFQUFpRCxJQUFqRCxFQUF1RCxJQUF2RCxFQUE2RCxJQUE3RCxFQUFtRSxJQUFuRSxFQUF5RSxJQUF6RSxFQUErRSxJQUEvRSxFQUFxRixJQUFyRixFQUEyRixJQUEzRixFQUFpRyxJQUFqRyxFQUF1RyxJQUF2RyxFQUE2RyxJQUE3RyxFQUFtSCxJQUFuSCxFQUF5SCxJQUF6SCxFQUErSCxJQUEvSCxFQUFxSSxJQUFySSxFQUEySSxJQUEzSSxFQUFpSixJQUFqSixFQUF1SixJQUF2SixDQUFmLENBQVA7QUFDSDtBQUNELG1CQUFPLElBQVA7QUFDSDs7Ozs7O2tCQUlVRixHIiwiZmlsZSI6IjEwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLypcbiAqIENvcHlyaWdodCAoQykgMjAxNiBCaWxpYmlsaS4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBUaGlzIGZpbGUgaXMgbW9kaWZpZWQgZnJvbSBkYWlseW1vdGlvbidzIGhscy5qcyBsaWJyYXJ5IChobHMuanMvc3JjL2hlbHBlci9hYWMuanMpXG4gKiBAYXV0aG9yIHpoZW5nIHFpYW4gPHhxcUB4cXEuaW0+XG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmNsYXNzIEFBQyB7XG5cbiAgICBzdGF0aWMgZ2V0U2lsZW50RnJhbWUoY2hhbm5lbENvdW50KSB7XG4gICAgICAgIGlmIChjaGFubmVsQ291bnQgPT09IDEpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgVWludDhBcnJheShbMHgwMCwgMHhjOCwgMHgwMCwgMHg4MCwgMHgyMywgMHg4MF0pO1xuICAgICAgICB9IGVsc2UgaWYgKGNoYW5uZWxDb3VudCA9PT0gMikge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBVaW50OEFycmF5KFsweDIxLCAweDAwLCAweDQ5LCAweDkwLCAweDAyLCAweDE5LCAweDAwLCAweDIzLCAweDgwXSk7XG4gICAgICAgIH0gZWxzZSBpZiAoY2hhbm5lbENvdW50ID09PSAzKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFVpbnQ4QXJyYXkoWzB4MDAsIDB4YzgsIDB4MDAsIDB4ODAsIDB4MjAsIDB4ODQsIDB4MDEsIDB4MjYsIDB4NDAsIDB4MDgsIDB4NjQsIDB4MDAsIDB4OGVdKTtcbiAgICAgICAgfSBlbHNlIGlmIChjaGFubmVsQ291bnQgPT09IDQpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgVWludDhBcnJheShbMHgwMCwgMHhjOCwgMHgwMCwgMHg4MCwgMHgyMCwgMHg4NCwgMHgwMSwgMHgyNiwgMHg0MCwgMHgwOCwgMHg2NCwgMHgwMCwgMHg4MCwgMHgyYywgMHg4MCwgMHgwOCwgMHgwMiwgMHgzOF0pO1xuICAgICAgICB9IGVsc2UgaWYgKGNoYW5uZWxDb3VudCA9PT0gNSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBVaW50OEFycmF5KFsweDAwLCAweGM4LCAweDAwLCAweDgwLCAweDIwLCAweDg0LCAweDAxLCAweDI2LCAweDQwLCAweDA4LCAweDY0LCAweDAwLCAweDgyLCAweDMwLCAweDA0LCAweDk5LCAweDAwLCAweDIxLCAweDkwLCAweDAyLCAweDM4XSk7XG4gICAgICAgIH0gZWxzZSBpZiAoY2hhbm5lbENvdW50ID09PSA2KSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFVpbnQ4QXJyYXkoWzB4MDAsIDB4YzgsIDB4MDAsIDB4ODAsIDB4MjAsIDB4ODQsIDB4MDEsIDB4MjYsIDB4NDAsIDB4MDgsIDB4NjQsIDB4MDAsIDB4ODIsIDB4MzAsIDB4MDQsIDB4OTksIDB4MDAsIDB4MjEsIDB4OTAsIDB4MDIsIDB4MDAsIDB4YjIsIDB4MDAsIDB4MjAsIDB4MDgsIDB4ZTBdKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbn1cblxuZXhwb3J0IGRlZmF1bHQgQUFDO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2pzL21wNC9hYWMtc2lsZW50LmpzIl0sInNvdXJjZVJvb3QiOiIifQ==");

/***/ }),
/* 11 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/*\n * Copyright (C) 2016 Bilibili. All Rights Reserved.\n *\n * @author zheng qian <xqq@xqq.im>\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n// Represents an media sample (audio / video)\nvar SampleInfo = exports.SampleInfo = function SampleInfo(dts, pts, duration, originalDts, isSync) {\n    _classCallCheck(this, SampleInfo);\n\n    this.dts = dts;\n    this.pts = pts;\n    this.duration = duration;\n    this.originalDts = originalDts;\n    this.isSyncPoint = isSync;\n    this.fileposition = null;\n};\n\n// Media Segment concept is defined in Media Source Extensions spec.\n// Particularly in ISO BMFF format, an Media Segment contains a moof box followed by a mdat box.\n\n\nvar MediaSegmentInfo = exports.MediaSegmentInfo = function () {\n    function MediaSegmentInfo() {\n        _classCallCheck(this, MediaSegmentInfo);\n\n        this.beginDts = 0;\n        this.endDts = 0;\n        this.beginPts = 0;\n        this.endPts = 0;\n        this.originalBeginDts = 0;\n        this.originalEndDts = 0;\n        this.syncPoints = []; // SampleInfo[n], for video IDR frames only\n        this.firstSample = null; // SampleInfo\n        this.lastSample = null; // SampleInfo\n    }\n\n    _createClass(MediaSegmentInfo, [{\n        key: \"appendSyncPoint\",\n        value: function appendSyncPoint(sampleInfo) {\n            // also called Random Access Point\n            sampleInfo.isSyncPoint = true;\n            this.syncPoints.push(sampleInfo);\n        }\n    }]);\n\n    return MediaSegmentInfo;\n}();\n\n// Ordered list for recording video IDR frames, sorted by originalDts\n\n\nvar IDRSampleList = exports.IDRSampleList = function () {\n    function IDRSampleList() {\n        _classCallCheck(this, IDRSampleList);\n\n        this._list = [];\n    }\n\n    _createClass(IDRSampleList, [{\n        key: \"clear\",\n        value: function clear() {\n            this._list = [];\n        }\n    }, {\n        key: \"appendArray\",\n        value: function appendArray(syncPoints) {\n            var list = this._list;\n\n            if (syncPoints.length === 0) {\n                return;\n            }\n\n            if (list.length > 0 && syncPoints[0].originalDts < list[list.length - 1].originalDts) {\n                this.clear();\n            }\n\n            Array.prototype.push.apply(list, syncPoints);\n        }\n    }, {\n        key: \"getLastSyncPointBeforeDts\",\n        value: function getLastSyncPointBeforeDts(dts) {\n            if (this._list.length == 0) {\n                return null;\n            }\n\n            var list = this._list;\n            var idx = 0;\n            var last = list.length - 1;\n            var mid = 0;\n            var lbound = 0;\n            var ubound = last;\n\n            if (dts < list[0].dts) {\n                idx = 0;\n                lbound = ubound + 1;\n            }\n\n            while (lbound <= ubound) {\n                mid = lbound + Math.floor((ubound - lbound) / 2);\n                if (mid === last || dts >= list[mid].dts && dts < list[mid + 1].dts) {\n                    idx = mid;\n                    break;\n                } else if (list[mid].dts < dts) {\n                    lbound = mid + 1;\n                } else {\n                    ubound = mid - 1;\n                }\n            }\n            return this._list[idx];\n        }\n    }]);\n\n    return IDRSampleList;\n}();\n\n// Data structure for recording information of media segments in single track.\n\n\nvar MediaSegmentInfoList = exports.MediaSegmentInfoList = function () {\n    function MediaSegmentInfoList(type) {\n        _classCallCheck(this, MediaSegmentInfoList);\n\n        this._type = type;\n        this._list = [];\n        this._lastAppendLocation = -1; // cached last insert location\n    }\n\n    _createClass(MediaSegmentInfoList, [{\n        key: \"isEmpty\",\n        value: function isEmpty() {\n            return this._list.length === 0;\n        }\n    }, {\n        key: \"clear\",\n        value: function clear() {\n            this._list = [];\n            this._lastAppendLocation = -1;\n        }\n    }, {\n        key: \"_searchNearestSegmentBefore\",\n        value: function _searchNearestSegmentBefore(originalBeginDts) {\n            var list = this._list;\n            if (list.length === 0) {\n                return -2;\n            }\n            var last = list.length - 1;\n            var mid = 0;\n            var lbound = 0;\n            var ubound = last;\n\n            var idx = 0;\n\n            if (originalBeginDts < list[0].originalBeginDts) {\n                idx = -1;\n                return idx;\n            }\n\n            while (lbound <= ubound) {\n                mid = lbound + Math.floor((ubound - lbound) / 2);\n                if (mid === last || originalBeginDts > list[mid].lastSample.originalDts && originalBeginDts < list[mid + 1].originalBeginDts) {\n                    idx = mid;\n                    break;\n                } else if (list[mid].originalBeginDts < originalBeginDts) {\n                    lbound = mid + 1;\n                } else {\n                    ubound = mid - 1;\n                }\n            }\n            return idx;\n        }\n    }, {\n        key: \"_searchNearestSegmentAfter\",\n        value: function _searchNearestSegmentAfter(originalBeginDts) {\n            return this._searchNearestSegmentBefore(originalBeginDts) + 1;\n        }\n    }, {\n        key: \"append\",\n        value: function append(mediaSegmentInfo) {\n            var list = this._list;\n            var msi = mediaSegmentInfo;\n            var lastAppendIdx = this._lastAppendLocation;\n            var insertIdx = 0;\n\n            if (lastAppendIdx !== -1 && lastAppendIdx < list.length && msi.originalBeginDts >= list[lastAppendIdx].lastSample.originalDts && (lastAppendIdx === list.length - 1 || lastAppendIdx < list.length - 1 && msi.originalBeginDts < list[lastAppendIdx + 1].originalBeginDts)) {\n                insertIdx = lastAppendIdx + 1; // use cached location idx\n            } else {\n                if (list.length > 0) {\n                    insertIdx = this._searchNearestSegmentBefore(msi.originalBeginDts) + 1;\n                }\n            }\n\n            this._lastAppendLocation = insertIdx;\n            this._list.splice(insertIdx, 0, msi);\n        }\n    }, {\n        key: \"getLastSegmentBefore\",\n        value: function getLastSegmentBefore(originalBeginDts) {\n            var idx = this._searchNearestSegmentBefore(originalBeginDts);\n            if (idx >= 0) {\n                return this._list[idx];\n            } else {\n                // -1\n                return null;\n            }\n        }\n    }, {\n        key: \"getLastSampleBefore\",\n        value: function getLastSampleBefore(originalBeginDts) {\n            var segment = this.getLastSegmentBefore(originalBeginDts);\n            if (segment != null) {\n                return segment.lastSample;\n            } else {\n                return null;\n            }\n        }\n    }, {\n        key: \"getLastSyncPointBefore\",\n        value: function getLastSyncPointBefore(originalBeginDts) {\n            var segmentIdx = this._searchNearestSegmentBefore(originalBeginDts);\n            var syncPoints = this._list[segmentIdx].syncPoints;\n            while (syncPoints.length === 0 && segmentIdx > 0) {\n                segmentIdx--;\n                syncPoints = this._list[segmentIdx].syncPoints;\n            }\n            if (syncPoints.length > 0) {\n                return syncPoints[syncPoints.length - 1];\n            } else {\n                return null;\n            }\n        }\n    }, {\n        key: \"type\",\n        get: function get() {\n            return this._type;\n        }\n    }, {\n        key: \"length\",\n        get: function get() {\n            return this._list.length;\n        }\n    }]);\n\n    return MediaSegmentInfoList;\n}();//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9qcy9tcDQvbWVkaWEtc2VnbWVudC1pbmZvLmpzP2MyZmIiXSwibmFtZXMiOlsiU2FtcGxlSW5mbyIsImR0cyIsInB0cyIsImR1cmF0aW9uIiwib3JpZ2luYWxEdHMiLCJpc1N5bmMiLCJpc1N5bmNQb2ludCIsImZpbGVwb3NpdGlvbiIsIk1lZGlhU2VnbWVudEluZm8iLCJiZWdpbkR0cyIsImVuZER0cyIsImJlZ2luUHRzIiwiZW5kUHRzIiwib3JpZ2luYWxCZWdpbkR0cyIsIm9yaWdpbmFsRW5kRHRzIiwic3luY1BvaW50cyIsImZpcnN0U2FtcGxlIiwibGFzdFNhbXBsZSIsInNhbXBsZUluZm8iLCJwdXNoIiwiSURSU2FtcGxlTGlzdCIsIl9saXN0IiwibGlzdCIsImxlbmd0aCIsImNsZWFyIiwiQXJyYXkiLCJwcm90b3R5cGUiLCJhcHBseSIsImlkeCIsImxhc3QiLCJtaWQiLCJsYm91bmQiLCJ1Ym91bmQiLCJNYXRoIiwiZmxvb3IiLCJNZWRpYVNlZ21lbnRJbmZvTGlzdCIsInR5cGUiLCJfdHlwZSIsIl9sYXN0QXBwZW5kTG9jYXRpb24iLCJfc2VhcmNoTmVhcmVzdFNlZ21lbnRCZWZvcmUiLCJtZWRpYVNlZ21lbnRJbmZvIiwibXNpIiwibGFzdEFwcGVuZElkeCIsImluc2VydElkeCIsInNwbGljZSIsInNlZ21lbnQiLCJnZXRMYXN0U2VnbWVudEJlZm9yZSIsInNlZ21lbnRJZHgiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBa0JBO0lBQ2FBLFUsV0FBQUEsVSxHQUVULG9CQUFZQyxHQUFaLEVBQWlCQyxHQUFqQixFQUFzQkMsUUFBdEIsRUFBZ0NDLFdBQWhDLEVBQTZDQyxNQUE3QyxFQUFxRDtBQUFBOztBQUNqRCxTQUFLSixHQUFMLEdBQVdBLEdBQVg7QUFDQSxTQUFLQyxHQUFMLEdBQVdBLEdBQVg7QUFDQSxTQUFLQyxRQUFMLEdBQWdCQSxRQUFoQjtBQUNBLFNBQUtDLFdBQUws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ZSxPQUFPLENBQVgsRUFBYztBQUNWLHVCQUFPLEtBQUtQLEtBQUwsQ0FBV08sR0FBWCxDQUFQO0FBQ0gsYUFGRCxNQUVPO0FBQUU7QUFDTCx1QkFBTyxJQUFQO0FBQ0g7QUFDSjs7OzRDQUVtQmYsZ0IsRUFBa0I7QUFDbEMsZ0JBQUlnQyxVQUFVLEtBQUtDLG9CQUFMLENBQTBCakMsZ0JBQTFCLENBQWQ7QUFDQSxnQkFBSWdDLFdBQVcsSUFBZixFQUFxQjtBQUNqQix1QkFBT0EsUUFBUTVCLFVBQWY7QUFDSCxhQUZELE1BRU87QUFDSCx1QkFBTyxJQUFQO0FBQ0g7QUFDSjs7OytDQUVzQkosZ0IsRUFBa0I7QUFDckMsZ0JBQUlrQyxhQUFhLEtBQUtSLDJCQUFMLENBQWlDMUIsZ0JBQWpDLENBQWpCO0FBQ0EsZ0JBQUlFLGFBQWEsS0FBS00sS0FBTCxDQUFXMEIsVUFBWCxFQUF1QmhDLFVBQXhDO0FBQ0EsbUJBQU9BLFdBQVdRLE1BQVgsS0FBc0IsQ0FBdEIsSUFBMkJ3QixhQUFhLENBQS9DLEVBQWtEO0FBQzlDQTtBQUNBaEMsNkJBQWEsS0FBS00sS0FBTCxDQUFXMEIsVUFBWCxFQUF1QmhDLFVBQXBDO0FBQ0g7QUFDRCxnQkFBSUEsV0FBV1EsTUFBWCxHQUFvQixDQUF4QixFQUEyQjtBQUN2Qix1QkFBT1IsV0FBV0EsV0FBV1EsTUFBWCxHQUFvQixDQUEvQixDQUFQO0FBQ0gsYUFGRCxNQUVPO0FBQ0gsdUJBQU8sSUFBUDtBQUNIO0FBQ0o7Ozs0QkF6R1U7QUFDUCxtQkFBTyxLQUFLYyxLQUFaO0FBQ0g7Ozs0QkFFWTtBQUNULG1CQUFPLEtBQUtoQixLQUFMLENBQVdFLE1BQWxCO0FBQ0giLCJmaWxlIjoiMTEuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuICogQ29weXJpZ2h0IChDKSAyMDE2IEJpbGliaWxpLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIEBhdXRob3IgemhlbmcgcWlhbiA8eHFxQHhxcS5pbT5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuLy8gUmVwcmVzZW50cyBhbiBtZWRpYSBzYW1wbGUgKGF1ZGlvIC8gdmlkZW8pXG5leHBvcnQgY2xhc3MgU2FtcGxlSW5mbyB7XG5cbiAgICBjb25zdHJ1Y3RvcihkdHMsIHB0cywgZHVyYXRpb24sIG9yaWdpbmFsRHRzLCBpc1N5bmMpIHtcbiAgICAgICAgdGhpcy5kdHMgPSBkdHM7XG4gICAgICAgIHRoaXMucHRzID0gcHRzO1xuICAgICAgICB0aGlzLmR1cmF0aW9uID0gZHVyYXRpb247XG4gICAgICAgIHRoaXMub3JpZ2luYWxEdHMgPSBvcmlnaW5hbER0cztcbiAgICAgICAgdGhpcy5pc1N5bmNQb2ludCA9IGlzU3luYztcbiAgICAgICAgdGhpcy5maWxlcG9zaXRpb24gPSBudWxsO1xuICAgIH1cblxufVxuXG4vLyBNZWRpYSBTZWdtZW50IGNvbmNlcHQgaXMgZGVmaW5lZCBpbiBNZWRpYSBTb3VyY2UgRXh0ZW5zaW9ucyBzcGVjLlxuLy8gUGFydGljdWxhcmx5IGluIElTTyBCTUZGIGZvcm1hdCwgYW4gTWVkaWEgU2VnbWVudCBjb250YWlucyBhIG1vb2YgYm94IGZvbGxvd2VkIGJ5IGEgbWRhdCBib3guXG5leHBvcnQgY2xhc3MgTWVkaWFTZWdtZW50SW5mbyB7XG5cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5iZWdpbkR0cyA9IDA7XG4gICAgICAgIHRoaXMuZW5kRHRzID0gMDtcbiAgICAgICAgdGhpcy5iZWdpblB0cyA9IDA7XG4gICAgICAgIHRoaXMuZW5kUHRzID0gMDtcbiAgICAgICAgdGhpcy5vcmlnaW5hbEJlZ2luRHRzID0gMDtcbiAgICAgICAgdGhpcy5vcmlnaW5hbEVuZER0cyA9IDA7XG4gICAgICAgIHRoaXMuc3luY1BvaW50cyA9IFtdOyAvLyBTYW1wbGVJbmZvW25dLCBmb3IgdmlkZW8gSURSIGZyYW1lcyBvbmx5XG4gICAgICAgIHRoaXMuZmlyc3RTYW1wbGUgPSBudWxsOyAvLyBTYW1wbGVJbmZvXG4gICAgICAgIHRoaXMubGFzdFNhbXBsZSA9IG51bGw7IC8vIFNhbXBsZUluZm9cbiAgICB9XG5cbiAgICBhcHBlbmRTeW5jUG9pbnQoc2FtcGxlSW5mbykgeyAvLyBhbHNvIGNhbGxlZCBSYW5kb20gQWNjZXNzIFBvaW50XG4gICAgICAgIHNhbXBsZUluZm8uaXNTeW5jUG9pbnQgPSB0cnVlO1xuICAgICAgICB0aGlzLnN5bmNQb2ludHMucHVzaChzYW1wbGVJbmZvKTtcbiAgICB9XG5cbn1cblxuLy8gT3JkZXJlZCBsaXN0IGZvciByZWNvcmRpbmcgdmlkZW8gSURSIGZyYW1lcywgc29ydGVkIGJ5IG9yaWdpbmFsRHRzXG5leHBvcnQgY2xhc3MgSURSU2FtcGxlTGlzdCB7XG5cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5fbGlzdCA9IFtdO1xuICAgIH1cblxuICAgIGNsZWFyKCkge1xuICAgICAgICB0aGlzLl9saXN0ID0gW107XG4gICAgfVxuXG4gICAgYXBwZW5kQXJyYXkoc3luY1BvaW50cykge1xuICAgICAgICBsZXQgbGlzdCA9IHRoaXMuX2xpc3Q7XG5cbiAgICAgICAgaWYgKHN5bmNQb2ludHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAobGlzdC5sZW5ndGggPiAwICYmIHN5bmNQb2ludHNbMF0ub3JpZ2luYWxEdHMgPCBsaXN0W2xpc3QubGVuZ3RoIC0gMV0ub3JpZ2luYWxEdHMpIHtcbiAgICAgICAgICAgIHRoaXMuY2xlYXIoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIEFycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KGxpc3QsIHN5bmNQb2ludHMpO1xuICAgIH1cblxuICAgIGdldExhc3RTeW5jUG9pbnRCZWZvcmVEdHMoZHRzKSB7XG4gICAgICAgIGlmICh0aGlzLl9saXN0Lmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBsaXN0ID0gdGhpcy5fbGlzdDtcbiAgICAgICAgbGV0IGlkeCA9IDA7XG4gICAgICAgIGxldCBsYXN0ID0gbGlzdC5sZW5ndGggLSAxO1xuICAgICAgICBsZXQgbWlkID0gMDtcbiAgICAgICAgbGV0IGxib3VuZCA9IDA7XG4gICAgICAgIGxldCB1Ym91bmQgPSBsYXN0O1xuXG4gICAgICAgIGlmIChkdHMgPCBsaXN0WzBdLmR0cykge1xuICAgICAgICAgICAgaWR4ID0gMDtcbiAgICAgICAgICAgIGxib3VuZCA9IHVib3VuZCArIDE7XG4gICAgICAgIH1cblxuICAgICAgICB3aGlsZSAobGJvdW5kIDw9IHVib3VuZCkge1xuICAgICAgICAgICAgbWlkID0gbGJvdW5kICsgTWF0aC5mbG9vcigodWJvdW5kIC0gbGJvdW5kKSAvIDIpO1xuICAgICAgICAgICAgaWYgKG1pZCA9PT0gbGFzdCB8fCAoZHRzID49IGxpc3RbbWlkXS5kdHMgJiYgZHRzIDwgbGlzdFttaWQgKyAxXS5kdHMpKSB7XG4gICAgICAgICAgICAgICAgaWR4ID0gbWlkO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChsaXN0W21pZF0uZHRzIDwgZHRzKSB7XG4gICAgICAgICAgICAgICAgbGJvdW5kID0gbWlkICsgMTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdWJvdW5kID0gbWlkIC0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fbGlzdFtpZHhdO1xuICAgIH1cblxufVxuXG4vLyBEYXRhIHN0cnVjdHVyZSBmb3IgcmVjb3JkaW5nIGluZm9ybWF0aW9uIG9mIG1lZGlhIHNlZ21lbnRzIGluIHNpbmdsZSB0cmFjay5cbmV4cG9ydCBjbGFzcyBNZWRpYVNlZ21lbnRJbmZvTGlzdCB7XG5cbiAgICBjb25zdHJ1Y3Rvcih0eXBlKSB7XG4gICAgICAgIHRoaXMuX3R5cGUgPSB0eXBlO1xuICAgICAgICB0aGlzLl9saXN0ID0gW107XG4gICAgICAgIHRoaXMuX2xhc3RBcHBlbmRMb2NhdGlvbiA9IC0xOyAvLyBjYWNoZWQgbGFzdCBpbnNlcnQgbG9jYXRpb25cbiAgICB9XG5cbiAgICBnZXQgdHlwZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3R5cGU7XG4gICAgfVxuXG4gICAgZ2V0IGxlbmd0aCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2xpc3QubGVuZ3RoO1xuICAgIH1cblxuICAgIGlzRW1wdHkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9saXN0Lmxlbmd0aCA9PT0gMDtcbiAgICB9XG5cbiAgICBjbGVhcigpIHtcbiAgICAgICAgdGhpcy5fbGlzdCA9IFtdO1xuICAgICAgICB0aGlzLl9sYXN0QXBwZW5kTG9jYXRpb24gPSAtMTtcbiAgICB9XG5cbiAgICBfc2VhcmNoTmVhcmVzdFNlZ21lbnRCZWZvcmUob3JpZ2luYWxCZWdpbkR0cykge1xuICAgICAgICBsZXQgbGlzdCA9IHRoaXMuX2xpc3Q7XG4gICAgICAgIGlmIChsaXN0Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIC0yO1xuICAgICAgICB9XG4gICAgICAgIGxldCBsYXN0ID0gbGlzdC5sZW5ndGggLSAxO1xuICAgICAgICBsZXQgbWlkID0gMDtcbiAgICAgICAgbGV0IGxib3VuZCA9IDA7XG4gICAgICAgIGxldCB1Ym91bmQgPSBsYXN0O1xuXG4gICAgICAgIGxldCBpZHggPSAwO1xuXG4gICAgICAgIGlmIChvcmlnaW5hbEJlZ2luRHRzIDwgbGlzdFswXS5vcmlnaW5hbEJlZ2luRHRzKSB7XG4gICAgICAgICAgICBpZHggPSAtMTtcbiAgICAgICAgICAgIHJldHVybiBpZHg7XG4gICAgICAgIH1cblxuICAgICAgICB3aGlsZSAobGJvdW5kIDw9IHVib3VuZCkge1xuICAgICAgICAgICAgbWlkID0gbGJvdW5kICsgTWF0aC5mbG9vcigodWJvdW5kIC0gbGJvdW5kKSAvIDIpO1xuICAgICAgICAgICAgaWYgKG1pZCA9PT0gbGFzdCB8fCAob3JpZ2luYWxCZWdpbkR0cyA+IGxpc3RbbWlkXS5sYXN0U2FtcGxlLm9yaWdpbmFsRHRzICYmXG4gICAgICAgICAgICAgICAgICAgIChvcmlnaW5hbEJlZ2luRHRzIDwgbGlzdFttaWQgKyAxXS5vcmlnaW5hbEJlZ2luRHRzKSkpIHtcbiAgICAgICAgICAgICAgICBpZHggPSBtaWQ7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGxpc3RbbWlkXS5vcmlnaW5hbEJlZ2luRHRzIDwgb3JpZ2luYWxCZWdpbkR0cykge1xuICAgICAgICAgICAgICAgIGxib3VuZCA9IG1pZCArIDE7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHVib3VuZCA9IG1pZCAtIDE7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGlkeDtcbiAgICB9XG5cbiAgICBfc2VhcmNoTmVhcmVzdFNlZ21lbnRBZnRlcihvcmlnaW5hbEJlZ2luRHRzKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zZWFyY2hOZWFyZXN0U2VnbWVudEJlZm9yZShvcmlnaW5hbEJlZ2luRHRzKSArIDE7XG4gICAgfVxuXG4gICAgYXBwZW5kKG1lZGlhU2VnbWVudEluZm8pIHtcbiAgICAgICAgbGV0IGxpc3QgPSB0aGlzLl9saXN0O1xuICAgICAgICBsZXQgbXNpID0gbWVkaWFTZWdtZW50SW5mbztcbiAgICAgICAgbGV0IGxhc3RBcHBlbmRJZHggPSB0aGlzLl9sYXN0QXBwZW5kTG9jYXRpb247XG4gICAgICAgIGxldCBpbnNlcnRJZHggPSAwO1xuXG4gICAgICAgIGlmIChsYXN0QXBwZW5kSWR4ICE9PSAtMSAmJiBsYXN0QXBwZW5kSWR4IDwgbGlzdC5sZW5ndGggJiZcbiAgICAgICAgICAgIG1zaS5vcmlnaW5hbEJlZ2luRHRzID49IGxpc3RbbGFzdEFwcGVuZElkeF0ubGFzdFNhbXBsZS5vcmlnaW5hbER0cyAmJlxuICAgICAgICAgICAgKChsYXN0QXBwZW5kSWR4ID09PSBsaXN0Lmxlbmd0aCAtIDEpIHx8XG4gICAgICAgICAgICAgICAgKGxhc3RBcHBlbmRJZHggPCBsaXN0Lmxlbmd0aCAtIDEgJiZcbiAgICAgICAgICAgICAgICAgICAgbXNpLm9yaWdpbmFsQmVnaW5EdHMgPCBsaXN0W2xhc3RBcHBlbmRJZHggKyAxXS5vcmlnaW5hbEJlZ2luRHRzKSkpIHtcbiAgICAgICAgICAgIGluc2VydElkeCA9IGxhc3RBcHBlbmRJZHggKyAxOyAvLyB1c2UgY2FjaGVkIGxvY2F0aW9uIGlkeFxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKGxpc3QubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGluc2VydElkeCA9IHRoaXMuX3NlYXJjaE5lYXJlc3RTZWdtZW50QmVmb3JlKG1zaS5vcmlnaW5hbEJlZ2luRHRzKSArIDE7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9sYXN0QXBwZW5kTG9jYXRpb24gPSBpbnNlcnRJZHg7XG4gICAgICAgIHRoaXMuX2xpc3Quc3BsaWNlKGluc2VydElkeCwgMCwgbXNpKTtcbiAgICB9XG5cbiAgICBnZXRMYXN0U2VnbWVudEJlZm9yZShvcmlnaW5hbEJlZ2luRHRzKSB7XG4gICAgICAgIGxldCBpZHggPSB0aGlzLl9zZWFyY2hOZWFyZXN0U2VnbWVudEJlZm9yZShvcmlnaW5hbEJlZ2luRHRzKTtcbiAgICAgICAgaWYgKGlkeCA+PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fbGlzdFtpZHhdO1xuICAgICAgICB9IGVsc2UgeyAvLyAtMVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBnZXRMYXN0U2FtcGxlQmVmb3JlKG9yaWdpbmFsQmVnaW5EdHMpIHtcbiAgICAgICAgbGV0IHNlZ21lbnQgPSB0aGlzLmdldExhc3RTZWdtZW50QmVmb3JlKG9yaWdpbmFsQmVnaW5EdHMpO1xuICAgICAgICBpZiAoc2VnbWVudCAhPSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gc2VnbWVudC5sYXN0U2FtcGxlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBnZXRMYXN0U3luY1BvaW50QmVmb3JlKG9yaWdpbmFsQmVnaW5EdHMpIHtcbiAgICAgICAgbGV0IHNlZ21lbnRJZHggPSB0aGlzLl9zZWFyY2hOZWFyZXN0U2VnbWVudEJlZm9yZShvcmlnaW5hbEJlZ2luRHRzKTtcbiAgICAgICAgbGV0IHN5bmNQb2ludHMgPSB0aGlzLl9saXN0W3NlZ21lbnRJZHhdLnN5bmNQb2ludHM7XG4gICAgICAgIHdoaWxlIChzeW5jUG9pbnRzLmxlbmd0aCA9PT0gMCAmJiBzZWdtZW50SWR4ID4gMCkge1xuICAgICAgICAgICAgc2VnbWVudElkeC0tO1xuICAgICAgICAgICAgc3luY1BvaW50cyA9IHRoaXMuX2xpc3Rbc2VnbWVudElkeF0uc3luY1BvaW50cztcbiAgICAgICAgfVxuICAgICAgICBpZiAoc3luY1BvaW50cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICByZXR1cm4gc3luY1BvaW50c1tzeW5jUG9pbnRzLmxlbmd0aCAtIDFdO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICB9XG5cbn1cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9qcy9tcDQvbWVkaWEtc2VnbWVudC1pbmZvLmpzIl0sInNvdXJjZVJvb3QiOiIifQ==");

/***/ }),
/* 12 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); /*\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * Copyright (C) 2016 Bilibili. All Rights Reserved.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * @author zheng qian <xqq@xqq.im>\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * Licensed under the Apache License, Version 2.0 (the \"License\");\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * you may not use this file except in compliance with the License.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * You may obtain a copy of the License at\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *     http://www.apache.org/licenses/LICENSE-2.0\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * Unless required by applicable law or agreed to in writing, software\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * distributed under the License is distributed on an \"AS IS\" BASIS,\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * See the License for the specific language governing permissions and\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * limitations under the License.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      */\n\nvar _aacSilent = __webpack_require__(10);\n\nvar _aacSilent2 = _interopRequireDefault(_aacSilent);\n\nvar _browser = __webpack_require__(13);\n\nvar _browser2 = _interopRequireDefault(_browser);\n\nvar _mp4remux = __webpack_require__(1);\n\nvar _mp4remux2 = _interopRequireDefault(_mp4remux);\n\nvar _mediaSegmentInfo = __webpack_require__(11);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n// Fragmented mp4 remuxer\nvar MP4Remuxer = function () {\n    function MP4Remuxer(config) {\n        _classCallCheck(this, MP4Remuxer);\n\n        this.TAG = this.constructor.name;\n\n        this._config = config;\n        this._isLive = config.isLive === true ? true : false;\n\n        this._dtsBase = -1;\n        this._dtsBaseInited = false;\n        this._audioDtsBase = Infinity;\n        this._videoDtsBase = Infinity;\n        this._audioNextDts = undefined;\n        this._videoNextDts = undefined;\n\n        this._audioMeta = null;\n        this._videoMeta = null;\n\n        this._audioSegmentInfoList = new _mediaSegmentInfo.MediaSegmentInfoList('audio');\n        this._videoSegmentInfoList = new _mediaSegmentInfo.MediaSegmentInfoList('video');\n\n        this._onInitSegment = null;\n        this._onMediaSegment = null;\n\n        // Workaround for chrome < 50: Always force first sample as a Random Access Point in media segment\n        // see https://bugs.chromium.org/p/chromium/issues/detail?id=229412\n        this._forceFirstIDR = _browser2.default.chrome && (_browser2.default.version.major < 50 || _browser2.default.version.major === 50 && _browser2.default.version.build < 2661) ? true : false;\n\n        // Workaround for IE11/Edge: Fill silent aac frame after keyframe-seeking\n        // Make audio beginDts equals with video beginDts, in order to fix seek freeze\n        this._fillSilentAfterSeek = _browser2.default.msedge || _browser2.default.msie;\n    }\n\n    _createClass(MP4Remuxer, [{\n        key: 'destroy',\n        value: function destroy() {\n            this._dtsBase = -1;\n            this._dtsBaseInited = false;\n            this._audioMeta = null;\n            this._videoMeta = null;\n            this._audioSegmentInfoList.clear();\n            this._audioSegmentInfoList = null;\n            this._videoSegmentInfoList.clear();\n            this._videoSegmentInfoList = null;\n            this._onInitSegment = null;\n            this._onMediaSegment = null;\n        }\n    }, {\n        key: 'bindDataSource',\n        value: function bindDataSource(producer) {\n            producer.onDataAvailable = this.remux.bind(this);\n            producer.onTrackMetadata = this._onTrackMetadataReceived.bind(this);\n            return this;\n        }\n\n        /* prototype: function onInitSegment(type: string, initSegment: ArrayBuffer): void\n           InitSegment: {\n               type: string,\n               data: ArrayBuffer,\n               codec: string,\n               container: string\n           }\n        */\n\n    }, {\n        key: 'insertDiscontinuity',\n        value: function insertDiscontinuity() {\n            this._audioNextDts = this._videoNextDts = undefined;\n        }\n    }, {\n        key: 'seek',\n        value: function seek(originalDts) {\n            this._videoSegmentInfoList.clear();\n            this._audioSegmentInfoList.clear();\n        }\n    }, {\n        key: 'remux',\n        value: function remux(audioTrack, videoTrack) {\n            if (!this._onMediaSegment) {\n                throw new IllegalStateException('MP4Remuxer: onMediaSegment callback must be specificed!');\n            }\n            if (!this._dtsBaseInited) {\n                this._calculateDtsBase(audioTrack, videoTrack);\n            }\n            this._remuxVideo(videoTrack);\n            this._remuxAudio(audioTrack);\n        }\n    }, {\n        key: '_onTrackMetadataReceived',\n        value: function _onTrackMetadataReceived(type, metadata) {\n            var metabox = null;\n\n            if (type === 'audio') {\n                this._audioMeta = metadata;\n                metabox = _mp4remux2.default.generateInitSegment(metadata);\n                Log.v('msg+audio', metadata);\n            } else if (type === 'video') {\n                this._videoMeta = metadata;\n                metabox = _mp4remux2.default.generateInitSegment(metadata);\n                Log.v('msg+video', metadata);\n            } else {\n                return;\n            }\n\n            // dispatch metabox (Initialization Segment)\n            if (!this._onInitSegment) {\n                throw new IllegalStateException('MP4Remuxer: onInitSegment callback must be specified!');\n            }\n            this._onInitSegment(type, {\n                type: type,\n                data: metabox.buffer,\n                codec: metadata.codec,\n                container: type + '/mp4'\n            });\n        }\n    }, {\n        key: '_calculateDtsBase',\n        value: function _calculateDtsBase(audioTrack, videoTrack) {\n            if (this._dtsBaseInited) {\n                return;\n            }\n\n            if (audioTrack.samples && audioTrack.samples.length) {\n                this._audioDtsBase = audioTrack.samples[0].dts;\n            }\n            if (videoTrack.samples && videoTrack.samples.length) {\n                this._videoDtsBase = videoTrack.samples[0].dts;\n            }\n\n            this._dtsBase = Math.min(this._audioDtsBase, this._videoDtsBase);\n            this._dtsBaseInited = true;\n        }\n    }, {\n        key: '_remuxAudio',\n        value: function _remuxAudio(audioTrack) {\n            var track = audioTrack;\n            var samples = track.samples;\n            var dtsCorrection = undefined;\n            var firstDts = -1,\n                lastDts = -1,\n                lastPts = -1;\n\n            var remuxSilentFrame = false;\n            var silentFrameDuration = -1;\n\n            if (!samples || samples.length === 0) {\n                return;\n            }\n\n            var bytes = 8 + track.length;\n            var mdatbox = new Uint8Array(bytes);\n            mdatbox[0] = bytes >>> 24 & 0xFF;\n            mdatbox[1] = bytes >>> 16 & 0xFF;\n            mdatbox[2] = bytes >>> 8 & 0xFF;\n            mdatbox[3] = bytes & 0xFF;\n\n            mdatbox.set(_mp4remux2.default.types.mdat, 4);\n\n            var offset = 8; // size + type\n            var mp4Samples = [];\n\n            while (samples.length) {\n                var aacSample = samples.shift();\n                var unit = aacSample.unit;\n                var originalDts = aacSample.dts - this._dtsBase;\n\n                if (dtsCorrection == undefined) {\n                    if (this._audioNextDts == undefined) {\n                        if (this._audioSegmentInfoList.isEmpty()) {\n                            dtsCorrection = 0;\n                            if (this._fillSilentAfterSeek && !this._videoSegmentInfoList.isEmpty()) {\n                                remuxSilentFrame = true;\n                            }\n                        } else {\n                            var lastSample = this._audioSegmentInfoList.getLastSampleBefore(originalDts);\n                            if (lastSample != null) {\n                                var distance = originalDts - (lastSample.originalDts + lastSample.duration);\n                                if (distance <= 3) {\n                                    distance = 0;\n                                }\n                                var expectedDts = lastSample.dts + lastSample.duration + distance;\n                                dtsCorrection = originalDts - expectedDts;\n                            } else {\n                                // lastSample == null\n                                dtsCorrection = 0;\n                            }\n                        }\n                    } else {\n                        dtsCorrection = originalDts - this._audioNextDts;\n                    }\n                }\n\n                var dts = originalDts - dtsCorrection;\n                if (remuxSilentFrame) {\n                    // align audio segment beginDts to match with current video segment's beginDts\n                    var videoSegment = this._videoSegmentInfoList.getLastSegmentBefore(originalDts);\n                    if (videoSegment != null && videoSegment.beginDts < dts) {\n                        silentFrameDuration = dts - videoSegment.beginDts;\n                        dts = videoSegment.beginDts;\n                    } else {\n                        remuxSilentFrame = false;\n                    }\n                }\n                if (firstDts === -1) {\n                    firstDts = dts;\n                }\n\n                if (remuxSilentFrame) {\n                    remuxSilentFrame = false;\n                    samples.unshift(aacSample);\n\n                    var frame = this._generateSilentAudio(dts, silentFrameDuration);\n                    if (frame == null) {\n                        continue;\n                    }\n                    var _mp4Sample = frame.mp4Sample;\n                    var _unit = frame.unit;\n\n                    mp4Samples.push(_mp4Sample);\n\n                    // re-allocate mdatbox buffer with new size, to fit with this silent frame\n                    bytes += _unit.byteLength;\n                    mdatbox = new Uint8Array(bytes);\n                    mdatbox[0] = bytes >>> 24 & 0xFF;\n                    mdatbox[1] = bytes >>> 16 & 0xFF;\n                    mdatbox[2] = bytes >>> 8 & 0xFF;\n                    mdatbox[3] = bytes & 0xFF;\n                    mdatbox.set(_mp4remux2.default.types.mdat, 4);\n\n                    // fill data now\n                    mdatbox.set(_unit, offset);\n                    offset += _unit.byteLength;\n                    continue;\n                }\n\n                var sampleDuration = 0;\n\n                if (samples.length >= 1) {\n                    var nextDts = samples[0].dts - this._dtsBase - dtsCorrection;\n                    sampleDuration = nextDts - dts;\n                } else {\n                    if (mp4Samples.length >= 1) {\n                        // use second last sample duration\n                        sampleDuration = mp4Samples[mp4Samples.length - 1].duration;\n                    } else {\n                        // the only one sample, use reference sample duration\n                        sampleDuration = this._audioMeta.refSampleDuration;\n                    }\n                }\n\n                var mp4Sample = {\n                    dts: dts,\n                    pts: dts,\n                    cts: 0,\n                    size: unit.byteLength,\n                    duration: sampleDuration,\n                    originalDts: originalDts,\n                    flags: {\n                        isLeading: 0,\n                        dependsOn: 1,\n                        isDependedOn: 0,\n                        hasRedundancy: 0\n                    }\n                };\n                mp4Samples.push(mp4Sample);\n                mdatbox.set(unit, offset);\n                offset += unit.byteLength;\n            }\n            var latest = mp4Samples[mp4Samples.length - 1];\n            lastDts = latest.dts + latest.duration;\n            this._audioNextDts = lastDts;\n\n            // fill media segment info & add to info list\n            var info = new _mediaSegmentInfo.MediaSegmentInfo();\n            info.beginDts = firstDts;\n            info.endDts = lastDts;\n            info.beginPts = firstDts;\n            info.endPts = lastDts;\n            info.originalBeginDts = mp4Samples[0].originalDts;\n            info.originalEndDts = latest.originalDts + latest.duration;\n            info.firstSample = new _mediaSegmentInfo.SampleInfo(mp4Samples[0].dts, mp4Samples[0].pts, mp4Samples[0].duration, mp4Samples[0].originalDts, false);\n            info.lastSample = new _mediaSegmentInfo.SampleInfo(latest.dts, latest.pts, latest.duration, latest.originalDts, false);\n            if (!this._isLive) {\n                this._audioSegmentInfoList.append(info);\n            }\n\n            track.samples = mp4Samples;\n            track.sequenceNumber++;\n\n            var moofbox = _mp4remux2.default.moof(track, firstDts);\n            track.samples = [];\n            track.length = 0;\n\n            this._onMediaSegment('audio', {\n                type: 'audio',\n                data: this._mergeBoxes(moofbox, mdatbox).buffer,\n                sampleCount: mp4Samples.length,\n                info: info\n            });\n        }\n    }, {\n        key: '_generateSilentAudio',\n        value: function _generateSilentAudio(dts, frameDuration) {\n            Log.v(this.TAG, 'GenerateSilentAudio: dts = ' + dts + ', duration = ' + frameDuration);\n\n            var unit = _aacSilent2.default.getSilentFrame(this._audioMeta.channelCount);\n            if (unit == null) {\n                Log.w(this.TAG, 'Cannot generate silent aac frame for channelCount = ' + this._audioMeta.channelCount);\n                return null;\n            }\n\n            var mp4Sample = {\n                dts: dts,\n                pts: dts,\n                cts: 0,\n                size: unit.byteLength,\n                duration: frameDuration,\n                originalDts: dts,\n                flags: {\n                    isLeading: 0,\n                    dependsOn: 1,\n                    isDependedOn: 0,\n                    hasRedundancy: 0\n                }\n            };\n\n            return {\n                unit: unit,\n                mp4Sample: mp4Sample\n            };\n        }\n    }, {\n        key: '_remuxVideo',\n        value: function _remuxVideo(videoTrack) {\n            var track = videoTrack;\n            var samples = track.samples;\n            var dtsCorrection = undefined;\n            var firstDts = -1,\n                lastDts = -1;\n            var firstPts = -1,\n                lastPts = -1;\n\n            if (!samples || samples.length === 0) {\n                return;\n            }\n\n            var bytes = 8 + videoTrack.length;\n            var mdatbox = new Uint8Array(bytes);\n            mdatbox[0] = bytes >>> 24 & 0xFF;\n            mdatbox[1] = bytes >>> 16 & 0xFF;\n            mdatbox[2] = bytes >>> 8 & 0xFF;\n            mdatbox[3] = bytes & 0xFF;\n            mdatbox.set(_mp4remux2.default.types.mdat, 4);\n\n            var offset = 8;\n            var mp4Samples = [];\n            var info = new _mediaSegmentInfo.MediaSegmentInfo();\n\n            while (samples.length) {\n                var avcSample = samples.shift();\n                var keyframe = avcSample.isKeyframe;\n                var originalDts = avcSample.dts - this._dtsBase;\n\n                if (dtsCorrection == undefined) {\n                    if (this._videoNextDts == undefined) {\n                        if (this._videoSegmentInfoList.isEmpty()) {\n                            dtsCorrection = 0;\n                        } else {\n                            var lastSample = this._videoSegmentInfoList.getLastSampleBefore(originalDts);\n                            if (lastSample != null) {\n                                var distance = originalDts - (lastSample.originalDts + lastSample.duration);\n                                if (distance <= 3) {\n                                    distance = 0;\n                                }\n                                var expectedDts = lastSample.dts + lastSample.duration + distance;\n                                dtsCorrection = originalDts - expectedDts;\n                            } else {\n                                // lastSample == null\n                                dtsCorrection = 0;\n                            }\n                        }\n                    } else {\n                        dtsCorrection = originalDts - this._videoNextDts;\n                    }\n                }\n\n                var dts = originalDts - dtsCorrection;\n                var cts = avcSample.cts;\n                var pts = dts + cts;\n\n                if (firstDts === -1) {\n                    firstDts = dts;\n                    firstPts = pts;\n                }\n\n                // fill mdat box\n                var sampleSize = 0;\n                while (avcSample.units.length) {\n                    var unit = avcSample.units.shift();\n                    var data = unit.data;\n                    mdatbox.set(data, offset);\n                    offset += data.byteLength;\n                    sampleSize += data.byteLength;\n                }\n\n                var sampleDuration = 0;\n\n                if (samples.length >= 1) {\n                    var nextDts = samples[0].dts - this._dtsBase - dtsCorrection;\n                    sampleDuration = nextDts - dts;\n                } else {\n                    if (mp4Samples.length >= 1) {\n                        // lastest sample, use second last duration\n                        sampleDuration = mp4Samples[mp4Samples.length - 1].duration;\n                    } else {\n                        // the only one sample, use reference duration\n                        sampleDuration = this._videoMeta.refSampleDuration;\n                    }\n                }\n\n                if (keyframe) {\n                    var syncPoint = new _mediaSegmentInfo.SampleInfo(dts, pts, sampleDuration, avcSample.dts, true);\n                    syncPoint.fileposition = avcSample.fileposition;\n                    info.appendSyncPoint(syncPoint);\n                }\n\n                var mp4Sample = {\n                    dts: dts,\n                    pts: pts,\n                    cts: cts,\n                    size: sampleSize,\n                    isKeyframe: keyframe,\n                    duration: sampleDuration,\n                    originalDts: originalDts,\n                    flags: {\n                        isLeading: 0,\n                        dependsOn: keyframe ? 2 : 1,\n                        isDependedOn: keyframe ? 1 : 0,\n                        hasRedundancy: 0,\n                        isNonSync: keyframe ? 0 : 1\n                    }\n                };\n\n                mp4Samples.push(mp4Sample);\n            }\n            var latest = mp4Samples[mp4Samples.length - 1];\n            lastDts = latest.dts + latest.duration;\n            lastPts = latest.pts + latest.duration;\n            this._videoNextDts = lastDts;\n\n            // fill media segment info & add to info list\n            info.beginDts = firstDts;\n            info.endDts = lastDts;\n            info.beginPts = firstPts;\n            info.endPts = lastPts;\n            info.originalBeginDts = mp4Samples[0].originalDts;\n            info.originalEndDts = latest.originalDts + latest.duration;\n            info.firstSample = new _mediaSegmentInfo.SampleInfo(mp4Samples[0].dts, mp4Samples[0].pts, mp4Samples[0].duration, mp4Samples[0].originalDts, mp4Samples[0].isKeyframe);\n            info.lastSample = new _mediaSegmentInfo.SampleInfo(latest.dts, latest.pts, latest.duration, latest.originalDts, latest.isKeyframe);\n            if (!this._isLive) {\n                this._videoSegmentInfoList.append(info);\n            }\n\n            track.samples = mp4Samples;\n            track.sequenceNumber++;\n\n            // workaround for chrome < 50: force first sample as a random access point\n            // see https://bugs.chromium.org/p/chromium/issues/detail?id=229412\n            if (this._forceFirstIDR) {\n                var flags = mp4Samples[0].flags;\n                flags.dependsOn = 2;\n                flags.isNonSync = 0;\n            }\n\n            var moofbox = _mp4remux2.default.moof(track, firstDts);\n            track.samples = [];\n            track.length = 0;\n\n            this._onMediaSegment('video', {\n                type: 'video',\n                data: this._mergeBoxes(moofbox, mdatbox).buffer,\n                sampleCount: mp4Samples.length,\n                info: info\n            });\n        }\n    }, {\n        key: '_mergeBoxes',\n        value: function _mergeBoxes(moof, mdat) {\n            var result = new Uint8Array(moof.byteLength + mdat.byteLength);\n            result.set(moof, 0);\n            result.set(mdat, moof.byteLength);\n            return result;\n        }\n    }, {\n        key: 'onInitSegment',\n        get: function get() {\n            return this._onInitSegment;\n        },\n        set: function set(callback) {\n            this._onInitSegment = callback;\n        }\n\n        /* prototype: function onMediaSegment(type: string, mediaSegment: MediaSegment): void\n           MediaSegment: {\n               type: string,\n               data: ArrayBuffer,\n               sampleCount: int32\n               info: MediaSegmentInfo\n           }\n        */\n\n    }, {\n        key: 'onMediaSegment',\n        get: function get() {\n            return this._onMediaSegment;\n        },\n        set: function set(callback) {\n            this._onMediaSegment = callback;\n        }\n    }]);\n\n    return MP4Remuxer;\n}();\n\nexports.default = MP4Remuxer;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9qcy9tcDQvbXA0bW9vZi5qcz9mZGQ0Il0sIm5hbWVzIjpbIk1QNFJlbXV4ZXIiLCJjb25maWciLCJUQUciLCJjb25zdHJ1Y3RvciIsIm5hbWUiLCJfY29uZmlnIiwiX2lzTGl2ZSIsImlzTGl2ZSIsIl9kdHNCYXNlIiwiX2R0c0Jhc2VJbml0ZWQiLCJfYXVkaW9EdHNCYXNlIiwiSW5maW5pdHkiLCJfdmlkZW9EdHNCYXNlIiwiX2F1ZGlvTmV4dER0cyIsInVuZGVmaW5lZCIsIl92aWRlb05leHREdHMiLCJfYXVkaW9NZXRhIiwiX3ZpZGVvTWV0YSIsIl9hdWRpb1NlZ21lbnRJbmZvTGlzdCIsIl92aWRlb1NlZ21lbnRJbmZvTGlzdCIsIl9vbkluaXRTZWdtZW50IiwiX29uTWVkaWFTZWdtZW50IiwiX2ZvcmNlRmlyc3RJRFIiLCJjaHJvbWUiLCJ2ZXJzaW9uIiwibWFqb3IiLCJidWlsZCIsIl9maWxsU2lsZW50QWZ0ZXJTZWVrIiwibXNlZGdlIiwibXNpZSIsImNsZWFyIiwicHJvZHVjZXIiLCJvbkRhdGFBdmFpbGFibGUiLCJyZW11eCIsImJpbmQiLCJvblRyYWNrTWV0YWRhdGEiLCJfb25UcmFja01ldGFkYXRhUmVjZWl2ZWQiLCJvcmlnaW5hbER0cyIsImF1ZGlvVHJhY2siLCJ2aWRlb1RyYWNrIiwiSWxsZWdhbFN0YXRlRXhjZXB0aW9uIiwiX2NhbGN1bGF0ZUR0c0Jhc2UiLCJfcmVtdXhWaWRlbyIsIl9yZW11eEF1ZGlvIiwidHlwZSIsIm1ldGFkYXRhIiwibWV0YWJveCIsImdlbmVyYXRlSW5pdFNlZ21lbnQiLCJMb2ciLCJ2IiwiZGF0YSIsImJ1ZmZlciIsImNvZGVjIiwiY29udGFpbmVyIiwic2FtcGxlcyIsImxlbmd0aCIsImR0cyIsIk1hdGgiLCJtaW4iLCJ0cmFjayIsImR0c0NvcnJlY3Rpb24iLCJmaXJzdER0cyIsImxhc3REdHMiLCJsYXN0UHRzIiwicmVtdXhTaWxlbnRGcmFtZSIsInNpbGVudEZyYW1lRHVyYXRpb24iLCJieXRlcyIsIm1kYXRib3giLCJVaW50OEFycmF5Iiwic2V0IiwidHlwZXMiLCJtZGF0Iiwib2Zmc2V0IiwibXA0U2FtcGxlcyIsImFhY1NhbXBsZSIsInNoaWZ0IiwidW5pdCIsImlzRW1wdHkiLCJsYXN0U2FtcGxlIiwiZ2V0TGFzdFNhbXBsZUJlZm9yZSIsImRpc3RhbmNlIiwiZHVyYXRpb24iLCJleHBlY3RlZER0cyIsInZpZGVvU2VnbWVudCIsImdldExhc3RTZWdtZW50QmVmb3JlIiwiYmVnaW5EdHMiLCJ1bnNoaWZ0IiwiZnJhbWUiLCJfZ2VuZXJhdGVTaWxlbnRBdWRpbyIsIm1wNFNhbXBsZSIsInB1c2giLCJieXRlTGVuZ3RoIiwic2FtcGxlRHVyYXRpb24iLCJuZXh0RHRzIiwicmVmU2FtcGxlRHVyYXRpb24iLCJwdHMiLCJjdHMiLCJzaXplIiwiZmxhZ3MiLCJpc0xlYWRpbmciLCJkZXBlbmRzT24iLCJpc0RlcGVuZGVkT24iLCJoYXNSZWR1bmRhbmN5IiwibGF0ZXN0IiwiaW5mbyIsImVuZER0cyIsImJlZ2luUHRzIiwiZW5kUHRzIiwib3JpZ2luYWxCZWdpbkR0cyIsIm9yaWdpbmFsRW5kRHRzIiwiZmlyc3RTYW1wbGUiLCJhcHBlbmQiLCJzZXF1ZW5jZU51bWJlciIsIm1vb2Zib3giLCJtb29mIiwiX21lcmdlQm94ZXMiLCJzYW1wbGVDb3VudCIsImZyYW1lRHVyYXRpb24iLCJnZXRTaWxlbnRGcmFtZSIsImNoYW5uZWxDb3VudCIsInciLCJmaXJzdFB0cyIsImF2Y1NhbXBsZSIsImtleWZyYW1lIiwiaXNLZXlmcmFtZSIsInNhbXBsZVNpemUiLCJ1bml0cyIsInN5bmNQb2ludCIsImZpbGVwb3NpdGlvbiIsImFwcGVuZFN5bmNQb2ludCIsImlzTm9uU3luYyIsInJlc3VsdCIsImNhbGxiYWNrIl0sIm1hcHBpbmdzIjoiOzs7Ozs7cWpCQUFBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFtQkE7Ozs7QUFDQTs7OztBQUNBOzs7O0FBQ0E7Ozs7OztBQUVBO0lBQ01BLFU7QUFFRix3QkFB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TUFIRTtBQUkxQmlELHNCQUFNQTtBQUpvQixhQUE5QjtBQU1IOzs7b0NBRVdVLEksRUFBTTNDLEksRUFBTTtBQUNwQixnQkFBSTRELFNBQVMsSUFBSS9ELFVBQUosQ0FBZThDLEtBQUt2QixVQUFMLEdBQWtCcEIsS0FBS29CLFVBQXRDLENBQWI7QUFDQXdDLG1CQUFPOUQsR0FBUCxDQUFXNkMsSUFBWCxFQUFpQixDQUFqQjtBQUNBaUIsbUJBQU85RCxHQUFQLENBQVdFLElBQVgsRUFBaUIyQyxLQUFLdkIsVUFBdEI7QUFDQSxtQkFBT3dDLE1BQVA7QUFDSDs7OzRCQXBjbUI7QUFDaEIsbUJBQU8sS0FBSy9HLGNBQVo7QUFDSCxTOzBCQUVpQmdILFEsRUFBVTtBQUN4QixpQkFBS2hILGNBQUwsR0FBc0JnSCxRQUF0QjtBQUNIOztBQUVEOzs7Ozs7Ozs7Ozs0QkFRcUI7QUFDakIsbUJBQU8sS0FBSy9HLGVBQVo7QUFDSCxTOzBCQUVrQitHLFEsRUFBVTtBQUN6QixpQkFBSy9HLGVBQUwsR0FBdUIrRyxRQUF2QjtBQUNIOzs7Ozs7a0JBa2JVcEksVSIsImZpbGUiOiIxMi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qXG4gKiBDb3B5cmlnaHQgKEMpIDIwMTYgQmlsaWJpbGkuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogQGF1dGhvciB6aGVuZyBxaWFuIDx4cXFAeHFxLmltPlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5cbmltcG9ydCBBQUMgZnJvbSAnLi9hYWMtc2lsZW50LmpzJztcbmltcG9ydCBCcm93c2VyIGZyb20gJy4uL3V0aWxzL2Jyb3dzZXIuanMnO1xuaW1wb3J0IE1QNCBmcm9tICcuL21wNHJlbXV4J1xuaW1wb3J0IHsgU2FtcGxlSW5mbywgTWVkaWFTZWdtZW50SW5mbywgTWVkaWFTZWdtZW50SW5mb0xpc3QgfSBmcm9tICcuL21lZGlhLXNlZ21lbnQtaW5mby5qcyc7XG5cbi8vIEZyYWdtZW50ZWQgbXA0IHJlbXV4ZXJcbmNsYXNzIE1QNFJlbXV4ZXIge1xuXG4gICAgY29uc3RydWN0b3IoY29uZmlnKSB7XG4gICAgICAgIHRoaXMuVEFHID0gdGhpcy5jb25zdHJ1Y3Rvci5uYW1lO1xuXG4gICAgICAgIHRoaXMuX2NvbmZpZyA9IGNvbmZpZztcbiAgICAgICAgdGhpcy5faXNMaXZlID0gKGNvbmZpZy5pc0xpdmUgPT09IHRydWUpID8gdHJ1ZSA6IGZhbHNlO1xuXG4gICAgICAgIHRoaXMuX2R0c0Jhc2UgPSAtMTtcbiAgICAgICAgdGhpcy5fZHRzQmFzZUluaXRlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLl9hdWRpb0R0c0Jhc2UgPSBJbmZpbml0eTtcbiAgICAgICAgdGhpcy5fdmlkZW9EdHNCYXNlID0gSW5maW5pdHk7XG4gICAgICAgIHRoaXMuX2F1ZGlvTmV4dER0cyA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5fdmlkZW9OZXh0RHRzID0gdW5kZWZpbmVkO1xuXG4gICAgICAgIHRoaXMuX2F1ZGlvTWV0YSA9IG51bGw7XG4gICAgICAgIHRoaXMuX3ZpZGVvTWV0YSA9IG51bGw7XG5cbiAgICAgICAgdGhpcy5fYXVkaW9TZWdtZW50SW5mb0xpc3QgPSBuZXcgTWVkaWFTZWdtZW50SW5mb0xpc3QoJ2F1ZGlvJyk7XG4gICAgICAgIHRoaXMuX3ZpZGVvU2VnbWVudEluZm9MaXN0ID0gbmV3IE1lZGlhU2VnbWVudEluZm9MaXN0KCd2aWRlbycpO1xuXG4gICAgICAgIHRoaXMuX29uSW5pdFNlZ21lbnQgPSBudWxsO1xuICAgICAgICB0aGlzLl9vbk1lZGlhU2VnbWVudCA9IG51bGw7XG5cbiAgICAgICAgLy8gV29ya2Fyb3VuZCBmb3IgY2hyb21lIDwgNTA6IEFsd2F5cyBmb3JjZSBmaXJzdCBzYW1wbGUgYXMgYSBSYW5kb20gQWNjZXNzIFBvaW50IGluIG1lZGlhIHNlZ21lbnRcbiAgICAgICAgLy8gc2VlIGh0dHBzOi8vYnVncy5jaHJvbWl1bS5vcmcvcC9jaHJvbWl1bS9pc3N1ZXMvZGV0YWlsP2lkPTIyOTQxMlxuICAgICAgICB0aGlzLl9mb3JjZUZpcnN0SURSID0gKEJyb3dzZXIuY2hyb21lICYmXG4gICAgICAgICAgICAoQnJvd3Nlci52ZXJzaW9uLm1ham9yIDwgNTAgfHxcbiAgICAgICAgICAgICAgICAoQnJvd3Nlci52ZXJzaW9uLm1ham9yID09PSA1MCAmJiBCcm93c2VyLnZlcnNpb24uYnVpbGQgPCAyNjYxKSkpID8gdHJ1ZSA6IGZhbHNlO1xuXG4gICAgICAgIC8vIFdvcmthcm91bmQgZm9yIElFMTEvRWRnZTogRmlsbCBzaWxlbnQgYWFjIGZyYW1lIGFmdGVyIGtleWZyYW1lLXNlZWtpbmdcbiAgICAgICAgLy8gTWFrZSBhdWRpbyBiZWdpbkR0cyBlcXVhbHMgd2l0aCB2aWRlbyBiZWdpbkR0cywgaW4gb3JkZXIgdG8gZml4IHNlZWsgZnJlZXplXG4gICAgICAgIHRoaXMuX2ZpbGxTaWxlbnRBZnRlclNlZWsgPSAoQnJvd3Nlci5tc2VkZ2UgfHwgQnJvd3Nlci5tc2llKTtcbiAgICB9XG5cbiAgICBkZXN0cm95KCkge1xuICAgICAgICB0aGlzLl9kdHNCYXNlID0gLTE7XG4gICAgICAgIHRoaXMuX2R0c0Jhc2VJbml0ZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5fYXVkaW9NZXRhID0gbnVsbDtcbiAgICAgICAgdGhpcy5fdmlkZW9NZXRhID0gbnVsbDtcbiAgICAgICAgdGhpcy5fYXVkaW9TZWdtZW50SW5mb0xpc3QuY2xlYXIoKTtcbiAgICAgICAgdGhpcy5fYXVkaW9TZWdtZW50SW5mb0xpc3QgPSBudWxsO1xuICAgICAgICB0aGlzLl92aWRlb1NlZ21lbnRJbmZvTGlzdC5jbGVhcigpO1xuICAgICAgICB0aGlzLl92aWRlb1NlZ21lbnRJbmZvTGlzdCA9IG51bGw7XG4gICAgICAgIHRoaXMuX29uSW5pdFNlZ21lbnQgPSBudWxsO1xuICAgICAgICB0aGlzLl9vbk1lZGlhU2VnbWVudCA9IG51bGw7XG4gICAgfVxuXG4gICAgYmluZERhdGFTb3VyY2UocHJvZHVjZXIpIHtcbiAgICAgICAgcHJvZHVjZXIub25EYXRhQXZhaWxhYmxlID0gdGhpcy5yZW11eC5iaW5kKHRoaXMpO1xuICAgICAgICBwcm9kdWNlci5vblRyYWNrTWV0YWRhdGEgPSB0aGlzLl9vblRyYWNrTWV0YWRhdGFSZWNlaXZlZC5iaW5kKHRoaXMpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICAvKiBwcm90b3R5cGU6IGZ1bmN0aW9uIG9uSW5pdFNlZ21lbnQodHlwZTogc3RyaW5nLCBpbml0U2VnbWVudDogQXJyYXlCdWZmZXIpOiB2b2lkXG4gICAgICAgSW5pdFNlZ21lbnQ6IHtcbiAgICAgICAgICAgdHlwZTogc3RyaW5nLFxuICAgICAgICAgICBkYXRhOiBBcnJheUJ1ZmZlcixcbiAgICAgICAgICAgY29kZWM6IHN0cmluZyxcbiAgICAgICAgICAgY29udGFpbmVyOiBzdHJpbmdcbiAgICAgICB9XG4gICAgKi9cbiAgICBnZXQgb25Jbml0U2VnbWVudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX29uSW5pdFNlZ21lbnQ7XG4gICAgfVxuXG4gICAgc2V0IG9uSW5pdFNlZ21lbnQoY2FsbGJhY2spIHtcbiAgICAgICAgdGhpcy5fb25Jbml0U2VnbWVudCA9IGNhbGxiYWNrO1xuICAgIH1cblxuICAgIC8qIHByb3RvdHlwZTogZnVuY3Rpb24gb25NZWRpYVNlZ21lbnQodHlwZTogc3RyaW5nLCBtZWRpYVNlZ21lbnQ6IE1lZGlhU2VnbWVudCk6IHZvaWRcbiAgICAgICBNZWRpYVNlZ21lbnQ6IHtcbiAgICAgICAgICAgdHlwZTogc3RyaW5nLFxuICAgICAgICAgICBkYXRhOiBBcnJheUJ1ZmZlcixcbiAgICAgICAgICAgc2FtcGxlQ291bnQ6IGludDMyXG4gICAgICAgICAgIGluZm86IE1lZGlhU2VnbWVudEluZm9cbiAgICAgICB9XG4gICAgKi9cbiAgICBnZXQgb25NZWRpYVNlZ21lbnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9vbk1lZGlhU2VnbWVudDtcbiAgICB9XG5cbiAgICBzZXQgb25NZWRpYVNlZ21lbnQoY2FsbGJhY2spIHtcbiAgICAgICAgdGhpcy5fb25NZWRpYVNlZ21lbnQgPSBjYWxsYmFjaztcbiAgICB9XG5cbiAgICBpbnNlcnREaXNjb250aW51aXR5KCkge1xuICAgICAgICB0aGlzLl9hdWRpb05leHREdHMgPSB0aGlzLl92aWRlb05leHREdHMgPSB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgc2VlayhvcmlnaW5hbER0cykge1xuICAgICAgICB0aGlzLl92aWRlb1NlZ21lbnRJbmZvTGlzdC5jbGVhcigpO1xuICAgICAgICB0aGlzLl9hdWRpb1NlZ21lbnRJbmZvTGlzdC5jbGVhcigpO1xuICAgIH1cblxuICAgIHJlbXV4KGF1ZGlvVHJhY2ssIHZpZGVvVHJhY2spIHtcbiAgICAgICAgaWYgKCF0aGlzLl9vbk1lZGlhU2VnbWVudCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxTdGF0ZUV4Y2VwdGlvbignTVA0UmVtdXhlcjogb25NZWRpYVNlZ21lbnQgY2FsbGJhY2sgbXVzdCBiZSBzcGVjaWZpY2VkIScpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5fZHRzQmFzZUluaXRlZCkge1xuICAgICAgICAgICAgdGhpcy5fY2FsY3VsYXRlRHRzQmFzZShhdWRpb1RyYWNrLCB2aWRlb1RyYWNrKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9yZW11eFZpZGVvKHZpZGVvVHJhY2spO1xuICAgICAgICB0aGlzLl9yZW11eEF1ZGlvKGF1ZGlvVHJhY2spO1xuICAgIH1cblxuICAgIF9vblRyYWNrTWV0YWRhdGFSZWNlaXZlZCh0eXBlLCBtZXRhZGF0YSkge1xuICAgICAgICBsZXQgbWV0YWJveCA9IG51bGw7XG5cbiAgICAgICAgaWYgKHR5cGUgPT09ICdhdWRpbycpIHtcbiAgICAgICAgICAgIHRoaXMuX2F1ZGlvTWV0YSA9IG1ldGFkYXRhO1xuICAgICAgICAgICAgbWV0YWJveCA9IE1QNC5nZW5lcmF0ZUluaXRTZWdtZW50KG1ldGFkYXRhKTtcbiAgICAgICAgICAgIExvZy52KCdtc2crYXVkaW8nLCBtZXRhZGF0YSlcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlID09PSAndmlkZW8nKSB7XG4gICAgICAgICAgICB0aGlzLl92aWRlb01ldGEgPSBtZXRhZGF0YTtcbiAgICAgICAgICAgIG1ldGFib3ggPSBNUDQuZ2VuZXJhdGVJbml0U2VnbWVudChtZXRhZGF0YSk7XG4gICAgICAgICAgICBMb2cudignbXNnK3ZpZGVvJywgbWV0YWRhdGEpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBkaXNwYXRjaCBtZXRhYm94IChJbml0aWFsaXphdGlvbiBTZWdtZW50KVxuICAgICAgICBpZiAoIXRoaXMuX29uSW5pdFNlZ21lbnQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsU3RhdGVFeGNlcHRpb24oJ01QNFJlbXV4ZXI6IG9uSW5pdFNlZ21lbnQgY2FsbGJhY2sgbXVzdCBiZSBzcGVjaWZpZWQhJyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fb25Jbml0U2VnbWVudCh0eXBlLCB7XG4gICAgICAgICAgICB0eXBlOiB0eXBlLFxuICAgICAgICAgICAgZGF0YTogbWV0YWJveC5idWZmZXIsXG4gICAgICAgICAgICBjb2RlYzogbWV0YWRhdGEuY29kZWMsXG4gICAgICAgICAgICBjb250YWluZXI6IGAke3R5cGV9L21wNGBcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgX2NhbGN1bGF0ZUR0c0Jhc2UoYXVkaW9UcmFjaywgdmlkZW9UcmFjaykge1xuICAgICAgICBpZiAodGhpcy5fZHRzQmFzZUluaXRlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGF1ZGlvVHJhY2suc2FtcGxlcyAmJiBhdWRpb1RyYWNrLnNhbXBsZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICB0aGlzLl9hdWRpb0R0c0Jhc2UgPSBhdWRpb1RyYWNrLnNhbXBsZXNbMF0uZHRzO1xuICAgICAgICB9XG4gICAgICAgIGlmICh2aWRlb1RyYWNrLnNhbXBsZXMgJiYgdmlkZW9UcmFjay5zYW1wbGVzLmxlbmd0aCkge1xuICAgICAgICAgICAgdGhpcy5fdmlkZW9EdHNCYXNlID0gdmlkZW9UcmFjay5zYW1wbGVzWzBdLmR0cztcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX2R0c0Jhc2UgPSBNYXRoLm1pbih0aGlzLl9hdWRpb0R0c0Jhc2UsIHRoaXMuX3ZpZGVvRHRzQmFzZSk7XG4gICAgICAgIHRoaXMuX2R0c0Jhc2VJbml0ZWQgPSB0cnVlO1xuICAgIH1cblxuICAgIF9yZW11eEF1ZGlvKGF1ZGlvVHJhY2spIHtcbiAgICAgICAgbGV0IHRyYWNrID0gYXVkaW9UcmFjaztcbiAgICAgICAgbGV0IHNhbXBsZXMgPSB0cmFjay5zYW1wbGVzO1xuICAgICAgICBsZXQgZHRzQ29ycmVjdGlvbiA9IHVuZGVmaW5lZDtcbiAgICAgICAgbGV0IGZpcnN0RHRzID0gLTEsXG4gICAgICAgICAgICBsYXN0RHRzID0gLTEsXG4gICAgICAgICAgICBsYXN0UHRzID0gLTE7XG5cbiAgICAgICAgbGV0IHJlbXV4U2lsZW50RnJhbWUgPSBmYWxzZTtcbiAgICAgICAgbGV0IHNpbGVudEZyYW1lRHVyYXRpb24gPSAtMTtcblxuICAgICAgICBpZiAoIXNhbXBsZXMgfHwgc2FtcGxlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBieXRlcyA9IDggKyB0cmFjay5sZW5ndGg7XG4gICAgICAgIGxldCBtZGF0Ym94ID0gbmV3IFVpbnQ4QXJyYXkoYnl0ZXMpO1xuICAgICAgICBtZGF0Ym94WzBdID0gKGJ5dGVzID4+PiAyNCkgJiAweEZGO1xuICAgICAgICBtZGF0Ym94WzFdID0gKGJ5dGVzID4+PiAxNikgJiAweEZGO1xuICAgICAgICBtZGF0Ym94WzJdID0gKGJ5dGVzID4+PiA4KSAmIDB4RkY7XG4gICAgICAgIG1kYXRib3hbM10gPSAoYnl0ZXMpICYgMHhGRjtcblxuICAgICAgICBtZGF0Ym94LnNldChNUDQudHlwZXMubWRhdCwgNCk7XG5cbiAgICAgICAgbGV0IG9mZnNldCA9IDg7IC8vIHNpemUgKyB0eXBlXG4gICAgICAgIGxldCBtcDRTYW1wbGVzID0gW107XG5cbiAgICAgICAgd2hpbGUgKHNhbXBsZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICBsZXQgYWFjU2FtcGxlID0gc2FtcGxlcy5zaGlmdCgpO1xuICAgICAgICAgICAgbGV0IHVuaXQgPSBhYWNTYW1wbGUudW5pdDtcbiAgICAgICAgICAgIGxldCBvcmlnaW5hbER0cyA9IGFhY1NhbXBsZS5kdHMgLSB0aGlzLl9kdHNCYXNlO1xuXG4gICAgICAgICAgICBpZiAoZHRzQ29ycmVjdGlvbiA9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5fYXVkaW9OZXh0RHRzID09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5fYXVkaW9TZWdtZW50SW5mb0xpc3QuaXNFbXB0eSgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkdHNDb3JyZWN0aW9uID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl9maWxsU2lsZW50QWZ0ZXJTZWVrICYmICF0aGlzLl92aWRlb1NlZ21lbnRJbmZvTGlzdC5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW11eFNpbGVudEZyYW1lID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBsYXN0U2FtcGxlID0gdGhpcy5fYXVkaW9TZWdtZW50SW5mb0xpc3QuZ2V0TGFzdFNhbXBsZUJlZm9yZShvcmlnaW5hbER0cyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobGFzdFNhbXBsZSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGRpc3RhbmNlID0gKG9yaWdpbmFsRHRzIC0gKGxhc3RTYW1wbGUub3JpZ2luYWxEdHMgKyBsYXN0U2FtcGxlLmR1cmF0aW9uKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRpc3RhbmNlIDw9IDMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzdGFuY2UgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgZXhwZWN0ZWREdHMgPSBsYXN0U2FtcGxlLmR0cyArIGxhc3RTYW1wbGUuZHVyYXRpb24gKyBkaXN0YW5jZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkdHNDb3JyZWN0aW9uID0gb3JpZ2luYWxEdHMgLSBleHBlY3RlZER0cztcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7IC8vIGxhc3RTYW1wbGUgPT0gbnVsbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGR0c0NvcnJlY3Rpb24gPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZHRzQ29ycmVjdGlvbiA9IG9yaWdpbmFsRHRzIC0gdGhpcy5fYXVkaW9OZXh0RHRzO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbGV0IGR0cyA9IG9yaWdpbmFsRHRzIC0gZHRzQ29ycmVjdGlvbjtcbiAgICAgICAgICAgIGlmIChyZW11eFNpbGVudEZyYW1lKSB7XG4gICAgICAgICAgICAgICAgLy8gYWxpZ24gYXVkaW8gc2VnbWVudCBiZWdpbkR0cyB0byBtYXRjaCB3aXRoIGN1cnJlbnQgdmlkZW8gc2VnbWVudCdzIGJlZ2luRHRzXG4gICAgICAgICAgICAgICAgbGV0IHZpZGVvU2VnbWVudCA9IHRoaXMuX3ZpZGVvU2VnbWVudEluZm9MaXN0LmdldExhc3RTZWdtZW50QmVmb3JlKG9yaWdpbmFsRHRzKTtcbiAgICAgICAgICAgICAgICBpZiAodmlkZW9TZWdtZW50ICE9IG51bGwgJiYgdmlkZW9TZWdtZW50LmJlZ2luRHRzIDwgZHRzKSB7XG4gICAgICAgICAgICAgICAgICAgIHNpbGVudEZyYW1lRHVyYXRpb24gPSBkdHMgLSB2aWRlb1NlZ21lbnQuYmVnaW5EdHM7XG4gICAgICAgICAgICAgICAgICAgIGR0cyA9IHZpZGVvU2VnbWVudC5iZWdpbkR0cztcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZW11eFNpbGVudEZyYW1lID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGZpcnN0RHRzID09PSAtMSkge1xuICAgICAgICAgICAgICAgIGZpcnN0RHRzID0gZHRzO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAocmVtdXhTaWxlbnRGcmFtZSkge1xuICAgICAgICAgICAgICAgIHJlbXV4U2lsZW50RnJhbWUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBzYW1wbGVzLnVuc2hpZnQoYWFjU2FtcGxlKTtcblxuICAgICAgICAgICAgICAgIGxldCBmcmFtZSA9IHRoaXMuX2dlbmVyYXRlU2lsZW50QXVkaW8oZHRzLCBzaWxlbnRGcmFtZUR1cmF0aW9uKTtcbiAgICAgICAgICAgICAgICBpZiAoZnJhbWUgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbGV0IG1wNFNhbXBsZSA9IGZyYW1lLm1wNFNhbXBsZTtcbiAgICAgICAgICAgICAgICBsZXQgdW5pdCA9IGZyYW1lLnVuaXQ7XG5cbiAgICAgICAgICAgICAgICBtcDRTYW1wbGVzLnB1c2gobXA0U2FtcGxlKTtcblxuICAgICAgICAgICAgICAgIC8vIHJlLWFsbG9jYXRlIG1kYXRib3ggYnVmZmVyIHdpdGggbmV3IHNpemUsIHRvIGZpdCB3aXRoIHRoaXMgc2lsZW50IGZyYW1lXG4gICAgICAgICAgICAgICAgYnl0ZXMgKz0gdW5pdC5ieXRlTGVuZ3RoO1xuICAgICAgICAgICAgICAgIG1kYXRib3ggPSBuZXcgVWludDhBcnJheShieXRlcyk7XG4gICAgICAgICAgICAgICAgbWRhdGJveFswXSA9IChieXRlcyA+Pj4gMjQpICYgMHhGRjtcbiAgICAgICAgICAgICAgICBtZGF0Ym94WzFdID0gKGJ5dGVzID4+PiAxNikgJiAweEZGO1xuICAgICAgICAgICAgICAgIG1kYXRib3hbMl0gPSAoYnl0ZXMgPj4+IDgpICYgMHhGRjtcbiAgICAgICAgICAgICAgICBtZGF0Ym94WzNdID0gKGJ5dGVzKSAmIDB4RkY7XG4gICAgICAgICAgICAgICAgbWRhdGJveC5zZXQoTVA0LnR5cGVzLm1kYXQsIDQpO1xuXG4gICAgICAgICAgICAgICAgLy8gZmlsbCBkYXRhIG5vd1xuICAgICAgICAgICAgICAgIG1kYXRib3guc2V0KHVuaXQsIG9mZnNldCk7XG4gICAgICAgICAgICAgICAgb2Zmc2V0ICs9IHVuaXQuYnl0ZUxlbmd0aDtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbGV0IHNhbXBsZUR1cmF0aW9uID0gMDtcblxuICAgICAgICAgICAgaWYgKHNhbXBsZXMubGVuZ3RoID49IDEpIHtcbiAgICAgICAgICAgICAgICBsZXQgbmV4dER0cyA9IHNhbXBsZXNbMF0uZHRzIC0gdGhpcy5fZHRzQmFzZSAtIGR0c0NvcnJlY3Rpb247XG4gICAgICAgICAgICAgICAgc2FtcGxlRHVyYXRpb24gPSBuZXh0RHRzIC0gZHRzO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAobXA0U2FtcGxlcy5sZW5ndGggPj0gMSkgeyAvLyB1c2Ugc2Vjb25kIGxhc3Qgc2FtcGxlIGR1cmF0aW9uXG4gICAgICAgICAgICAgICAgICAgIHNhbXBsZUR1cmF0aW9uID0gbXA0U2FtcGxlc1ttcDRTYW1wbGVzLmxlbmd0aCAtIDFdLmR1cmF0aW9uO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7IC8vIHRoZSBvbmx5IG9uZSBzYW1wbGUsIHVzZSByZWZlcmVuY2Ugc2FtcGxlIGR1cmF0aW9uXG4gICAgICAgICAgICAgICAgICAgIHNhbXBsZUR1cmF0aW9uID0gdGhpcy5fYXVkaW9NZXRhLnJlZlNhbXBsZUR1cmF0aW9uO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbGV0IG1wNFNhbXBsZSA9IHtcbiAgICAgICAgICAgICAgICBkdHM6IGR0cyxcbiAgICAgICAgICAgICAgICBwdHM6IGR0cyxcbiAgICAgICAgICAgICAgICBjdHM6IDAsXG4gICAgICAgICAgICAgICAgc2l6ZTogdW5pdC5ieXRlTGVuZ3RoLFxuICAgICAgICAgICAgICAgIGR1cmF0aW9uOiBzYW1wbGVEdXJhdGlvbixcbiAgICAgICAgICAgICAgICBvcmlnaW5hbER0czogb3JpZ2luYWxEdHMsXG4gICAgICAgICAgICAgICAgZmxhZ3M6IHtcbiAgICAgICAgICAgICAgICAgICAgaXNMZWFkaW5nOiAwLFxuICAgICAgICAgICAgICAgICAgICBkZXBlbmRzT246IDEsXG4gICAgICAgICAgICAgICAgICAgIGlzRGVwZW5kZWRPbjogMCxcbiAgICAgICAgICAgICAgICAgICAgaGFzUmVkdW5kYW5jeTogMFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBtcDRTYW1wbGVzLnB1c2gobXA0U2FtcGxlKTtcbiAgICAgICAgICAgIG1kYXRib3guc2V0KHVuaXQsIG9mZnNldCk7XG4gICAgICAgICAgICBvZmZzZXQgKz0gdW5pdC5ieXRlTGVuZ3RoO1xuICAgICAgICB9XG4gICAgICAgIGxldCBsYXRlc3QgPSBtcDRTYW1wbGVzW21wNFNhbXBsZXMubGVuZ3RoIC0gMV07XG4gICAgICAgIGxhc3REdHMgPSBsYXRlc3QuZHRzICsgbGF0ZXN0LmR1cmF0aW9uO1xuICAgICAgICB0aGlzLl9hdWRpb05leHREdHMgPSBsYXN0RHRzO1xuXG4gICAgICAgIC8vIGZpbGwgbWVkaWEgc2VnbWVudCBpbmZvICYgYWRkIHRvIGluZm8gbGlzdFxuICAgICAgICBsZXQgaW5mbyA9IG5ldyBNZWRpYVNlZ21lbnRJbmZvKCk7XG4gICAgICAgIGluZm8uYmVnaW5EdHMgPSBmaXJzdER0cztcbiAgICAgICAgaW5mby5lbmREdHMgPSBsYXN0RHRzO1xuICAgICAgICBpbmZvLmJlZ2luUHRzID0gZmlyc3REdHM7XG4gICAgICAgIGluZm8uZW5kUHRzID0gbGFzdER0cztcbiAgICAgICAgaW5mby5vcmlnaW5hbEJlZ2luRHRzID0gbXA0U2FtcGxlc1swXS5vcmlnaW5hbER0cztcbiAgICAgICAgaW5mby5vcmlnaW5hbEVuZER0cyA9IGxhdGVzdC5vcmlnaW5hbER0cyArIGxhdGVzdC5kdXJhdGlvbjtcbiAgICAgICAgaW5mby5maXJzdFNhbXBsZSA9IG5ldyBTYW1wbGVJbmZvKG1wNFNhbXBsZXNbMF0uZHRzLFxuICAgICAgICAgICAgbXA0U2FtcGxlc1swXS5wdHMsXG4gICAgICAgICAgICBtcDRTYW1wbGVzWzBdLmR1cmF0aW9uLFxuICAgICAgICAgICAgbXA0U2FtcGxlc1swXS5vcmlnaW5hbER0cyxcbiAgICAgICAgICAgIGZhbHNlKTtcbiAgICAgICAgaW5mby5sYXN0U2FtcGxlID0gbmV3IFNhbXBsZUluZm8obGF0ZXN0LmR0cyxcbiAgICAgICAgICAgIGxhdGVzdC5wdHMsXG4gICAgICAgICAgICBsYXRlc3QuZHVyYXRpb24sXG4gICAgICAgICAgICBsYXRlc3Qub3JpZ2luYWxEdHMsXG4gICAgICAgICAgICBmYWxzZSk7XG4gICAgICAgIGlmICghdGhpcy5faXNMaXZlKSB7XG4gICAgICAgICAgICB0aGlzLl9hdWRpb1NlZ21lbnRJbmZvTGlzdC5hcHBlbmQoaW5mbyk7XG4gICAgICAgIH1cblxuICAgICAgICB0cmFjay5zYW1wbGVzID0gbXA0U2FtcGxlcztcbiAgICAgICAgdHJhY2suc2VxdWVuY2VOdW1iZXIrKztcblxuICAgICAgICBsZXQgbW9vZmJveCA9IE1QNC5tb29mKHRyYWNrLCBmaXJzdER0cyk7XG4gICAgICAgIHRyYWNrLnNhbXBsZXMgPSBbXTtcbiAgICAgICAgdHJhY2subGVuZ3RoID0gMDtcblxuICAgICAgICB0aGlzLl9vbk1lZGlhU2VnbWVudCgnYXVkaW8nLCB7XG4gICAgICAgICAgICB0eXBlOiAnYXVkaW8nLFxuICAgICAgICAgICAgZGF0YTogdGhpcy5fbWVyZ2VCb3hlcyhtb29mYm94LCBtZGF0Ym94KS5idWZmZXIsXG4gICAgICAgICAgICBzYW1wbGVDb3VudDogbXA0U2FtcGxlcy5sZW5ndGgsXG4gICAgICAgICAgICBpbmZvOiBpbmZvXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIF9nZW5lcmF0ZVNpbGVudEF1ZGlvKGR0cywgZnJhbWVEdXJhdGlvbikge1xuICAgICAgICBMb2cudih0aGlzLlRBRywgYEdlbmVyYXRlU2lsZW50QXVkaW86IGR0cyA9ICR7ZHRzfSwgZHVyYXRpb24gPSAke2ZyYW1lRHVyYXRpb259YCk7XG5cbiAgICAgICAgbGV0IHVuaXQgPSBBQUMuZ2V0U2lsZW50RnJhbWUodGhpcy5fYXVkaW9NZXRhLmNoYW5uZWxDb3VudCk7XG4gICAgICAgIGlmICh1bml0ID09IG51bGwpIHtcbiAgICAgICAgICAgIExvZy53KHRoaXMuVEFHLCBgQ2Fubm90IGdlbmVyYXRlIHNpbGVudCBhYWMgZnJhbWUgZm9yIGNoYW5uZWxDb3VudCA9ICR7dGhpcy5fYXVkaW9NZXRhLmNoYW5uZWxDb3VudH1gKTtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IG1wNFNhbXBsZSA9IHtcbiAgICAgICAgICAgIGR0czogZHRzLFxuICAgICAgICAgICAgcHRzOiBkdHMsXG4gICAgICAgICAgICBjdHM6IDAsXG4gICAgICAgICAgICBzaXplOiB1bml0LmJ5dGVMZW5ndGgsXG4gICAgICAgICAgICBkdXJhdGlvbjogZnJhbWVEdXJhdGlvbixcbiAgICAgICAgICAgIG9yaWdpbmFsRHRzOiBkdHMsXG4gICAgICAgICAgICBmbGFnczoge1xuICAgICAgICAgICAgICAgIGlzTGVhZGluZzogMCxcbiAgICAgICAgICAgICAgICBkZXBlbmRzT246IDEsXG4gICAgICAgICAgICAgICAgaXNEZXBlbmRlZE9uOiAwLFxuICAgICAgICAgICAgICAgIGhhc1JlZHVuZGFuY3k6IDBcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdW5pdCxcbiAgICAgICAgICAgIG1wNFNhbXBsZVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIF9yZW11eFZpZGVvKHZpZGVvVHJhY2spIHtcbiAgICAgICAgbGV0IHRyYWNrID0gdmlkZW9UcmFjaztcbiAgICAgICAgbGV0IHNhbXBsZXMgPSB0cmFjay5zYW1wbGVzO1xuICAgICAgICBsZXQgZHRzQ29ycmVjdGlvbiA9IHVuZGVmaW5lZDtcbiAgICAgICAgbGV0IGZpcnN0RHRzID0gLTEsXG4gICAgICAgICAgICBsYXN0RHRzID0gLTE7XG4gICAgICAgIGxldCBmaXJzdFB0cyA9IC0xLFxuICAgICAgICAgICAgbGFzdFB0cyA9IC0xO1xuXG4gICAgICAgIGlmICghc2FtcGxlcyB8fCBzYW1wbGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGJ5dGVzID0gOCArIHZpZGVvVHJhY2subGVuZ3RoO1xuICAgICAgICBsZXQgbWRhdGJveCA9IG5ldyBVaW50OEFycmF5KGJ5dGVzKTtcbiAgICAgICAgbWRhdGJveFswXSA9IChieXRlcyA+Pj4gMjQpICYgMHhGRjtcbiAgICAgICAgbWRhdGJveFsxXSA9IChieXRlcyA+Pj4gMTYpICYgMHhGRjtcbiAgICAgICAgbWRhdGJveFsyXSA9IChieXRlcyA+Pj4gOCkgJiAweEZGO1xuICAgICAgICBtZGF0Ym94WzNdID0gKGJ5dGVzKSAmIDB4RkY7XG4gICAgICAgIG1kYXRib3guc2V0KE1QNC50eXBlcy5tZGF0LCA0KTtcblxuICAgICAgICBsZXQgb2Zmc2V0ID0gODtcbiAgICAgICAgbGV0IG1wNFNhbXBsZXMgPSBbXTtcbiAgICAgICAgbGV0IGluZm8gPSBuZXcgTWVkaWFTZWdtZW50SW5mbygpO1xuXG4gICAgICAgIHdoaWxlIChzYW1wbGVzLmxlbmd0aCkge1xuICAgICAgICAgICAgbGV0IGF2Y1NhbXBsZSA9IHNhbXBsZXMuc2hpZnQoKTtcbiAgICAgICAgICAgIGxldCBrZXlmcmFtZSA9IGF2Y1NhbXBsZS5pc0tleWZyYW1lO1xuICAgICAgICAgICAgbGV0IG9yaWdpbmFsRHRzID0gYXZjU2FtcGxlLmR0cyAtIHRoaXMuX2R0c0Jhc2U7XG5cbiAgICAgICAgICAgIGlmIChkdHNDb3JyZWN0aW9uID09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLl92aWRlb05leHREdHMgPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl92aWRlb1NlZ21lbnRJbmZvTGlzdC5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGR0c0NvcnJlY3Rpb24gPSAwO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGxhc3RTYW1wbGUgPSB0aGlzLl92aWRlb1NlZ21lbnRJbmZvTGlzdC5nZXRMYXN0U2FtcGxlQmVmb3JlKG9yaWdpbmFsRHRzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsYXN0U2FtcGxlICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgZGlzdGFuY2UgPSAob3JpZ2luYWxEdHMgLSAobGFzdFNhbXBsZS5vcmlnaW5hbER0cyArIGxhc3RTYW1wbGUuZHVyYXRpb24pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGlzdGFuY2UgPD0gMykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXN0YW5jZSA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBleHBlY3RlZER0cyA9IGxhc3RTYW1wbGUuZHRzICsgbGFzdFNhbXBsZS5kdXJhdGlvbiArIGRpc3RhbmNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGR0c0NvcnJlY3Rpb24gPSBvcmlnaW5hbER0cyAtIGV4cGVjdGVkRHRzO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsgLy8gbGFzdFNhbXBsZSA9PSBudWxsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZHRzQ29ycmVjdGlvbiA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBkdHNDb3JyZWN0aW9uID0gb3JpZ2luYWxEdHMgLSB0aGlzLl92aWRlb05leHREdHM7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBsZXQgZHRzID0gb3JpZ2luYWxEdHMgLSBkdHNDb3JyZWN0aW9uO1xuICAgICAgICAgICAgbGV0IGN0cyA9IGF2Y1NhbXBsZS5jdHM7XG4gICAgICAgICAgICBsZXQgcHRzID0gZHRzICsgY3RzO1xuXG4gICAgICAgICAgICBpZiAoZmlyc3REdHMgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgZmlyc3REdHMgPSBkdHM7XG4gICAgICAgICAgICAgICAgZmlyc3RQdHMgPSBwdHM7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIGZpbGwgbWRhdCBib3hcbiAgICAgICAgICAgIGxldCBzYW1wbGVTaXplID0gMDtcbiAgICAgICAgICAgIHdoaWxlIChhdmNTYW1wbGUudW5pdHMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgbGV0IHVuaXQgPSBhdmNTYW1wbGUudW5pdHMuc2hpZnQoKTtcbiAgICAgICAgICAgICAgICBsZXQgZGF0YSA9IHVuaXQuZGF0YTtcbiAgICAgICAgICAgICAgICBtZGF0Ym94LnNldChkYXRhLCBvZmZzZXQpO1xuICAgICAgICAgICAgICAgIG9mZnNldCArPSBkYXRhLmJ5dGVMZW5ndGg7XG4gICAgICAgICAgICAgICAgc2FtcGxlU2l6ZSArPSBkYXRhLmJ5dGVMZW5ndGg7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGxldCBzYW1wbGVEdXJhdGlvbiA9IDA7XG5cbiAgICAgICAgICAgIGlmIChzYW1wbGVzLmxlbmd0aCA+PSAxKSB7XG4gICAgICAgICAgICAgICAgbGV0IG5leHREdHMgPSBzYW1wbGVzWzBdLmR0cyAtIHRoaXMuX2R0c0Jhc2UgLSBkdHNDb3JyZWN0aW9uO1xuICAgICAgICAgICAgICAgIHNhbXBsZUR1cmF0aW9uID0gbmV4dER0cyAtIGR0cztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKG1wNFNhbXBsZXMubGVuZ3RoID49IDEpIHsgLy8gbGFzdGVzdCBzYW1wbGUsIHVzZSBzZWNvbmQgbGFzdCBkdXJhdGlvblxuICAgICAgICAgICAgICAgICAgICBzYW1wbGVEdXJhdGlvbiA9IG1wNFNhbXBsZXNbbXA0U2FtcGxlcy5sZW5ndGggLSAxXS5kdXJhdGlvbjtcbiAgICAgICAgICAgICAgICB9IGVsc2UgeyAvLyB0aGUgb25seSBvbmUgc2FtcGxlLCB1c2UgcmVmZXJlbmNlIGR1cmF0aW9uXG4gICAgICAgICAgICAgICAgICAgIHNhbXBsZUR1cmF0aW9uID0gdGhpcy5fdmlkZW9NZXRhLnJlZlNhbXBsZUR1cmF0aW9uO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGtleWZyYW1lKSB7XG4gICAgICAgICAgICAgICAgbGV0IHN5bmNQb2ludCA9IG5ldyBTYW1wbGVJbmZvKGR0cywgcHRzLCBzYW1wbGVEdXJhdGlvbiwgYXZjU2FtcGxlLmR0cywgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgc3luY1BvaW50LmZpbGVwb3NpdGlvbiA9IGF2Y1NhbXBsZS5maWxlcG9zaXRpb247XG4gICAgICAgICAgICAgICAgaW5mby5hcHBlbmRTeW5jUG9pbnQoc3luY1BvaW50KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbGV0IG1wNFNhbXBsZSA9IHtcbiAgICAgICAgICAgICAgICBkdHM6IGR0cyxcbiAgICAgICAgICAgICAgICBwdHM6IHB0cyxcbiAgICAgICAgICAgICAgICBjdHM6IGN0cyxcbiAgICAgICAgICAgICAgICBzaXplOiBzYW1wbGVTaXplLFxuICAgICAgICAgICAgICAgIGlzS2V5ZnJhbWU6IGtleWZyYW1lLFxuICAgICAgICAgICAgICAgIGR1cmF0aW9uOiBzYW1wbGVEdXJhdGlvbixcbiAgICAgICAgICAgICAgICBvcmlnaW5hbER0czogb3JpZ2luYWxEdHMsXG4gICAgICAgICAgICAgICAgZmxhZ3M6IHtcbiAgICAgICAgICAgICAgICAgICAgaXNMZWFkaW5nOiAwLFxuICAgICAgICAgICAgICAgICAgICBkZXBlbmRzT246IGtleWZyYW1lID8gMiA6IDEsXG4gICAgICAgICAgICAgICAgICAgIGlzRGVwZW5kZWRPbjoga2V5ZnJhbWUgPyAxIDogMCxcbiAgICAgICAgICAgICAgICAgICAgaGFzUmVkdW5kYW5jeTogMCxcbiAgICAgICAgICAgICAgICAgICAgaXNOb25TeW5jOiBrZXlmcmFtZSA/IDAgOiAxXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgbXA0U2FtcGxlcy5wdXNoKG1wNFNhbXBsZSk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGxhdGVzdCA9IG1wNFNhbXBsZXNbbXA0U2FtcGxlcy5sZW5ndGggLSAxXTtcbiAgICAgICAgbGFzdER0cyA9IGxhdGVzdC5kdHMgKyBsYXRlc3QuZHVyYXRpb247XG4gICAgICAgIGxhc3RQdHMgPSBsYXRlc3QucHRzICsgbGF0ZXN0LmR1cmF0aW9uO1xuICAgICAgICB0aGlzLl92aWRlb05leHREdHMgPSBsYXN0RHRzO1xuXG4gICAgICAgIC8vIGZpbGwgbWVkaWEgc2VnbWVudCBpbmZvICYgYWRkIHRvIGluZm8gbGlzdFxuICAgICAgICBpbmZvLmJlZ2luRHRzID0gZmlyc3REdHM7XG4gICAgICAgIGluZm8uZW5kRHRzID0gbGFzdER0cztcbiAgICAgICAgaW5mby5iZWdpblB0cyA9IGZpcnN0UHRzO1xuICAgICAgICBpbmZvLmVuZFB0cyA9IGxhc3RQdHM7XG4gICAgICAgIGluZm8ub3JpZ2luYWxCZWdpbkR0cyA9IG1wNFNhbXBsZXNbMF0ub3JpZ2luYWxEdHM7XG4gICAgICAgIGluZm8ub3JpZ2luYWxFbmREdHMgPSBsYXRlc3Qub3JpZ2luYWxEdHMgKyBsYXRlc3QuZHVyYXRpb247XG4gICAgICAgIGluZm8uZmlyc3RTYW1wbGUgPSBuZXcgU2FtcGxlSW5mbyhtcDRTYW1wbGVzWzBdLmR0cyxcbiAgICAgICAgICAgIG1wNFNhbXBsZXNbMF0ucHRzLFxuICAgICAgICAgICAgbXA0U2FtcGxlc1swXS5kdXJhdGlvbixcbiAgICAgICAgICAgIG1wNFNhbXBsZXNbMF0ub3JpZ2luYWxEdHMsXG4gICAgICAgICAgICBtcDRTYW1wbGVzWzBdLmlzS2V5ZnJhbWUpO1xuICAgICAgICBpbmZvLmxhc3RTYW1wbGUgPSBuZXcgU2FtcGxlSW5mbyhsYXRlc3QuZHRzLFxuICAgICAgICAgICAgbGF0ZXN0LnB0cyxcbiAgICAgICAgICAgIGxhdGVzdC5kdXJhdGlvbixcbiAgICAgICAgICAgIGxhdGVzdC5vcmlnaW5hbER0cyxcbiAgICAgICAgICAgIGxhdGVzdC5pc0tleWZyYW1lKTtcbiAgICAgICAgaWYgKCF0aGlzLl9pc0xpdmUpIHtcbiAgICAgICAgICAgIHRoaXMuX3ZpZGVvU2VnbWVudEluZm9MaXN0LmFwcGVuZChpbmZvKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRyYWNrLnNhbXBsZXMgPSBtcDRTYW1wbGVzO1xuICAgICAgICB0cmFjay5zZXF1ZW5jZU51bWJlcisrO1xuXG4gICAgICAgIC8vIHdvcmthcm91bmQgZm9yIGNocm9tZSA8IDUwOiBmb3JjZSBmaXJzdCBzYW1wbGUgYXMgYSByYW5kb20gYWNjZXNzIHBvaW50XG4gICAgICAgIC8vIHNlZSBodHRwczovL2J1Z3MuY2hyb21pdW0ub3JnL3AvY2hyb21pdW0vaXNzdWVzL2RldGFpbD9pZD0yMjk0MTJcbiAgICAgICAgaWYgKHRoaXMuX2ZvcmNlRmlyc3RJRFIpIHtcbiAgICAgICAgICAgIGxldCBmbGFncyA9IG1wNFNhbXBsZXNbMF0uZmxhZ3M7XG4gICAgICAgICAgICBmbGFncy5kZXBlbmRzT24gPSAyO1xuICAgICAgICAgICAgZmxhZ3MuaXNOb25TeW5jID0gMDtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBtb29mYm94ID0gTVA0Lm1vb2YodHJhY2ssIGZpcnN0RHRzKTtcbiAgICAgICAgdHJhY2suc2FtcGxlcyA9IFtdO1xuICAgICAgICB0cmFjay5sZW5ndGggPSAwO1xuXG4gICAgICAgIHRoaXMuX29uTWVkaWFTZWdtZW50KCd2aWRlbycsIHtcbiAgICAgICAgICAgIHR5cGU6ICd2aWRlbycsXG4gICAgICAgICAgICBkYXRhOiB0aGlzLl9tZXJnZUJveGVzKG1vb2Zib3gsIG1kYXRib3gpLmJ1ZmZlcixcbiAgICAgICAgICAgIHNhbXBsZUNvdW50OiBtcDRTYW1wbGVzLmxlbmd0aCxcbiAgICAgICAgICAgIGluZm86IGluZm9cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgX21lcmdlQm94ZXMobW9vZiwgbWRhdCkge1xuICAgICAgICBsZXQgcmVzdWx0ID0gbmV3IFVpbnQ4QXJyYXkobW9vZi5ieXRlTGVuZ3RoICsgbWRhdC5ieXRlTGVuZ3RoKTtcbiAgICAgICAgcmVzdWx0LnNldChtb29mLCAwKTtcbiAgICAgICAgcmVzdWx0LnNldChtZGF0LCBtb29mLmJ5dGVMZW5ndGgpO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxufVxuXG5leHBvcnQgZGVmYXVsdCBNUDRSZW11eGVyO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2pzL21wNC9tcDRtb29mLmpzIl0sInNvdXJjZVJvb3QiOiIifQ==");

/***/ }),
/* 13 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n/*\n * Copyright (C) 2016 Bilibili. All Rights Reserved.\n *\n * @author zheng qian <xqq@xqq.im>\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nvar Browser = {};\n\nfunction detect() {\n    // modified from jquery-browser-plugin\n\n    var ua = self.navigator.userAgent.toLowerCase();\n\n    var match = /(edge)\\/([\\w.]+)/.exec(ua) || /(opr)[\\/]([\\w.]+)/.exec(ua) || /(chrome)[ \\/]([\\w.]+)/.exec(ua) || /(iemobile)[\\/]([\\w.]+)/.exec(ua) || /(version)(applewebkit)[ \\/]([\\w.]+).*(safari)[ \\/]([\\w.]+)/.exec(ua) || /(webkit)[ \\/]([\\w.]+).*(version)[ \\/]([\\w.]+).*(safari)[ \\/]([\\w.]+)/.exec(ua) || /(webkit)[ \\/]([\\w.]+)/.exec(ua) || /(opera)(?:.*version|)[ \\/]([\\w.]+)/.exec(ua) || /(msie) ([\\w.]+)/.exec(ua) || ua.indexOf('trident') >= 0 && /(rv)(?::| )([\\w.]+)/.exec(ua) || ua.indexOf('compatible') < 0 && /(mozilla)(?:.*? rv:([\\w.]+)|)/.exec(ua) || [];\n\n    var platform_match = /(ipad)/.exec(ua) || /(ipod)/.exec(ua) || /(windows phone)/.exec(ua) || /(iphone)/.exec(ua) || /(kindle)/.exec(ua) || /(android)/.exec(ua) || /(windows)/.exec(ua) || /(mac)/.exec(ua) || /(linux)/.exec(ua) || /(cros)/.exec(ua) || [];\n\n    var matched = {\n        browser: match[5] || match[3] || match[1] || '',\n        version: match[2] || match[4] || '0',\n        majorVersion: match[4] || match[2] || '0',\n        platform: platform_match[0] || ''\n    };\n\n    var browser = {};\n    if (matched.browser) {\n        browser[matched.browser] = true;\n\n        var versionArray = matched.majorVersion.split('.');\n        browser.version = {\n            major: parseInt(matched.majorVersion, 10),\n            string: matched.version\n        };\n        if (versionArray.length > 1) {\n            browser.version.minor = parseInt(versionArray[1], 10);\n        }\n        if (versionArray.length > 2) {\n            browser.version.build = parseInt(versionArray[2], 10);\n        }\n    }\n\n    if (matched.platform) {\n        browser[matched.platform] = true;\n    }\n\n    if (browser.chrome || browser.opr || browser.safari) {\n        browser.webkit = true;\n    }\n\n    // MSIE. IE11 has 'rv' identifer\n    if (browser.rv || browser.iemobile) {\n        if (browser.rv) {\n            delete browser.rv;\n        }\n        var msie = 'msie';\n        matched.browser = msie;\n        browser[msie] = true;\n    }\n\n    // Microsoft Edge\n    if (browser.edge) {\n        delete browser.edge;\n        var msedge = 'msedge';\n        matched.browser = msedge;\n        browser[msedge] = true;\n    }\n\n    // Opera 15+\n    if (browser.opr) {\n        var opera = 'opera';\n        matched.browser = opera;\n        browser[opera] = true;\n    }\n\n    // Stock android browsers are marked as Safari\n    if (browser.safari && browser.android) {\n        var android = 'android';\n        matched.browser = android;\n        browser[android] = true;\n    }\n\n    browser.name = matched.browser;\n    browser.platform = matched.platform;\n\n    for (var key in Browser) {\n        if (Browser.hasOwnProperty(key)) {\n            delete Browser[key];\n        }\n    }\n    Object.assign(Browser, browser);\n}\n\ndetect();\n\nexports.default = Browser;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9qcy91dGlscy9icm93c2VyLmpzPzQ3NTkiXSwibmFtZXMiOlsiQnJvd3NlciIsImRldGVjdCIsInVhIiwic2VsZiIsIm5hdmlnYXRvciIsInVzZXJBZ2VudCIsInRvTG93ZXJDYXNlIiwibWF0Y2giLCJleGVjIiwiaW5kZXhPZiIsInBsYXRmb3JtX21hdGNoIiwibWF0Y2hlZCIsImJyb3dzZXIiLCJ2ZXJzaW9uIiwibWFqb3JWZXJzaW9uIiwicGxhdGZvcm0iLCJ2ZXJzaW9uQXJyYXkiLCJzcGxpdCIsIm1ham9yIiwicGFyc2VJbnQiLCJzdHJpbmciLCJsZW5ndGgiLCJtaW5vciIsImJ1aWxkIiwiY2hyb21lIiwib3ByIiwic2FmYXJpIiwid2Via2l0IiwicnYiLCJpZW1vYmlsZSIsIm1zaWUiLCJlZGdlIiwibXNlZGdlIiwib3BlcmEiLCJhbmRyb2lkIiwibmFtZSIsImtleSIsImhhc093blByb3BlcnR5IiwiT2JqZWN0IiwiYXNzaWduIl0sIm1hcHBpbmdzIjoiOzs7OztBQUFBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFrQkEsSUFBSUEsVUFBVSxFQUFkOztBQUVBLFNBQVNDLE1BQVQsR0FBa0I7QUFDZDs7QUFFQSxRQUFJQyxLQUFLQyxLQUFLQyxTQUFMLENBQWVDLFNBQWYsQ0FBeUJDLFdBQXpCLEVBQVQ7O0FBRUEsUUFBSUMsUUFBUSxtQkFBbUJDLElBQW5CLENBQXdCTixFQUF4QixLQUNSLG9CQUFvQk0sSUFBcEIsQ0FBeUJOLEVBQXpCLENBRFEsSUFFUix3QkFBd0JNLElBQXhCLENBQTZCTixFQUE3QixDQUZRLElBR1IseUJBQXlCTSxJQUF6QixDQUE4Qk4sRUFBOUIsQ0FIUSxJQUlSLDZEQUE2RE0sSUFBN0QsQ0FBa0VOLEVBQWxFLENBSlEsSUFLUix1RUFBdUVNLElBQXZFLENBQTRFTixFQUE1RSxDQUxRLElBTVIsd0JBQXdCTSxJQUF4QixDQUE2Qk4sRUFBN0IsQ0FOUSxJQU9SLHFDQUFxQ00sSUFBckMsQ0FBMENOLEVBQTFD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LGdCQUFRQyxPQUFSLEdBQWtCb0IsTUFBbEI7QUFDQXBCLGdCQUFRb0IsTUFBUixJQUFrQixJQUFsQjtBQUNIOztBQUVEO0FBQ0EsUUFBSXBCLFFBQVFhLEdBQVosRUFBaUI7QUFDYixZQUFJUSxRQUFRLE9BQVo7QUFDQXRCLGdCQUFRQyxPQUFSLEdBQWtCcUIsS0FBbEI7QUFDQXJCLGdCQUFRcUIsS0FBUixJQUFpQixJQUFqQjtBQUNIOztBQUVEO0FBQ0EsUUFBSXJCLFFBQVFjLE1BQVIsSUFBa0JkLFFBQVFzQixPQUE5QixFQUF1QztBQUNuQyxZQUFJQSxVQUFVLFNBQWQ7QUFDQXZCLGdCQUFRQyxPQUFSLEdBQWtCc0IsT0FBbEI7QUFDQXRCLGdCQUFRc0IsT0FBUixJQUFtQixJQUFuQjtBQUNIOztBQUVEdEIsWUFBUXVCLElBQVIsR0FBZXhCLFFBQVFDLE9BQXZCO0FBQ0FBLFlBQVFHLFFBQVIsR0FBbUJKLFFBQVFJLFFBQTNCOztBQUVBLFNBQUssSUFBSXFCLEdBQVQsSUFBZ0JwQyxPQUFoQixFQUF5QjtBQUNyQixZQUFJQSxRQUFRcUMsY0FBUixDQUF1QkQsR0FBdkIsQ0FBSixFQUFpQztBQUM3QixtQkFBT3BDLFFBQVFvQyxHQUFSLENBQVA7QUFDSDtBQUNKO0FBQ0RFLFdBQU9DLE1BQVAsQ0FBY3ZDLE9BQWQsRUFBdUJZLE9BQXZCO0FBQ0g7O0FBRURYOztrQkFFZUQsTyIsImZpbGUiOiIxMy5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qXG4gKiBDb3B5cmlnaHQgKEMpIDIwMTYgQmlsaWJpbGkuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogQGF1dGhvciB6aGVuZyBxaWFuIDx4cXFAeHFxLmltPlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5sZXQgQnJvd3NlciA9IHt9O1xuXG5mdW5jdGlvbiBkZXRlY3QoKSB7XG4gICAgLy8gbW9kaWZpZWQgZnJvbSBqcXVlcnktYnJvd3Nlci1wbHVnaW5cblxuICAgIGxldCB1YSA9IHNlbGYubmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpO1xuXG4gICAgbGV0IG1hdGNoID0gLyhlZGdlKVxcLyhbXFx3Ll0rKS8uZXhlYyh1YSkgfHxcbiAgICAgICAgLyhvcHIpW1xcL10oW1xcdy5dKykvLmV4ZWModWEpIHx8XG4gICAgICAgIC8oY2hyb21lKVsgXFwvXShbXFx3Ll0rKS8uZXhlYyh1YSkgfHxcbiAgICAgICAgLyhpZW1vYmlsZSlbXFwvXShbXFx3Ll0rKS8uZXhlYyh1YSkgfHxcbiAgICAgICAgLyh2ZXJzaW9uKShhcHBsZXdlYmtpdClbIFxcL10oW1xcdy5dKykuKihzYWZhcmkpWyBcXC9dKFtcXHcuXSspLy5leGVjKHVhKSB8fFxuICAgICAgICAvKHdlYmtpdClbIFxcL10oW1xcdy5dKykuKih2ZXJzaW9uKVsgXFwvXShbXFx3Ll0rKS4qKHNhZmFyaSlbIFxcL10oW1xcdy5dKykvLmV4ZWModWEpIHx8XG4gICAgICAgIC8od2Via2l0KVsgXFwvXShbXFx3Ll0rKS8uZXhlYyh1YSkgfHxcbiAgICAgICAgLyhvcGVyYSkoPzouKnZlcnNpb258KVsgXFwvXShbXFx3Ll0rKS8uZXhlYyh1YSkgfHxcbiAgICAgICAgLyhtc2llKSAoW1xcdy5dKykvLmV4ZWModWEpIHx8XG4gICAgICAgIHVhLmluZGV4T2YoJ3RyaWRlbnQnKSA+PSAwICYmIC8ocnYpKD86OnwgKShbXFx3Ll0rKS8uZXhlYyh1YSkgfHxcbiAgICAgICAgdWEuaW5kZXhPZignY29tcGF0aWJsZScpIDwgMCAmJiAvKG1vemlsbGEpKD86Lio/IHJ2OihbXFx3Ll0rKXwpLy5leGVjKHVhKSB8fCBbXTtcblxuICAgIGxldCBwbGF0Zm9ybV9tYXRjaCA9IC8oaXBhZCkvLmV4ZWModWEpIHx8XG4gICAgICAgIC8oaXBvZCkvLmV4ZWModWEpIHx8XG4gICAgICAgIC8od2luZG93cyBwaG9uZSkvLmV4ZWModWEpIHx8XG4gICAgICAgIC8oaXBob25lKS8uZXhlYyh1YSkgfHxcbiAgICAgICAgLyhraW5kbGUpLy5leGVjKHVhKSB8fFxuICAgICAgICAvKGFuZHJvaWQpLy5leGVjKHVhKSB8fFxuICAgICAgICAvKHdpbmRvd3MpLy5leGVjKHVhKSB8fFxuICAgICAgICAvKG1hYykvLmV4ZWModWEpIHx8XG4gICAgICAgIC8obGludXgpLy5leGVjKHVhKSB8fFxuICAgICAgICAvKGNyb3MpLy5leGVjKHVhKSB8fCBbXTtcblxuICAgIGxldCBtYXRjaGVkID0ge1xuICAgICAgICBicm93c2VyOiBtYXRjaFs1XSB8fCBtYXRjaFszXSB8fCBtYXRjaFsxXSB8fCAnJyxcbiAgICAgICAgdmVyc2lvbjogbWF0Y2hbMl0gfHwgbWF0Y2hbNF0gfHwgJzAnLFxuICAgICAgICBtYWpvclZlcnNpb246IG1hdGNoWzRdIHx8IG1hdGNoWzJdIHx8ICcwJyxcbiAgICAgICAgcGxhdGZvcm06IHBsYXRmb3JtX21hdGNoWzBdIHx8ICcnXG4gICAgfTtcblxuICAgIGxldCBicm93c2VyID0ge307XG4gICAgaWYgKG1hdGNoZWQuYnJvd3Nlcikge1xuICAgICAgICBicm93c2VyW21hdGNoZWQuYnJvd3Nlcl0gPSB0cnVlO1xuXG4gICAgICAgIGxldCB2ZXJzaW9uQXJyYXkgPSBtYXRjaGVkLm1ham9yVmVyc2lvbi5zcGxpdCgnLicpO1xuICAgICAgICBicm93c2VyLnZlcnNpb24gPSB7XG4gICAgICAgICAgICBtYWpvcjogcGFyc2VJbnQobWF0Y2hlZC5tYWpvclZlcnNpb24sIDEwKSxcbiAgICAgICAgICAgIHN0cmluZzogbWF0Y2hlZC52ZXJzaW9uXG4gICAgICAgIH07XG4gICAgICAgIGlmICh2ZXJzaW9uQXJyYXkubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgYnJvd3Nlci52ZXJzaW9uLm1pbm9yID0gcGFyc2VJbnQodmVyc2lvbkFycmF5WzFdLCAxMCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHZlcnNpb25BcnJheS5sZW5ndGggPiAyKSB7XG4gICAgICAgICAgICBicm93c2VyLnZlcnNpb24uYnVpbGQgPSBwYXJzZUludCh2ZXJzaW9uQXJyYXlbMl0sIDEwKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGlmIChtYXRjaGVkLnBsYXRmb3JtKSB7XG4gICAgICAgIGJyb3dzZXJbbWF0Y2hlZC5wbGF0Zm9ybV0gPSB0cnVlO1xuICAgIH1cblxuICAgIGlmIChicm93c2VyLmNocm9tZSB8fCBicm93c2VyLm9wciB8fCBicm93c2VyLnNhZmFyaSkge1xuICAgICAgICBicm93c2VyLndlYmtpdCA9IHRydWU7XG4gICAgfVxuXG4gICAgLy8gTVNJRS4gSUUxMSBoYXMgJ3J2JyBpZGVudGlmZXJcbiAgICBpZiAoYnJvd3Nlci5ydiB8fCBicm93c2VyLmllbW9iaWxlKSB7XG4gICAgICAgIGlmIChicm93c2VyLnJ2KSB7XG4gICAgICAgICAgICBkZWxldGUgYnJvd3Nlci5ydjtcbiAgICAgICAgfVxuICAgICAgICBsZXQgbXNpZSA9ICdtc2llJztcbiAgICAgICAgbWF0Y2hlZC5icm93c2VyID0gbXNpZTtcbiAgICAgICAgYnJvd3Nlclttc2llXSA9IHRydWU7XG4gICAgfVxuXG4gICAgLy8gTWljcm9zb2Z0IEVkZ2VcbiAgICBpZiAoYnJvd3Nlci5lZGdlKSB7XG4gICAgICAgIGRlbGV0ZSBicm93c2VyLmVkZ2U7XG4gICAgICAgIGxldCBtc2VkZ2UgPSAnbXNlZGdlJztcbiAgICAgICAgbWF0Y2hlZC5icm93c2VyID0gbXNlZGdlO1xuICAgICAgICBicm93c2VyW21zZWRnZV0gPSB0cnVlO1xuICAgIH1cblxuICAgIC8vIE9wZXJhIDE1K1xuICAgIGlmIChicm93c2VyLm9wcikge1xuICAgICAgICBsZXQgb3BlcmEgPSAnb3BlcmEnO1xuICAgICAgICBtYXRjaGVkLmJyb3dzZXIgPSBvcGVyYTtcbiAgICAgICAgYnJvd3NlcltvcGVyYV0gPSB0cnVlO1xuICAgIH1cblxuICAgIC8vIFN0b2NrIGFuZHJvaWQgYnJvd3NlcnMgYXJlIG1hcmtlZCBhcyBTYWZhcmlcbiAgICBpZiAoYnJvd3Nlci5zYWZhcmkgJiYgYnJvd3Nlci5hbmRyb2lkKSB7XG4gICAgICAgIGxldCBhbmRyb2lkID0gJ2FuZHJvaWQnO1xuICAgICAgICBtYXRjaGVkLmJyb3dzZXIgPSBhbmRyb2lkO1xuICAgICAgICBicm93c2VyW2FuZHJvaWRdID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBicm93c2VyLm5hbWUgPSBtYXRjaGVkLmJyb3dzZXI7XG4gICAgYnJvd3Nlci5wbGF0Zm9ybSA9IG1hdGNoZWQucGxhdGZvcm07XG5cbiAgICBmb3IgKGxldCBrZXkgaW4gQnJvd3Nlcikge1xuICAgICAgICBpZiAoQnJvd3Nlci5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgICAgICBkZWxldGUgQnJvd3NlcltrZXldO1xuICAgICAgICB9XG4gICAgfVxuICAgIE9iamVjdC5hc3NpZ24oQnJvd3NlciwgYnJvd3Nlcik7XG59XG5cbmRldGVjdCgpO1xuXG5leHBvcnQgZGVmYXVsdCBCcm93c2VyO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2pzL3V0aWxzL2Jyb3dzZXIuanMiXSwic291cmNlUm9vdCI6IiJ9");

/***/ }),
/* 14 */
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__(2);


/***/ })
/******/ ]);