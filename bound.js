/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// identity function for calling harmony imports with the correct context
/******/ 	__webpack_require__.i = function(value) { return value; };
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, {
/******/ 				configurable: false,
/******/ 				enumerable: true,
/******/ 				get: getter
/******/ 			});
/******/ 		}
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 15);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _flvdemux = __webpack_require__(9);\n\nvar _flvdemux2 = _interopRequireDefault(_flvdemux);\n\nvar _mediaInfo = __webpack_require__(10);\n\nvar _mediaInfo2 = _interopRequireDefault(_mediaInfo);\n\nvar _spsParser = __webpack_require__(3);\n\nvar _spsParser2 = _interopRequireDefault(_spsParser);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar tagDemux = function () {\n    function tagDemux() {\n        _classCallCheck(this, tagDemux);\n\n        this.TAG = this.constructor.name;\n\n        this._config = {};\n\n        this._onError = null;\n        this._onMediaInfo = null;\n        this._onTrackMetadata = null;\n        this._onDataAvailable = null;\n\n        this._dataOffset = 0;\n        this._firstParse = true;\n        this._dispatch = false;\n\n        this._hasAudio = false;\n        this._hasVideo = false;\n\n        this._audioInitialMetadataDispatched = false;\n        this._videoInitialMetadataDispatched = false;\n\n        this._mediaInfo = new _mediaInfo2.default();\n        this._mediaInfo.hasAudio = this._hasAudio;\n        this._mediaInfo.hasVideo = this._hasVideo;\n        this._metadata = null;\n        this._audioMetadata = null;\n        this._videoMetadata = null;\n\n        this._naluLengthSize = 4;\n        this._timestampBase = 0; // int32, in milliseconds\n        this._timescale = 1000;\n        this._duration = 0; // int32, in milliseconds\n        this._durationOverrided = false;\n        this._referenceFrameRate = {\n            fixed: true,\n            fps: 23.976,\n            fps_num: 23976,\n            fps_den: 1000\n        };\n\n        this._videoTrack = { type: 'video', id: 1, sequenceNumber: 0, addcoefficient: 2, samples: [], length: 0 };\n        this._audioTrack = { type: 'audio', id: 2, sequenceNumber: 1, addcoefficient: 2, samples: [], length: 0 };\n\n        this._littleEndian = function () {\n            var buf = new ArrayBuffer(2);\n            new DataView(buf).setInt16(0, 256, true); // little-endian write\n            return new Int16Array(buf)[0] === 256; // platform-spec read, if equal then LE\n        }();\n    }\n\n    _createClass(tagDemux, [{\n        key: 'onMediaInfo',\n        value: function onMediaInfo(callback) {\n            this._onMediaInfo = callback;\n        }\n    }, {\n        key: 'parseMetadata',\n        value: function parseMetadata(arr) {\n            var data = _flvdemux2.default.parseMetadata(arr);\n            this._parseScriptData(data);\n            console.log(this._mediaInfo, this._mediaInfo.isComplete());\n        }\n    }, {\n        key: '_parseScriptData',\n        value: function _parseScriptData(obj) {\n            var scriptData = obj;\n\n            if (scriptData.hasOwnProperty('onMetaData')) {\n                if (this._metadata) {\n                    Log.w(this.TAG, 'Found another onMetaData tag!');\n                }\n                this._metadata = scriptData;\n                var onMetaData = this._metadata.onMetaData;\n\n                if (typeof onMetaData.hasAudio === 'boolean') {\n                    // hasAudio\n                    this._hasAudio = onMetaData.hasAudio;\n                    this._mediaInfo.hasAudio = this._hasAudio;\n                }\n                if (typeof onMetaData.hasVideo === 'boolean') {\n                    // hasVideo\n                    this._hasVideo = onMetaData.hasVideo;\n                    this._mediaInfo.hasVideo = this._hasVideo;\n                }\n                if (typeof onMetaData.audiodatarate === 'number') {\n                    // audiodatarate\n                    this._mediaInfo.audioDataRate = onMetaData.audiodatarate;\n                }\n                if (typeof onMetaData.videodatarate === 'number') {\n                    // videodatarate\n                    this._mediaInfo.videoDataRate = onMetaData.videodatarate;\n                }\n                if (typeof onMetaData.width === 'number') {\n                    // width\n                    this._mediaInfo.width = onMetaData.width;\n                }\n                if (typeof onMetaData.height === 'number') {\n                    // height\n                    this._mediaInfo.height = onMetaData.height;\n                }\n                if (typeof onMetaData.duration === 'number') {\n                    // duration\n                    if (!this._durationOverrided) {\n                        var duration = Math.floor(onMetaData.duration * this._timescale);\n                        this._duration = duration;\n                        this._mediaInfo.duration = duration;\n                    }\n                } else {\n                    this._mediaInfo.duration = 0;\n                }\n                if (typeof onMetaData.framerate === 'number') {\n                    // framerate\n                    var fps_num = Math.floor(onMetaData.framerate * 1000);\n                    if (fps_num > 0) {\n                        var fps = fps_num / 1000;\n                        this._referenceFrameRate.fixed = true;\n                        this._referenceFrameRate.fps = fps;\n                        this._referenceFrameRate.fps_num = fps_num;\n                        this._referenceFrameRate.fps_den = 1000;\n                        this._mediaInfo.fps = fps;\n                    }\n                }\n                if (_typeof(onMetaData.keyframes) === 'object') {\n                    // keyframes\n                    this._mediaInfo.hasKeyframesIndex = true;\n                    var keyframes = onMetaData.keyframes;\n                    keyframes.times = onMetaData.times;\n                    keyframes.filepositions = onMetaData.filepositions;\n                    this._mediaInfo.keyframesIndex = this._parseKeyframesIndex(keyframes);\n                    onMetaData.keyframes = null; // keyframes has been extracted, remove it\n                } else {\n                    this._mediaInfo.hasKeyframesIndex = false;\n                }\n                this._dispatch = false;\n                this._mediaInfo.metadata = onMetaData;\n                console.log(this.TAG, 'Parsed onMetaData');\n                // if (this._mediaInfo.isComplete()) {\n                // this._onMediaInfo(this._mediaInfo);\n                // }\n                return this._mediaInfo;\n            }\n        }\n    }, {\n        key: '_parseKeyframesIndex',\n        value: function _parseKeyframesIndex(keyframes) {\n            var times = [];\n            var filepositions = [];\n\n            // ignore first keyframe which is actually AVC Sequence Header (AVCDecoderConfigurationRecord)\n            for (var i = 1; i < keyframes.times.length; i++) {\n                var time = this._timestampBase + Math.floor(keyframes.times[i] * 1000);\n                times.push(time);\n                filepositions.push(keyframes.filepositions[i]);\n            }\n\n            return {\n                times: times,\n                filepositions: filepositions\n            };\n        }\n\n        /**\n         * 传入tags输出moof和mdat\n         * \n         * @param {any} tags \n         * \n         * @memberof tagDemux\n         */\n\n    }, {\n        key: 'moofTag',\n        value: function moofTag(tags) {\n\n            for (var i = 0; i < tags.length; i++) {\n                this._dispatch = true;\n                this.parseChunks(tags[i]);\n                // console.log(\"tagTimestamp\", tags[i].getTime(), tags[i]);\n            }\n            if (this._isInitialMetadataDispatched()) {\n                if (this._dispatch && (this._audioTrack.length || this._videoTrack.length)) {\n                    this._onDataAvailable(this._audioTrack, this._videoTrack);\n                }\n            }\n        }\n    }, {\n        key: 'parseChunks',\n        value: function parseChunks(flvtag) {\n\n            switch (flvtag.tagType) {\n                case 8:\n                    // Audio\n                    this._parseAudioData(flvtag.body.buffer, 0, flvtag.body.length, flvtag.getTime());\n                    break;\n                case 9:\n                    // Video\n                    this._parseVideoData(flvtag.body.buffer, 0, flvtag.body.length, flvtag.getTime(), 0);\n                    break;\n                case 18:\n                    // ScriptDataObject\n                    this.parseMetadata(flvtag.body);\n                    break;\n            }\n        }\n    }, {\n        key: '_parseVideoData',\n        value: function _parseVideoData(arrayBuffer, dataOffset, dataSize, tagTimestamp, tagPosition) {\n            if (tagTimestamp == this._timestampBase && this._timestampBase != 0) {\n                console.log(tagTimestamp, this._timestampBase, '夭寿啦这个视频不是从0开始');\n                // this.timestampBase(0);\n            }\n            if (dataSize <= 1) {\n                Log.w(this.TAG, 'Flv: Invalid video packet, missing VideoData payload!');\n                return;\n            }\n            //获取 video tag body 第一字节\n            var spec = new Uint8Array(arrayBuffer, dataOffset, dataSize)[0];\n            //获取是否是关键帧\n            var frameType = (spec & 240) >>> 4;\n            //获取编码格式\n            var codecId = spec & 15;\n\n            if (codecId !== 7) {\n                this._onError(DemuxErrors.CODEC_UNSUPPORTED, 'Flv: Unsupported codec in video frame: ' + codecId);\n                return;\n            }\n\n            this._parseAVCVideoPacket(arrayBuffer, dataOffset + 1, dataSize - 1, tagTimestamp, tagPosition, frameType);\n        }\n    }, {\n        key: '_parseAVCVideoPacket',\n        value: function _parseAVCVideoPacket(arrayBuffer, dataOffset, dataSize, tagTimestamp, tagPosition, frameType) {\n\n            if (dataSize < 4) {\n                Log.w(this.TAG, 'Flv: Invalid AVC packet, missing AVCPacketType or/and CompositionTime');\n                return;\n            }\n\n            var le = this._littleEndian;\n            //获取 video tag body 第2字节到结尾\n            var v = new DataView(arrayBuffer, dataOffset, dataSize);\n\n            //IF CodecID == 7  AVCPacketType\n            // 0 = AVC sequence header\n            // 1 = AVC NALU\n            // 2 = AVC end of sequence (lower level NALU sequence ender is not required or supported)\n            var packetType = v.getUint8(0);\n            // 3字节\n            // IF AVCPacketType == 1\n            //  Composition time offset\n            // ELSE\n            //  0\n            var cts = v.getUint32(0, !le) & 0x00FFFFFF;\n\n            //IF AVCPacketType == 0 AVCDecoderConfigurationRecord（AVC sequence header）\n            //IF AVCPacketType == 1 One or more NALUs (Full frames are required)\n\n            /**\n             *AVCDecoderConfigurationRecord.包含着是H.264解码相关比较重要的sps和pps信息，\n             *再给AVC解码器送数据 流之前一定要把sps和pps信息送出，否则的话解码器不能正常解码。\n             *而且在解码器stop之后再次start之前，如seek、快进快退状态切换等，\n             *都 需要重新送一遍sps和pps的信息.AVCDecoderConfigurationRecord在FLV文件中一般情况也是出现1次，\n             *也就是第一个 video tag.\n             */\n            if (packetType === 0) {\n                // AVCDecoderConfigurationRecord\n                this._parseAVCDecoderConfigurationRecord(arrayBuffer, dataOffset + 4, dataSize - 4);\n            } else if (packetType === 1) {\n                // One or more Nalus\n                this._parseAVCVideoData(arrayBuffer, dataOffset + 4, dataSize - 4, tagTimestamp, tagPosition, frameType, cts);\n            } else if (packetType === 2) {\n                // empty, AVC end of sequence\n            } else {\n                this._onError(DemuxErrors.FORMAT_ERROR, 'Flv: Invalid video packet type ' + packetType);\n                return;\n            }\n        }\n\n        /**\n         * AVC 初始化\n         */\n\n    }, {\n        key: '_parseAVCDecoderConfigurationRecord',\n        value: function _parseAVCDecoderConfigurationRecord(arrayBuffer, dataOffset, dataSize) {\n            if (dataSize < 7) {\n                Log.w(this.TAG, 'Flv: Invalid AVCDecoderConfigurationRecord, lack of data!');\n                return;\n            }\n\n            var meta = this._videoMetadata;\n            var track = this._videoTrack;\n            var le = this._littleEndian;\n            var v = new DataView(arrayBuffer, dataOffset, dataSize);\n\n            if (!meta) {\n                meta = this._videoMetadata = {};\n                meta.type = 'video';\n                meta.id = track.id;\n                meta.timescale = this._timescale;\n                meta.duration = this._duration;\n            } else {\n                if (typeof meta.avcc !== 'undefined') {\n                    Log.w(this.TAG, 'Found another AVCDecoderConfigurationRecord!');\n                }\n            }\n\n            var version = v.getUint8(0); // configurationVersion\n            var avcProfile = v.getUint8(1); // avcProfileIndication\n            var profileCompatibility = v.getUint8(2); // profile_compatibility\n            var avcLevel = v.getUint8(3); // AVCLevelIndication\n\n            if (version !== 1 || avcProfile === 0) {\n                this._onError(DemuxErrors.FORMAT_ERROR, 'Flv: Invalid AVCDecoderConfigurationRecord');\n                return;\n            }\n\n            this._naluLengthSize = (v.getUint8(4) & 3) + 1; // lengthSizeMinusOne\n            if (this._naluLengthSize !== 3 && this._naluLengthSize !== 4) {\n                // holy shit!!!\n                this._onError(DemuxErrors.FORMAT_ERROR, 'Flv: Strange NaluLengthSizeMinusOne: ' + (this._naluLengthSize - 1));\n                return;\n            }\n\n            var spsCount = v.getUint8(5) & 31; // numOfSequenceParameterSets\n            if (spsCount === 0 || spsCount > 1) {\n                this._onError(DemuxErrors.FORMAT_ERROR, 'Flv: Invalid H264 SPS count: ' + spsCount);\n                return;\n            }\n\n            var offset = 6;\n\n            for (var i = 0; i < spsCount; i++) {\n                var len = v.getUint16(offset, !le); // sequenceParameterSetLength\n                offset += 2;\n\n                if (len === 0) {\n                    continue;\n                }\n\n                // Notice: Nalu without startcode header (00 00 00 01)\n                var sps = new Uint8Array(arrayBuffer, dataOffset + offset, len);\n                offset += len;\n\n                var config = _spsParser2.default.parseSPS(sps);\n                meta.codecWidth = config.codec_size.width;\n                meta.codecHeight = config.codec_size.height;\n                meta.presentWidth = config.present_size.width;\n                meta.presentHeight = config.present_size.height;\n\n                meta.profile = config.profile_string;\n                meta.level = config.level_string;\n                meta.bitDepth = config.bit_depth;\n                meta.chromaFormat = config.chroma_format;\n                meta.sarRatio = config.sar_ratio;\n                meta.frameRate = config.frame_rate;\n\n                if (config.frame_rate.fixed === false || config.frame_rate.fps_num === 0 || config.frame_rate.fps_den === 0) {\n                    meta.frameRate = this._referenceFrameRate;\n                }\n\n                var fps_den = meta.frameRate.fps_den;\n                var fps_num = meta.frameRate.fps_num;\n                meta.refSampleDuration = Math.floor(meta.timescale * (fps_den / fps_num));\n\n                var codecArray = sps.subarray(1, 4);\n                var codecString = 'avc1.';\n                for (var j = 0; j < 3; j++) {\n                    var h = codecArray[j].toString(16);\n                    if (h.length < 2) {\n                        h = '0' + h;\n                    }\n                    codecString += h;\n                }\n                meta.codec = codecString;\n\n                var mi = this._mediaInfo;\n                mi.width = meta.codecWidth;\n                mi.height = meta.codecHeight;\n                mi.fps = meta.frameRate.fps;\n                mi.profile = meta.profile;\n                mi.level = meta.level;\n                mi.chromaFormat = config.chroma_format_string;\n                mi.sarNum = meta.sarRatio.width;\n                mi.sarDen = meta.sarRatio.height;\n                mi.videoCodec = codecString;\n\n                if (mi.hasAudio) {\n                    if (mi.audioCodec != null) {\n                        mi.mimeType = 'video/x-flv; codecs=\"' + mi.videoCodec + ',' + mi.audioCodec + '\"';\n                    }\n                } else {\n                    mi.mimeType = 'video/x-flv; codecs=\"' + mi.videoCodec + '\"';\n                }\n                if (mi.isComplete()) {\n                    this._onMediaInfo(mi);\n                }\n            }\n\n            var ppsCount = v.getUint8(offset); // numOfPictureParameterSets\n            if (ppsCount === 0 || ppsCount > 1) {\n                this._onError(DemuxErrors.FORMAT_ERROR, 'Flv: Invalid H264 PPS count: ' + ppsCount);\n                return;\n            }\n\n            offset++;\n\n            for (var _i = 0; _i < ppsCount; _i++) {\n                var _len = v.getUint16(offset, !le); // pictureParameterSetLength\n                offset += 2;\n\n                if (_len === 0) {\n                    continue;\n                }\n\n                // pps is useless for extracting video information\n                offset += _len;\n            }\n\n            meta.avcc = new Uint8Array(dataSize);\n            meta.avcc.set(new Uint8Array(arrayBuffer, dataOffset, dataSize), 0);\n            console.log(this.TAG, 'Parsed AVCDecoderConfigurationRecord');\n\n            if (this._isInitialMetadataDispatched()) {\n                // flush parsed frames\n                if (this._dispatch && (this._audioTrack.length || this._videoTrack.length)) {\n                    this._onDataAvailable(this._audioTrack, this._videoTrack);\n                }\n            } else {\n                this._videoInitialMetadataDispatched = true;\n            }\n            // notify new metadata\n            this._dispatch = false;\n            // if (this._onTrackMetadata) {\n            //     this._onTrackMetadata.call(null, meta);\n            // }\n\n            this._onTrackMetadata('video', meta);\n        }\n    }, {\n        key: 'timestampBase',\n        value: function timestampBase(i) {\n            this._timestampBase = i;\n        }\n\n        /**\n         * 普通的AVC 片段\n         */\n\n    }, {\n        key: '_parseAVCVideoData',\n        value: function _parseAVCVideoData(arrayBuffer, dataOffset, dataSize, tagTimestamp, tagPosition, frameType, cts) {\n\n            var le = this._littleEndian;\n            var v = new DataView(arrayBuffer, dataOffset, dataSize);\n\n            var units = [],\n                length = 0;\n\n            var offset = 0;\n            var lengthSize = this._naluLengthSize;\n            var dts = this._timestampBase + tagTimestamp;\n            var keyframe = frameType === 1; // from FLV Frame Type constants\n\n            while (offset < dataSize) {\n                if (offset + 4 >= dataSize) {\n                    Log.w(this.TAG, 'Malformed Nalu near timestamp ' + dts + ', offset = ' + offset + ', dataSize = ' + dataSize);\n                    break; // data not enough for next Nalu\n                }\n                // Nalu with length-header (AVC1)\n                var naluSize = v.getUint32(offset, !le); // Big-Endian read\n                if (lengthSize === 3) {\n                    naluSize >>>= 8;\n                }\n                if (naluSize > dataSize - lengthSize) {\n                    Log.w(this.TAG, 'Malformed Nalus near timestamp ' + dts + ', NaluSize > DataSize!');\n                    return;\n                }\n\n                var unitType = v.getUint8(offset + lengthSize) & 0x1F;\n\n                if (unitType === 5) {\n                    // IDR\n                    keyframe = true;\n                }\n\n                var data = new Uint8Array(arrayBuffer, dataOffset + offset, lengthSize + naluSize);\n                var unit = { type: unitType, data: data };\n                units.push(unit);\n                length += data.byteLength;\n\n                offset += lengthSize + naluSize;\n            }\n\n            if (units.length) {\n                var track = this._videoTrack;\n                var avcSample = {\n                    units: units,\n                    length: length,\n                    isKeyframe: keyframe,\n                    dts: dts,\n                    cts: cts,\n                    pts: dts + cts\n                };\n                if (keyframe) {\n                    avcSample.fileposition = tagPosition;\n                }\n                track.samples.push(avcSample);\n                track.length += length;\n            }\n        }\n    }, {\n        key: '_parseAudioData',\n        value: function _parseAudioData(arrayBuffer, dataOffset, dataSize, tagTimestamp) {\n            if (tagTimestamp == this._timestampBase && this._timestampBase != 0) {\n                console.log(tagTimestamp, this._timestampBase, '夭寿啦这个视频不是从0开始');\n                // timestampBase(0);\n            }\n\n            if (dataSize <= 1) {\n                Log.w(this.TAG, 'Flv: Invalid audio packet, missing SoundData payload!');\n                return;\n            }\n\n            var meta = this._audioMetadata;\n            var track = this._audioTrack;\n\n            if (!meta || !meta.codec) {\n                // initial metadata\n                meta = this._audioMetadata = {};\n                meta.type = 'audio';\n                meta.id = track.id;\n                meta.timescale = this._timescale;\n                meta.duration = this._duration;\n\n                var le = this._littleEndian;\n                var v = new DataView(arrayBuffer, dataOffset, dataSize);\n\n                var soundSpec = v.getUint8(0);\n\n                var soundFormat = soundSpec >>> 4;\n                if (soundFormat !== 10) {\n                    // AAC\n                    // TODO: support MP3 audio codec\n                    this._onError(DemuxErrors.CODEC_UNSUPPORTED, 'Flv: Unsupported audio codec idx: ' + soundFormat);\n                    return;\n                }\n\n                var soundRate = 0;\n                var soundRateIndex = (soundSpec & 12) >>> 2;\n\n                var soundRateTable = [5500, 11025, 22050, 44100, 48000];\n\n                if (soundRateIndex < soundRateTable.length) {\n                    soundRate = soundRateTable[soundRateIndex];\n                } else {\n                    this._onError(DemuxErrors.FORMAT_ERROR, 'Flv: Invalid audio sample rate idx: ' + soundRateIndex);\n                    return;\n                }\n\n                var soundSize = (soundSpec & 2) >>> 1; // unused\n                var soundType = soundSpec & 1;\n\n                meta.audioSampleRate = soundRate;\n                meta.channelCount = soundType === 0 ? 1 : 2;\n                meta.refSampleDuration = Math.floor(1024 / meta.audioSampleRate * meta.timescale);\n                meta.codec = 'mp4a.40.5';\n            }\n\n            var aacData = this._parseAACAudioData(arrayBuffer, dataOffset + 1, dataSize - 1);\n            if (aacData == undefined) {\n                return;\n            }\n\n            if (aacData.packetType === 0) {\n                // AAC sequence header (AudioSpecificConfig)\n                if (meta.config) {\n                    Log.w(this.TAG, 'Found another AudioSpecificConfig!');\n                }\n                var misc = aacData.data;\n                meta.audioSampleRate = misc.samplingRate;\n                meta.channelCount = misc.channelCount;\n                meta.codec = misc.codec;\n                meta.config = misc.config;\n                // The decode result of an aac sample is 1024 PCM samples\n                meta.refSampleDuration = Math.floor(1024 / meta.audioSampleRate * meta.timescale);\n                console.log(this.TAG, 'Parsed AudioSpecificConfig');\n\n                if (this._isInitialMetadataDispatched()) {\n                    // Non-initial metadata, force dispatch (or flush) parsed frames to remuxer\n                    if (this._dispatch && (this._audioTrack.length || this._videoTrack.length)) {\n                        this._onDataAvailable(this._audioTrack, this._videoTrack);\n                    }\n                } else {\n                    this._audioInitialMetadataDispatched = true;\n                }\n                // then notify new metadata\n                this._dispatch = false;\n                this._onTrackMetadata('audio', meta);\n\n                var mi = this._mediaInfo;\n                mi.audioCodec = 'mp4a.40.' + misc.originalAudioObjectType;\n                mi.audioSampleRate = meta.audioSampleRate;\n                mi.audioChannelCount = meta.channelCount;\n                if (mi.hasVideo) {\n                    if (mi.videoCodec != null) {\n                        mi.mimeType = 'video/x-flv; codecs=\"' + mi.videoCodec + ',' + mi.audioCodec + '\"';\n                    }\n                } else {\n                    mi.mimeType = 'video/x-flv; codecs=\"' + mi.audioCodec + '\"';\n                }\n                if (mi.isComplete()) {\n                    this._onMediaInfo(mi);\n                }\n                return;\n            } else if (aacData.packetType === 1) {\n                // AAC raw frame data\n                var dts = this._timestampBase + tagTimestamp;\n                var aacSample = { unit: aacData.data, dts: dts, pts: dts };\n                track.samples.push(aacSample);\n                track.length += aacData.data.length;\n            } else {\n                console.log(this.TAG, 'Flv: Unsupported AAC data type ' + aacData.packetType);\n            }\n        }\n    }, {\n        key: '_parseAACAudioData',\n        value: function _parseAACAudioData(arrayBuffer, dataOffset, dataSize) {\n            if (dataSize <= 1) {\n                console.log(this.TAG, 'Flv: Invalid AAC packet, missing AACPacketType or/and Data!');\n                return;\n            }\n\n            var result = {};\n            var array = new Uint8Array(arrayBuffer, dataOffset, dataSize);\n\n            result.packetType = array[0];\n\n            if (array[0] === 0) {\n                result.data = this._parseAACAudioSpecificConfig(arrayBuffer, dataOffset + 1, dataSize - 1);\n            } else {\n                result.data = array.subarray(1);\n            }\n\n            return result;\n        }\n    }, {\n        key: '_parseAACAudioSpecificConfig',\n        value: function _parseAACAudioSpecificConfig(arrayBuffer, dataOffset, dataSize) {\n            var array = new Uint8Array(arrayBuffer, dataOffset, dataSize);\n            var config = null;\n\n            var mpegSamplingRates = [96000, 88200, 64000, 48000, 44100, 32000, 24000, 22050, 16000, 12000, 11025, 8000, 7350];\n\n            /* Audio Object Type:\n               0: Null\n               1: AAC Main\n               2: AAC LC\n               3: AAC SSR (Scalable Sample Rate)\n               4: AAC LTP (Long Term Prediction)\n               5: HE-AAC / SBR (Spectral Band Replication)\n               6: AAC Scalable\n            */\n\n            var audioObjectType = 0;\n            var originalAudioObjectType = 0;\n            var audioExtensionObjectType = null;\n            var samplingIndex = 0;\n            var extensionSamplingIndex = null;\n            // debugger;\n            // 5 bits\n            audioObjectType = originalAudioObjectType = array[0] >>> 3;\n            // 4 bits\n            samplingIndex = (array[0] & 0x07) << 1 | array[1] >>> 7;\n            if (samplingIndex < 0 || samplingIndex >= mpegSamplingRates.length) {\n                this._onError(DemuxErrors.FORMAT_ERROR, 'Flv: AAC invalid sampling frequency index!');\n                return;\n            }\n\n            var samplingFrequence = mpegSamplingRates[samplingIndex];\n\n            // 4 bits\n            var channelConfig = (array[1] & 0x78) >>> 3;\n            if (channelConfig < 0 || channelConfig >= 8) {\n                this._onError(DemuxErrors.FORMAT_ERROR, 'Flv: AAC invalid channel configuration');\n                return;\n            }\n\n            if (audioObjectType === 5) {\n                // HE-AAC?\n                // 4 bits\n                extensionSamplingIndex = (array[1] & 0x07) << 1 | array[2] >>> 7;\n                // 5 bits\n                audioExtensionObjectType = (array[2] & 0x7C) >>> 2;\n            }\n\n            // workarounds for various browsers\n            var userAgent = self.navigator.userAgent.toLowerCase();\n\n            if (userAgent.indexOf('firefox') !== -1) {\n                // firefox: use SBR (HE-AAC) if freq less than 24kHz\n                if (samplingIndex >= 6) {\n                    audioObjectType = 5;\n                    config = new Array(4);\n                    extensionSamplingIndex = samplingIndex - 3;\n                } else {\n                    // use LC-AAC\n                    audioObjectType = 2;\n                    config = new Array(2);\n                    extensionSamplingIndex = samplingIndex;\n                }\n            } else if (userAgent.indexOf('android') !== -1) {\n                // android: always use LC-AAC\n                audioObjectType = 2;\n                config = new Array(2);\n                extensionSamplingIndex = samplingIndex;\n            } else {\n                // for other browsers, e.g. chrome...\n                // Always use HE-AAC to make it easier to switch aac codec profile\n                audioObjectType = 5;\n                extensionSamplingIndex = samplingIndex;\n                config = new Array(4);\n\n                if (samplingIndex >= 6) {\n                    extensionSamplingIndex = samplingIndex - 3;\n                } else if (channelConfig === 1) {\n                    // Mono channel\n                    audioObjectType = 2;\n                    config = new Array(2);\n                    extensionSamplingIndex = samplingIndex;\n                }\n            }\n\n            config[0] = audioObjectType << 3;\n            config[0] |= (samplingIndex & 0x0F) >>> 1;\n            config[1] = (samplingIndex & 0x0F) << 7;\n            config[1] |= (channelConfig & 0x0F) << 3;\n            if (audioObjectType === 5) {\n                config[1] |= (extensionSamplingIndex & 0x0F) >>> 1;\n                config[2] = (extensionSamplingIndex & 0x01) << 7;\n                // extended audio object type: force to 2 (LC-AAC)\n                config[2] |= 2 << 2;\n                config[3] = 0;\n            }\n\n            return {\n                config: config,\n                samplingRate: samplingFrequence,\n                channelCount: channelConfig,\n                codec: 'mp4a.40.' + audioObjectType,\n                originalAudioObjectType: originalAudioObjectType\n            };\n        }\n    }, {\n        key: '_isInitialMetadataDispatched',\n        value: function _isInitialMetadataDispatched() {\n            if (this._hasAudio && this._hasVideo) {\n                // both audio & video\n                return this._audioInitialMetadataDispatched && this._videoInitialMetadataDispatched;\n            }\n            if (this._hasAudio && !this._hasVideo) {\n                // audio only\n                return this._audioInitialMetadataDispatched;\n            }\n            if (!this._hasAudio && this._hasVideo) {\n                // video only\n                return this._videoInitialMetadataDispatched;\n            }\n        }\n    }]);\n\n    return tagDemux;\n}();\n\nexports.default = new tagDemux();//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9qcy9mbHYvdGFnZGVtdXguanM/MTM1YyJdLCJuYW1lcyI6WyJ0YWdEZW11eCIsIlRBRyIsImNvbnN0cnVjdG9yIiwibmFtZSIsIl9jb25maWciLCJfb25FcnJvciIsIl9vbk1lZGlhSW5mbyIsIl9vblRyYWNrTWV0YWRhdGEiLCJfb25EYXRhQXZhaWxhYmxlIiwiX2RhdGFPZmZzZXQiLCJfZmlyc3RQYXJzZSIsIl9kaXNwYXRjaCIsIl9oYXNBdWRpbyIsIl9oYXNWaWRlbyIsIl9hdWRpb0luaXRpYWxNZXRhZGF0YURpc3BhdGNoZWQiLCJfdmlkZW9Jbml0aWFsTWV0YWRhdGFEaXNwYXRjaGVkIiwiX21lZGlhSW5mbyIsImhhc0F1ZGlvIiwiaGFzVmlkZW8iLCJfbWV0YWRhdGEiLCJfYXVkaW9NZXRhZGF0YSIsIl92aWRlb01ldGFkYXRhIiwiX25hbHVMZW5ndGhTaXplIiwiX3RpbWVzdGFtcEJhc2UiLCJfdGltZXNjYWxlIiwiX2R1cmF0aW9uIiwiX2R1cmF0aW9uT3ZlcnJpZGVkIiwiX3JlZmVyZW5jZUZyYW1lUmF0ZSIsImZpeGVkIiwiZnBzIiwiZnBzX251bSIsImZwc19kZW4iLCJfdmlkZW9UcmFjayIsInR5cGUiLCJpZCIsInNlcXVlbmNlTnVtYmVyIiwiYWRkY29lZmZpY2llbnQiLCJzYW1wbGVzIiwibGVuZ3RoIiwiX2F1ZGlvVHJhY2siLCJfbGl0dGxlRW5kaWFuIiwiYnVmIiwiQXJyYXlCdWZmZXIiLCJEYXRhVmlldyIsInNldEludDE2IiwiSW50MTZBcnJheSIsImNhbGxiYWNrIiwiYXJyIiwiZGF0YSIsInBhcnNlTWV0YWRhdGEiLCJfcGFyc2VTY3JpcHREYXRhIiwiY29uc29sZSIsImxvZyIsImlzQ29tcGxldGUiLCJvYmoiLCJzY3JpcHREYXRhIiwiaGFzT3duUHJvcGVydHkiLCJMb2ciLCJ3Iiwib25NZXRhRGF0YSIsImF1ZGlvZGF0YXJhdGUiLCJhdWRpb0RhdGFSYXRlIiwidmlkZW9kYXRhcmF0ZSIsInZpZGVvRGF0YVJhdGUiLCJ3aWR0aCIsImhlaWdodCIsImR1cmF0aW9uIiwiTWF0aCIsImZsb29yIiwiZnJhbWVyYXRlIiwia2V5ZnJhbWVzIiwiaGFzS2V5ZnJhbWVzSW5kZXgiLCJ0aW1lcyIsImZpbGVwb3NpdGlvbnMiLCJrZXlmcmFtZXNJbmRleCIsIl9wYXJzZUtleWZyYW1lc0luZGV4IiwibWV0YWRhdGEiLCJpIiwidGltZSIsInB1c2giLCJ0YWdzIiwicGFyc2VDaHVua3MiLCJfaXNJbml0aWFsTWV0YWRhdGFEaXNwYXRjaGVkIiwiZmx2dGFnIiwidGFnVHlwZSIsIl9wYXJzZUF1ZGlvRGF0YSIsImJvZHkiLCJidWZmZXIiLCJnZXRUaW1lIiwiX3BhcnNlVmlkZW9EYXRhIiwiYXJyYXlCdWZmZXIiLCJkYXRhT2Zmc2V0IiwiZGF0YVNpemUiLCJ0YWdUaW1lc3RhbXAiLCJ0YWdQb3NpdGlvbiIsInNwZWMiLCJVaW50OEFycmF5IiwiZnJhbWVUeXBlIiwiY29kZWNJZCIsIkRlbXV4RXJyb3JzIiwiQ09ERUNfVU5TVVBQT1JURUQiLCJfcGFyc2VBVkNWaWRlb1BhY2tldCIsImxlIiwidiIsInBhY2tldFR5cGUiLCJnZXRVaW50OCIsImN0cyIsImdldFVpbnQzMiIsIl9wYXJzZUFWQ0RlY29kZXJDb25maWd1cmF0aW9uUmVjb3JkIiwiX3BhcnNlQVZDVmlkZW9EYXRhIiwiRk9STUFUX0VSUk9SIiwibWV0YSIsInRyYWNrIiwidGltZXNjYWxlIiwiYXZjYyIsInZlcnNpb24iLCJhdmNQcm9maWxlIiwicHJvZmlsZUNvbXBhdGliaWxpdHkiLCJhdmNMZXZlbCIsInNwc0NvdW50Iiwib2Zmc2V0IiwibGVuIiwiZ2V0VWludDE2Iiwic3BzIiwiY29uZmlnIiwicGFyc2VTUFMiLCJjb2RlY1dpZHRoIiwiY29kZWNfc2l6ZSIsImNvZGVjSGVpZ2h0IiwicHJlc2VudFdpZHRoIiwicHJlc2VudF9zaXplIiwicHJlc2VudEhlaWdodCIsInByb2ZpbGUiLCJwcm9maWxlX3N0cmluZyIsImxldmVsIiwibGV2ZWxfc3RyaW5nIiwiYml0RGVwdGgiLCJiaXRfZGVwdGgiLCJjaHJvbWFGb3JtYXQiLCJjaHJvbWFfZm9ybWF0Iiwic2FyUmF0aW8iLCJzYXJfcmF0aW8iLCJmcmFtZVJhdGUiLCJmcmFtZV9yYXRlIiwicmVmU2FtcGxlRHVyYXRpb24iLCJjb2RlY0FycmF5Iiwic3ViYXJyYXkiLCJjb2RlY1N0cmluZyIsImoiLCJoIiwidG9TdHJpbmciLCJjb2RlYyIsIm1pIiwiY2hyb21hX2Zvcm1hdF9zdHJpbmciLCJzYXJOdW0iLCJzYXJEZW4iLCJ2aWRlb0NvZGVjIiwiYXVkaW9Db2RlYyIsIm1pbWVUeXBlIiwicHBzQ291bnQiLCJzZXQiLCJ1bml0cyIsImxlbmd0aFNpemUiLCJkdHMiLCJrZXlmcmFtZSIsIm5hbHVTaXplIiwidW5pdFR5cGUiLCJ1bml0IiwiYnl0ZUxlbmd0aCIsImF2Y1NhbXBsZSIsImlzS2V5ZnJhbWUiLCJwdHMiLCJmaWxlcG9zaXRpb24iLCJzb3VuZFNwZWMiLCJzb3VuZEZvcm1hdCIsInNvdW5kUmF0ZSIsInNvdW5kUmF0ZUluZGV4Iiwic291bmRSYXRlVGFibGUiLCJzb3VuZFNpemUiLCJzb3VuZFR5cGUiLCJhdWRpb1NhbXBsZVJhdGUiLCJjaGFubmVsQ291bnQiLCJhYWNEYXRhIiwiX3BhcnNlQUFDQXVkaW9EYXRhIiwidW5kZWZpbmVkIiwibWlzYyIsInNhbXBsaW5nUmF0ZSIsIm9yaWdpbmFsQXVkaW9PYmplY3RUeXBlIiwiYXVkaW9DaGFubmVsQ291bnQiLCJhYWNTYW1wbGUiLCJyZXN1bHQiLCJhcnJheSIsIl9wYXJzZUFBQ0F1ZGlvU3BlY2lmaWNDb25maWciLCJtcGVnU2FtcGxpbmdSYXRlcyIsImF1ZGlvT2JqZWN0VHlwZSIsImF1ZGlvRXh0ZW5zaW9uT2JqZWN0VHlwZSIsInNhbXBsaW5nSW5kZXgiLCJleHRlbnNpb25TYW1wbGluZ0luZGV4Iiwic2FtcGxpbmdGcmVxdWVuY2UiLCJjaGFubmVsQ29uZmlnIiwidXNlckFnZW50Iiwic2VsZiIsIm5hdmlnYXRvciIsInRvTG93ZXJDYXNlIiwiaW5kZXhPZiIsIkFycmF5Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQUE7Ozs7QUFDQTs7OztBQUNBOzs7Ozs7OztJQUNNQSxRO0FBQ0Ysd0JBQWM7QUFBQTs7QUFDVixhQUFLQyxHQUFMLEdBQVcsS0FBS0MsV0FBTCxDQUFpQkMsSUFBNUI7O0FBRUEsYUFBS0MsT0FBTCxHQUFlLEVBQWY7O0FBRUEsYUFBS0MsUUFBTCxHQUFnQixJQUFoQjtBQUNBLGFBQUtDLFlBQUwsR0FBb0IsSUFBcEI7QUFDQSxhQUFLQyxnQkFBTCxHQUF3QixJQUF4QjtBQUNBLGFBQUtDLGdCQUFMLEdBQXdCLElBQXhCOztBQUVBLGFBQUtDLFdBQUwsR0FBbUIsQ0FBbkI7QUFDQSxhQUFLQyxXQUFMLEdBQW1CLElBQW5CO0FBQ0EsYUFBS0MsU0FBTCxHQUFpQixLQUFqQjs7QUFFQSxhQUFLQyxTQUFMLEdBQWlCLEtBQWpCO0FBQ0EsYUFBS0MsU0FBTCxHQUFpQixLQUFqQjs7QUFFQSxhQUFLQywrQkFBTCxHQUF1QyxLQUF2QztBQUNBLGFBQUtDLCtCQUFMLEdBQXVDLEtBQXZDOztBQUVBLGFBQUtDLFVBQUwsR0FBa0IseUJBQWxCO0FBQ0EsYUFBS0EsVUFBTCxDQUFnQkMsUUFBaEIsR0FBMkIsS0FBS0wsU0FBaEM7QUFDQSxhQUFLSSxVQUFMLENBQWdCRSxRQUFoQixHQUEyQixLQUFLTCxTQUFoQztBQUNBLGFBQUtNLFNBQUwsR0FBaUIsSUFBakI7QUFDQSxhQUFLQyxjQUFMLEdBQXNCLElBQXRCO0FBQ0EsYUFBS0MsY0FBTCxHQUFzQixJQUF0Qjs7QUFFQSxhQUFLQyxlQUFMLEdBQXVCLENBQXZCO0FBQ0EsYUFBS0MsY0FBTCxHQUFzQixDQUF0QixDQTVCVSxDQTRCZTtBQUN6QixhQUFLQyxVQUFMLEdBQWtCLElBQWxCO0FBQ0EsYUFBS0MsU0FBTCxHQUFpQixDQUFqQixDQTlCVSxDQThCVTtBQUNwQixhQUFLQyxrQkFBTCxHQUEwQixLQUExQjtBQUNBLGFBQUtDLG1CQUFMLEdBQTJCO0FBQ3ZCQyxtQkFBTyxJQURnQjtBQUV2QkMsaUJBQUssTUFGa0I7QUFHdkJDLHFCQUFTLEtBSGM7QUFJdkJDLHFCQUFTO0FBSmMsU0FBM0I7O0FBT0EsYUFBS0MsV0FBTCxHQUFtQixFQUFFQyxNQUFNLE9BQVIsRUFBaUJDLElBQUksQ0FBckIsRUFBd0JDLGdCQUFnQixDQUF4QyxFQUEyQ0MsZ0JBQWdCLENBQTNELEVBQThEQyxTQUFTLEVBQXZFLEVBQTJFQyxRQUFRLENBQW5GLEVBQW5CO0FBQ0EsYUFBS0MsV0FBTCxHQUFtQixFQUFFTixNQUFNLE9BQVIsRUFBaUJDLElBQUksQ0FBckIsRUFBd0JDLGdCQUFnQixDQUF4QyxFQUEyQ0MsZ0JBQWdCLENBQTNELEVBQThEQyxTQUFTLEVBQXZFLEVBQTJFQyxRQUFRLENBQW5GLEVBQW5COztBQUVBLGFBQUtFLGFBQUwsR0FBc0IsWUFBVztBQUM3QixnQkFBSUMsTUFBTSxJQUFJQyxXQUFKLENBQWdCLENBQWhCLENBQVY7QUFDQyxnQkFBSUMsUUFBSixDQUFhRixHQUFiLENBQUQsQ0FBb0JHLFFBQXBCLENBQTZCLENBQTdCLEVBQWdDLEdBQWhDLEVBQXFDLElBQXJDLEVBRjZCLENBRWU7QUFDNUMsbUJBQVEsSUFBSUMsVUFBSixDQUFlSixHQUFmLENBQUQsQ0FBc0IsQ0FBdEIsTUFBNkIsR0FBcEMsQ0FINkIsQ0FHWTtBQUM1QyxTQUpvQixFQUFyQjtBQUtIOzs7O29DQUNXSyxRLEVBQVU7QUFDbEIsaUJBQUt4QyxZQUFMLEdBQW9Cd0MsUUFBcEI7QUFDSDs7O3NDQUNhQyxHLEVBQUs7QUFDZixnQkFBSUMsT0FBTyxtQkFBU0MsYUFBVCxDQUF1QkYsR0FBdkIsQ0FBWDtBQUNBLGlCQUFLRyxnQkFBTCxDQUFzQkYsSUFBdEI7QUFDQUcsb0JBQVFDLEdBQVIsQ0FBWSxLQUFLcEMsVUFBakIsRUFBNkIsS0FBS0EsVUFBTCxDQUFnQnFDLFVBQWhCLEVBQTdCO0FBQ0g7Ozt5Q0FDZ0JDLEcsRUFBSztBQUNsQixnQkFBSUMsYUFBYUQsR0FBakI7O0FBRUEsZ0JBQUlDLFdBQVdDLGNBQVgsQ0FBMEIsWUFBMUIsQ0FBSixFQUE2QztBQUN6QyxvQkFBSSxLQUFLckMsU0FBVCxFQUFvQjtBQUNoQnNDLHdCQUFJQyxDQUFKLENBQU0sS0FBS3pELEdBQVgsRUFBZ0IsK0JBQWhCO0FBQ0g7QUFDRCxxQkFBS2tCLFNBQUwsR0FBaUJvQyxVQUFqQjtBQUNBLG9CQUFJSSxhQUFhLEtBQUt4QyxTQUFMLENBQWV3QyxVQUFoQzs7QUFFQSxvQkFBSSxPQUFPQSxXQUFXMUMsUUFBbEIsS0FBK0IsU0FBbkMsRUFBOEM7QUFBRTtBQUM1Qyx5QkFBS0wsU0FBTCxHQUFpQitDLFdBQVcxQyxRQUE1QjtBQUNBLHlCQUFLRCxVQUFMLENBQWdCQyxRQUFoQixHQUEyQixLQUFLTCxTQUFoQztBQUNIO0FBQ0Qsb0JBQUksT0FBTytDLFdBQVd6QyxRQUFsQixLQUErQixTQUFuQyxFQUE4QztBQUFFO0FBQzVDLHlCQUFLTCxTQUFMLEdBQWlCOEMsV0FBV3pDLFFBQTVCO0FBQ0EseUJBQUtGLFVBQUwsQ0FBZ0JFLFFBQWhCLEdBQTJCLEtBQUtMLFNBQWhDO0FBQ0g7QUFDRCxvQkFBSSxPQUFPOEMsV0FBV0MsYUFBbEIsS0FBb0MsUUFBeEMsRUFBa0Q7QUFBRTtBQUNoRCx5QkFBSzVDLFVBQUwsQ0FBZ0I2QyxhQUFoQixHQUFnQ0YsV0FBV0MsYUFBM0M7QUFDSDtBQUNELG9CQUFJLE9BQU9ELFdBQVdHLGFBQWxCLEtBQW9DLFFBQXhDLEVBQWtEO0FBQUU7QUFDaEQseUJBQUs5QyxVQUFMLENBQWdCK0MsYUFBaEIsR0FBZ0NKLFdBQVdHLGFBQTNDO0FBQ0g7QUFDRCxvQkFBSSxPQUFPSCxXQUFXSyxLQUFsQixLQUE0QixRQUFoQyxFQUEwQztBQUFFO0FBQ3hDLHlCQUFLaEQsVUFBTCxDQUFnQmdELEtBQWhCLEdBQXdCTCxXQUFXSyxLQUFuQztBQUNIO0FBQ0Qsb0JBQUksT0FBT0wsV0FBV00sTUFBbEIsS0FBNkIsUUFBakMsRUFBMkM7QUFBRTtBQUN6Qyx5QkFBS2pELFVBQUwsQ0FBZ0JpRCxNQUFoQixHQUF5Qk4sV0FBV00sTUFBcEM7QUFDSDtBQUNELG9CQUFJLE9BQU9OLFdBQVdPLFFBQWxCLEtBQStCLFFBQW5DLEVBQTZDO0FBQUU7QUFDM0Msd0JBQUksQ0FBQyxLQUFLeEMsa0JBQVYsRUFBOEI7QUFDMUIsNEJBQUl3QyxXQUFXQyxLQUFLQyxLQUFMLENBQVdULFdBQVdPLFFBQVgsR0FBc0IsS0FBSzFDLFVBQXRDLENBQWY7QUFDQSw2QkFBS0MsU0FBTCxHQUFpQnlDLFFBQWpCO0FBQ0EsNkJBQUtsRCxVQUFMLENBQWdCa0QsUUFBaEIsR0FBMkJBLFFBQTNCO0FBQ0g7QUFDSixpQkFORCxNQU1PO0FBQ0gseUJBQUtsRCxVQUFMLENBQWdCa0QsUUFBaEIsR0FBMkIsQ0FBM0I7QUFDSDtBQUNELG9CQUFJLE9BQU9QLFdBQVdVLFNBQWxCLEtBQWdDLFFBQXBDLEVBQThDO0FBQUU7QUFDNUMsd0JBQUl2QyxVQUFVcUMsS0FBS0MsS0FBTCxDQUFXVCxXQUFXVSxTQUFYLEdBQXVCLElBQWxDLENBQWQ7QUFDQSx3QkFBSXZDLFVBQVUsQ0FBZCxFQUFpQjtBQUNiLDRCQUFJRCxNQUFNQyxVQUFVLElBQXBCO0FBQ0EsNkJBQUtILG1CQUFMLENBQXlCQyxLQUF6QixHQUFpQyxJQUFqQztBQUNBLDZCQUFLRCxtQkFBTCxDQUF5QkUsR0FBekIsR0FBK0JBLEdBQS9CO0FBQ0EsNkJBQUtGLG1CQUFMLENBQXlCRyxPQUF6QixHQUFtQ0EsT0FBbkM7QUFDQSw2QkFBS0gsbUJBQUwsQ0FBeUJJLE9BQXpCLEdBQW1DLElBQW5DO0FBQ0EsNkJBQUtmLFVBQUwsQ0FBZ0JhLEdBQWhCLEdBQXNCQSxHQUF0QjtBQUNIO0FBQ0o7QUFDRCxvQkFBSSxRQUFPOEIsV0FBV1csU0FBbEIsTUFBZ0MsUUFBcEMsRUFBOEM7QUFBRTtBQUM1Qyx5QkFBS3RELFVBQUwsQ0FBZ0J1RCxpQkFBaEIsR0FBb0MsSUFBcEM7QUFDQSx3QkFBSUQsWUFBWVgsV0FBV1csU0FBM0I7QUFDQUEsOEJBQVVFLEtBQVYsR0FBa0JiLFdBQVdhLEtBQTdCO0FBQ0FGLDhCQUFVRyxhQUFWLEdBQTBCZCxXQUFXYyxhQUFyQztBQUNBLHlCQUFLekQsVUFBTCxDQUFnQjBELGNBQWhCLEdBQWlDLEtBQUtDLG9CQUFMLENBQTBCTCxTQUExQixDQUFqQztBQUNBWCwrQkFBV1csU0FBWCxHQUF1QixJQUF2QixDQU4wQyxDQU1iO0FBQ2hDLGlCQVBELE1BT087QUFDSCx5QkFBS3RELFVBQUwsQ0FBZ0J1RCxpQkFBaEIsR0FBb0MsS0FBcEM7QUFDSDtBQUNELHFCQUFLNUQsU0FBTCxHQUFpQixLQUFqQjtBQUNBLHFCQUFLSyxVQUFMLENBQWdCNEQsUUFBaEIsR0FBMkJqQixVQUEzQjtBQUNBUix3QkFBUUMsR0FBUixDQUFZLEtBQUtuRCxHQUFqQixFQUFzQixtQkFBdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBTyxLQUFLZSxVQUFaO0FBQ0g7QUFDSjs7OzZDQUVvQnNELFMsRUFBVztBQUM1QixnQkFBSUUsUUFBUSxFQUFaO0FBQ0EsZ0JBQUlDLGdCQUFnQixFQUFwQjs7QUFFQTtBQUNBLGlCQUFLLElBQUlJLElBQUksQ0FBYixFQUFnQkEsSUFBSVAsVUFBVUUsS0FBVixDQUFnQmxDLE1BQXBDLEVBQTRDdUMsR0FBNUMsRUFBaUQ7QUFDN0Msb0JBQUlDLE9BQU8sS0FBS3ZELGNBQUwsR0FBc0I0QyxLQUFLQyxLQUFMLENBQVdFLFVBQVVFLEtBQVYsQ0FBZ0JLLENBQWhCLElBQXFCLElBQWhDLENBQWpDO0FBQ0FMLHNCQUFNTyxJQUFOLENBQVdELElBQVg7QUFDQUwsOEJBQWNNLElBQWQsQ0FBbUJULFVBQVVHLGFBQVYsQ0FBd0JJLENBQXhCLENBQW5CO0FBQ0g7O0FBRUQsbUJBQU87QUFDSEwsdUJBQU9BLEtBREo7QUFFSEMsK0JBQWVBO0FBRlosYUFBUDtBQUlIOztBQUdEOzs7Ozs7Ozs7O2dDQU9RTyxJLEVBQU07O0FBRVYsaUJBQUssSUFBSUgsSUFBSSxDQUFiLEVBQWdCQSxJQUFJRyxLQUFLMUMsTUFBekIsRUFBaUN1QyxHQUFqQyxFQUFzQztBQUNsQyxxQkFBS2xFLFNBQUwsR0FBaUIsSUFBakI7QUFDQSxxQkFBS3NFLFdBQUwsQ0FBaUJELEtBQUtILENBQUwsQ0FBakI7QUFDQTtBQUNIO0FBQ0QsZ0JBQUksS0FBS0ssNEJBQUwsRUFBSixFQUF5QztBQUNyQyxvQkFBSSxLQUFLdkUsU0FBTCxLQUFtQixLQUFLNEIsV0FBTCxDQUFpQkQsTUFBakIsSUFBMkIsS0FBS04sV0FBTCxDQUFpQk0sTUFBL0QsQ0FBSixFQUE0RTtBQUN4RSx5QkFBSzlCLGdCQUFMLENBQXNCLEtBQUsrQixXQUEzQixFQUF3QyxLQUFLUCxXQUE3QztBQUNIO0FBQ0o7QUFDSjs7O29DQUVXbUQsTSxFQUFROztBQUVoQixvQkFBUUEsT0FBT0MsT0FBZjtBQUNJLHFCQUFLLENBQUw7QUFBUTtBQUNKLHlCQUFLQyxlQUFMLENBQXFCRixPQUFPRyxJQUFQLENBQVlDLE1BQWpDLEVBQXlDLENBQXpDLEVBQTRDSixPQUFPRyxJQUFQLENBQVloRCxNQUF4RCxFQUFnRTZDLE9BQU9LLE9BQVAsRUFBaEU7QUFDQTtBQUNKLHFCQUFLLENBQUw7QUFBUTtBQUNKLHlCQUFLQyxlQUFMLENBQXFCTixPQUFPRyxJQUFQLENBQVlDLE1BQWpDLEVBQXlDLENBQXpDLEVBQTRDSixPQUFPRyxJQUFQLENBQVloRCxNQUF4RCxFQUFnRTZDLE9BQU9LLE9BQVAsRUFBaEUsRUFBa0YsQ0FBbEY7QUFDQTtBQUNKLHFCQUFLLEVBQUw7QUFBUztBQUNMLHlCQUFLdkMsYUFBTCxDQUFtQmtDLE9BQU9HLElBQTFCO0FBQ0E7QUFUUjtBQVdIOzs7d0NBRWVJLFcsRUFBYUMsVSxFQUFZQyxRLEVBQVVDLFksRUFBY0MsVyxFQUFhO0FBQzFFLGdCQUFJRCxnQkFBZ0IsS0FBS3RFLGNBQXJCLElBQXVDLEtBQUtBLGNBQUwsSUFBdUIsQ0FBbEUsRUFBcUU7QUFDakU0Qix3QkFBUUMsR0FBUixDQUFZeUMsWUFBWixFQUEwQixLQUFLdEUsY0FBL0IsRUFBK0MsZUFBL0M7QUFDQTtBQUNIO0FBQ0QsZ0JBQUlxRSxZQUFZLENBQWhCLEVBQW1CO0FBQ2ZuQyxvQkFBSUMsQ0FBSixDQUFNLEtBQUt6RCxHQUFYLEVBQWdCLHVEQUFoQjtBQUNBO0FBQ0g7QUFDRDtBQUNBLGdCQUFJOEYsT0FBUSxJQUFJQyxVQUFKLENBQWVOLFdBQWYsRUFBNEJDLFVBQTVCLEVBQXdDQyxRQUF4QyxDQUFELENBQW9ELENBQXBELENBQVg7QUFDQTtBQUNBLGdCQUFJSyxZQUFZLENBQUNGLE9BQU8sR0FBUixNQUFpQixDQUFqQztBQUNBO0FBQ0EsZ0JBQUlHLFVBQVVILE9BQU8sRUFBckI7O0FBRUEsZ0JBQUlHLFlBQVksQ0FBaEIsRUFBbUI7QUFDZixxQkFBSzdGLFFBQUwsQ0FBYzhGLFlBQVlDLGlCQUExQiw4Q0FBdUZGLE9BQXZGO0FBQ0E7QUFDSDs7QUFFRCxpQkFBS0csb0JBQUwsQ0FBMEJYLFdBQTFCLEVBQXVDQyxhQUFhLENBQXBELEVBQXVEQyxXQUFXLENBQWxFLEVBQXFFQyxZQUFyRSxFQUFtRkMsV0FBbkYsRUFBZ0dHLFNBQWhHO0FBQ0g7Ozs2Q0FFb0JQLFcsRUFBYUMsVSxFQUFZQyxRLEVBQVVDLFksRUFBY0MsVyxFQUFhRyxTLEVBQVc7O0FBRzFGLGdCQUFJTCxXQUFXLENBQWYsRUFBa0I7QUFDZG5DLG9CQUFJQyxDQUFKLENBQU0sS0FBS3pELEdBQVgsRUFBZ0IsdUVBQWhCO0FBQ0E7QUFDSDs7QUFFRCxnQkFBSXFHLEtBQUssS0FBSzlELGFBQWQ7QUFDQTtBQUNBLGdCQUFJK0QsSUFBSSxJQUFJNUQsUUFBSixDQUFhK0MsV0FBYixFQUEwQkMsVUFBMUIsRUFBc0NDLFFBQXRDLENBQVI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBSVksYUFBYUQsRUFBRUUsUUFBRixDQUFXLENBQVgsQ0FBakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQUlDLE1BQU1ILEVBQUVJLFNBQUYsQ0FBWSxDQUFaLEVBQWUsQ0FBQ0wsRUFBaEIsSUFBc0IsVUFBaEM7O0FBRUE7QUFDQTs7QUFFQTs7Ozs7OztBQU9BLGdCQUFJRSxlQUFlLENBQW5CLEVBQXNCO0FBQUU7QUFDcEIscUJBQUtJLG1DQUFMLENBQXlDbEIsV0FBekMsRUFBc0RDLGFBQWEsQ0FBbkUsRUFBc0VDLFdBQVcsQ0FBakY7QUFDSCxhQUZELE1BRU8sSUFBSVksZUFBZSxDQUFuQixFQUFzQjtBQUFFO0FBQzNCLHFCQUFLSyxrQkFBTCxDQUF3Qm5CLFdBQXhCLEVBQXFDQyxhQUFhLENBQWxELEVBQXFEQyxXQUFXLENBQWhFLEVBQW1FQyxZQUFuRSxFQUFpRkMsV0FBakYsRUFBOEZHLFNBQTlGLEVBQXlHUyxHQUF6RztBQUNILGFBRk0sTUFFQSxJQUFJRixlQUFlLENBQW5CLEVBQXNCO0FBQ3pCO0FBQ0gsYUFGTSxNQUVBO0FBQ0gscUJBQUtuRyxRQUFMLENBQWM4RixZQUFZVyxZQUExQixzQ0FBMEVOLFVBQTFFO0FBQ0E7QUFDSDtBQUNKOztBQUVEOzs7Ozs7NERBR29DZCxXLEVBQWFDLFUsRUFBWUMsUSxFQUFVO0FBQ25FLGdCQUFJQSxXQUFXLENBQWYsRUFBa0I7QUFDZG5DLG9CQUFJQyxDQUFKLENBQU0sS0FBS3pELEdBQVgsRUFBZ0IsMkRBQWhCO0FBQ0E7QUFDSDs7QUFFRCxnQkFBSThHLE9BQU8sS0FBSzFGLGNBQWhCO0FBQ0EsZ0JBQUkyRixRQUFRLEtBQUtoRixXQUFqQjtBQUNBLGdCQUFJc0UsS0FBSyxLQUFLOUQsYUFBZDtBQUNBLGdCQUFJK0QsSUFBSSxJQUFJNUQsUUFBSixDQUFhK0MsV0FBYixFQUEwQkMsVUFBMUIsRUFBc0NDLFFBQXRDLENBQVI7O0FBRUEsZ0JBQUksQ0FBQ21CLElBQUwsRUFBVztBQUNQQSx1QkFBTyxLQUFLMUYsY0FBTCxHQUFzQixFQUE3QjtBQUNBMEYscUJBQUs5RSxJQUFMLEdBQVksT0FBWjtBQUNBOEUscUJBQUs3RSxFQUFMLEdBQVU4RSxNQUFNOUUsRUFBaEI7QUFDQTZFLHFCQUFLRSxTQUFMLEdBQWlCLEtBQUt6RixVQUF0QjtBQUNBdUYscUJBQUs3QyxRQUFMLEdBQWdCLEtBQUt6QyxTQUFyQjtBQUNILGFBTkQsTUFNTztBQUNILG9CQUFJLE9BQU9zRixLQUFLRyxJQUFaLEtBQXFCLFdBQXpCLEVBQXNDO0FBQ2xDekQsd0JBQUlDLENBQUosQ0FBTSxLQUFLekQsR0FBWCxFQUFnQiw4Q0FBaEI7QUFDSDtBQUNKOztBQUVELGdCQUFJa0gsVUFBVVosRUFBRUUsUUFBRixDQUFXLENBQVgsQ0FBZCxDQXZCbUUsQ0F1QnRDO0FBQzdCLGdCQUFJVyxhQUFhYixFQUFFRSxRQUFGLENBQVcsQ0FBWCxDQUFqQixDQXhCbUUsQ0F3Qm5DO0FBQ2hDLGdCQUFJWSx1QkFBdUJkLEVBQUVFLFFBQUYsQ0FBVyxDQUFYLENBQTNCLENBekJtRSxDQXlCekI7QUFDMUMsZ0JBQUlhLFdBQVdmLEVBQUVFLFFBQUYsQ0FBVyxDQUFYLENBQWYsQ0ExQm1FLENBMEJyQzs7QUFFOUIsZ0JBQUlVLFlBQVksQ0FBWixJQUFpQkMsZUFBZSxDQUFwQyxFQUF1QztBQUNuQyxxQkFBSy9HLFFBQUwsQ0FBYzhGLFlBQVlXLFlBQTFCLEVBQXdDLDRDQUF4QztBQUNBO0FBQ0g7O0FBRUQsaUJBQUt4RixlQUFMLEdBQXVCLENBQUNpRixFQUFFRSxRQUFGLENBQVcsQ0FBWCxJQUFnQixDQUFqQixJQUFzQixDQUE3QyxDQWpDbUUsQ0FpQ25CO0FBQ2hELGdCQUFJLEtBQUtuRixlQUFMLEtBQXlCLENBQXpCLElBQThCLEtBQUtBLGVBQUwsS0FBeUIsQ0FBM0QsRUFBOEQ7QUFBRTtBQUM1RCxxQkFBS2pCLFFBQUwsQ0FBYzhGLFlBQVlXLFlBQTFCLDZDQUFnRixLQUFLeEYsZUFBTCxHQUF1QixDQUF2RztBQUNBO0FBQ0g7O0FBRUQsZ0JBQUlpRyxXQUFXaEIsRUFBRUUsUUFBRixDQUFXLENBQVgsSUFBZ0IsRUFBL0IsQ0F2Q21FLENBdUNoQztBQUNuQyxnQkFBSWMsYUFBYSxDQUFiLElBQWtCQSxXQUFXLENBQWpDLEVBQW9DO0FBQ2hDLHFCQUFLbEgsUUFBTCxDQUFjOEYsWUFBWVcsWUFBMUIsb0NBQXdFUyxRQUF4RTtBQUNBO0FBQ0g7O0FBRUQsZ0JBQUlDLFNBQVMsQ0FBYjs7QUFFQSxpQkFBSyxJQUFJM0MsSUFBSSxDQUFiLEVBQWdCQSxJQUFJMEMsUUFBcEIsRUFBOEIxQyxHQUE5QixFQUFtQztBQUMvQixvQkFBSTRDLE1BQU1sQixFQUFFbUIsU0FBRixDQUFZRixNQUFaLEVBQW9CLENBQUNsQixFQUFyQixDQUFWLENBRCtCLENBQ0s7QUFDcENrQiwwQkFBVSxDQUFWOztBQUVBLG9CQUFJQyxRQUFRLENBQVosRUFBZTtBQUNYO0FBQ0g7O0FBRUQ7QUFDQSxvQkFBSUUsTUFBTSxJQUFJM0IsVUFBSixDQUFlTixXQUFmLEVBQTRCQyxhQUFhNkIsTUFBekMsRUFBaURDLEdBQWpELENBQVY7QUFDQUQsMEJBQVVDLEdBQVY7O0FBRUEsb0JBQUlHLFNBQVMsb0JBQVVDLFFBQVYsQ0FBbUJGLEdBQW5CLENBQWI7QUFDQVoscUJBQUtlLFVBQUwsR0FBa0JGLE9BQU9HLFVBQVAsQ0FBa0IvRCxLQUFwQztBQUNBK0MscUJBQUtpQixXQUFMLEdBQW1CSixPQUFPRyxVQUFQLENBQWtCOUQsTUFBckM7QUFDQThDLHFCQUFLa0IsWUFBTCxHQUFvQkwsT0FBT00sWUFBUCxDQUFvQmxFLEtBQXhDO0FBQ0ErQyxxQkFBS29CLGFBQUwsR0FBcUJQLE9BQU9NLFlBQVAsQ0FBb0JqRSxNQUF6Qzs7QUFFQThDLHFCQUFLcUIsT0FBTCxHQUFlUixPQUFPUyxjQUF0QjtBQUNBdEIscUJBQUt1QixLQUFMLEdBQWFWLE9BQU9XLFlBQXBCO0FBQ0F4QixxQkFBS3lCLFFBQUwsR0FBZ0JaLE9BQU9hLFNBQXZCO0FBQ0ExQixxQkFBSzJCLFlBQUwsR0FBb0JkLE9BQU9lLGFBQTNCO0FBQ0E1QixxQkFBSzZCLFFBQUwsR0FBZ0JoQixPQUFPaUIsU0FBdkI7QUFDQTlCLHFCQUFLK0IsU0FBTCxHQUFpQmxCLE9BQU9tQixVQUF4Qjs7QUFFQSxvQkFBSW5CLE9BQU9tQixVQUFQLENBQWtCbkgsS0FBbEIsS0FBNEIsS0FBNUIsSUFDQWdHLE9BQU9tQixVQUFQLENBQWtCakgsT0FBbEIsS0FBOEIsQ0FEOUIsSUFFQThGLE9BQU9tQixVQUFQLENBQWtCaEgsT0FBbEIsS0FBOEIsQ0FGbEMsRUFFcUM7QUFDakNnRix5QkFBSytCLFNBQUwsR0FBaUIsS0FBS25ILG1CQUF0QjtBQUNIOztBQUVELG9CQUFJSSxVQUFVZ0YsS0FBSytCLFNBQUwsQ0FBZS9HLE9BQTdCO0FBQ0Esb0JBQUlELFVBQVVpRixLQUFLK0IsU0FBTCxDQUFlaEgsT0FBN0I7QUFDQWlGLHFCQUFLaUMsaUJBQUwsR0FBeUI3RSxLQUFLQyxLQUFMLENBQVcyQyxLQUFLRSxTQUFMLElBQWtCbEYsVUFBVUQsT0FBNUIsQ0FBWCxDQUF6Qjs7QUFFQSxvQkFBSW1ILGFBQWF0QixJQUFJdUIsUUFBSixDQUFhLENBQWIsRUFBZ0IsQ0FBaEIsQ0FBakI7QUFDQSxvQkFBSUMsY0FBYyxPQUFsQjtBQUNBLHFCQUFLLElBQUlDLElBQUksQ0FBYixFQUFnQkEsSUFBSSxDQUFwQixFQUF1QkEsR0FBdkIsRUFBNEI7QUFDeEIsd0JBQUlDLElBQUlKLFdBQVdHLENBQVgsRUFBY0UsUUFBZCxDQUF1QixFQUF2QixDQUFSO0FBQ0Esd0JBQUlELEVBQUUvRyxNQUFGLEdBQVcsQ0FBZixFQUFrQjtBQUNkK0csNEJBQUksTUFBTUEsQ0FBVjtBQUNIO0FBQ0RGLG1DQUFlRSxDQUFmO0FBQ0g7QUFDRHRDLHFCQUFLd0MsS0FBTCxHQUFhSixXQUFiOztBQUVBLG9CQUFJSyxLQUFLLEtBQUt4SSxVQUFkO0FBQ0F3SSxtQkFBR3hGLEtBQUgsR0FBVytDLEtBQUtlLFVBQWhCO0FBQ0EwQixtQkFBR3ZGLE1BQUgsR0FBWThDLEtBQUtpQixXQUFqQjtBQUNBd0IsbUJBQUczSCxHQUFILEdBQVNrRixLQUFLK0IsU0FBTCxDQUFlakgsR0FBeEI7QUFDQTJILG1CQUFHcEIsT0FBSCxHQUFhckIsS0FBS3FCLE9BQWxCO0FBQ0FvQixtQkFBR2xCLEtBQUgsR0FBV3ZCLEtBQUt1QixLQUFoQjtBQUNBa0IsbUJBQUdkLFlBQUgsR0FBa0JkLE9BQU82QixvQkFBekI7QUFDQUQsbUJBQUdFLE1BQUgsR0FBWTNDLEtBQUs2QixRQUFMLENBQWM1RSxLQUExQjtBQUNBd0YsbUJBQUdHLE1BQUgsR0FBWTVDLEtBQUs2QixRQUFMLENBQWMzRSxNQUExQjtBQUNBdUYsbUJBQUdJLFVBQUgsR0FBZ0JULFdBQWhCOztBQUVBLG9CQUFJSyxHQUFHdkksUUFBUCxFQUFpQjtBQUNiLHdCQUFJdUksR0FBR0ssVUFBSCxJQUFpQixJQUFyQixFQUEyQjtBQUN2QkwsMkJBQUdNLFFBQUgsR0FBYywwQkFBMEJOLEdBQUdJLFVBQTdCLEdBQTBDLEdBQTFDLEdBQWdESixHQUFHSyxVQUFuRCxHQUFnRSxHQUE5RTtBQUNIO0FBQ0osaUJBSkQsTUFJTztBQUNITCx1QkFBR00sUUFBSCxHQUFjLDBCQUEwQk4sR0FBR0ksVUFBN0IsR0FBMEMsR0FBeEQ7QUFDSDtBQUNELG9CQUFJSixHQUFHbkcsVUFBSCxFQUFKLEVBQXFCO0FBQ2pCLHlCQUFLL0MsWUFBTCxDQUFrQmtKLEVBQWxCO0FBQ0g7QUFDSjs7QUFFRCxnQkFBSU8sV0FBV3hELEVBQUVFLFFBQUYsQ0FBV2UsTUFBWCxDQUFmLENBcEhtRSxDQW9IaEM7QUFDbkMsZ0JBQUl1QyxhQUFhLENBQWIsSUFBa0JBLFdBQVcsQ0FBakMsRUFBb0M7QUFDaEMscUJBQUsxSixRQUFMLENBQWM4RixZQUFZVyxZQUExQixvQ0FBd0VpRCxRQUF4RTtBQUNBO0FBQ0g7O0FBRUR2Qzs7QUFFQSxpQkFBSyxJQUFJM0MsS0FBSSxDQUFiLEVBQWdCQSxLQUFJa0YsUUFBcEIsRUFBOEJsRixJQUE5QixFQUFtQztBQUMvQixvQkFBSTRDLE9BQU1sQixFQUFFbUIsU0FBRixDQUFZRixNQUFaLEVBQW9CLENBQUNsQixFQUFyQixDQUFWLENBRCtCLENBQ0s7QUFDcENrQiwwQkFBVSxDQUFWOztBQUVBLG9CQUFJQyxTQUFRLENBQVosRUFBZTtBQUNYO0FBQ0g7O0FBRUQ7QUFDQUQsMEJBQVVDLElBQVY7QUFDSDs7QUFFRFYsaUJBQUtHLElBQUwsR0FBWSxJQUFJbEIsVUFBSixDQUFlSixRQUFmLENBQVo7QUFDQW1CLGlCQUFLRyxJQUFMLENBQVU4QyxHQUFWLENBQWMsSUFBSWhFLFVBQUosQ0FBZU4sV0FBZixFQUE0QkMsVUFBNUIsRUFBd0NDLFFBQXhDLENBQWQsRUFBaUUsQ0FBakU7QUFDQXpDLG9CQUFRQyxHQUFSLENBQVksS0FBS25ELEdBQWpCLEVBQXNCLHNDQUF0Qjs7QUFFQSxnQkFBSSxLQUFLaUYsNEJBQUwsRUFBSixFQUF5QztBQUNyQztBQUNBLG9CQUFJLEtBQUt2RSxTQUFMLEtBQW1CLEtBQUs0QixXQUFMLENBQWlCRCxNQUFqQixJQUEyQixLQUFLTixXQUFMLENBQWlCTSxNQUEvRCxDQUFKLEVBQTRFO0FBQ3hFLHlCQUFLOUIsZ0JBQUwsQ0FBc0IsS0FBSytCLFdBQTNCLEVBQXdDLEtBQUtQLFdBQTdDO0FBQ0g7QUFDSixhQUxELE1BS087QUFDSCxxQkFBS2pCLCtCQUFMLEdBQXVDLElBQXZDO0FBQ0g7QUFDRDtBQUNBLGlCQUFLSixTQUFMLEdBQWlCLEtBQWpCO0FBQ0E7QUFDQTtBQUNBOztBQUVBLGlCQUFLSixnQkFBTCxDQUFzQixPQUF0QixFQUErQndHLElBQS9CO0FBQ0g7OztzQ0FFYWxDLEMsRUFBRztBQUNiLGlCQUFLdEQsY0FBTCxHQUFzQnNELENBQXRCO0FBQ0g7O0FBRUQ7Ozs7OzsyQ0FHbUJhLFcsRUFBYUMsVSxFQUFZQyxRLEVBQVVDLFksRUFBY0MsVyxFQUFhRyxTLEVBQVdTLEcsRUFBSzs7QUFHN0YsZ0JBQUlKLEtBQUssS0FBSzlELGFBQWQ7QUFDQSxnQkFBSStELElBQUksSUFBSTVELFFBQUosQ0FBYStDLFdBQWIsRUFBMEJDLFVBQTFCLEVBQXNDQyxRQUF0QyxDQUFSOztBQUVBLGdCQUFJcUUsUUFBUSxFQUFaO0FBQUEsZ0JBQ0kzSCxTQUFTLENBRGI7O0FBR0EsZ0JBQUlrRixTQUFTLENBQWI7QUFDQSxnQkFBTTBDLGFBQWEsS0FBSzVJLGVBQXhCO0FBQ0EsZ0JBQUk2SSxNQUFNLEtBQUs1SSxjQUFMLEdBQXNCc0UsWUFBaEM7QUFDQSxnQkFBSXVFLFdBQVluRSxjQUFjLENBQTlCLENBWjZGLENBWTNEOztBQUVsQyxtQkFBT3VCLFNBQVM1QixRQUFoQixFQUEwQjtBQUN0QixvQkFBSTRCLFNBQVMsQ0FBVCxJQUFjNUIsUUFBbEIsRUFBNEI7QUFDeEJuQyx3QkFBSUMsQ0FBSixDQUFNLEtBQUt6RCxHQUFYLHFDQUFpRGtLLEdBQWpELG1CQUFrRTNDLE1BQWxFLHFCQUF3RjVCLFFBQXhGO0FBQ0EsMEJBRndCLENBRWpCO0FBQ1Y7QUFDRDtBQUNBLG9CQUFJeUUsV0FBVzlELEVBQUVJLFNBQUYsQ0FBWWEsTUFBWixFQUFvQixDQUFDbEIsRUFBckIsQ0FBZixDQU5zQixDQU1tQjtBQUN6QyxvQkFBSTRELGVBQWUsQ0FBbkIsRUFBc0I7QUFDbEJHLGtDQUFjLENBQWQ7QUFDSDtBQUNELG9CQUFJQSxXQUFXekUsV0FBV3NFLFVBQTFCLEVBQXNDO0FBQ2xDekcsd0JBQUlDLENBQUosQ0FBTSxLQUFLekQsR0FBWCxzQ0FBa0RrSyxHQUFsRDtBQUNBO0FBQ0g7O0FBRUQsb0JBQUlHLFdBQVcvRCxFQUFFRSxRQUFGLENBQVdlLFNBQVMwQyxVQUFwQixJQUFrQyxJQUFqRDs7QUFFQSxvQkFBSUksYUFBYSxDQUFqQixFQUFvQjtBQUFFO0FBQ2xCRiwrQkFBVyxJQUFYO0FBQ0g7O0FBRUQsb0JBQUlwSCxPQUFPLElBQUlnRCxVQUFKLENBQWVOLFdBQWYsRUFBNEJDLGFBQWE2QixNQUF6QyxFQUFpRDBDLGFBQWFHLFFBQTlELENBQVg7QUFDQSxvQkFBSUUsT0FBTyxFQUFFdEksTUFBTXFJLFFBQVIsRUFBa0J0SCxNQUFNQSxJQUF4QixFQUFYO0FBQ0FpSCxzQkFBTWxGLElBQU4sQ0FBV3dGLElBQVg7QUFDQWpJLDBCQUFVVSxLQUFLd0gsVUFBZjs7QUFFQWhELDBCQUFVMEMsYUFBYUcsUUFBdkI7QUFDSDs7QUFFRCxnQkFBSUosTUFBTTNILE1BQVYsRUFBa0I7QUFDZCxvQkFBSTBFLFFBQVEsS0FBS2hGLFdBQWpCO0FBQ0Esb0JBQUl5SSxZQUFZO0FBQ1pSLDJCQUFPQSxLQURLO0FBRVozSCw0QkFBUUEsTUFGSTtBQUdab0ksZ0NBQVlOLFFBSEE7QUFJWkQseUJBQUtBLEdBSk87QUFLWnpELHlCQUFLQSxHQUxPO0FBTVppRSx5QkFBTVIsTUFBTXpEO0FBTkEsaUJBQWhCO0FBUUEsb0JBQUkwRCxRQUFKLEVBQWM7QUFDVkssOEJBQVVHLFlBQVYsR0FBeUI5RSxXQUF6QjtBQUNIO0FBQ0RrQixzQkFBTTNFLE9BQU4sQ0FBYzBDLElBQWQsQ0FBbUIwRixTQUFuQjtBQUNBekQsc0JBQU0xRSxNQUFOLElBQWdCQSxNQUFoQjtBQUNIO0FBQ0o7Ozt3Q0FDZW9ELFcsRUFBYUMsVSxFQUFZQyxRLEVBQVVDLFksRUFBYztBQUM3RCxnQkFBSUEsZ0JBQWdCLEtBQUt0RSxjQUFyQixJQUF1QyxLQUFLQSxjQUFMLElBQXVCLENBQWxFLEVBQXFFO0FBQ2pFNEIsd0JBQVFDLEdBQVIsQ0FBWXlDLFlBQVosRUFBMEIsS0FBS3RFLGNBQS9CLEVBQStDLGVBQS9DO0FBQ0E7QUFDSDs7QUFFRCxnQkFBSXFFLFlBQVksQ0FBaEIsRUFBbUI7QUFDZm5DLG9CQUFJQyxDQUFKLENBQU0sS0FBS3pELEdBQVgsRUFBZ0IsdURBQWhCO0FBQ0E7QUFDSDs7QUFFRCxnQkFBSThHLE9BQU8sS0FBSzNGLGNBQWhCO0FBQ0EsZ0JBQUk0RixRQUFRLEtBQUt6RSxXQUFqQjs7QUFFQSxnQkFBSSxDQUFDd0UsSUFBRCxJQUFTLENBQUNBLEtBQUt3QyxLQUFuQixFQUEwQjtBQUN0QjtBQUNBeEMsdUJBQU8sS0FBSzNGLGNBQUwsR0FBc0IsRUFBN0I7QUFDQTJGLHFCQUFLOUUsSUFBTCxHQUFZLE9BQVo7QUFDQThFLHFCQUFLN0UsRUFBTCxHQUFVOEUsTUFBTTlFLEVBQWhCO0FBQ0E2RSxxQkFBS0UsU0FBTCxHQUFpQixLQUFLekYsVUFBdEI7QUFDQXVGLHFCQUFLN0MsUUFBTCxHQUFnQixLQUFLekMsU0FBckI7O0FBRUEsb0JBQUk2RSxLQUFLLEtBQUs5RCxhQUFkO0FBQ0Esb0JBQUkrRCxJQUFJLElBQUk1RCxRQUFKLENBQWErQyxXQUFiLEVBQTBCQyxVQUExQixFQUFzQ0MsUUFBdEMsQ0FBUjs7QUFFQSxvQkFBSWlGLFlBQVl0RSxFQUFFRSxRQUFGLENBQVcsQ0FBWCxDQUFoQjs7QUFFQSxvQkFBSXFFLGNBQWNELGNBQWMsQ0FBaEM7QUFDQSxvQkFBSUMsZ0JBQWdCLEVBQXBCLEVBQXdCO0FBQUU7QUFDdEI7QUFDQSx5QkFBS3pLLFFBQUwsQ0FBYzhGLFlBQVlDLGlCQUExQixFQUE2Qyx1Q0FBdUMwRSxXQUFwRjtBQUNBO0FBQ0g7O0FBRUQsb0JBQUlDLFlBQVksQ0FBaEI7QUFDQSxvQkFBSUMsaUJBQWlCLENBQUNILFlBQVksRUFBYixNQUFxQixDQUExQzs7QUFFQSxvQkFBSUksaUJBQWlCLENBQUMsSUFBRCxFQUFPLEtBQVAsRUFBYyxLQUFkLEVBQXFCLEtBQXJCLEVBQTRCLEtBQTVCLENBQXJCOztBQUVBLG9CQUFJRCxpQkFBaUJDLGVBQWUzSSxNQUFwQyxFQUE0QztBQUN4Q3lJLGdDQUFZRSxlQUFlRCxjQUFmLENBQVo7QUFDSCxpQkFGRCxNQUVPO0FBQ0gseUJBQUszSyxRQUFMLENBQWM4RixZQUFZVyxZQUExQixFQUF3Qyx5Q0FBeUNrRSxjQUFqRjtBQUNBO0FBQ0g7O0FBRUQsb0JBQUlFLFlBQVksQ0FBQ0wsWUFBWSxDQUFiLE1BQW9CLENBQXBDLENBaENzQixDQWdDaUI7QUFDdkMsb0JBQUlNLFlBQWFOLFlBQVksQ0FBN0I7O0FBRUE5RCxxQkFBS3FFLGVBQUwsR0FBdUJMLFNBQXZCO0FBQ0FoRSxxQkFBS3NFLFlBQUwsR0FBcUJGLGNBQWMsQ0FBZCxHQUFrQixDQUFsQixHQUFzQixDQUEzQztBQUNBcEUscUJBQUtpQyxpQkFBTCxHQUF5QjdFLEtBQUtDLEtBQUwsQ0FBVyxPQUFPMkMsS0FBS3FFLGVBQVosR0FBOEJyRSxLQUFLRSxTQUE5QyxDQUF6QjtBQUNBRixxQkFBS3dDLEtBQUwsR0FBYSxXQUFiO0FBQ0g7O0FBRUQsZ0JBQUkrQixVQUFVLEtBQUtDLGtCQUFMLENBQXdCN0YsV0FBeEIsRUFBcUNDLGFBQWEsQ0FBbEQsRUFBcURDLFdBQVcsQ0FBaEUsQ0FBZDtBQUNBLGdCQUFJMEYsV0FBV0UsU0FBZixFQUEwQjtBQUN0QjtBQUNIOztBQUVELGdCQUFJRixRQUFROUUsVUFBUixLQUF1QixDQUEzQixFQUE4QjtBQUFFO0FBQzVCLG9CQUFJTyxLQUFLYSxNQUFULEVBQWlCO0FBQ2JuRSx3QkFBSUMsQ0FBSixDQUFNLEtBQUt6RCxHQUFYLEVBQWdCLG9DQUFoQjtBQUNIO0FBQ0Qsb0JBQUl3TCxPQUFPSCxRQUFRdEksSUFBbkI7QUFDQStELHFCQUFLcUUsZUFBTCxHQUF1QkssS0FBS0MsWUFBNUI7QUFDQTNFLHFCQUFLc0UsWUFBTCxHQUFvQkksS0FBS0osWUFBekI7QUFDQXRFLHFCQUFLd0MsS0FBTCxHQUFha0MsS0FBS2xDLEtBQWxCO0FBQ0F4QyxxQkFBS2EsTUFBTCxHQUFjNkQsS0FBSzdELE1BQW5CO0FBQ0E7QUFDQWIscUJBQUtpQyxpQkFBTCxHQUF5QjdFLEtBQUtDLEtBQUwsQ0FBVyxPQUFPMkMsS0FBS3FFLGVBQVosR0FBOEJyRSxLQUFLRSxTQUE5QyxDQUF6QjtBQUNBOUQsd0JBQVFDLEdBQVIsQ0FBWSxLQUFLbkQsR0FBakIsRUFBc0IsNEJBQXRCOztBQUVBLG9CQUFJLEtBQUtpRiw0QkFBTCxFQUFKLEVBQXlDO0FBQ3JDO0FBQ0Esd0JBQUksS0FBS3ZFLFNBQUwsS0FBbUIsS0FBSzRCLFdBQUwsQ0FBaUJELE1BQWpCLElBQTJCLEtBQUtOLFdBQUwsQ0FBaUJNLE1BQS9ELENBQUosRUFBNEU7QUFDeEUsNkJBQUs5QixnQkFBTCxDQUFzQixLQUFLK0IsV0FBM0IsRUFBd0MsS0FBS1AsV0FBN0M7QUFDSDtBQUNKLGlCQUxELE1BS087QUFDSCx5QkFBS2xCLCtCQUFMLEdBQXVDLElBQXZDO0FBQ0g7QUFDRDtBQUNBLHFCQUFLSCxTQUFMLEdBQWlCLEtBQWpCO0FBQ0EscUJBQUtKLGdCQUFMLENBQXNCLE9BQXRCLEVBQStCd0csSUFBL0I7O0FBRUEsb0JBQUl5QyxLQUFLLEtBQUt4SSxVQUFkO0FBQ0F3SSxtQkFBR0ssVUFBSCxHQUFnQixhQUFhNEIsS0FBS0UsdUJBQWxDO0FBQ0FuQyxtQkFBRzRCLGVBQUgsR0FBcUJyRSxLQUFLcUUsZUFBMUI7QUFDQTVCLG1CQUFHb0MsaUJBQUgsR0FBdUI3RSxLQUFLc0UsWUFBNUI7QUFDQSxvQkFBSTdCLEdBQUd0SSxRQUFQLEVBQWlCO0FBQ2Isd0JBQUlzSSxHQUFHSSxVQUFILElBQWlCLElBQXJCLEVBQTJCO0FBQ3ZCSiwyQkFBR00sUUFBSCxHQUFjLDBCQUEwQk4sR0FBR0ksVUFBN0IsR0FBMEMsR0FBMUMsR0FBZ0RKLEdBQUdLLFVBQW5ELEdBQWdFLEdBQTlFO0FBQ0g7QUFDSixpQkFKRCxNQUlPO0FBQ0hMLHVCQUFHTSxRQUFILEdBQWMsMEJBQTBCTixHQUFHSyxVQUE3QixHQUEwQyxHQUF4RDtBQUNIO0FBQ0Qsb0JBQUlMLEdBQUduRyxVQUFILEVBQUosRUFBcUI7QUFDakIseUJBQUsvQyxZQUFMLENBQWtCa0osRUFBbEI7QUFDSDtBQUNEO0FBQ0gsYUF4Q0QsTUF3Q08sSUFBSThCLFFBQVE5RSxVQUFSLEtBQXVCLENBQTNCLEVBQThCO0FBQUU7QUFDbkMsb0JBQUkyRCxNQUFNLEtBQUs1SSxjQUFMLEdBQXNCc0UsWUFBaEM7QUFDQSxvQkFBSWdHLFlBQVksRUFBRXRCLE1BQU1lLFFBQVF0SSxJQUFoQixFQUFzQm1ILEtBQUtBLEdBQTNCLEVBQWdDUSxLQUFLUixHQUFyQyxFQUFoQjtBQUNBbkQsc0JBQU0zRSxPQUFOLENBQWMwQyxJQUFkLENBQW1COEcsU0FBbkI7QUFDQTdFLHNCQUFNMUUsTUFBTixJQUFnQmdKLFFBQVF0SSxJQUFSLENBQWFWLE1BQTdCO0FBQ0gsYUFMTSxNQUtBO0FBQ0hhLHdCQUFRQyxHQUFSLENBQVksS0FBS25ELEdBQWpCLHNDQUF3RHFMLFFBQVE5RSxVQUFoRTtBQUNIO0FBQ0o7OzsyQ0FFa0JkLFcsRUFBYUMsVSxFQUFZQyxRLEVBQVU7QUFDbEQsZ0JBQUlBLFlBQVksQ0FBaEIsRUFBbUI7QUFDZnpDLHdCQUFRQyxHQUFSLENBQVksS0FBS25ELEdBQWpCLEVBQXNCLDZEQUF0QjtBQUNBO0FBQ0g7O0FBRUQsZ0JBQUk2TCxTQUFTLEVBQWI7QUFDQSxnQkFBSUMsUUFBUSxJQUFJL0YsVUFBSixDQUFlTixXQUFmLEVBQTRCQyxVQUE1QixFQUF3Q0MsUUFBeEMsQ0FBWjs7QUFFQWtHLG1CQUFPdEYsVUFBUCxHQUFvQnVGLE1BQU0sQ0FBTixDQUFwQjs7QUFFQSxnQkFBSUEsTUFBTSxDQUFOLE1BQWEsQ0FBakIsRUFBb0I7QUFDaEJELHVCQUFPOUksSUFBUCxHQUFjLEtBQUtnSiw0QkFBTCxDQUFrQ3RHLFdBQWxDLEVBQStDQyxhQUFhLENBQTVELEVBQStEQyxXQUFXLENBQTFFLENBQWQ7QUFDSCxhQUZELE1BRU87QUFDSGtHLHVCQUFPOUksSUFBUCxHQUFjK0ksTUFBTTdDLFFBQU4sQ0FBZSxDQUFmLENBQWQ7QUFDSDs7QUFFRCxtQkFBTzRDLE1BQVA7QUFDSDs7O3FEQUU0QnBHLFcsRUFBYUMsVSxFQUFZQyxRLEVBQVU7QUFDNUQsZ0JBQUltRyxRQUFRLElBQUkvRixVQUFKLENBQWVOLFdBQWYsRUFBNEJDLFVBQTVCLEVBQXdDQyxRQUF4QyxDQUFaO0FBQ0EsZ0JBQUlnQyxTQUFTLElBQWI7O0FBRUEsZ0JBQUlxRSxvQkFBb0IsQ0FDcEIsS0FEb0IsRUFDYixLQURhLEVBQ04sS0FETSxFQUNDLEtBREQsRUFDUSxLQURSLEVBQ2UsS0FEZixFQUVwQixLQUZvQixFQUViLEtBRmEsRUFFTixLQUZNLEVBRUMsS0FGRCxFQUVRLEtBRlIsRUFFZSxJQUZmLEVBRXFCLElBRnJCLENBQXhCOztBQUtBOzs7Ozs7Ozs7O0FBVUEsZ0JBQUlDLGtCQUFrQixDQUF0QjtBQUNBLGdCQUFJUCwwQkFBMEIsQ0FBOUI7QUFDQSxnQkFBSVEsMkJBQTJCLElBQS9CO0FBQ0EsZ0JBQUlDLGdCQUFnQixDQUFwQjtBQUNBLGdCQUFJQyx5QkFBeUIsSUFBN0I7QUFDQTtBQUNBO0FBQ0FILDhCQUFrQlAsMEJBQTBCSSxNQUFNLENBQU4sTUFBYSxDQUF6RDtBQUNBO0FBQ0FLLDRCQUFpQixDQUFDTCxNQUFNLENBQU4sSUFBVyxJQUFaLEtBQXFCLENBQXRCLEdBQTRCQSxNQUFNLENBQU4sTUFBYSxDQUF6RDtBQUNBLGdCQUFJSyxnQkFBZ0IsQ0FBaEIsSUFBcUJBLGlCQUFpQkgsa0JBQWtCM0osTUFBNUQsRUFBb0U7QUFDaEUscUJBQUtqQyxRQUFMLENBQWM4RixZQUFZVyxZQUExQixFQUF3Qyw0Q0FBeEM7QUFDQTtBQUNIOztBQUVELGdCQUFJd0Ysb0JBQW9CTCxrQkFBa0JHLGFBQWxCLENBQXhCOztBQUVBO0FBQ0EsZ0JBQUlHLGdCQUFnQixDQUFDUixNQUFNLENBQU4sSUFBVyxJQUFaLE1BQXNCLENBQTFDO0FBQ0EsZ0JBQUlRLGdCQUFnQixDQUFoQixJQUFxQkEsaUJBQWlCLENBQTFDLEVBQTZDO0FBQ3pDLHFCQUFLbE0sUUFBTCxDQUFjOEYsWUFBWVcsWUFBMUIsRUFBd0Msd0NBQXhDO0FBQ0E7QUFDSDs7QUFFRCxnQkFBSW9GLG9CQUFvQixDQUF4QixFQUEyQjtBQUFFO0FBQ3pCO0FBQ0FHLHlDQUEwQixDQUFDTixNQUFNLENBQU4sSUFBVyxJQUFaLEtBQXFCLENBQXRCLEdBQTRCQSxNQUFNLENBQU4sTUFBYSxDQUFsRTtBQUNBO0FBQ0FJLDJDQUEyQixDQUFDSixNQUFNLENBQU4sSUFBVyxJQUFaLE1BQXNCLENBQWpEO0FBQ0g7O0FBRUQ7QUFDQSxnQkFBSVMsWUFBWUMsS0FBS0MsU0FBTCxDQUFlRixTQUFmLENBQXlCRyxXQUF6QixFQUFoQjs7QUFFQSxnQkFBSUgsVUFBVUksT0FBVixDQUFrQixTQUFsQixNQUFpQyxDQUFDLENBQXRDLEVBQXlDO0FBQ3JDO0FBQ0Esb0JBQUlSLGlCQUFpQixDQUFyQixFQUF3QjtBQUNwQkYsc0NBQWtCLENBQWxCO0FBQ0F0RSw2QkFBUyxJQUFJaUYsS0FBSixDQUFVLENBQVYsQ0FBVDtBQUNBUiw2Q0FBeUJELGdCQUFnQixDQUF6QztBQUNILGlCQUpELE1BSU87QUFBRTtBQUNMRixzQ0FBa0IsQ0FBbEI7QUFDQXRFLDZCQUFTLElBQUlpRixLQUFKLENBQVUsQ0FBVixDQUFUO0FBQ0FSLDZDQUF5QkQsYUFBekI7QUFDSDtBQUNKLGFBWEQsTUFXTyxJQUFJSSxVQUFVSSxPQUFWLENBQWtCLFNBQWxCLE1BQWlDLENBQUMsQ0FBdEMsRUFBeUM7QUFDNUM7QUFDQVYsa0NBQWtCLENBQWxCO0FBQ0F0RSx5QkFBUyxJQUFJaUYsS0FBSixDQUFVLENBQVYsQ0FBVDtBQUNBUix5Q0FBeUJELGFBQXpCO0FBQ0gsYUFMTSxNQUtBO0FBQ0g7QUFDQTtBQUNBRixrQ0FBa0IsQ0FBbEI7QUFDQUcseUNBQXlCRCxhQUF6QjtBQUNBeEUseUJBQVMsSUFBSWlGLEtBQUosQ0FBVSxDQUFWLENBQVQ7O0FBRUEsb0JBQUlULGlCQUFpQixDQUFyQixFQUF3QjtBQUNwQkMsNkNBQXlCRCxnQkFBZ0IsQ0FBekM7QUFDSCxpQkFGRCxNQUVPLElBQUlHLGtCQUFrQixDQUF0QixFQUF5QjtBQUFFO0FBQzlCTCxzQ0FBa0IsQ0FBbEI7QUFDQXRFLDZCQUFTLElBQUlpRixLQUFKLENBQVUsQ0FBVixDQUFUO0FBQ0FSLDZDQUF5QkQsYUFBekI7QUFDSDtBQUNKOztBQUVEeEUsbUJBQU8sQ0FBUCxJQUFZc0UsbUJBQW1CLENBQS9CO0FBQ0F0RSxtQkFBTyxDQUFQLEtBQWEsQ0FBQ3dFLGdCQUFnQixJQUFqQixNQUEyQixDQUF4QztBQUNBeEUsbUJBQU8sQ0FBUCxJQUFZLENBQUN3RSxnQkFBZ0IsSUFBakIsS0FBMEIsQ0FBdEM7QUFDQXhFLG1CQUFPLENBQVAsS0FBYSxDQUFDMkUsZ0JBQWdCLElBQWpCLEtBQTBCLENBQXZDO0FBQ0EsZ0JBQUlMLG9CQUFvQixDQUF4QixFQUEyQjtBQUN2QnRFLHVCQUFPLENBQVAsS0FBYyxDQUFDeUUseUJBQXlCLElBQTFCLE1BQW9DLENBQWxEO0FBQ0F6RSx1QkFBTyxDQUFQLElBQVksQ0FBQ3lFLHlCQUF5QixJQUExQixLQUFtQyxDQUEvQztBQUNBO0FBQ0F6RSx1QkFBTyxDQUFQLEtBQWMsS0FBSyxDQUFuQjtBQUNBQSx1QkFBTyxDQUFQLElBQVksQ0FBWjtBQUNIOztBQUVELG1CQUFPO0FBQ0hBLHdCQUFRQSxNQURMO0FBRUg4RCw4QkFBY1ksaUJBRlg7QUFHSGpCLDhCQUFja0IsYUFIWDtBQUlIaEQsdUJBQU8sYUFBYTJDLGVBSmpCO0FBS0hQLHlDQUF5QkE7QUFMdEIsYUFBUDtBQU9IOzs7dURBQzhCO0FBQzNCLGdCQUFJLEtBQUsvSyxTQUFMLElBQWtCLEtBQUtDLFNBQTNCLEVBQXNDO0FBQUU7QUFDcEMsdUJBQU8sS0FBS0MsK0JBQUwsSUFBd0MsS0FBS0MsK0JBQXBEO0FBQ0g7QUFDRCxnQkFBSSxLQUFLSCxTQUFMLElBQWtCLENBQUMsS0FBS0MsU0FBNUIsRUFBdUM7QUFBRTtBQUNyQyx1QkFBTyxLQUFLQywrQkFBWjtBQUNIO0FBQ0QsZ0JBQUksQ0FBQyxLQUFLRixTQUFOLElBQW1CLEtBQUtDLFNBQTVCLEVBQXVDO0FBQUU7QUFDckMsdUJBQU8sS0FBS0UsK0JBQVo7QUFDSDtBQUNKOzs7Ozs7a0JBRVUsSUFBSWYsUUFBSixFIiwiZmlsZSI6IjAuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZmx2RGVtdXggZnJvbSAnLi9mbHZkZW11eCdcbmltcG9ydCBtZWRpYWluZm8gZnJvbSAnLi9tZWRpYS1pbmZvJ1xuaW1wb3J0IFNQU1BhcnNlciBmcm9tICcuL3Nwcy1wYXJzZXInXG5jbGFzcyB0YWdEZW11eCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuVEFHID0gdGhpcy5jb25zdHJ1Y3Rvci5uYW1lO1xuXG4gICAgICAgIHRoaXMuX2NvbmZpZyA9IHt9O1xuXG4gICAgICAgIHRoaXMuX29uRXJyb3IgPSBudWxsO1xuICAgICAgICB0aGlzLl9vbk1lZGlhSW5mbyA9IG51bGw7XG4gICAgICAgIHRoaXMuX29uVHJhY2tNZXRhZGF0YSA9IG51bGw7XG4gICAgICAgIHRoaXMuX29uRGF0YUF2YWlsYWJsZSA9IG51bGw7XG5cbiAgICAgICAgdGhpcy5fZGF0YU9mZnNldCA9IDA7XG4gICAgICAgIHRoaXMuX2ZpcnN0UGFyc2UgPSB0cnVlO1xuICAgICAgICB0aGlzLl9kaXNwYXRjaCA9IGZhbHNlO1xuXG4gICAgICAgIHRoaXMuX2hhc0F1ZGlvID0gZmFsc2U7XG4gICAgICAgIHRoaXMuX2hhc1ZpZGVvID0gZmFsc2U7XG5cbiAgICAgICAgdGhpcy5fYXVkaW9Jbml0aWFsTWV0YWRhdGFEaXNwYXRjaGVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuX3ZpZGVvSW5pdGlhbE1ldGFkYXRhRGlzcGF0Y2hlZCA9IGZhbHNlO1xuXG4gICAgICAgIHRoaXMuX21lZGlhSW5mbyA9IG5ldyBtZWRpYWluZm8oKTtcbiAgICAgICAgdGhpcy5fbWVkaWFJbmZvLmhhc0F1ZGlvID0gdGhpcy5faGFzQXVkaW87XG4gICAgICAgIHRoaXMuX21lZGlhSW5mby5oYXNWaWRlbyA9IHRoaXMuX2hhc1ZpZGVvO1xuICAgICAgICB0aGlzLl9tZXRhZGF0YSA9IG51bGw7XG4gICAgICAgIHRoaXMuX2F1ZGlvTWV0YWRhdGEgPSBudWxsO1xuICAgICAgICB0aGlzLl92aWRlb01ldGFkYXRhID0gbnVsbDtcblxuICAgICAgICB0aGlzLl9uYWx1TGVuZ3RoU2l6ZSA9IDQ7XG4gICAgICAgIHRoaXMuX3RpbWVzdGFtcEJhc2UgPSAwOyAvLyBpbnQzMiwgaW4gbWlsbGlzZWNvbmRzXG4gICAgICAgIHRoaXMuX3RpbWVzY2FsZSA9IDEwMDA7XG4gICAgICAgIHRoaXMuX2R1cmF0aW9uID0gMDsgLy8gaW50MzIsIGluIG1pbGxpc2Vjb25kc1xuICAgICAgICB0aGlzLl9kdXJhdGlvbk92ZXJyaWRlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLl9yZWZlcmVuY2VGcmFtZVJhdGUgPSB7XG4gICAgICAgICAgICBmaXhlZDogdHJ1ZSxcbiAgICAgICAgICAgIGZwczogMjMuOTc2LFxuICAgICAgICAgICAgZnBzX251bTogMjM5NzYsXG4gICAgICAgICAgICBmcHNfZGVuOiAxMDAwXG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5fdmlkZW9UcmFjayA9IHsgdHlwZTogJ3ZpZGVvJywgaWQ6IDEsIHNlcXVlbmNlTnVtYmVyOiAwLCBhZGRjb2VmZmljaWVudDogMiwgc2FtcGxlczogW10sIGxlbmd0aDogMCB9O1xuICAgICAgICB0aGlzLl9hdWRpb1RyYWNrID0geyB0eXBlOiAnYXVkaW8nLCBpZDogMiwgc2VxdWVuY2VOdW1iZXI6IDEsIGFkZGNvZWZmaWNpZW50OiAyLCBzYW1wbGVzOiBbXSwgbGVuZ3RoOiAwIH07XG5cbiAgICAgICAgdGhpcy5fbGl0dGxlRW5kaWFuID0gKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgbGV0IGJ1ZiA9IG5ldyBBcnJheUJ1ZmZlcigyKTtcbiAgICAgICAgICAgIChuZXcgRGF0YVZpZXcoYnVmKSkuc2V0SW50MTYoMCwgMjU2LCB0cnVlKTsgLy8gbGl0dGxlLWVuZGlhbiB3cml0ZVxuICAgICAgICAgICAgcmV0dXJuIChuZXcgSW50MTZBcnJheShidWYpKVswXSA9PT0gMjU2OyAvLyBwbGF0Zm9ybS1zcGVjIHJlYWQsIGlmIGVxdWFsIHRoZW4gTEVcbiAgICAgICAgfSkoKTtcbiAgICB9XG4gICAgb25NZWRpYUluZm8oY2FsbGJhY2spIHtcbiAgICAgICAgdGhpcy5fb25NZWRpYUluZm8gPSBjYWxsYmFjaztcbiAgICB9XG4gICAgcGFyc2VNZXRhZGF0YShhcnIpIHtcbiAgICAgICAgbGV0IGRhdGEgPSBmbHZEZW11eC5wYXJzZU1ldGFkYXRhKGFycik7XG4gICAgICAgIHRoaXMuX3BhcnNlU2NyaXB0RGF0YShkYXRhKTtcbiAgICAgICAgY29uc29sZS5sb2codGhpcy5fbWVkaWFJbmZvLCB0aGlzLl9tZWRpYUluZm8uaXNDb21wbGV0ZSgpKTtcbiAgICB9XG4gICAgX3BhcnNlU2NyaXB0RGF0YShvYmopIHtcbiAgICAgICAgbGV0IHNjcmlwdERhdGEgPSBvYmo7XG5cbiAgICAgICAgaWYgKHNjcmlwdERhdGEuaGFzT3duUHJvcGVydHkoJ29uTWV0YURhdGEnKSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuX21ldGFkYXRhKSB7XG4gICAgICAgICAgICAgICAgTG9nLncodGhpcy5UQUcsICdGb3VuZCBhbm90aGVyIG9uTWV0YURhdGEgdGFnIScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5fbWV0YWRhdGEgPSBzY3JpcHREYXRhO1xuICAgICAgICAgICAgbGV0IG9uTWV0YURhdGEgPSB0aGlzLl9tZXRhZGF0YS5vbk1ldGFEYXRhO1xuXG4gICAgICAgICAgICBpZiAodHlwZW9mIG9uTWV0YURhdGEuaGFzQXVkaW8gPT09ICdib29sZWFuJykgeyAvLyBoYXNBdWRpb1xuICAgICAgICAgICAgICAgIHRoaXMuX2hhc0F1ZGlvID0gb25NZXRhRGF0YS5oYXNBdWRpbztcbiAgICAgICAgICAgICAgICB0aGlzLl9tZWRpYUluZm8uaGFzQXVkaW8gPSB0aGlzLl9oYXNBdWRpbztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0eXBlb2Ygb25NZXRhRGF0YS5oYXNWaWRlbyA9PT0gJ2Jvb2xlYW4nKSB7IC8vIGhhc1ZpZGVvXG4gICAgICAgICAgICAgICAgdGhpcy5faGFzVmlkZW8gPSBvbk1ldGFEYXRhLmhhc1ZpZGVvO1xuICAgICAgICAgICAgICAgIHRoaXMuX21lZGlhSW5mby5oYXNWaWRlbyA9IHRoaXMuX2hhc1ZpZGVvO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHR5cGVvZiBvbk1ldGFEYXRhLmF1ZGlvZGF0YXJhdGUgPT09ICdudW1iZXInKSB7IC8vIGF1ZGlvZGF0YXJhdGVcbiAgICAgICAgICAgICAgICB0aGlzLl9tZWRpYUluZm8uYXVkaW9EYXRhUmF0ZSA9IG9uTWV0YURhdGEuYXVkaW9kYXRhcmF0ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0eXBlb2Ygb25NZXRhRGF0YS52aWRlb2RhdGFyYXRlID09PSAnbnVtYmVyJykgeyAvLyB2aWRlb2RhdGFyYXRlXG4gICAgICAgICAgICAgICAgdGhpcy5fbWVkaWFJbmZvLnZpZGVvRGF0YVJhdGUgPSBvbk1ldGFEYXRhLnZpZGVvZGF0YXJhdGU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodHlwZW9mIG9uTWV0YURhdGEud2lkdGggPT09ICdudW1iZXInKSB7IC8vIHdpZHRoXG4gICAgICAgICAgICAgICAgdGhpcy5fbWVkaWFJbmZvLndpZHRoID0gb25NZXRhRGF0YS53aWR0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0eXBlb2Ygb25NZXRhRGF0YS5oZWlnaHQgPT09ICdudW1iZXInKSB7IC8vIGhlaWdodFxuICAgICAgICAgICAgICAgIHRoaXMuX21lZGlhSW5mby5oZWlnaHQgPSBvbk1ldGFEYXRhLmhlaWdodDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0eXBlb2Ygb25NZXRhRGF0YS5kdXJhdGlvbiA9PT0gJ251bWJlcicpIHsgLy8gZHVyYXRpb25cbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuX2R1cmF0aW9uT3ZlcnJpZGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBkdXJhdGlvbiA9IE1hdGguZmxvb3Iob25NZXRhRGF0YS5kdXJhdGlvbiAqIHRoaXMuX3RpbWVzY2FsZSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2R1cmF0aW9uID0gZHVyYXRpb247XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX21lZGlhSW5mby5kdXJhdGlvbiA9IGR1cmF0aW9uO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fbWVkaWFJbmZvLmR1cmF0aW9uID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0eXBlb2Ygb25NZXRhRGF0YS5mcmFtZXJhdGUgPT09ICdudW1iZXInKSB7IC8vIGZyYW1lcmF0ZVxuICAgICAgICAgICAgICAgIGxldCBmcHNfbnVtID0gTWF0aC5mbG9vcihvbk1ldGFEYXRhLmZyYW1lcmF0ZSAqIDEwMDApO1xuICAgICAgICAgICAgICAgIGlmIChmcHNfbnVtID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgZnBzID0gZnBzX251bSAvIDEwMDA7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3JlZmVyZW5jZUZyYW1lUmF0ZS5maXhlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3JlZmVyZW5jZUZyYW1lUmF0ZS5mcHMgPSBmcHM7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3JlZmVyZW5jZUZyYW1lUmF0ZS5mcHNfbnVtID0gZnBzX251bTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fcmVmZXJlbmNlRnJhbWVSYXRlLmZwc19kZW4gPSAxMDAwO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9tZWRpYUluZm8uZnBzID0gZnBzO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0eXBlb2Ygb25NZXRhRGF0YS5rZXlmcmFtZXMgPT09ICdvYmplY3QnKSB7IC8vIGtleWZyYW1lc1xuICAgICAgICAgICAgICAgIHRoaXMuX21lZGlhSW5mby5oYXNLZXlmcmFtZXNJbmRleCA9IHRydWU7XG4gICAgICAgICAgICAgICAgbGV0IGtleWZyYW1lcyA9IG9uTWV0YURhdGEua2V5ZnJhbWVzO1xuICAgICAgICAgICAgICAgIGtleWZyYW1lcy50aW1lcyA9IG9uTWV0YURhdGEudGltZXM7XG4gICAgICAgICAgICAgICAga2V5ZnJhbWVzLmZpbGVwb3NpdGlvbnMgPSBvbk1ldGFEYXRhLmZpbGVwb3NpdGlvbnM7XG4gICAgICAgICAgICAgICAgdGhpcy5fbWVkaWFJbmZvLmtleWZyYW1lc0luZGV4ID0gdGhpcy5fcGFyc2VLZXlmcmFtZXNJbmRleChrZXlmcmFtZXMpO1xuICAgICAgICAgICAgICAgIG9uTWV0YURhdGEua2V5ZnJhbWVzID0gbnVsbDsgLy8ga2V5ZnJhbWVzIGhhcyBiZWVuIGV4dHJhY3RlZCwgcmVtb3ZlIGl0XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuX21lZGlhSW5mby5oYXNLZXlmcmFtZXNJbmRleCA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5fZGlzcGF0Y2ggPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuX21lZGlhSW5mby5tZXRhZGF0YSA9IG9uTWV0YURhdGE7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLlRBRywgJ1BhcnNlZCBvbk1ldGFEYXRhJyk7XG4gICAgICAgICAgICAvLyBpZiAodGhpcy5fbWVkaWFJbmZvLmlzQ29tcGxldGUoKSkge1xuICAgICAgICAgICAgLy8gdGhpcy5fb25NZWRpYUluZm8odGhpcy5fbWVkaWFJbmZvKTtcbiAgICAgICAgICAgIC8vIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9tZWRpYUluZm87XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBfcGFyc2VLZXlmcmFtZXNJbmRleChrZXlmcmFtZXMpIHtcbiAgICAgICAgbGV0IHRpbWVzID0gW107XG4gICAgICAgIGxldCBmaWxlcG9zaXRpb25zID0gW107XG5cbiAgICAgICAgLy8gaWdub3JlIGZpcnN0IGtleWZyYW1lIHdoaWNoIGlzIGFjdHVhbGx5IEFWQyBTZXF1ZW5jZSBIZWFkZXIgKEFWQ0RlY29kZXJDb25maWd1cmF0aW9uUmVjb3JkKVxuICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8IGtleWZyYW1lcy50aW1lcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgbGV0IHRpbWUgPSB0aGlzLl90aW1lc3RhbXBCYXNlICsgTWF0aC5mbG9vcihrZXlmcmFtZXMudGltZXNbaV0gKiAxMDAwKTtcbiAgICAgICAgICAgIHRpbWVzLnB1c2godGltZSk7XG4gICAgICAgICAgICBmaWxlcG9zaXRpb25zLnB1c2goa2V5ZnJhbWVzLmZpbGVwb3NpdGlvbnNbaV0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHRpbWVzOiB0aW1lcyxcbiAgICAgICAgICAgIGZpbGVwb3NpdGlvbnM6IGZpbGVwb3NpdGlvbnNcbiAgICAgICAgfTtcbiAgICB9XG5cblxuICAgIC8qKlxuICAgICAqIOS8oOWFpXRhZ3PovpPlh7ptb29m5ZKMbWRhdFxuICAgICAqIFxuICAgICAqIEBwYXJhbSB7YW55fSB0YWdzIFxuICAgICAqIFxuICAgICAqIEBtZW1iZXJvZiB0YWdEZW11eFxuICAgICAqL1xuICAgIG1vb2ZUYWcodGFncykge1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGFncy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdGhpcy5fZGlzcGF0Y2ggPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5wYXJzZUNodW5rcyh0YWdzW2ldKTtcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwidGFnVGltZXN0YW1wXCIsIHRhZ3NbaV0uZ2V0VGltZSgpLCB0YWdzW2ldKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5faXNJbml0aWFsTWV0YWRhdGFEaXNwYXRjaGVkKCkpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLl9kaXNwYXRjaCAmJiAodGhpcy5fYXVkaW9UcmFjay5sZW5ndGggfHwgdGhpcy5fdmlkZW9UcmFjay5sZW5ndGgpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fb25EYXRhQXZhaWxhYmxlKHRoaXMuX2F1ZGlvVHJhY2ssIHRoaXMuX3ZpZGVvVHJhY2spO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcGFyc2VDaHVua3MoZmx2dGFnKSB7XG5cbiAgICAgICAgc3dpdGNoIChmbHZ0YWcudGFnVHlwZSkge1xuICAgICAgICAgICAgY2FzZSA4OiAvLyBBdWRpb1xuICAgICAgICAgICAgICAgIHRoaXMuX3BhcnNlQXVkaW9EYXRhKGZsdnRhZy5ib2R5LmJ1ZmZlciwgMCwgZmx2dGFnLmJvZHkubGVuZ3RoLCBmbHZ0YWcuZ2V0VGltZSgpKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgOTogLy8gVmlkZW9cbiAgICAgICAgICAgICAgICB0aGlzLl9wYXJzZVZpZGVvRGF0YShmbHZ0YWcuYm9keS5idWZmZXIsIDAsIGZsdnRhZy5ib2R5Lmxlbmd0aCwgZmx2dGFnLmdldFRpbWUoKSwgMCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDE4OiAvLyBTY3JpcHREYXRhT2JqZWN0XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJzZU1ldGFkYXRhKGZsdnRhZy5ib2R5KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIF9wYXJzZVZpZGVvRGF0YShhcnJheUJ1ZmZlciwgZGF0YU9mZnNldCwgZGF0YVNpemUsIHRhZ1RpbWVzdGFtcCwgdGFnUG9zaXRpb24pIHtcbiAgICAgICAgaWYgKHRhZ1RpbWVzdGFtcCA9PSB0aGlzLl90aW1lc3RhbXBCYXNlICYmIHRoaXMuX3RpbWVzdGFtcEJhc2UgIT0gMCkge1xuICAgICAgICAgICAgY29uc29sZS5sb2codGFnVGltZXN0YW1wLCB0aGlzLl90aW1lc3RhbXBCYXNlLCAn5aSt5a+/5ZWm6L+Z5Liq6KeG6aKR5LiN5piv5LuOMOW8gOWniycpO1xuICAgICAgICAgICAgLy8gdGhpcy50aW1lc3RhbXBCYXNlKDApO1xuICAgICAgICB9XG4gICAgICAgIGlmIChkYXRhU2l6ZSA8PSAxKSB7XG4gICAgICAgICAgICBMb2cudyh0aGlzLlRBRywgJ0ZsdjogSW52YWxpZCB2aWRlbyBwYWNrZXQsIG1pc3NpbmcgVmlkZW9EYXRhIHBheWxvYWQhJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy/ojrflj5YgdmlkZW8gdGFnIGJvZHkg56ys5LiA5a2X6IqCXG4gICAgICAgIGxldCBzcGVjID0gKG5ldyBVaW50OEFycmF5KGFycmF5QnVmZmVyLCBkYXRhT2Zmc2V0LCBkYXRhU2l6ZSkpWzBdO1xuICAgICAgICAvL+iOt+WPluaYr+WQpuaYr+WFs+mUruW4p1xuICAgICAgICBsZXQgZnJhbWVUeXBlID0gKHNwZWMgJiAyNDApID4+PiA0O1xuICAgICAgICAvL+iOt+WPlue8lueggeagvOW8j1xuICAgICAgICBsZXQgY29kZWNJZCA9IHNwZWMgJiAxNTtcblxuICAgICAgICBpZiAoY29kZWNJZCAhPT0gNykge1xuICAgICAgICAgICAgdGhpcy5fb25FcnJvcihEZW11eEVycm9ycy5DT0RFQ19VTlNVUFBPUlRFRCwgYEZsdjogVW5zdXBwb3J0ZWQgY29kZWMgaW4gdmlkZW8gZnJhbWU6ICR7Y29kZWNJZH1gKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX3BhcnNlQVZDVmlkZW9QYWNrZXQoYXJyYXlCdWZmZXIsIGRhdGFPZmZzZXQgKyAxLCBkYXRhU2l6ZSAtIDEsIHRhZ1RpbWVzdGFtcCwgdGFnUG9zaXRpb24sIGZyYW1lVHlwZSk7XG4gICAgfVxuXG4gICAgX3BhcnNlQVZDVmlkZW9QYWNrZXQoYXJyYXlCdWZmZXIsIGRhdGFPZmZzZXQsIGRhdGFTaXplLCB0YWdUaW1lc3RhbXAsIHRhZ1Bvc2l0aW9uLCBmcmFtZVR5cGUpIHtcblxuXG4gICAgICAgIGlmIChkYXRhU2l6ZSA8IDQpIHtcbiAgICAgICAgICAgIExvZy53KHRoaXMuVEFHLCAnRmx2OiBJbnZhbGlkIEFWQyBwYWNrZXQsIG1pc3NpbmcgQVZDUGFja2V0VHlwZSBvci9hbmQgQ29tcG9zaXRpb25UaW1lJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgbGUgPSB0aGlzLl9saXR0bGVFbmRpYW47XG4gICAgICAgIC8v6I635Y+WIHZpZGVvIHRhZyBib2R5IOesrDLlrZfoioLliLDnu5PlsL5cbiAgICAgICAgbGV0IHYgPSBuZXcgRGF0YVZpZXcoYXJyYXlCdWZmZXIsIGRhdGFPZmZzZXQsIGRhdGFTaXplKTtcblxuICAgICAgICAvL0lGIENvZGVjSUQgPT0gNyAgQVZDUGFja2V0VHlwZVxuICAgICAgICAvLyAwID0gQVZDIHNlcXVlbmNlIGhlYWRlclxuICAgICAgICAvLyAxID0gQVZDIE5BTFVcbiAgICAgICAgLy8gMiA9IEFWQyBlbmQgb2Ygc2VxdWVuY2UgKGxvd2VyIGxldmVsIE5BTFUgc2VxdWVuY2UgZW5kZXIgaXMgbm90IHJlcXVpcmVkIG9yIHN1cHBvcnRlZClcbiAgICAgICAgbGV0IHBhY2tldFR5cGUgPSB2LmdldFVpbnQ4KDApO1xuICAgICAgICAvLyAz5a2X6IqCXG4gICAgICAgIC8vIElGIEFWQ1BhY2tldFR5cGUgPT0gMVxuICAgICAgICAvLyAgQ29tcG9zaXRpb24gdGltZSBvZmZzZXRcbiAgICAgICAgLy8gRUxTRVxuICAgICAgICAvLyAgMFxuICAgICAgICBsZXQgY3RzID0gdi5nZXRVaW50MzIoMCwgIWxlKSAmIDB4MDBGRkZGRkY7XG5cbiAgICAgICAgLy9JRiBBVkNQYWNrZXRUeXBlID09IDAgQVZDRGVjb2RlckNvbmZpZ3VyYXRpb25SZWNvcmTvvIhBVkMgc2VxdWVuY2UgaGVhZGVy77yJXG4gICAgICAgIC8vSUYgQVZDUGFja2V0VHlwZSA9PSAxIE9uZSBvciBtb3JlIE5BTFVzIChGdWxsIGZyYW1lcyBhcmUgcmVxdWlyZWQpXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqQVZDRGVjb2RlckNvbmZpZ3VyYXRpb25SZWNvcmQu5YyF5ZCr552A5pivSC4yNjTop6PnoIHnm7jlhbPmr5TovoPph43opoHnmoRzcHPlkoxwcHPkv6Hmga/vvIxcbiAgICAgICAgICrlho3nu5lBVkPop6PnoIHlmajpgIHmlbDmja4g5rWB5LmL5YmN5LiA5a6a6KaB5oqKc3Bz5ZKMcHBz5L+h5oGv6YCB5Ye677yM5ZCm5YiZ55qE6K+d6Kej56CB5Zmo5LiN6IO95q2j5bi46Kej56CB44CCXG4gICAgICAgICAq6ICM5LiU5Zyo6Kej56CB5Zmoc3RvcOS5i+WQjuWGjeasoXN0YXJ05LmL5YmN77yM5aaCc2Vla+OAgeW/q+i/m+W/q+mAgOeKtuaAgeWIh+aNouetie+8jFxuICAgICAgICAgKumDvSDpnIDopoHph43mlrDpgIHkuIDpgY1zcHPlkoxwcHPnmoTkv6Hmga8uQVZDRGVjb2RlckNvbmZpZ3VyYXRpb25SZWNvcmTlnKhGTFbmlofku7bkuK3kuIDoiKzmg4XlhrXkuZ/mmK/lh7rnjrAx5qyh77yMXG4gICAgICAgICAq5Lmf5bCx5piv56ys5LiA5LiqIHZpZGVvIHRhZy5cbiAgICAgICAgICovXG4gICAgICAgIGlmIChwYWNrZXRUeXBlID09PSAwKSB7IC8vIEFWQ0RlY29kZXJDb25maWd1cmF0aW9uUmVjb3JkXG4gICAgICAgICAgICB0aGlzLl9wYXJzZUFWQ0RlY29kZXJDb25maWd1cmF0aW9uUmVjb3JkKGFycmF5QnVmZmVyLCBkYXRhT2Zmc2V0ICsgNCwgZGF0YVNpemUgLSA0KTtcbiAgICAgICAgfSBlbHNlIGlmIChwYWNrZXRUeXBlID09PSAxKSB7IC8vIE9uZSBvciBtb3JlIE5hbHVzXG4gICAgICAgICAgICB0aGlzLl9wYXJzZUFWQ1ZpZGVvRGF0YShhcnJheUJ1ZmZlciwgZGF0YU9mZnNldCArIDQsIGRhdGFTaXplIC0gNCwgdGFnVGltZXN0YW1wLCB0YWdQb3NpdGlvbiwgZnJhbWVUeXBlLCBjdHMpO1xuICAgICAgICB9IGVsc2UgaWYgKHBhY2tldFR5cGUgPT09IDIpIHtcbiAgICAgICAgICAgIC8vIGVtcHR5LCBBVkMgZW5kIG9mIHNlcXVlbmNlXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9vbkVycm9yKERlbXV4RXJyb3JzLkZPUk1BVF9FUlJPUiwgYEZsdjogSW52YWxpZCB2aWRlbyBwYWNrZXQgdHlwZSAke3BhY2tldFR5cGV9YCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBVkMg5Yid5aeL5YyWXG4gICAgICovXG4gICAgX3BhcnNlQVZDRGVjb2RlckNvbmZpZ3VyYXRpb25SZWNvcmQoYXJyYXlCdWZmZXIsIGRhdGFPZmZzZXQsIGRhdGFTaXplKSB7XG4gICAgICAgIGlmIChkYXRhU2l6ZSA8IDcpIHtcbiAgICAgICAgICAgIExvZy53KHRoaXMuVEFHLCAnRmx2OiBJbnZhbGlkIEFWQ0RlY29kZXJDb25maWd1cmF0aW9uUmVjb3JkLCBsYWNrIG9mIGRhdGEhJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgbWV0YSA9IHRoaXMuX3ZpZGVvTWV0YWRhdGE7XG4gICAgICAgIGxldCB0cmFjayA9IHRoaXMuX3ZpZGVvVHJhY2s7XG4gICAgICAgIGxldCBsZSA9IHRoaXMuX2xpdHRsZUVuZGlhbjtcbiAgICAgICAgbGV0IHYgPSBuZXcgRGF0YVZpZXcoYXJyYXlCdWZmZXIsIGRhdGFPZmZzZXQsIGRhdGFTaXplKTtcblxuICAgICAgICBpZiAoIW1ldGEpIHtcbiAgICAgICAgICAgIG1ldGEgPSB0aGlzLl92aWRlb01ldGFkYXRhID0ge307XG4gICAgICAgICAgICBtZXRhLnR5cGUgPSAndmlkZW8nO1xuICAgICAgICAgICAgbWV0YS5pZCA9IHRyYWNrLmlkO1xuICAgICAgICAgICAgbWV0YS50aW1lc2NhbGUgPSB0aGlzLl90aW1lc2NhbGU7XG4gICAgICAgICAgICBtZXRhLmR1cmF0aW9uID0gdGhpcy5fZHVyYXRpb247XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIG1ldGEuYXZjYyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICBMb2cudyh0aGlzLlRBRywgJ0ZvdW5kIGFub3RoZXIgQVZDRGVjb2RlckNvbmZpZ3VyYXRpb25SZWNvcmQhJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgdmVyc2lvbiA9IHYuZ2V0VWludDgoMCk7IC8vIGNvbmZpZ3VyYXRpb25WZXJzaW9uXG4gICAgICAgIGxldCBhdmNQcm9maWxlID0gdi5nZXRVaW50OCgxKTsgLy8gYXZjUHJvZmlsZUluZGljYXRpb25cbiAgICAgICAgbGV0IHByb2ZpbGVDb21wYXRpYmlsaXR5ID0gdi5nZXRVaW50OCgyKTsgLy8gcHJvZmlsZV9jb21wYXRpYmlsaXR5XG4gICAgICAgIGxldCBhdmNMZXZlbCA9IHYuZ2V0VWludDgoMyk7IC8vIEFWQ0xldmVsSW5kaWNhdGlvblxuXG4gICAgICAgIGlmICh2ZXJzaW9uICE9PSAxIHx8IGF2Y1Byb2ZpbGUgPT09IDApIHtcbiAgICAgICAgICAgIHRoaXMuX29uRXJyb3IoRGVtdXhFcnJvcnMuRk9STUFUX0VSUk9SLCAnRmx2OiBJbnZhbGlkIEFWQ0RlY29kZXJDb25maWd1cmF0aW9uUmVjb3JkJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9uYWx1TGVuZ3RoU2l6ZSA9ICh2LmdldFVpbnQ4KDQpICYgMykgKyAxOyAvLyBsZW5ndGhTaXplTWludXNPbmVcbiAgICAgICAgaWYgKHRoaXMuX25hbHVMZW5ndGhTaXplICE9PSAzICYmIHRoaXMuX25hbHVMZW5ndGhTaXplICE9PSA0KSB7IC8vIGhvbHkgc2hpdCEhIVxuICAgICAgICAgICAgdGhpcy5fb25FcnJvcihEZW11eEVycm9ycy5GT1JNQVRfRVJST1IsIGBGbHY6IFN0cmFuZ2UgTmFsdUxlbmd0aFNpemVNaW51c09uZTogJHt0aGlzLl9uYWx1TGVuZ3RoU2l6ZSAtIDF9YCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgc3BzQ291bnQgPSB2LmdldFVpbnQ4KDUpICYgMzE7IC8vIG51bU9mU2VxdWVuY2VQYXJhbWV0ZXJTZXRzXG4gICAgICAgIGlmIChzcHNDb3VudCA9PT0gMCB8fCBzcHNDb3VudCA+IDEpIHtcbiAgICAgICAgICAgIHRoaXMuX29uRXJyb3IoRGVtdXhFcnJvcnMuRk9STUFUX0VSUk9SLCBgRmx2OiBJbnZhbGlkIEgyNjQgU1BTIGNvdW50OiAke3Nwc0NvdW50fWApO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IG9mZnNldCA9IDY7XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzcHNDb3VudDsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgbGVuID0gdi5nZXRVaW50MTYob2Zmc2V0LCAhbGUpOyAvLyBzZXF1ZW5jZVBhcmFtZXRlclNldExlbmd0aFxuICAgICAgICAgICAgb2Zmc2V0ICs9IDI7XG5cbiAgICAgICAgICAgIGlmIChsZW4gPT09IDApIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gTm90aWNlOiBOYWx1IHdpdGhvdXQgc3RhcnRjb2RlIGhlYWRlciAoMDAgMDAgMDAgMDEpXG4gICAgICAgICAgICBsZXQgc3BzID0gbmV3IFVpbnQ4QXJyYXkoYXJyYXlCdWZmZXIsIGRhdGFPZmZzZXQgKyBvZmZzZXQsIGxlbik7XG4gICAgICAgICAgICBvZmZzZXQgKz0gbGVuO1xuXG4gICAgICAgICAgICBsZXQgY29uZmlnID0gU1BTUGFyc2VyLnBhcnNlU1BTKHNwcyk7XG4gICAgICAgICAgICBtZXRhLmNvZGVjV2lkdGggPSBjb25maWcuY29kZWNfc2l6ZS53aWR0aDtcbiAgICAgICAgICAgIG1ldGEuY29kZWNIZWlnaHQgPSBjb25maWcuY29kZWNfc2l6ZS5oZWlnaHQ7XG4gICAgICAgICAgICBtZXRhLnByZXNlbnRXaWR0aCA9IGNvbmZpZy5wcmVzZW50X3NpemUud2lkdGg7XG4gICAgICAgICAgICBtZXRhLnByZXNlbnRIZWlnaHQgPSBjb25maWcucHJlc2VudF9zaXplLmhlaWdodDtcblxuICAgICAgICAgICAgbWV0YS5wcm9maWxlID0gY29uZmlnLnByb2ZpbGVfc3RyaW5nO1xuICAgICAgICAgICAgbWV0YS5sZXZlbCA9IGNvbmZpZy5sZXZlbF9zdHJpbmc7XG4gICAgICAgICAgICBtZXRhLmJpdERlcHRoID0gY29uZmlnLmJpdF9kZXB0aDtcbiAgICAgICAgICAgIG1ldGEuY2hyb21hRm9ybWF0ID0gY29uZmlnLmNocm9tYV9mb3JtYXQ7XG4gICAgICAgICAgICBtZXRhLnNhclJhdGlvID0gY29uZmlnLnNhcl9yYXRpbztcbiAgICAgICAgICAgIG1ldGEuZnJhbWVSYXRlID0gY29uZmlnLmZyYW1lX3JhdGU7XG5cbiAgICAgICAgICAgIGlmIChjb25maWcuZnJhbWVfcmF0ZS5maXhlZCA9PT0gZmFsc2UgfHxcbiAgICAgICAgICAgICAgICBjb25maWcuZnJhbWVfcmF0ZS5mcHNfbnVtID09PSAwIHx8XG4gICAgICAgICAgICAgICAgY29uZmlnLmZyYW1lX3JhdGUuZnBzX2RlbiA9PT0gMCkge1xuICAgICAgICAgICAgICAgIG1ldGEuZnJhbWVSYXRlID0gdGhpcy5fcmVmZXJlbmNlRnJhbWVSYXRlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBsZXQgZnBzX2RlbiA9IG1ldGEuZnJhbWVSYXRlLmZwc19kZW47XG4gICAgICAgICAgICBsZXQgZnBzX251bSA9IG1ldGEuZnJhbWVSYXRlLmZwc19udW07XG4gICAgICAgICAgICBtZXRhLnJlZlNhbXBsZUR1cmF0aW9uID0gTWF0aC5mbG9vcihtZXRhLnRpbWVzY2FsZSAqIChmcHNfZGVuIC8gZnBzX251bSkpO1xuXG4gICAgICAgICAgICBsZXQgY29kZWNBcnJheSA9IHNwcy5zdWJhcnJheSgxLCA0KTtcbiAgICAgICAgICAgIGxldCBjb2RlY1N0cmluZyA9ICdhdmMxLic7XG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IDM7IGorKykge1xuICAgICAgICAgICAgICAgIGxldCBoID0gY29kZWNBcnJheVtqXS50b1N0cmluZygxNik7XG4gICAgICAgICAgICAgICAgaWYgKGgubGVuZ3RoIDwgMikge1xuICAgICAgICAgICAgICAgICAgICBoID0gJzAnICsgaDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29kZWNTdHJpbmcgKz0gaDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG1ldGEuY29kZWMgPSBjb2RlY1N0cmluZztcblxuICAgICAgICAgICAgbGV0IG1pID0gdGhpcy5fbWVkaWFJbmZvO1xuICAgICAgICAgICAgbWkud2lkdGggPSBtZXRhLmNvZGVjV2lkdGg7XG4gICAgICAgICAgICBtaS5oZWlnaHQgPSBtZXRhLmNvZGVjSGVpZ2h0O1xuICAgICAgICAgICAgbWkuZnBzID0gbWV0YS5mcmFtZVJhdGUuZnBzO1xuICAgICAgICAgICAgbWkucHJvZmlsZSA9IG1ldGEucHJvZmlsZTtcbiAgICAgICAgICAgIG1pLmxldmVsID0gbWV0YS5sZXZlbDtcbiAgICAgICAgICAgIG1pLmNocm9tYUZvcm1hdCA9IGNvbmZpZy5jaHJvbWFfZm9ybWF0X3N0cmluZztcbiAgICAgICAgICAgIG1pLnNhck51bSA9IG1ldGEuc2FyUmF0aW8ud2lkdGg7XG4gICAgICAgICAgICBtaS5zYXJEZW4gPSBtZXRhLnNhclJhdGlvLmhlaWdodDtcbiAgICAgICAgICAgIG1pLnZpZGVvQ29kZWMgPSBjb2RlY1N0cmluZztcblxuICAgICAgICAgICAgaWYgKG1pLmhhc0F1ZGlvKSB7XG4gICAgICAgICAgICAgICAgaWYgKG1pLmF1ZGlvQ29kZWMgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBtaS5taW1lVHlwZSA9ICd2aWRlby94LWZsdjsgY29kZWNzPVwiJyArIG1pLnZpZGVvQ29kZWMgKyAnLCcgKyBtaS5hdWRpb0NvZGVjICsgJ1wiJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIG1pLm1pbWVUeXBlID0gJ3ZpZGVvL3gtZmx2OyBjb2RlY3M9XCInICsgbWkudmlkZW9Db2RlYyArICdcIic7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobWkuaXNDb21wbGV0ZSgpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fb25NZWRpYUluZm8obWkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHBwc0NvdW50ID0gdi5nZXRVaW50OChvZmZzZXQpOyAvLyBudW1PZlBpY3R1cmVQYXJhbWV0ZXJTZXRzXG4gICAgICAgIGlmIChwcHNDb3VudCA9PT0gMCB8fCBwcHNDb3VudCA+IDEpIHtcbiAgICAgICAgICAgIHRoaXMuX29uRXJyb3IoRGVtdXhFcnJvcnMuRk9STUFUX0VSUk9SLCBgRmx2OiBJbnZhbGlkIEgyNjQgUFBTIGNvdW50OiAke3Bwc0NvdW50fWApO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgb2Zmc2V0Kys7XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwcHNDb3VudDsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgbGVuID0gdi5nZXRVaW50MTYob2Zmc2V0LCAhbGUpOyAvLyBwaWN0dXJlUGFyYW1ldGVyU2V0TGVuZ3RoXG4gICAgICAgICAgICBvZmZzZXQgKz0gMjtcblxuICAgICAgICAgICAgaWYgKGxlbiA9PT0gMCkge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBwcHMgaXMgdXNlbGVzcyBmb3IgZXh0cmFjdGluZyB2aWRlbyBpbmZvcm1hdGlvblxuICAgICAgICAgICAgb2Zmc2V0ICs9IGxlbjtcbiAgICAgICAgfVxuXG4gICAgICAgIG1ldGEuYXZjYyA9IG5ldyBVaW50OEFycmF5KGRhdGFTaXplKTtcbiAgICAgICAgbWV0YS5hdmNjLnNldChuZXcgVWludDhBcnJheShhcnJheUJ1ZmZlciwgZGF0YU9mZnNldCwgZGF0YVNpemUpLCAwKTtcbiAgICAgICAgY29uc29sZS5sb2codGhpcy5UQUcsICdQYXJzZWQgQVZDRGVjb2RlckNvbmZpZ3VyYXRpb25SZWNvcmQnKTtcblxuICAgICAgICBpZiAodGhpcy5faXNJbml0aWFsTWV0YWRhdGFEaXNwYXRjaGVkKCkpIHtcbiAgICAgICAgICAgIC8vIGZsdXNoIHBhcnNlZCBmcmFtZXNcbiAgICAgICAgICAgIGlmICh0aGlzLl9kaXNwYXRjaCAmJiAodGhpcy5fYXVkaW9UcmFjay5sZW5ndGggfHwgdGhpcy5fdmlkZW9UcmFjay5sZW5ndGgpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fb25EYXRhQXZhaWxhYmxlKHRoaXMuX2F1ZGlvVHJhY2ssIHRoaXMuX3ZpZGVvVHJhY2spO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fdmlkZW9Jbml0aWFsTWV0YWRhdGFEaXNwYXRjaGVkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICAvLyBub3RpZnkgbmV3IG1ldGFkYXRhXG4gICAgICAgIHRoaXMuX2Rpc3BhdGNoID0gZmFsc2U7XG4gICAgICAgIC8vIGlmICh0aGlzLl9vblRyYWNrTWV0YWRhdGEpIHtcbiAgICAgICAgLy8gICAgIHRoaXMuX29uVHJhY2tNZXRhZGF0YS5jYWxsKG51bGwsIG1ldGEpO1xuICAgICAgICAvLyB9XG5cbiAgICAgICAgdGhpcy5fb25UcmFja01ldGFkYXRhKCd2aWRlbycsIG1ldGEpO1xuICAgIH1cblxuICAgIHRpbWVzdGFtcEJhc2UoaSkge1xuICAgICAgICB0aGlzLl90aW1lc3RhbXBCYXNlID0gaTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiDmma7pgJrnmoRBVkMg54mH5q61XG4gICAgICovXG4gICAgX3BhcnNlQVZDVmlkZW9EYXRhKGFycmF5QnVmZmVyLCBkYXRhT2Zmc2V0LCBkYXRhU2l6ZSwgdGFnVGltZXN0YW1wLCB0YWdQb3NpdGlvbiwgZnJhbWVUeXBlLCBjdHMpIHtcblxuXG4gICAgICAgIGxldCBsZSA9IHRoaXMuX2xpdHRsZUVuZGlhbjtcbiAgICAgICAgbGV0IHYgPSBuZXcgRGF0YVZpZXcoYXJyYXlCdWZmZXIsIGRhdGFPZmZzZXQsIGRhdGFTaXplKTtcblxuICAgICAgICBsZXQgdW5pdHMgPSBbXSxcbiAgICAgICAgICAgIGxlbmd0aCA9IDA7XG5cbiAgICAgICAgbGV0IG9mZnNldCA9IDA7XG4gICAgICAgIGNvbnN0IGxlbmd0aFNpemUgPSB0aGlzLl9uYWx1TGVuZ3RoU2l6ZTtcbiAgICAgICAgbGV0IGR0cyA9IHRoaXMuX3RpbWVzdGFtcEJhc2UgKyB0YWdUaW1lc3RhbXA7XG4gICAgICAgIGxldCBrZXlmcmFtZSA9IChmcmFtZVR5cGUgPT09IDEpOyAvLyBmcm9tIEZMViBGcmFtZSBUeXBlIGNvbnN0YW50c1xuXG4gICAgICAgIHdoaWxlIChvZmZzZXQgPCBkYXRhU2l6ZSkge1xuICAgICAgICAgICAgaWYgKG9mZnNldCArIDQgPj0gZGF0YVNpemUpIHtcbiAgICAgICAgICAgICAgICBMb2cudyh0aGlzLlRBRywgYE1hbGZvcm1lZCBOYWx1IG5lYXIgdGltZXN0YW1wICR7ZHRzfSwgb2Zmc2V0ID0gJHtvZmZzZXR9LCBkYXRhU2l6ZSA9ICR7ZGF0YVNpemV9YCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7IC8vIGRhdGEgbm90IGVub3VnaCBmb3IgbmV4dCBOYWx1XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBOYWx1IHdpdGggbGVuZ3RoLWhlYWRlciAoQVZDMSlcbiAgICAgICAgICAgIGxldCBuYWx1U2l6ZSA9IHYuZ2V0VWludDMyKG9mZnNldCwgIWxlKTsgLy8gQmlnLUVuZGlhbiByZWFkXG4gICAgICAgICAgICBpZiAobGVuZ3RoU2l6ZSA9PT0gMykge1xuICAgICAgICAgICAgICAgIG5hbHVTaXplID4+Pj0gODtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChuYWx1U2l6ZSA+IGRhdGFTaXplIC0gbGVuZ3RoU2l6ZSkge1xuICAgICAgICAgICAgICAgIExvZy53KHRoaXMuVEFHLCBgTWFsZm9ybWVkIE5hbHVzIG5lYXIgdGltZXN0YW1wICR7ZHRzfSwgTmFsdVNpemUgPiBEYXRhU2l6ZSFgKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGxldCB1bml0VHlwZSA9IHYuZ2V0VWludDgob2Zmc2V0ICsgbGVuZ3RoU2l6ZSkgJiAweDFGO1xuXG4gICAgICAgICAgICBpZiAodW5pdFR5cGUgPT09IDUpIHsgLy8gSURSXG4gICAgICAgICAgICAgICAga2V5ZnJhbWUgPSB0cnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBsZXQgZGF0YSA9IG5ldyBVaW50OEFycmF5KGFycmF5QnVmZmVyLCBkYXRhT2Zmc2V0ICsgb2Zmc2V0LCBsZW5ndGhTaXplICsgbmFsdVNpemUpO1xuICAgICAgICAgICAgbGV0IHVuaXQgPSB7IHR5cGU6IHVuaXRUeXBlLCBkYXRhOiBkYXRhIH07XG4gICAgICAgICAgICB1bml0cy5wdXNoKHVuaXQpO1xuICAgICAgICAgICAgbGVuZ3RoICs9IGRhdGEuYnl0ZUxlbmd0aDtcblxuICAgICAgICAgICAgb2Zmc2V0ICs9IGxlbmd0aFNpemUgKyBuYWx1U2l6ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh1bml0cy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGxldCB0cmFjayA9IHRoaXMuX3ZpZGVvVHJhY2s7XG4gICAgICAgICAgICBsZXQgYXZjU2FtcGxlID0ge1xuICAgICAgICAgICAgICAgIHVuaXRzOiB1bml0cyxcbiAgICAgICAgICAgICAgICBsZW5ndGg6IGxlbmd0aCxcbiAgICAgICAgICAgICAgICBpc0tleWZyYW1lOiBrZXlmcmFtZSxcbiAgICAgICAgICAgICAgICBkdHM6IGR0cyxcbiAgICAgICAgICAgICAgICBjdHM6IGN0cyxcbiAgICAgICAgICAgICAgICBwdHM6IChkdHMgKyBjdHMpXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKGtleWZyYW1lKSB7XG4gICAgICAgICAgICAgICAgYXZjU2FtcGxlLmZpbGVwb3NpdGlvbiA9IHRhZ1Bvc2l0aW9uO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdHJhY2suc2FtcGxlcy5wdXNoKGF2Y1NhbXBsZSk7XG4gICAgICAgICAgICB0cmFjay5sZW5ndGggKz0gbGVuZ3RoO1xuICAgICAgICB9XG4gICAgfVxuICAgIF9wYXJzZUF1ZGlvRGF0YShhcnJheUJ1ZmZlciwgZGF0YU9mZnNldCwgZGF0YVNpemUsIHRhZ1RpbWVzdGFtcCkge1xuICAgICAgICBpZiAodGFnVGltZXN0YW1wID09IHRoaXMuX3RpbWVzdGFtcEJhc2UgJiYgdGhpcy5fdGltZXN0YW1wQmFzZSAhPSAwKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyh0YWdUaW1lc3RhbXAsIHRoaXMuX3RpbWVzdGFtcEJhc2UsICflpK3lr7/llabov5nkuKrop4bpopHkuI3mmK/ku44w5byA5aeLJyk7XG4gICAgICAgICAgICAvLyB0aW1lc3RhbXBCYXNlKDApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGRhdGFTaXplIDw9IDEpIHtcbiAgICAgICAgICAgIExvZy53KHRoaXMuVEFHLCAnRmx2OiBJbnZhbGlkIGF1ZGlvIHBhY2tldCwgbWlzc2luZyBTb3VuZERhdGEgcGF5bG9hZCEnKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBtZXRhID0gdGhpcy5fYXVkaW9NZXRhZGF0YTtcbiAgICAgICAgbGV0IHRyYWNrID0gdGhpcy5fYXVkaW9UcmFjaztcblxuICAgICAgICBpZiAoIW1ldGEgfHwgIW1ldGEuY29kZWMpIHtcbiAgICAgICAgICAgIC8vIGluaXRpYWwgbWV0YWRhdGFcbiAgICAgICAgICAgIG1ldGEgPSB0aGlzLl9hdWRpb01ldGFkYXRhID0ge307XG4gICAgICAgICAgICBtZXRhLnR5cGUgPSAnYXVkaW8nO1xuICAgICAgICAgICAgbWV0YS5pZCA9IHRyYWNrLmlkO1xuICAgICAgICAgICAgbWV0YS50aW1lc2NhbGUgPSB0aGlzLl90aW1lc2NhbGU7XG4gICAgICAgICAgICBtZXRhLmR1cmF0aW9uID0gdGhpcy5fZHVyYXRpb247XG5cbiAgICAgICAgICAgIGxldCBsZSA9IHRoaXMuX2xpdHRsZUVuZGlhbjtcbiAgICAgICAgICAgIGxldCB2ID0gbmV3IERhdGFWaWV3KGFycmF5QnVmZmVyLCBkYXRhT2Zmc2V0LCBkYXRhU2l6ZSk7XG5cbiAgICAgICAgICAgIGxldCBzb3VuZFNwZWMgPSB2LmdldFVpbnQ4KDApO1xuXG4gICAgICAgICAgICBsZXQgc291bmRGb3JtYXQgPSBzb3VuZFNwZWMgPj4+IDQ7XG4gICAgICAgICAgICBpZiAoc291bmRGb3JtYXQgIT09IDEwKSB7IC8vIEFBQ1xuICAgICAgICAgICAgICAgIC8vIFRPRE86IHN1cHBvcnQgTVAzIGF1ZGlvIGNvZGVjXG4gICAgICAgICAgICAgICAgdGhpcy5fb25FcnJvcihEZW11eEVycm9ycy5DT0RFQ19VTlNVUFBPUlRFRCwgJ0ZsdjogVW5zdXBwb3J0ZWQgYXVkaW8gY29kZWMgaWR4OiAnICsgc291bmRGb3JtYXQpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbGV0IHNvdW5kUmF0ZSA9IDA7XG4gICAgICAgICAgICBsZXQgc291bmRSYXRlSW5kZXggPSAoc291bmRTcGVjICYgMTIpID4+PiAyO1xuXG4gICAgICAgICAgICBsZXQgc291bmRSYXRlVGFibGUgPSBbNTUwMCwgMTEwMjUsIDIyMDUwLCA0NDEwMCwgNDgwMDBdO1xuXG4gICAgICAgICAgICBpZiAoc291bmRSYXRlSW5kZXggPCBzb3VuZFJhdGVUYWJsZS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBzb3VuZFJhdGUgPSBzb3VuZFJhdGVUYWJsZVtzb3VuZFJhdGVJbmRleF07XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuX29uRXJyb3IoRGVtdXhFcnJvcnMuRk9STUFUX0VSUk9SLCAnRmx2OiBJbnZhbGlkIGF1ZGlvIHNhbXBsZSByYXRlIGlkeDogJyArIHNvdW5kUmF0ZUluZGV4KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGxldCBzb3VuZFNpemUgPSAoc291bmRTcGVjICYgMikgPj4+IDE7IC8vIHVudXNlZFxuICAgICAgICAgICAgbGV0IHNvdW5kVHlwZSA9IChzb3VuZFNwZWMgJiAxKTtcblxuICAgICAgICAgICAgbWV0YS5hdWRpb1NhbXBsZVJhdGUgPSBzb3VuZFJhdGU7XG4gICAgICAgICAgICBtZXRhLmNoYW5uZWxDb3VudCA9IChzb3VuZFR5cGUgPT09IDAgPyAxIDogMik7XG4gICAgICAgICAgICBtZXRhLnJlZlNhbXBsZUR1cmF0aW9uID0gTWF0aC5mbG9vcigxMDI0IC8gbWV0YS5hdWRpb1NhbXBsZVJhdGUgKiBtZXRhLnRpbWVzY2FsZSk7XG4gICAgICAgICAgICBtZXRhLmNvZGVjID0gJ21wNGEuNDAuNSc7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgYWFjRGF0YSA9IHRoaXMuX3BhcnNlQUFDQXVkaW9EYXRhKGFycmF5QnVmZmVyLCBkYXRhT2Zmc2V0ICsgMSwgZGF0YVNpemUgLSAxKTtcbiAgICAgICAgaWYgKGFhY0RhdGEgPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoYWFjRGF0YS5wYWNrZXRUeXBlID09PSAwKSB7IC8vIEFBQyBzZXF1ZW5jZSBoZWFkZXIgKEF1ZGlvU3BlY2lmaWNDb25maWcpXG4gICAgICAgICAgICBpZiAobWV0YS5jb25maWcpIHtcbiAgICAgICAgICAgICAgICBMb2cudyh0aGlzLlRBRywgJ0ZvdW5kIGFub3RoZXIgQXVkaW9TcGVjaWZpY0NvbmZpZyEnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBtaXNjID0gYWFjRGF0YS5kYXRhO1xuICAgICAgICAgICAgbWV0YS5hdWRpb1NhbXBsZVJhdGUgPSBtaXNjLnNhbXBsaW5nUmF0ZTtcbiAgICAgICAgICAgIG1ldGEuY2hhbm5lbENvdW50ID0gbWlzYy5jaGFubmVsQ291bnQ7XG4gICAgICAgICAgICBtZXRhLmNvZGVjID0gbWlzYy5jb2RlYztcbiAgICAgICAgICAgIG1ldGEuY29uZmlnID0gbWlzYy5jb25maWc7XG4gICAgICAgICAgICAvLyBUaGUgZGVjb2RlIHJlc3VsdCBvZiBhbiBhYWMgc2FtcGxlIGlzIDEwMjQgUENNIHNhbXBsZXNcbiAgICAgICAgICAgIG1ldGEucmVmU2FtcGxlRHVyYXRpb24gPSBNYXRoLmZsb29yKDEwMjQgLyBtZXRhLmF1ZGlvU2FtcGxlUmF0ZSAqIG1ldGEudGltZXNjYWxlKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMuVEFHLCAnUGFyc2VkIEF1ZGlvU3BlY2lmaWNDb25maWcnKTtcblxuICAgICAgICAgICAgaWYgKHRoaXMuX2lzSW5pdGlhbE1ldGFkYXRhRGlzcGF0Y2hlZCgpKSB7XG4gICAgICAgICAgICAgICAgLy8gTm9uLWluaXRpYWwgbWV0YWRhdGEsIGZvcmNlIGRpc3BhdGNoIChvciBmbHVzaCkgcGFyc2VkIGZyYW1lcyB0byByZW11eGVyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX2Rpc3BhdGNoICYmICh0aGlzLl9hdWRpb1RyYWNrLmxlbmd0aCB8fCB0aGlzLl92aWRlb1RyYWNrLmxlbmd0aCkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fb25EYXRhQXZhaWxhYmxlKHRoaXMuX2F1ZGlvVHJhY2ssIHRoaXMuX3ZpZGVvVHJhY2spO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fYXVkaW9Jbml0aWFsTWV0YWRhdGFEaXNwYXRjaGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIHRoZW4gbm90aWZ5IG5ldyBtZXRhZGF0YVxuICAgICAgICAgICAgdGhpcy5fZGlzcGF0Y2ggPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuX29uVHJhY2tNZXRhZGF0YSgnYXVkaW8nLCBtZXRhKTtcblxuICAgICAgICAgICAgbGV0IG1pID0gdGhpcy5fbWVkaWFJbmZvO1xuICAgICAgICAgICAgbWkuYXVkaW9Db2RlYyA9ICdtcDRhLjQwLicgKyBtaXNjLm9yaWdpbmFsQXVkaW9PYmplY3RUeXBlO1xuICAgICAgICAgICAgbWkuYXVkaW9TYW1wbGVSYXRlID0gbWV0YS5hdWRpb1NhbXBsZVJhdGU7XG4gICAgICAgICAgICBtaS5hdWRpb0NoYW5uZWxDb3VudCA9IG1ldGEuY2hhbm5lbENvdW50O1xuICAgICAgICAgICAgaWYgKG1pLmhhc1ZpZGVvKSB7XG4gICAgICAgICAgICAgICAgaWYgKG1pLnZpZGVvQ29kZWMgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBtaS5taW1lVHlwZSA9ICd2aWRlby94LWZsdjsgY29kZWNzPVwiJyArIG1pLnZpZGVvQ29kZWMgKyAnLCcgKyBtaS5hdWRpb0NvZGVjICsgJ1wiJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIG1pLm1pbWVUeXBlID0gJ3ZpZGVvL3gtZmx2OyBjb2RlY3M9XCInICsgbWkuYXVkaW9Db2RlYyArICdcIic7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobWkuaXNDb21wbGV0ZSgpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fb25NZWRpYUluZm8obWkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9IGVsc2UgaWYgKGFhY0RhdGEucGFja2V0VHlwZSA9PT0gMSkgeyAvLyBBQUMgcmF3IGZyYW1lIGRhdGFcbiAgICAgICAgICAgIGxldCBkdHMgPSB0aGlzLl90aW1lc3RhbXBCYXNlICsgdGFnVGltZXN0YW1wO1xuICAgICAgICAgICAgbGV0IGFhY1NhbXBsZSA9IHsgdW5pdDogYWFjRGF0YS5kYXRhLCBkdHM6IGR0cywgcHRzOiBkdHMgfTtcbiAgICAgICAgICAgIHRyYWNrLnNhbXBsZXMucHVzaChhYWNTYW1wbGUpO1xuICAgICAgICAgICAgdHJhY2subGVuZ3RoICs9IGFhY0RhdGEuZGF0YS5sZW5ndGg7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLlRBRywgYEZsdjogVW5zdXBwb3J0ZWQgQUFDIGRhdGEgdHlwZSAke2FhY0RhdGEucGFja2V0VHlwZX1gKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIF9wYXJzZUFBQ0F1ZGlvRGF0YShhcnJheUJ1ZmZlciwgZGF0YU9mZnNldCwgZGF0YVNpemUpIHtcbiAgICAgICAgaWYgKGRhdGFTaXplIDw9IDEpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMuVEFHLCAnRmx2OiBJbnZhbGlkIEFBQyBwYWNrZXQsIG1pc3NpbmcgQUFDUGFja2V0VHlwZSBvci9hbmQgRGF0YSEnKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCByZXN1bHQgPSB7fTtcbiAgICAgICAgbGV0IGFycmF5ID0gbmV3IFVpbnQ4QXJyYXkoYXJyYXlCdWZmZXIsIGRhdGFPZmZzZXQsIGRhdGFTaXplKTtcblxuICAgICAgICByZXN1bHQucGFja2V0VHlwZSA9IGFycmF5WzBdO1xuXG4gICAgICAgIGlmIChhcnJheVswXSA9PT0gMCkge1xuICAgICAgICAgICAgcmVzdWx0LmRhdGEgPSB0aGlzLl9wYXJzZUFBQ0F1ZGlvU3BlY2lmaWNDb25maWcoYXJyYXlCdWZmZXIsIGRhdGFPZmZzZXQgKyAxLCBkYXRhU2l6ZSAtIDEpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVzdWx0LmRhdGEgPSBhcnJheS5zdWJhcnJheSgxKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgX3BhcnNlQUFDQXVkaW9TcGVjaWZpY0NvbmZpZyhhcnJheUJ1ZmZlciwgZGF0YU9mZnNldCwgZGF0YVNpemUpIHtcbiAgICAgICAgbGV0IGFycmF5ID0gbmV3IFVpbnQ4QXJyYXkoYXJyYXlCdWZmZXIsIGRhdGFPZmZzZXQsIGRhdGFTaXplKTtcbiAgICAgICAgbGV0IGNvbmZpZyA9IG51bGw7XG5cbiAgICAgICAgbGV0IG1wZWdTYW1wbGluZ1JhdGVzID0gW1xuICAgICAgICAgICAgOTYwMDAsIDg4MjAwLCA2NDAwMCwgNDgwMDAsIDQ0MTAwLCAzMjAwMCxcbiAgICAgICAgICAgIDI0MDAwLCAyMjA1MCwgMTYwMDAsIDEyMDAwLCAxMTAyNSwgODAwMCwgNzM1MFxuICAgICAgICBdO1xuXG4gICAgICAgIC8qIEF1ZGlvIE9iamVjdCBUeXBlOlxuICAgICAgICAgICAwOiBOdWxsXG4gICAgICAgICAgIDE6IEFBQyBNYWluXG4gICAgICAgICAgIDI6IEFBQyBMQ1xuICAgICAgICAgICAzOiBBQUMgU1NSIChTY2FsYWJsZSBTYW1wbGUgUmF0ZSlcbiAgICAgICAgICAgNDogQUFDIExUUCAoTG9uZyBUZXJtIFByZWRpY3Rpb24pXG4gICAgICAgICAgIDU6IEhFLUFBQyAvIFNCUiAoU3BlY3RyYWwgQmFuZCBSZXBsaWNhdGlvbilcbiAgICAgICAgICAgNjogQUFDIFNjYWxhYmxlXG4gICAgICAgICovXG5cbiAgICAgICAgbGV0IGF1ZGlvT2JqZWN0VHlwZSA9IDA7XG4gICAgICAgIGxldCBvcmlnaW5hbEF1ZGlvT2JqZWN0VHlwZSA9IDA7XG4gICAgICAgIGxldCBhdWRpb0V4dGVuc2lvbk9iamVjdFR5cGUgPSBudWxsO1xuICAgICAgICBsZXQgc2FtcGxpbmdJbmRleCA9IDA7XG4gICAgICAgIGxldCBleHRlbnNpb25TYW1wbGluZ0luZGV4ID0gbnVsbDtcbiAgICAgICAgLy8gZGVidWdnZXI7XG4gICAgICAgIC8vIDUgYml0c1xuICAgICAgICBhdWRpb09iamVjdFR5cGUgPSBvcmlnaW5hbEF1ZGlvT2JqZWN0VHlwZSA9IGFycmF5WzBdID4+PiAzO1xuICAgICAgICAvLyA0IGJpdHNcbiAgICAgICAgc2FtcGxpbmdJbmRleCA9ICgoYXJyYXlbMF0gJiAweDA3KSA8PCAxKSB8IChhcnJheVsxXSA+Pj4gNyk7XG4gICAgICAgIGlmIChzYW1wbGluZ0luZGV4IDwgMCB8fCBzYW1wbGluZ0luZGV4ID49IG1wZWdTYW1wbGluZ1JhdGVzLmxlbmd0aCkge1xuICAgICAgICAgICAgdGhpcy5fb25FcnJvcihEZW11eEVycm9ycy5GT1JNQVRfRVJST1IsICdGbHY6IEFBQyBpbnZhbGlkIHNhbXBsaW5nIGZyZXF1ZW5jeSBpbmRleCEnKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBzYW1wbGluZ0ZyZXF1ZW5jZSA9IG1wZWdTYW1wbGluZ1JhdGVzW3NhbXBsaW5nSW5kZXhdO1xuXG4gICAgICAgIC8vIDQgYml0c1xuICAgICAgICBsZXQgY2hhbm5lbENvbmZpZyA9IChhcnJheVsxXSAmIDB4NzgpID4+PiAzO1xuICAgICAgICBpZiAoY2hhbm5lbENvbmZpZyA8IDAgfHwgY2hhbm5lbENvbmZpZyA+PSA4KSB7XG4gICAgICAgICAgICB0aGlzLl9vbkVycm9yKERlbXV4RXJyb3JzLkZPUk1BVF9FUlJPUiwgJ0ZsdjogQUFDIGludmFsaWQgY2hhbm5lbCBjb25maWd1cmF0aW9uJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoYXVkaW9PYmplY3RUeXBlID09PSA1KSB7IC8vIEhFLUFBQz9cbiAgICAgICAgICAgIC8vIDQgYml0c1xuICAgICAgICAgICAgZXh0ZW5zaW9uU2FtcGxpbmdJbmRleCA9ICgoYXJyYXlbMV0gJiAweDA3KSA8PCAxKSB8IChhcnJheVsyXSA+Pj4gNyk7XG4gICAgICAgICAgICAvLyA1IGJpdHNcbiAgICAgICAgICAgIGF1ZGlvRXh0ZW5zaW9uT2JqZWN0VHlwZSA9IChhcnJheVsyXSAmIDB4N0MpID4+PiAyO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gd29ya2Fyb3VuZHMgZm9yIHZhcmlvdXMgYnJvd3NlcnNcbiAgICAgICAgbGV0IHVzZXJBZ2VudCA9IHNlbGYubmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpO1xuXG4gICAgICAgIGlmICh1c2VyQWdlbnQuaW5kZXhPZignZmlyZWZveCcpICE9PSAtMSkge1xuICAgICAgICAgICAgLy8gZmlyZWZveDogdXNlIFNCUiAoSEUtQUFDKSBpZiBmcmVxIGxlc3MgdGhhbiAyNGtIelxuICAgICAgICAgICAgaWYgKHNhbXBsaW5nSW5kZXggPj0gNikge1xuICAgICAgICAgICAgICAgIGF1ZGlvT2JqZWN0VHlwZSA9IDU7XG4gICAgICAgICAgICAgICAgY29uZmlnID0gbmV3IEFycmF5KDQpO1xuICAgICAgICAgICAgICAgIGV4dGVuc2lvblNhbXBsaW5nSW5kZXggPSBzYW1wbGluZ0luZGV4IC0gMztcbiAgICAgICAgICAgIH0gZWxzZSB7IC8vIHVzZSBMQy1BQUNcbiAgICAgICAgICAgICAgICBhdWRpb09iamVjdFR5cGUgPSAyO1xuICAgICAgICAgICAgICAgIGNvbmZpZyA9IG5ldyBBcnJheSgyKTtcbiAgICAgICAgICAgICAgICBleHRlbnNpb25TYW1wbGluZ0luZGV4ID0gc2FtcGxpbmdJbmRleDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmICh1c2VyQWdlbnQuaW5kZXhPZignYW5kcm9pZCcpICE9PSAtMSkge1xuICAgICAgICAgICAgLy8gYW5kcm9pZDogYWx3YXlzIHVzZSBMQy1BQUNcbiAgICAgICAgICAgIGF1ZGlvT2JqZWN0VHlwZSA9IDI7XG4gICAgICAgICAgICBjb25maWcgPSBuZXcgQXJyYXkoMik7XG4gICAgICAgICAgICBleHRlbnNpb25TYW1wbGluZ0luZGV4ID0gc2FtcGxpbmdJbmRleDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIGZvciBvdGhlciBicm93c2VycywgZS5nLiBjaHJvbWUuLi5cbiAgICAgICAgICAgIC8vIEFsd2F5cyB1c2UgSEUtQUFDIHRvIG1ha2UgaXQgZWFzaWVyIHRvIHN3aXRjaCBhYWMgY29kZWMgcHJvZmlsZVxuICAgICAgICAgICAgYXVkaW9PYmplY3RUeXBlID0gNTtcbiAgICAgICAgICAgIGV4dGVuc2lvblNhbXBsaW5nSW5kZXggPSBzYW1wbGluZ0luZGV4O1xuICAgICAgICAgICAgY29uZmlnID0gbmV3IEFycmF5KDQpO1xuXG4gICAgICAgICAgICBpZiAoc2FtcGxpbmdJbmRleCA+PSA2KSB7XG4gICAgICAgICAgICAgICAgZXh0ZW5zaW9uU2FtcGxpbmdJbmRleCA9IHNhbXBsaW5nSW5kZXggLSAzO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChjaGFubmVsQ29uZmlnID09PSAxKSB7IC8vIE1vbm8gY2hhbm5lbFxuICAgICAgICAgICAgICAgIGF1ZGlvT2JqZWN0VHlwZSA9IDI7XG4gICAgICAgICAgICAgICAgY29uZmlnID0gbmV3IEFycmF5KDIpO1xuICAgICAgICAgICAgICAgIGV4dGVuc2lvblNhbXBsaW5nSW5kZXggPSBzYW1wbGluZ0luZGV4O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgY29uZmlnWzBdID0gYXVkaW9PYmplY3RUeXBlIDw8IDM7XG4gICAgICAgIGNvbmZpZ1swXSB8PSAoc2FtcGxpbmdJbmRleCAmIDB4MEYpID4+PiAxO1xuICAgICAgICBjb25maWdbMV0gPSAoc2FtcGxpbmdJbmRleCAmIDB4MEYpIDw8IDc7XG4gICAgICAgIGNvbmZpZ1sxXSB8PSAoY2hhbm5lbENvbmZpZyAmIDB4MEYpIDw8IDM7XG4gICAgICAgIGlmIChhdWRpb09iamVjdFR5cGUgPT09IDUpIHtcbiAgICAgICAgICAgIGNvbmZpZ1sxXSB8PSAoKGV4dGVuc2lvblNhbXBsaW5nSW5kZXggJiAweDBGKSA+Pj4gMSk7XG4gICAgICAgICAgICBjb25maWdbMl0gPSAoZXh0ZW5zaW9uU2FtcGxpbmdJbmRleCAmIDB4MDEpIDw8IDc7XG4gICAgICAgICAgICAvLyBleHRlbmRlZCBhdWRpbyBvYmplY3QgdHlwZTogZm9yY2UgdG8gMiAoTEMtQUFDKVxuICAgICAgICAgICAgY29uZmlnWzJdIHw9ICgyIDw8IDIpO1xuICAgICAgICAgICAgY29uZmlnWzNdID0gMDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBjb25maWc6IGNvbmZpZyxcbiAgICAgICAgICAgIHNhbXBsaW5nUmF0ZTogc2FtcGxpbmdGcmVxdWVuY2UsXG4gICAgICAgICAgICBjaGFubmVsQ291bnQ6IGNoYW5uZWxDb25maWcsXG4gICAgICAgICAgICBjb2RlYzogJ21wNGEuNDAuJyArIGF1ZGlvT2JqZWN0VHlwZSxcbiAgICAgICAgICAgIG9yaWdpbmFsQXVkaW9PYmplY3RUeXBlOiBvcmlnaW5hbEF1ZGlvT2JqZWN0VHlwZVxuICAgICAgICB9O1xuICAgIH1cbiAgICBfaXNJbml0aWFsTWV0YWRhdGFEaXNwYXRjaGVkKCkge1xuICAgICAgICBpZiAodGhpcy5faGFzQXVkaW8gJiYgdGhpcy5faGFzVmlkZW8pIHsgLy8gYm90aCBhdWRpbyAmIHZpZGVvXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fYXVkaW9Jbml0aWFsTWV0YWRhdGFEaXNwYXRjaGVkICYmIHRoaXMuX3ZpZGVvSW5pdGlhbE1ldGFkYXRhRGlzcGF0Y2hlZDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5faGFzQXVkaW8gJiYgIXRoaXMuX2hhc1ZpZGVvKSB7IC8vIGF1ZGlvIG9ubHlcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9hdWRpb0luaXRpYWxNZXRhZGF0YURpc3BhdGNoZWQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLl9oYXNBdWRpbyAmJiB0aGlzLl9oYXNWaWRlbykgeyAvLyB2aWRlbyBvbmx5XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fdmlkZW9Jbml0aWFsTWV0YWRhdGFEaXNwYXRjaGVkO1xuICAgICAgICB9XG4gICAgfVxufVxuZXhwb3J0IGRlZmF1bHQgbmV3IHRhZ0RlbXV4KCk7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vanMvZmx2L3RhZ2RlbXV4LmpzIl0sInNvdXJjZVJvb3QiOiIifQ==");

/***/ }),
/* 1 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * 代码借鉴了flv.js\n * 增加了自己的注释和写法\n */\nvar MP4 = function () {\n    function MP4() {\n        _classCallCheck(this, MP4);\n    }\n\n    _createClass(MP4, null, [{\n        key: 'init',\n        value: function init() {\n            MP4.types = {\n                avc1: [],\n                avcC: [],\n                btrt: [],\n                dinf: [],\n                dref: [],\n                esds: [],\n                ftyp: [],\n                hdlr: [],\n                mdat: [],\n                mdhd: [],\n                mdia: [],\n                mfhd: [],\n                minf: [],\n                moof: [],\n                moov: [],\n                mp4a: [],\n                mvex: [],\n                mvhd: [],\n                sdtp: [],\n                stbl: [],\n                stco: [],\n                stsc: [],\n                stsd: [],\n                stsz: [],\n                stts: [],\n                tfdt: [],\n                tfhd: [],\n                traf: [],\n                trak: [],\n                trun: [],\n                trex: [],\n                tkhd: [],\n                vmhd: [],\n                smhd: []\n            };\n\n            for (var name in MP4.types) {\n                if (MP4.types.hasOwnProperty(name)) {\n                    MP4.types[name] = [name.charCodeAt(0), name.charCodeAt(1), name.charCodeAt(2), name.charCodeAt(3)];\n                }\n            }\n\n            var constants = MP4.constants = {};\n\n            constants.FTYP = new Uint8Array([0x69, 0x73, 0x6F, 0x6D, // major_brand: isom\t\tisom\tMP4  Base Media v1 [IS0 14496-12:2003]\tISO\tYES\tvideo/mp4\n            0x0, 0x0, 0x0, 0x1, // minor_version: 0x01\n            0x69, 0x73, 0x6F, 0x6D, // isom\n            0x61, 0x76, 0x63, 0x31 // avc1\n            ]);\n\n            constants.STSD_PREFIX = new Uint8Array([0x00, 0x00, 0x00, 0x00, // version(0) + flags  version字段后会有一个entry count字段\n            0x00, 0x00, 0x00, 0x01 // entry_count\t根据entry的个数，每个entry会有type信息，如“vide”、“sund”等，根据type不同sample description会提供不同的信息，例如对于video track，会有“VisualSampleEntry”类型信息，对于audio track会有“AudioSampleEntry”类型信息。\n            ]);\n\n            constants.STTS = new Uint8Array([0x00, 0x00, 0x00, 0x00, // version(0) + flags\n            0x00, 0x00, 0x00, 0x00 // entry_count     0个索引\n            ]);\n\n            constants.STSC = constants.STCO = constants.STTS;\n\n            constants.STSZ = new Uint8Array([0x00, 0x00, 0x00, 0x00, // version(0) + flags\n            0x00, 0x00, 0x00, 0x00, // sample_size\n            0x00, 0x00, 0x00, 0x00 // sample_count\n            ]);\n\n            constants.HDLR_VIDEO = new Uint8Array([0x00, 0x00, 0x00, 0x00, // version(0) + flags\n            0x00, 0x00, 0x00, 0x00, // pre_defined\n            0x76, 0x69, 0x64, 0x65, // handler_type: 'vide' 在media box中，该值为4个字符\t\t“vide”— video track\n            0x00, 0x00, 0x00, 0x00, // reserved: 3 * 4 bytes\n            0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, //保留位\n            0x56, 0x69, 0x64, 0x65, 0x6F, 0x48, 0x61, 0x6E, 0x64, 0x6C, 0x65, 0x72, 0x00 // name: VideoHandler 长度不定\t\ttrack type name，以‘\\0’结尾的字符串\n            ]);\n\n            constants.HDLR_AUDIO = new Uint8Array([0x00, 0x00, 0x00, 0x00, // version(0) + flags\n            0x00, 0x00, 0x00, 0x00, // pre_defined\n            0x73, 0x6F, 0x75, 0x6E, // handler_type: 'soun'在media box中，该值为4个字符\t\t“soun”— audio track\n            0x00, 0x00, 0x00, 0x00, // reserved: 3 * 4 bytes\n            0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, //保留位\n            0x53, 0x6F, 0x75, 0x6E, 0x64, 0x48, 0x61, 0x6E, 0x64, 0x6C, 0x65, 0x72, 0x00 // name: SoundHandler 长度不定\t\ttrack type name，以‘\\0’结尾的字符串\n            ]);\n\n            constants.DREF = new Uint8Array([0x00, 0x00, 0x00, 0x00, // version(0) + flags\n            0x00, 0x00, 0x00, 0x01, // entry_count 1个url\t\n            //url\tbox开始\n            0x00, 0x00, 0x00, 0x0C, // entry_size\n            0x75, 0x72, 0x6C, 0x20, // type 'url '\n            0x00, 0x00, 0x00, 0x01 // version(0) + flags 当“url”或“urn”的box flag为1时，字符串均为空。\n            ]);\n\n            // Sound media header\n            constants.SMHD = new Uint8Array([0x00, 0x00, 0x00, 0x00, // version(0) + flags\tbox版本，0或1，一般为0。\n            0x00, 0x00, 0x00, 0x00 // balance(2) + reserved(2) 立体声平衡，[8.8] 格式值，一般为0，-1.0表示全部左声道，1.0表示全部右声道+2位保留位\n            ]);\n\n            // video media header\n            constants.VMHD = new Uint8Array([0x00, 0x00, 0x00, 0x01, // version(0) + flags\n            0x00, 0x00, // graphicsmode: 2 bytes 视频合成模式，为0时拷贝原始图像，否则与opcolor进行合成   //理论上是4位啊  暂时保留\n            0x00, 0x00, 0x00, 0x00, // opcolor: 3 * 2 bytes ｛red，green，blue｝\n            0x00, 0x00]);\n        }\n\n        /**\n         * 封装box\n         */\n\n    }, {\n        key: 'box',\n        value: function box(type) {\n            var size = 8;\n            var result = null;\n            var datas = Array.prototype.slice.call(arguments, 1);\n            var arrayCount = datas.length;\n\n            for (var i = 0; i < arrayCount; i++) {\n                size += datas[i].byteLength;\n            }\n            //box头部大小\n            result = new Uint8Array(size);\n            result[0] = size >>> 24 & 0xFF; // size\n            result[1] = size >>> 16 & 0xFF;\n            result[2] = size >>> 8 & 0xFF;\n            result[3] = size & 0xFF;\n            //写入box的type\n            result.set(type, 4); // type\n\n            var offset = 8;\n            for (var _i = 0; _i < arrayCount; _i++) {\n                // data body\n                result.set(datas[_i], offset);\n                offset += datas[_i].byteLength;\n            }\n\n            return result;\n        }\n\n        //创建ftyp&moov\n\n    }, {\n        key: 'generateInitSegment',\n        value: function generateInitSegment(meta) {\n            if (meta.constructor != Array) {\n                meta = [meta];\n            }\n            var ftyp = MP4.box(MP4.types.ftyp, MP4.constants.FTYP);\n            var moov = MP4.moov(meta);\n\n            var result = new Uint8Array(ftyp.byteLength + moov.byteLength);\n            result.set(ftyp, 0);\n            result.set(moov, ftyp.byteLength);\n            return result;\n        }\n\n        // Movie metadata box\n\n    }, {\n        key: 'moov',\n        value: function moov(meta) {\n            var mvhd = MP4.mvhd(meta[0].timescale, meta[0].duration); ///moov里面的第一个box\n            var vtrak = MP4.trak(meta[0]);\n            var atrak = void 0;\n            if (meta.length > 1) {\n                atrak = MP4.trak(meta[1]);\n            }\n\n            var mvex = MP4.mvex(meta);\n            if (meta.length > 1) return MP4.box(MP4.types.moov, mvhd, vtrak, atrak, mvex);else return MP4.box(MP4.types.moov, mvhd, vtrak, mvex);\n        }\n\n        // Movie header box\n\n    }, {\n        key: 'mvhd',\n        value: function mvhd(timescale, duration) {\n            return MP4.box(MP4.types.mvhd, new Uint8Array([0x00, 0x00, 0x00, 0x00, // version(0) + flags     1位的box版本+3位flags   box版本，0或1，一般为0。（以下字节数均按version=0）\n            0x00, 0x00, 0x00, 0x00, // creation_time    创建时间  （相对于UTC时间1904-01-01零点的秒数）\n            0x00, 0x00, 0x00, 0x00, // modification_time   修改时间\n            timescale >>> 24 & 0xFF, // timescale: 4 bytes\t\t文件媒体在1秒时间内的刻度值，可以理解为1秒长度\n            timescale >>> 16 & 0xFF, timescale >>> 8 & 0xFF, timescale & 0xFF, duration >>> 24 & 0xFF, // duration: 4 bytes\t该track的时间长度，用duration和time scale值可以计算track时长，比如audio track的time scale = 8000, duration = 560128，时长为70.016，video track的time scale = 600, duration = 42000，时长为70\n            duration >>> 16 & 0xFF, duration >>> 8 & 0xFF, duration & 0xFF, 0x00, 0x01, 0x00, 0x00, // Preferred rate: 1.0   推荐播放速率，高16位和低16位分别为小数点整数部分和小数部分，即[16.16] 格式，该值为1.0（0x00010000）表示正常前向播放\n            0x01, 0x00, 0x00, 0x00, // PreferredVolume(1.0, 2bytes) + reserved(2bytes)\t与rate类似，[8.8] 格式，1.0（0x0100）表示最大音量 \n            0x00, 0x00, 0x00, 0x00, // reserved: 4 + 4 bytes\t保留位\n            0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, // ----begin composition matrix----\n            0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, //视频变换矩阵   线性代数\n            0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x40, 0x00, 0x00, 0x00, // ----end composition matrix----\n            0x00, 0x00, 0x00, 0x00, // ----begin pre_defined 6 * 4 bytes----\n            0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, //pre-defined 保留位\n            0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, // ----end pre_defined 6 * 4 bytes----\n            0xFF, 0xFF, 0xFF, 0xFF // next_track_ID 下一个track使用的id号\n            ]));\n        }\n\n        // Track box\n\n    }, {\n        key: 'trak',\n        value: function trak(meta) {\n            return MP4.box(MP4.types.trak, MP4.tkhd(meta), MP4.mdia(meta));\n        }\n\n        // Track header box\n\n    }, {\n        key: 'tkhd',\n        value: function tkhd(meta) {\n            var trackId = meta.id,\n                duration = meta.duration;\n            var width = meta.presentWidth,\n                height = meta.presentHeight;\n\n            return MP4.box(MP4.types.tkhd, new Uint8Array([0x00, 0x00, 0x00, 0x07, // version(0) + flags 1位版本 box版本，0或1，一般为0。（以下字节数均按version=0）按位或操作结果值，预定义如下：\n            //0x000001 track_enabled，否则该track不被播放；\n            //0x000002 track_in_movie，表示该track在播放中被引用；\n            //0x000004 track_in_preview，表示该track在预览时被引用。\n            //一般该值为7，1+2+4 如果一个媒体所有track均未设置track_in_movie和track_in_preview，将被理解为所有track均设置了这两项；对于hint track，该值为0\n            //hint track  这个特殊的track并不包含媒体数据，而是包含了一些将其他数据track打包成流媒体的指示信息。\n            0x00, 0x00, 0x00, 0x00, // creation_time\t创建时间（相对于UTC时间1904-01-01零点的秒数）\n            0x00, 0x00, 0x00, 0x00, // modification_time\t修改时间\n            trackId >>> 24 & 0xFF, // track_ID: 4 bytes\tid号，不能重复且不能为0\n            trackId >>> 16 & 0xFF, trackId >>> 8 & 0xFF, trackId & 0xFF, 0x00, 0x00, 0x00, 0x00, // reserved: 4 bytes    保留位\n            duration >>> 24 & 0xFF, // duration: 4 bytes  \ttrack的时间长度\n            duration >>> 16 & 0xFF, duration >>> 8 & 0xFF, duration & 0xFF, 0x00, 0x00, 0x00, 0x00, // reserved: 2 * 4 bytes    保留位\n            0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, // layer(2bytes) + alternate_group(2bytes)  视频层，默认为0，值小的在上层.track分组信息，默认为0表示该track未与其他track有群组关系\n            0x00, 0x00, 0x00, 0x00, // volume(2bytes) + reserved(2bytes)    [8.8] 格式，如果为音频track，1.0（0x0100）表示最大音量；否则为0   +保留位\n            0x00, 0x01, 0x00, 0x00, // ----begin composition matrix----\n            0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, //视频变换矩阵\n            0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x40, 0x00, 0x00, 0x00, // ----end composition matrix----\n            width >>> 8 & 0xFF, // //宽度\n            width & 0xFF, 0x00, 0x00, height >>> 8 & 0xFF, //高度\n            height & 0xFF, 0x00, 0x00]));\n        }\n\n        /**\n         * “mdia”也是个container box，其子box的结构和种类还是比较复杂的。先来看一个“mdia”的实例结构树图。\n         * 总体来说，“mdia”定义了track媒体类型以及sample数据，描述sample信息。一般“mdia”包含一个“mdhd”，\n         * 一个“hdlr”和一个“minf”，其中“mdhd”为media header box，“hdlr”为handler reference box，\n         * “minf”为media information box。\n         * \n         * mdia\n         * \t\tmdhd\n         * \t\thdlr\n         * \t\tminf\n         * \t\t\tsmhd\n         * \t\t\tdinf\n         * \t\t\t\tdref\n         * \t\t\t\t\turl\n         * \t\t\tstbl\n         * \t\t\t\tstsd\n         * \t\t\t\t\tmp4a\n         * \t\t\t\t\t\tesds\n         * \t\t\t\tstts\n         * \t\t\t\tstsc\n         * \t\t\t\tstsz\n         * \t\t\t\tstco\n         */\n\n    }, {\n        key: 'mdia',\n        value: function mdia(meta) {\n            return MP4.box(MP4.types.mdia, MP4.mdhd(meta), MP4.hdlr(meta), MP4.minf(meta));\n        }\n\n        // Media header box\n\n    }, {\n        key: 'mdhd',\n        value: function mdhd(meta) {\n            var timescale = meta.timescale;\n            var duration = meta.duration;\n            return MP4.box(MP4.types.mdhd, new Uint8Array([0x00, 0x00, 0x00, 0x00, // version(0) + flags // version(0) + flags\t\tbox版本，0或1，一般为0。\n            0x00, 0x00, 0x00, 0x00, // creation_time    创建时间\n            0x00, 0x00, 0x00, 0x00, // modification_time修改时间\n            timescale >>> 24 & 0xFF, // timescale: 4 bytes    文件媒体在1秒时间内的刻度值，可以理解为1秒长度\n            timescale >>> 16 & 0xFF, timescale >>> 8 & 0xFF, timescale & 0xFF, duration >>> 24 & 0xFF, // duration: 4 bytes  track的时间长度\n            duration >>> 16 & 0xFF, duration >>> 8 & 0xFF, duration & 0xFF, 0x55, 0xC4, // language: und (undetermined) 媒体语言码。最高位为0，后面15位为3个字符（见ISO 639-2/T标准中定义）\n            0x00, 0x00 // pre_defined = 0\n            ]));\n        }\n\n        // Media handler reference box\n\n    }, {\n        key: 'hdlr',\n        value: function hdlr(meta) {\n            var data = null;\n            if (meta.type === 'audio') {\n                data = MP4.constants.HDLR_AUDIO;\n            } else {\n                data = MP4.constants.HDLR_VIDEO;\n            }\n            return MP4.box(MP4.types.hdlr, data);\n        }\n\n        /**\n        * “minf”存储了解释track媒体数据的handler-specific信息，media handler用这些信息将媒体时间映射到媒体数据并进行处理。“minf”中的信息格式和内容与媒体类型以及解释媒体数据的media handler密切相关，其他media handler不知道如何解释这些信息。“minf”是一个container box，其实际内容由子box说明。\n        一般情况下，“minf”包含一个header box，一个“dinf”和一个“stbl”，其中，header box根据track type（即media handler type）分为“vmhd”、“smhd”、“hmhd”和“nmhd”，“dinf”为data information box，“stbl”为sample table box。下面分别介绍。\n        * \n        */\n        // Media infomation box\n\n    }, {\n        key: 'minf',\n        value: function minf(meta) {\n            //header box根据track type（即media handler type）分为“vmhd”、“smhd”、“hmhd”和“nmhd”\n            var xmhd = null;\n            if (meta.type === 'audio') {\n                xmhd = MP4.box(MP4.types.smhd, MP4.constants.SMHD);\n            } else {\n                xmhd = MP4.box(MP4.types.vmhd, MP4.constants.VMHD);\n            }\n            return MP4.box(MP4.types.minf, xmhd, MP4.dinf(), MP4.stbl(meta));\n        }\n\n        /**\n         * Data Information Box\n         * “dinf”解释如何定位媒体信息，是一个container box。“dinf”一般包含一个“dref”，即data reference box；\n         * “dref”下会包含若干个“url”或“urn”，这些box组成一个表，用来定位track数据。\n         * 简单的说，track可以被分成若干段，每一段都可以根据“url”或“urn”指向的地址来获取数据，\n         * sample描述中会用这些片段的序号将这些片段组成一个完整的track。\n         * 一般情况下，当数据被完全包含在文件中时，“url”或“urn”中的定位字符串是空的。\n         */\n\n    }, {\n        key: 'dinf',\n        value: function dinf() {\n            var result = MP4.box(MP4.types.dinf, MP4.box(MP4.types.dref, MP4.constants.DREF));\n            return result;\n        }\n\n        /**\n        * Sample Table Box（stbl）\n        \t*\t“stbl”几乎是普通的MP4文件中最复杂的一个box了，首先需要回忆一下sample的概念。\n        * \tsample是媒体数据存储的单位，存储在media的chunk中，chunk和sample的长度均可互不相同，如下图所示。\n        “stbl”是一个container box，其子box包括：sample description box（stsd）、\n        * time to sample box（stts）、sample size box（stsz或stz2）、\n        * sample to chunk box（stsc）、chunk offset box（stco或co64）、\n        * composition time to sample box（ctts）、sync sample box（stss）\n        * stsd”必不可少，且至少包含一个条目，该box包含了data reference box进行sample数据检索的信息。\n        * 没有“stsd”就无法计算media sample的存储位置。“stsd”包含了编码的信息，其存储的信息随媒体类型不同而不同。\n        * \t\t\tstbl\n        * \t\t\t\tstsd\n        * \t\t\t\t\tavc1\n        * \t\t\t\t\t\tavcC\n        * \t\t\t\tstts\n        * \t\t\t\tstsc\n        * \t\t\t\tstsz\n        * \t\t\t\tstco\n        */\n\n    }, {\n        key: 'stbl',\n        value: function stbl(meta) {\n            var result = MP4.box(MP4.types.stbl, // type: stbl\n            MP4.stsd(meta), // Sample Description Table\n            MP4.box(MP4.types.stts, MP4.constants.STTS), // Time-To-Sample    因为stts的entry count 为0\n            //所以没有关键帧index 的stss\n            //也没有CTTS box CTTS是记录偏移量\n            MP4.box(MP4.types.stsc, MP4.constants.STSC), // Sample-To-Chunk\n            MP4.box(MP4.types.stsz, MP4.constants.STSZ), // Sample size\n            MP4.box(MP4.types.stco, MP4.constants.STCO) // Chunk offset\n            );\n            return result;\n        }\n\n        /**\n        * Sample Description Box（stsd）\n        \t\tbox header和version字段后会有一个entry count字段，\n        * \t\t\t根据entry的个数，每个entry会有type信息，如“vide”、“sund”等，\n        * \t\t根据type不同sample description会提供不同的信息，例如对于video track，\n        * 会有“VisualSampleEntry”类型信息，对于audio track会有“AudioSampleEntry”类型信息。\n        * * \t\t\t\tstsd\n        * \t\t\t\t\tmp4a\n        * \t\t\t\t\t\tesds\n        * \n        * \n        * \n        * \n        * \t\t 4 bytes - length in total\n        \t 4 bytes - 4 char code of sample description table (stsd)\n        \t 4 bytes - version & flags\n        \t 4 bytes - number of sample entries (num_sample_entries)\n        \t\t [\n        \t\t    4 bytes - length of sample entry (len_sample_entry)\n        \t\t    4 bytes - 4 char code of sample entry\n        \t\t    ('len_sample_entry' - 8) bytes of data\n        \t\t ] (repeated 'num_sample_entries' times)\n        \t(4 bytes - optional 0x00000000 as end of box marker )\n        */\n\n    }, {\n        key: 'stsd',\n        value: function stsd(meta) {\n            if (meta.type === 'audio') {\n                return MP4.box(MP4.types.stsd, MP4.constants.STSD_PREFIX, MP4.mp4a(meta));\n            } else {\n                return MP4.box(MP4.types.stsd, MP4.constants.STSD_PREFIX, MP4.avc1(meta));\n            }\n        }\n    }, {\n        key: 'mp4a',\n        value: function mp4a(meta) {\n            var channelCount = meta.channelCount;\n            var sampleRate = meta.audioSampleRate;\n\n            var data = new Uint8Array([0x00, 0x00, 0x00, 0x00, // reserved(4) 6个字节，设置为0；\n            0x00, 0x00, 0x00, 0x01, // reserved(2) + data_reference_index(2)\n            0x00, 0x00, 0x00, 0x00, // reserved: 2 * 4 bytes 保留位\n            0x00, 0x00, 0x00, 0x00, 0x00, channelCount, // channelCount(2) 单声道还是双声道\n            0x00, 0x10, // sampleSize(2)\n            0x00, 0x00, 0x00, 0x00, // reserved(4) 4字节保留位\n            sampleRate >>> 8 & 0xFF, // Audio sample rate 显然要右移16位才有意义\ttemplate unsigned int(32) samplerate = {timescale of media}<<16;\n            sampleRate & 0xFF, 0x00, 0x00]);\n\n            return MP4.box(MP4.types.mp4a, data, MP4.esds(meta));\n        }\n    }, {\n        key: 'esds',\n        value: function esds(meta) {\n            var config = meta.config;\n            var configSize = config.length;\n            var data = new Uint8Array([0x00, 0x00, 0x00, 0x00, // version 0 + flags\n\n            0x03, // descriptor_type    MP4ESDescrTag\n            0x17 + configSize, // length3\n            0x00, 0x01, // es_id\n            0x00, // stream_priority\n\n            0x04, // descriptor_type    MP4DecConfigDescrTag\n            0x0F + configSize, // length\n            0x40, // codec: mpeg4_audio\n            /**\n             *当objectTypeIndication为0x40时，为MPEG-4 Audio（MPEG-4 Audio generally is thought of as AAC \n             * but there is a whole framework of audio codecs that can Go in MPEG-4 Audio including AAC, BSAC, ALS, CELP, \n             * and something called MP3On4），如果想更细分format为aac还是mp3，\n             * 可以读取MP4DecSpecificDescr层data[0]的前五位\n             */\n            0x15, // stream_type: Audio\n            0x00, 0x00, 0x00, // buffer_size\n            0x00, 0x00, 0x00, 0x00, // maxBitrate\n            0x00, 0x00, 0x00, 0x00, // avgBitrate\n\n            0x05 // descriptor_type MP4DecSpecificDescrTag\n            ].concat([configSize]).concat(config).concat([0x06, 0x01, 0x02 // GASpecificConfig\n            ]));\n            return MP4.box(MP4.types.esds, data);\n        }\n\n        /**\n         * 改版\n         *stsd下的avc1视频解析 \n         */\n\n    }, {\n        key: 'avc1',\n        value: function avc1(meta) {\n            var avcc = meta.avcc;\n            var width = meta.codecWidth,\n                height = meta.codecHeight;\n\n            var data = new Uint8Array([0x00, 0x00, 0x00, 0x00, // // reserved(4)    6个 保留位\tReserved：6个字节，设置为0；\n            0x00, 0x00, 0x00, 0x01, // reserved(2) + {{{{data_reference_index(2)  数据引用索引}}}}\n            0x00, 0x00, 0x00, 0x00, // pre_defined(2) + reserved(2)\n            0x00, 0x00, 0x00, 0x00, // pre_defined: 3 * 4 bytes  3*4个字节的保留位\n            0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, width >>> 8 & 0xFF, // width: 2 bytes\n            width & 0xFF, height >>> 8 & 0xFF, // height: 2 bytes\n            height & 0xFF, 0x00, 0x48, 0x00, 0x00, // horizresolution: 4 bytes 常数\n            0x00, 0x48, 0x00, 0x00, // vertresolution: 4 bytes 常数\n            0x00, 0x00, 0x00, 0x00, // reserved: 4 bytes 保留位\n            0x00, 0x01, // frame_count\t\t\n            //frame_count表明多少帧压缩视频存储在每个样本。默认是1,每样一帧;它可能超过1每个样本的多个帧数\n            0x04, //\tstrlen compressorname: 32 bytes\t\t\tString[32]\n            //32个8 bit    第一个8bit表示长度,剩下31个8bit表示内容\n            0x67, 0x31, 0x31, 0x31, // compressorname: 32 bytes    翻译过来是g111\n            0x00, 0x00, 0x00, 0x00, //\n            0x00, 0x00, 0x00, 0x00, //\n            0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x18, // depth 颜色深度\n            0xFF, 0xFF // pre_defined = -1\n            ]);\n            return MP4.box(MP4.types.avc1, data, MP4.box(MP4.types.avcC, avcc));\n        }\n\n        // Movie Extends box\n\n    }, {\n        key: 'mvex',\n        value: function mvex(meta) {\n            if (meta.length > 1) return MP4.box(MP4.types.mvex, MP4.trex(meta[0]), MP4.trex(meta[1]));else return MP4.box(MP4.types.mvex, MP4.trex(meta[0]));\n        }\n\n        // Track Extends box\n\n    }, {\n        key: 'trex',\n        value: function trex(meta) {\n            var trackId = meta.id;\n            var data = new Uint8Array([0x00, 0x00, 0x00, 0x00, // version(0) + flags\n            trackId >>> 24 & 0xFF, // track_ID\n            trackId >>> 16 & 0xFF, trackId >>> 8 & 0xFF, trackId & 0xFF, 0x00, 0x00, 0x00, 0x01, // default_sample_description_index\n            0x00, 0x00, 0x00, 0x00, // default_sample_duration\n            0x00, 0x00, 0x00, 0x00, // default_sample_size\n            0x00, 0x01, 0x00, 0x01 // default_sample_flags\n            ]);\n            // if (meta.type !== 'video') {\n            //     data[data.length - 1] = 0x00;\n            // }\n            return MP4.box(MP4.types.trex, data);\n        }\n\n        // Movie fragment box\n\n    }, {\n        key: 'moof',\n        value: function moof(track, baseMediaDecodeTime) {\n            return MP4.box(MP4.types.moof, MP4.mfhd(track.sequenceNumber), MP4.traf(track, baseMediaDecodeTime));\n        }\n    }, {\n        key: 'mfhd',\n        value: function mfhd(sequenceNumber) {\n            var data = new Uint8Array([0x00, 0x00, 0x00, 0x00, sequenceNumber >>> 24 & 0xFF, // sequence_number: int32\n            sequenceNumber >>> 16 & 0xFF, sequenceNumber >>> 8 & 0xFF, sequenceNumber & 0xFF]);\n            return MP4.box(MP4.types.mfhd, data);\n        }\n\n        // Track fragment box\n\n    }, {\n        key: 'traf',\n        value: function traf(track, baseMediaDecodeTime) {\n            var trackId = track.id;\n\n            // Track fragment header box\n            var tfhd = MP4.box(MP4.types.tfhd, new Uint8Array([0x00, 0x00, 0x00, 0x00, // version(0) & flags\n            trackId >>> 24 & 0xFF, // track_ID\n            trackId >>> 16 & 0xFF, trackId >>> 8 & 0xFF, trackId & 0xFF]));\n            // Track Fragment Decode Time\n            var tfdt = MP4.box(MP4.types.tfdt, new Uint8Array([0x00, 0x00, 0x00, 0x00, // version(0) & flags\n            baseMediaDecodeTime >>> 24 & 0xFF, // baseMediaDecodeTime: int32\n            baseMediaDecodeTime >>> 16 & 0xFF, baseMediaDecodeTime >>> 8 & 0xFF, baseMediaDecodeTime & 0xFF]));\n            var sdtp = MP4.sdtp(track);\n            var trun = MP4.trun(track, sdtp.byteLength + 16 + 16 + 8 + 16 + 8 + 8);\n\n            return MP4.box(MP4.types.traf, tfhd, tfdt, trun, sdtp);\n        }\n\n        // Sample Dependency Type box\n\n    }, {\n        key: 'sdtp',\n        value: function sdtp(track) {\n            var samples = track.samples || [];\n            var sampleCount = samples.length;\n            var data = new Uint8Array(4 + sampleCount);\n            // 0~4 bytes: version(0) & flags\n            for (var i = 0; i < sampleCount; i++) {\n                var flags = samples[i].flags;\n                data[i + 4] = flags.isLeading << 6 | // is_leading: 2 (bit)\n                flags.dependsOn << 4 // sample_depends_on\n                | flags.isDependedOn << 2 // sample_is_depended_on\n                | flags.hasRedundancy; // sample_has_redundancy\n            }\n            return MP4.box(MP4.types.sdtp, data);\n        }\n\n        // Track fragment run box\n\n    }, {\n        key: 'trun',\n        value: function trun(track, offset) {\n            var samples = track.samples || [];\n            var sampleCount = samples.length;\n            var dataSize = 12 + 16 * sampleCount;\n            var data = new Uint8Array(dataSize);\n            offset += 8 + dataSize;\n\n            data.set([0x00, 0x00, 0x0F, 0x01, // version(0) & flags\n            sampleCount >>> 24 & 0xFF, // sample_count\n            sampleCount >>> 16 & 0xFF, sampleCount >>> 8 & 0xFF, sampleCount & 0xFF, offset >>> 24 & 0xFF, // data_offset\n            offset >>> 16 & 0xFF, offset >>> 8 & 0xFF, offset & 0xFF], 0);\n\n            for (var i = 0; i < sampleCount; i++) {\n\n                var duration = samples[i].duration;\n\n                var size = samples[i].size;\n                var flags = samples[i].flags;\n                var cts = samples[i].cts;\n                data.set([duration >>> 24 & 0xFF, // sample_duration\n                duration >>> 16 & 0xFF, duration >>> 8 & 0xFF, duration & 0xFF, size >>> 24 & 0xFF, // sample_size\n                size >>> 16 & 0xFF, size >>> 8 & 0xFF, size & 0xFF, flags.isLeading << 2 | flags.dependsOn, // sample_flags\n                flags.isDependedOn << 6 | flags.hasRedundancy << 4 | flags.isNonSync, 0x00, 0x00, // sample_degradation_priority\n                cts >>> 24 & 0xFF, // sample_composition_time_offset\n                cts >>> 16 & 0xFF, cts >>> 8 & 0xFF, cts & 0xFF], 12 + 16 * i);\n            }\n            return MP4.box(MP4.types.trun, data);\n        }\n    }, {\n        key: 'mdat',\n        value: function mdat(data) {\n            return MP4.box(MP4.types.mdat, data);\n        }\n    }]);\n\n    return MP4;\n}();\n\nMP4.init();\n\nexports.default = MP4;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9qcy9tcDQvbXA0cmVtdXguanM/OWY1YSJdLCJuYW1lcyI6WyJNUDQiLCJ0eXBlcyIsImF2YzEiLCJhdmNDIiwiYnRydCIsImRpbmYiLCJkcmVmIiwiZXNkcyIsImZ0eXAiLCJoZGxyIiwibWRhdCIsIm1kaGQiLCJtZGlhIiwibWZoZCIsIm1pbmYiLCJtb29mIiwibW9vdiIsIm1wNGEiLCJtdmV4IiwibXZoZCIsInNkdHAiLCJzdGJsIiwic3RjbyIsInN0c2MiLCJzdHNkIiwic3RzeiIsInN0dHMiLCJ0ZmR0IiwidGZoZCIsInRyYWYiLCJ0cmFrIiwidHJ1biIsInRyZXgiLCJ0a2hkIiwidm1oZCIsInNtaGQiLCJuYW1lIiwiaGFzT3duUHJvcGVydHkiLCJjaGFyQ29kZUF0IiwiY29uc3RhbnRzIiwiRlRZUCIsIlVpbnQ4QXJyYXkiLCJTVFNEX1BSRUZJWCIsIlNUVFMiLCJTVFNDIiwiU1RDTyIsIlNUU1oiLCJIRExSX1ZJREVPIiwiSERMUl9BVURJTyIsIkRSRUYiLCJTTUhEIiwiVk1IRCIsInR5cGUiLCJzaXplIiwicmVzdWx0IiwiZGF0YXMiLCJBcnJheSIsInByb3RvdHlwZSIsInNsaWNlIiwiY2FsbCIsImFyZ3VtZW50cyIsImFycmF5Q291bnQiLCJsZW5ndGgiLCJpIiwiYnl0ZUxlbmd0aCIsInNldCIsIm9mZnNldCIsIm1ldGEiLCJjb25zdHJ1Y3RvciIsImJveCIsInRpbWVzY2FsZSIsImR1cmF0aW9uIiwidnRyYWsiLCJhdHJhayIsInRyYWNrSWQiLCJpZCIsIndpZHRoIiwicHJlc2VudFdpZHRoIiwiaGVpZ2h0IiwicHJlc2VudEhlaWdodCIsImRhdGEiLCJ4bWhkIiwiY2hhbm5lbENvdW50Iiwic2FtcGxlUmF0ZSIsImF1ZGlvU2FtcGxlUmF0ZSIsImNvbmZpZyIsImNvbmZpZ1NpemUiLCJjb25jYXQiLCJhdmNjIiwiY29kZWNXaWR0aCIsImNvZGVjSGVpZ2h0IiwidHJhY2siLCJiYXNlTWVkaWFEZWNvZGVUaW1lIiwic2VxdWVuY2VOdW1iZXIiLCJzYW1wbGVzIiwic2FtcGxlQ291bnQiLCJmbGFncyIsImlzTGVhZGluZyIsImRlcGVuZHNPbiIsImlzRGVwZW5kZWRPbiIsImhhc1JlZHVuZGFuY3kiLCJkYXRhU2l6ZSIsImN0cyIsImlzTm9uU3luYyIsImluaXQiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQTs7OztJQUlNQSxHOzs7Ozs7OytCQUVZO0FBQ1ZBLGdCQUFJQyxLQUFKLEdBQVk7QUFDUkMsc0JBQU0sRUFERTtBQUVSQyxzQkFBTSxFQUZFO0FBR1JDLHNCQUFNLEVBSEU7QUFJUkMsc0JBQU0sRUFKRTtBQUtSQyxzQkFBTSxFQUxFO0FBTVJDLHNCQUFNLEVBTkU7QUFPUkMsc0JBQU0sRUFQRTtBQVFSQyxzQkFBTSxFQVJFO0FBU1JDLHNCQUFNLEVBVEU7QUFVUkMsc0JBQU0sRUFWRTtBQVdSQyxzQkFBTSxFQVhFO0FBWVJDLHNCQUFNLEVBWkU7QUFhUkMsc0JBQU0sRUFiRTtBQWNSQyxzQkFBTSxFQWRFO0FBZVJDLHNCQUFNLEVBZkU7QUFnQlJDLHNCQUFNLEVBaEJFO0FBaUJSQyxzQkFBTSxFQWpCRTtBQWtCUkMsc0JBQU0sRUFsQkU7QUFtQlJDLHNCQUFNLEVBbkJFO0FBb0JSQyxzQkFBTSxFQXBCRTtBQXFCUkMsc0JBQU0sRUFyQkU7QUFzQlJDLHNCQUFNLEVBdEJFO0FBdUJSQyxzQkFBTSxFQXZCRTtBQXdCUkMsc0JBQU0sRUF4QkU7QUF5QlJDLHNCQUFNLEVBekJFO0FBMEJSQyxzQkFBTSxFQTFCRTtBQTJCUkMsc0JBQU0sRUEzQkU7QUE0QlJDLHNCQUFNLEVBNUJFO0FBNkJSQyxzQkFBTSxFQTdCRTtBQThCUkMsc0JBQU0sRUE5QkU7QUErQlJDLHNCQUFNLEVBL0JFO0FBZ0NSQyxzQkFBTSxFQWhDRTtBQWlDUkMsc0JBQU0sRUFqQ0U7QUFrQ1JDLHNCQUFNO0FBbENFLGFBQVo7O0FBcUNBLGlCQUFLLElBQUlDLElBQVQsSUFBaUJwQyxJQUFJQyxLQUFyQixFQUE0QjtBQUN4QixvQkFBSUQsSUFB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QWlCSDtBQUNELG1CQUFPL0QsSUFBSXFFLEdBQUosQ0FBUXJFLElBQUlDLEtBQUosQ0FBVThCLElBQWxCLEVBQXdCaUQsSUFBeEIsQ0FBUDtBQUNIOzs7NkJBRVdBLEksRUFBTTtBQUNkLG1CQUFPaEYsSUFBSXFFLEdBQUosQ0FBUXJFLElBQUlDLEtBQUosQ0FBVVMsSUFBbEIsRUFBd0JzRSxJQUF4QixDQUFQO0FBQ0g7Ozs7OztBQUlMaEYsSUFBSXdHLElBQUo7O2tCQUVleEcsRyIsImZpbGUiOiIxLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiDku6PnoIHlgJ/pibTkuoZmbHYuanNcbiAqIOWinuWKoOS6huiHquW3seeahOazqOmHiuWSjOWGmeazlVxuICovXG5jbGFzcyBNUDQge1xuXG4gICAgc3RhdGljIGluaXQoKSB7XG4gICAgICAgIE1QNC50eXBlcyA9IHtcbiAgICAgICAgICAgIGF2YzE6IFtdLFxuICAgICAgICAgICAgYXZjQzogW10sXG4gICAgICAgICAgICBidHJ0OiBbXSxcbiAgICAgICAgICAgIGRpbmY6IFtdLFxuICAgICAgICAgICAgZHJlZjogW10sXG4gICAgICAgICAgICBlc2RzOiBbXSxcbiAgICAgICAgICAgIGZ0eXA6IFtdLFxuICAgICAgICAgICAgaGRscjogW10sXG4gICAgICAgICAgICBtZGF0OiBbXSxcbiAgICAgICAgICAgIG1kaGQ6IFtdLFxuICAgICAgICAgICAgbWRpYTogW10sXG4gICAgICAgICAgICBtZmhkOiBbXSxcbiAgICAgICAgICAgIG1pbmY6IFtdLFxuICAgICAgICAgICAgbW9vZjogW10sXG4gICAgICAgICAgICBtb292OiBbXSxcbiAgICAgICAgICAgIG1wNGE6IFtdLFxuICAgICAgICAgICAgbXZleDogW10sXG4gICAgICAgICAgICBtdmhkOiBbXSxcbiAgICAgICAgICAgIHNkdHA6IFtdLFxuICAgICAgICAgICAgc3RibDogW10sXG4gICAgICAgICAgICBzdGNvOiBbXSxcbiAgICAgICAgICAgIHN0c2M6IFtdLFxuICAgICAgICAgICAgc3RzZDogW10sXG4gICAgICAgICAgICBzdHN6OiBbXSxcbiAgICAgICAgICAgIHN0dHM6IFtdLFxuICAgICAgICAgICAgdGZkdDogW10sXG4gICAgICAgICAgICB0ZmhkOiBbXSxcbiAgICAgICAgICAgIHRyYWY6IFtdLFxuICAgICAgICAgICAgdHJhazogW10sXG4gICAgICAgICAgICB0cnVuOiBbXSxcbiAgICAgICAgICAgIHRyZXg6IFtdLFxuICAgICAgICAgICAgdGtoZDogW10sXG4gICAgICAgICAgICB2bWhkOiBbXSxcbiAgICAgICAgICAgIHNtaGQ6IFtdXG4gICAgICAgIH07XG5cbiAgICAgICAgZm9yIChsZXQgbmFtZSBpbiBNUDQudHlwZXMpIHtcbiAgICAgICAgICAgIGlmIChNUDQudHlwZXMuaGFzT3duUHJvcGVydHkobmFtZSkpIHtcbiAgICAgICAgICAgICAgICBNUDQudHlwZXNbbmFtZV0gPSBbXG4gICAgICAgICAgICAgICAgICAgIG5hbWUuY2hhckNvZGVBdCgwKSxcbiAgICAgICAgICAgICAgICAgICAgbmFtZS5jaGFyQ29kZUF0KDEpLFxuICAgICAgICAgICAgICAgICAgICBuYW1lLmNoYXJDb2RlQXQoMiksXG4gICAgICAgICAgICAgICAgICAgIG5hbWUuY2hhckNvZGVBdCgzKVxuICAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgY29uc3RhbnRzID0gTVA0LmNvbnN0YW50cyA9IHt9O1xuXG4gICAgICAgIGNvbnN0YW50cy5GVFlQID0gbmV3IFVpbnQ4QXJyYXkoW1xuICAgICAgICAgICAgMHg2OSwgMHg3MywgMHg2RiwgMHg2RCwgLy8gbWFqb3JfYnJhbmQ6IGlzb21cdFx0aXNvbVx0TVA0ICBCYXNlIE1lZGlhIHYxIFtJUzAgMTQ0OTYtMTI6MjAwM11cdElTT1x0WUVTXHR2aWRlby9tcDRcbiAgICAgICAgICAgIDB4MCwgMHgwLCAweDAsIDB4MSwgLy8gbWlub3JfdmVyc2lvbjogMHgwMVxuICAgICAgICAgICAgMHg2OSwgMHg3MywgMHg2RiwgMHg2RCwgLy8gaXNvbVxuICAgICAgICAgICAgMHg2MSwgMHg3NiwgMHg2MywgMHgzMSAvLyBhdmMxXG4gICAgICAgIF0pO1xuXG4gICAgICAgIGNvbnN0YW50cy5TVFNEX1BSRUZJWCA9IG5ldyBVaW50OEFycmF5KFtcbiAgICAgICAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIC8vIHZlcnNpb24oMCkgKyBmbGFncyAgdmVyc2lvbuWtl+auteWQjuS8muacieS4gOS4qmVudHJ5IGNvdW505a2X5q61XG4gICAgICAgICAgICAweDAwLCAweDAwLCAweDAwLCAweDAxIC8vIGVudHJ5X2NvdW50XHTmoLnmja5lbnRyeeeahOS4quaVsO+8jOavj+S4qmVudHJ55Lya5pyJdHlwZeS/oeaBr++8jOWmguKAnHZpZGXigJ3jgIHigJxzdW5k4oCd562J77yM5qC55o2udHlwZeS4jeWQjHNhbXBsZSBkZXNjcmlwdGlvbuS8muaPkOS+m+S4jeWQjOeahOS/oeaBr++8jOS+i+WmguWvueS6jnZpZGVvIHRyYWNr77yM5Lya5pyJ4oCcVmlzdWFsU2FtcGxlRW50cnnigJ3nsbvlnovkv6Hmga/vvIzlr7nkuo5hdWRpbyB0cmFja+S8muacieKAnEF1ZGlvU2FtcGxlRW50cnnigJ3nsbvlnovkv6Hmga/jgIJcbiAgICAgICAgXSk7XG5cbiAgICAgICAgY29uc3RhbnRzLlNUVFMgPSBuZXcgVWludDhBcnJheShbXG4gICAgICAgICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLCAvLyB2ZXJzaW9uKDApICsgZmxhZ3NcbiAgICAgICAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAgLy8gZW50cnlfY291bnQgICAgIDDkuKrntKLlvJVcbiAgICAgICAgXSk7XG5cbiAgICAgICAgY29uc3RhbnRzLlNUU0MgPSBjb25zdGFudHMuU1RDTyA9IGNvbnN0YW50cy5TVFRTO1xuXG4gICAgICAgIGNvbnN0YW50cy5TVFNaID0gbmV3IFVpbnQ4QXJyYXkoW1xuICAgICAgICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgLy8gdmVyc2lvbigwKSArIGZsYWdzXG4gICAgICAgICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLCAvLyBzYW1wbGVfc2l6ZVxuICAgICAgICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCAvLyBzYW1wbGVfY291bnRcbiAgICAgICAgXSk7XG5cbiAgICAgICAgY29uc3RhbnRzLkhETFJfVklERU8gPSBuZXcgVWludDhBcnJheShbXG4gICAgICAgICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLCAvLyB2ZXJzaW9uKDApICsgZmxhZ3NcbiAgICAgICAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIC8vIHByZV9kZWZpbmVkXG4gICAgICAgICAgICAweDc2LCAweDY5LCAweDY0LCAweDY1LCAvLyBoYW5kbGVyX3R5cGU6ICd2aWRlJyDlnKhtZWRpYSBib3jkuK3vvIzor6XlgLzkuLo05Liq5a2X56ymXHRcdOKAnHZpZGXigJ3igJQgdmlkZW8gdHJhY2tcbiAgICAgICAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIC8vIHJlc2VydmVkOiAzICogNCBieXRlc1xuICAgICAgICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCxcbiAgICAgICAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIC8v5L+d55WZ5L2NXG4gICAgICAgICAgICAweDU2LCAweDY5LCAweDY0LCAweDY1LFxuICAgICAgICAgICAgMHg2RiwgMHg0OCwgMHg2MSwgMHg2RSxcbiAgICAgICAgICAgIDB4NjQsIDB4NkMsIDB4NjUsIDB4NzIsIDB4MDAgLy8gbmFtZTogVmlkZW9IYW5kbGVyIOmVv+W6puS4jeWumlx0XHR0cmFjayB0eXBlIG5hbWXvvIzku6XigJhcXDDigJnnu5PlsL7nmoTlrZfnrKbkuLJcbiAgICAgICAgXSk7XG5cbiAgICAgICAgY29uc3RhbnRzLkhETFJfQVVESU8gPSBuZXcgVWludDhBcnJheShbXG4gICAgICAgICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLCAvLyB2ZXJzaW9uKDApICsgZmxhZ3NcbiAgICAgICAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIC8vIHByZV9kZWZpbmVkXG4gICAgICAgICAgICAweDczLCAweDZGLCAweDc1LCAweDZFLCAvLyBoYW5kbGVyX3R5cGU6ICdzb3VuJ+WcqG1lZGlhIGJveOS4re+8jOivpeWAvOS4ujTkuKrlrZfnrKZcdFx04oCcc291buKAneKAlCBhdWRpbyB0cmFja1xuICAgICAgICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgLy8gcmVzZXJ2ZWQ6IDMgKiA0IGJ5dGVzXG4gICAgICAgICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLFxuICAgICAgICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgLy/kv53nlZnkvY1cbiAgICAgICAgICAgIDB4NTMsIDB4NkYsIDB4NzUsIDB4NkUsXG4gICAgICAgICAgICAweDY0LCAweDQ4LCAweDYxLCAweDZFLFxuICAgICAgICAgICAgMHg2NCwgMHg2QywgMHg2NSwgMHg3MiwgMHgwMCAvLyBuYW1lOiBTb3VuZEhhbmRsZXIg6ZW/5bqm5LiN5a6aXHRcdHRyYWNrIHR5cGUgbmFtZe+8jOS7peKAmFxcMOKAmee7k+WwvueahOWtl+espuS4slxuICAgICAgICBdKTtcblxuICAgICAgICBjb25zdGFudHMuRFJFRiA9IG5ldyBVaW50OEFycmF5KFtcbiAgICAgICAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIC8vIHZlcnNpb24oMCkgKyBmbGFnc1xuICAgICAgICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMSwgLy8gZW50cnlfY291bnQgMeS4qnVybFx0XG4gICAgICAgICAgICAvL3VybFx0Ym945byA5aeLXG4gICAgICAgICAgICAweDAwLCAweDAwLCAweDAwLCAweDBDLCAvLyBlbnRyeV9zaXplXG4gICAgICAgICAgICAweDc1LCAweDcyLCAweDZDLCAweDIwLCAvLyB0eXBlICd1cmwgJ1xuICAgICAgICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMSAvLyB2ZXJzaW9uKDApICsgZmxhZ3Mg5b2T4oCcdXJs4oCd5oiW4oCcdXJu4oCd55qEYm94IGZsYWfkuLox5pe277yM5a2X56ym5Liy5Z2H5Li656m644CCXG4gICAgICAgIF0pO1xuXG4gICAgICAgIC8vIFNvdW5kIG1lZGlhIGhlYWRlclxuICAgICAgICBjb25zdGFudHMuU01IRCA9IG5ldyBVaW50OEFycmF5KFtcbiAgICAgICAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIC8vIHZlcnNpb24oMCkgKyBmbGFnc1x0Ym9454mI5pys77yMMOaIljHvvIzkuIDoiKzkuLow44CCXG4gICAgICAgICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwIC8vIGJhbGFuY2UoMikgKyByZXNlcnZlZCgyKSDnq4vkvZPlo7DlubPooaHvvIxbOC44XSDmoLzlvI/lgLzvvIzkuIDoiKzkuLow77yMLTEuMOihqOekuuWFqOmDqOW3puWjsOmBk++8jDEuMOihqOekuuWFqOmDqOWPs+WjsOmBkysy5L2N5L+d55WZ5L2NXG4gICAgICAgIF0pO1xuXG4gICAgICAgIC8vIHZpZGVvIG1lZGlhIGhlYWRlclxuICAgICAgICBjb25zdGFudHMuVk1IRCA9IG5ldyBVaW50OEFycmF5KFtcbiAgICAgICAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDEsIC8vIHZlcnNpb24oMCkgKyBmbGFnc1xuICAgICAgICAgICAgMHgwMCwgMHgwMCwgLy8gZ3JhcGhpY3Ntb2RlOiAyIGJ5dGVzIOinhumikeWQiOaIkOaooeW8j++8jOS4ujDml7bmi7fotJ3ljp/lp4vlm77lg4/vvIzlkKbliJnkuI5vcGNvbG9y6L+b6KGM5ZCI5oiQICAgLy/nkIborrrkuIrmmK805L2N5ZWKICDmmoLml7bkv53nlZlcbiAgICAgICAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIC8vIG9wY29sb3I6IDMgKiAyIGJ5dGVzIO+9m3JlZO+8jGdyZWVu77yMYmx1Ze+9nVxuICAgICAgICAgICAgMHgwMCwgMHgwMFxuICAgICAgICBdKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiDlsIHoo4Vib3hcbiAgICAgKi9cbiAgICBzdGF0aWMgYm94KHR5cGUpIHtcbiAgICAgICAgbGV0IHNpemUgPSA4O1xuICAgICAgICBsZXQgcmVzdWx0ID0gbnVsbDtcbiAgICAgICAgbGV0IGRhdGFzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTtcbiAgICAgICAgbGV0IGFycmF5Q291bnQgPSBkYXRhcy5sZW5ndGg7XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhcnJheUNvdW50OyBpKyspIHtcbiAgICAgICAgICAgIHNpemUgKz0gZGF0YXNbaV0uYnl0ZUxlbmd0aDtcbiAgICAgICAgfVxuICAgICAgICAvL2JveOWktOmDqOWkp+Wwj1xuICAgICAgICByZXN1bHQgPSBuZXcgVWludDhBcnJheShzaXplKTtcbiAgICAgICAgcmVzdWx0WzBdID0gKHNpemUgPj4+IDI0KSAmIDB4RkY7IC8vIHNpemVcbiAgICAgICAgcmVzdWx0WzFdID0gKHNpemUgPj4+IDE2KSAmIDB4RkY7XG4gICAgICAgIHJlc3VsdFsyXSA9IChzaXplID4+PiA4KSAmIDB4RkY7XG4gICAgICAgIHJlc3VsdFszXSA9IChzaXplKSAmIDB4RkY7XG4gICAgICAgIC8v5YaZ5YWlYm9455qEdHlwZVxuICAgICAgICByZXN1bHQuc2V0KHR5cGUsIDQpOyAvLyB0eXBlXG5cbiAgICAgICAgbGV0IG9mZnNldCA9IDg7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYXJyYXlDb3VudDsgaSsrKSB7IC8vIGRhdGEgYm9keVxuICAgICAgICAgICAgcmVzdWx0LnNldChkYXRhc1tpXSwgb2Zmc2V0KTtcbiAgICAgICAgICAgIG9mZnNldCArPSBkYXRhc1tpXS5ieXRlTGVuZ3RoO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvL+WIm+W7umZ0eXAmbW9vdlxuICAgIHN0YXRpYyBnZW5lcmF0ZUluaXRTZWdtZW50KG1ldGEpIHtcbiAgICAgICAgaWYgKG1ldGEuY29uc3RydWN0b3IgIT0gQXJyYXkpIHtcbiAgICAgICAgICAgIG1ldGEgPSBbbWV0YV07XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGZ0eXAgPSBNUDQuYm94KE1QNC50eXBlcy5mdHlwLCBNUDQuY29uc3RhbnRzLkZUWVApO1xuICAgICAgICBsZXQgbW9vdiA9IE1QNC5tb292KG1ldGEpO1xuXG4gICAgICAgIGxldCByZXN1bHQgPSBuZXcgVWludDhBcnJheShmdHlwLmJ5dGVMZW5ndGggKyBtb292LmJ5dGVMZW5ndGgpO1xuICAgICAgICByZXN1bHQuc2V0KGZ0eXAsIDApO1xuICAgICAgICByZXN1bHQuc2V0KG1vb3YsIGZ0eXAuYnl0ZUxlbmd0aCk7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLy8gTW92aWUgbWV0YWRhdGEgYm94XG4gICAgc3RhdGljIG1vb3YobWV0YSkge1xuICAgICAgICBsZXQgbXZoZCA9IE1QNC5tdmhkKG1ldGFbMF0udGltZXNjYWxlLCBtZXRhWzBdLmR1cmF0aW9uKTsgLy8vbW9vdumHjOmdoueahOesrOS4gOS4qmJveFxuICAgICAgICBsZXQgdnRyYWsgPSBNUDQudHJhayhtZXRhWzBdKTtcbiAgICAgICAgbGV0IGF0cmFrO1xuICAgICAgICBpZiAobWV0YS5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICBhdHJhayA9IE1QNC50cmFrKG1ldGFbMV0pO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IG12ZXggPSBNUDQubXZleChtZXRhKTtcbiAgICAgICAgaWYgKG1ldGEubGVuZ3RoID4gMSlcbiAgICAgICAgICAgIHJldHVybiBNUDQuYm94KE1QNC50eXBlcy5tb292LCBtdmhkLCB2dHJhaywgYXRyYWssIG12ZXgpO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICByZXR1cm4gTVA0LmJveChNUDQudHlwZXMubW9vdiwgbXZoZCwgdnRyYWssIG12ZXgpO1xuICAgIH1cblxuICAgIC8vIE1vdmllIGhlYWRlciBib3hcbiAgICBzdGF0aWMgbXZoZCh0aW1lc2NhbGUsIGR1cmF0aW9uKSB7XG4gICAgICAgIHJldHVybiBNUDQuYm94KE1QNC50eXBlcy5tdmhkLCBuZXcgVWludDhBcnJheShbXG4gICAgICAgICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLCAvLyB2ZXJzaW9uKDApICsgZmxhZ3MgICAgIDHkvY3nmoRib3jniYjmnKwrM+S9jWZsYWdzICAgYm9454mI5pys77yMMOaIljHvvIzkuIDoiKzkuLow44CC77yI5Lul5LiL5a2X6IqC5pWw5Z2H5oyJdmVyc2lvbj0w77yJXG4gICAgICAgICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLCAvLyBjcmVhdGlvbl90aW1lICAgIOWIm+W7uuaXtumXtCAg77yI55u45a+55LqOVVRD5pe26Ze0MTkwNC0wMS0wMembtueCueeahOenkuaVsO+8iVxuICAgICAgICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgLy8gbW9kaWZpY2F0aW9uX3RpbWUgICDkv67mlLnml7bpl7RcbiAgICAgICAgICAgICh0aW1lc2NhbGUgPj4+IDI0KSAmIDB4RkYsIC8vIHRpbWVzY2FsZTogNCBieXRlc1x0XHTmlofku7blqpLkvZPlnKgx56eS5pe26Ze05YaF55qE5Yi75bqm5YC877yM5Y+v5Lul55CG6Kej5Li6MeenkumVv+W6plxuICAgICAgICAgICAgKHRpbWVzY2FsZSA+Pj4gMTYpICYgMHhGRixcbiAgICAgICAgICAgICh0aW1lc2NhbGUgPj4+IDgpICYgMHhGRixcbiAgICAgICAgICAgICh0aW1lc2NhbGUpICYgMHhGRixcbiAgICAgICAgICAgIChkdXJhdGlvbiA+Pj4gMjQpICYgMHhGRiwgLy8gZHVyYXRpb246IDQgYnl0ZXNcdOivpXRyYWNr55qE5pe26Ze06ZW/5bqm77yM55SoZHVyYXRpb27lkox0aW1lIHNjYWxl5YC85Y+v5Lul6K6h566XdHJhY2vml7bplb/vvIzmr5TlpoJhdWRpbyB0cmFja+eahHRpbWUgc2NhbGUgPSA4MDAwLCBkdXJhdGlvbiA9IDU2MDEyOO+8jOaXtumVv+S4ujcwLjAxNu+8jHZpZGVvIHRyYWNr55qEdGltZSBzY2FsZSA9IDYwMCwgZHVyYXRpb24gPSA0MjAwMO+8jOaXtumVv+S4ujcwXG4gICAgICAgICAgICAoZHVyYXRpb24gPj4+IDE2KSAmIDB4RkYsXG4gICAgICAgICAgICAoZHVyYXRpb24gPj4+IDgpICYgMHhGRixcbiAgICAgICAgICAgIChkdXJhdGlvbikgJiAweEZGLFxuICAgICAgICAgICAgMHgwMCwgMHgwMSwgMHgwMCwgMHgwMCwgLy8gUHJlZmVycmVkIHJhdGU6IDEuMCAgIOaOqOiNkOaSreaUvumAn+eOh++8jOmrmDE25L2N5ZKM5L2OMTbkvY3liIbliKvkuLrlsI/mlbDngrnmlbTmlbDpg6jliIblkozlsI/mlbDpg6jliIbvvIzljbNbMTYuMTZdIOagvOW8j++8jOivpeWAvOS4ujEuMO+8iDB4MDAwMTAwMDDvvInooajnpLrmraPluLjliY3lkJHmkq3mlL5cbiAgICAgICAgICAgIDB4MDEsIDB4MDAsIDB4MDAsIDB4MDAsIC8vIFByZWZlcnJlZFZvbHVtZSgxLjAsIDJieXRlcykgKyByZXNlcnZlZCgyYnl0ZXMpXHTkuI5yYXRl57G75Ly877yMWzguOF0g5qC85byP77yMMS4w77yIMHgwMTAw77yJ6KGo56S65pyA5aSn6Z+z6YePIFxuICAgICAgICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgLy8gcmVzZXJ2ZWQ6IDQgKyA0IGJ5dGVzXHTkv53nlZnkvY1cbiAgICAgICAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsXG4gICAgICAgICAgICAweDAwLCAweDAxLCAweDAwLCAweDAwLCAvLyAtLS0tYmVnaW4gY29tcG9zaXRpb24gbWF0cml4LS0tLVxuICAgICAgICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCxcbiAgICAgICAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIC8v6KeG6aKR5Y+Y5o2i55+p6Zi1ICAg57q/5oCn5Luj5pWwXG4gICAgICAgICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLFxuICAgICAgICAgICAgMHgwMCwgMHgwMSwgMHgwMCwgMHgwMCxcbiAgICAgICAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsXG4gICAgICAgICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLFxuICAgICAgICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCxcbiAgICAgICAgICAgIDB4NDAsIDB4MDAsIDB4MDAsIDB4MDAsIC8vIC0tLS1lbmQgY29tcG9zaXRpb24gbWF0cml4LS0tLVxuICAgICAgICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgLy8gLS0tLWJlZ2luIHByZV9kZWZpbmVkIDYgKiA0IGJ5dGVzLS0tLVxuICAgICAgICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCxcbiAgICAgICAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIC8vcHJlLWRlZmluZWQg5L+d55WZ5L2NXG4gICAgICAgICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLFxuICAgICAgICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCxcbiAgICAgICAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIC8vIC0tLS1lbmQgcHJlX2RlZmluZWQgNiAqIDQgYnl0ZXMtLS0tXG4gICAgICAgICAgICAweEZGLCAweEZGLCAweEZGLCAweEZGIC8vIG5leHRfdHJhY2tfSUQg5LiL5LiA5LiqdHJhY2vkvb/nlKjnmoRpZOWPt1xuICAgICAgICBdKSk7XG4gICAgfVxuXG4gICAgLy8gVHJhY2sgYm94XG4gICAgc3RhdGljIHRyYWsobWV0YSkge1xuICAgICAgICByZXR1cm4gTVA0LmJveChNUDQudHlwZXMudHJhaywgTVA0LnRraGQobWV0YSksIE1QNC5tZGlhKG1ldGEpKTtcbiAgICB9XG5cbiAgICAvLyBUcmFjayBoZWFkZXIgYm94XG4gICAgc3RhdGljIHRraGQobWV0YSkge1xuICAgICAgICBsZXQgdHJhY2tJZCA9IG1ldGEuaWQsXG4gICAgICAgICAgICBkdXJhdGlvbiA9IG1ldGEuZHVyYXRpb247XG4gICAgICAgIGxldCB3aWR0aCA9IG1ldGEucHJlc2VudFdpZHRoLFxuICAgICAgICAgICAgaGVpZ2h0ID0gbWV0YS5wcmVzZW50SGVpZ2h0O1xuXG4gICAgICAgIHJldHVybiBNUDQuYm94KE1QNC50eXBlcy50a2hkLCBuZXcgVWludDhBcnJheShbXG4gICAgICAgICAgICAweDAwLCAweDAwLCAweDAwLCAweDA3LCAvLyB2ZXJzaW9uKDApICsgZmxhZ3MgMeS9jeeJiOacrCBib3jniYjmnKzvvIww5oiWMe+8jOS4gOiIrOS4ujDjgILvvIjku6XkuIvlrZfoioLmlbDlnYfmjIl2ZXJzaW9uPTDvvInmjInkvY3miJbmk43kvZznu5PmnpzlgLzvvIzpooTlrprkuYnlpoLkuIvvvJpcbiAgICAgICAgICAgIC8vMHgwMDAwMDEgdHJhY2tfZW5hYmxlZO+8jOWQpuWImeivpXRyYWNr5LiN6KKr5pKt5pS+77ybXG4gICAgICAgICAgICAvLzB4MDAwMDAyIHRyYWNrX2luX21vdmll77yM6KGo56S66K+ldHJhY2vlnKjmkq3mlL7kuK3ooqvlvJXnlKjvvJtcbiAgICAgICAgICAgIC8vMHgwMDAwMDQgdHJhY2tfaW5fcHJldmlld++8jOihqOekuuivpXRyYWNr5Zyo6aKE6KeI5pe26KKr5byV55So44CCXG4gICAgICAgICAgICAvL+S4gOiIrOivpeWAvOS4ujfvvIwxKzIrNCDlpoLmnpzkuIDkuKrlqpLkvZPmiYDmnIl0cmFja+Wdh+acquiuvue9rnRyYWNrX2luX21vdmll5ZKMdHJhY2tfaW5fcHJldmlld++8jOWwhuiiq+eQhuino+S4uuaJgOaciXRyYWNr5Z2H6K6+572u5LqG6L+Z5Lik6aG577yb5a+55LqOaGludCB0cmFja++8jOivpeWAvOS4ujBcbiAgICAgICAgICAgIC8vaGludCB0cmFja8KgIOi/meS4queJueauiueahHRyYWNr5bm25LiN5YyF5ZCr5aqS5L2T5pWw5o2u77yM6ICM5piv5YyF5ZCr5LqG5LiA5Lqb5bCG5YW25LuW5pWw5o2udHJhY2vmiZPljIXmiJDmtYHlqpLkvZPnmoTmjIfnpLrkv6Hmga/jgIJcbiAgICAgICAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIC8vIGNyZWF0aW9uX3RpbWVcdOWIm+W7uuaXtumXtO+8iOebuOWvueS6jlVUQ+aXtumXtDE5MDQtMDEtMDHpm7bngrnnmoTnp5LmlbDvvIlcbiAgICAgICAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIC8vIG1vZGlmaWNhdGlvbl90aW1lXHTkv67mlLnml7bpl7RcbiAgICAgICAgICAgICh0cmFja0lkID4+PiAyNCkgJiAweEZGLCAvLyB0cmFja19JRDogNCBieXRlc1x0aWTlj7fvvIzkuI3og73ph43lpI3kuJTkuI3og73kuLowXG4gICAgICAgICAgICAodHJhY2tJZCA+Pj4gMTYpICYgMHhGRixcbiAgICAgICAgICAgICh0cmFja0lkID4+PiA4KSAmIDB4RkYsXG4gICAgICAgICAgICAodHJhY2tJZCkgJiAweEZGLFxuICAgICAgICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgLy8gcmVzZXJ2ZWQ6IDQgYnl0ZXMgICAg5L+d55WZ5L2NXG4gICAgICAgICAgICAoZHVyYXRpb24gPj4+IDI0KSAmIDB4RkYsIC8vIGR1cmF0aW9uOiA0IGJ5dGVzICBcdHRyYWNr55qE5pe26Ze06ZW/5bqmXG4gICAgICAgICAgICAoZHVyYXRpb24gPj4+IDE2KSAmIDB4RkYsXG4gICAgICAgICAgICAoZHVyYXRpb24gPj4+IDgpICYgMHhGRixcbiAgICAgICAgICAgIChkdXJhdGlvbikgJiAweEZGLFxuICAgICAgICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgLy8gcmVzZXJ2ZWQ6IDIgKiA0IGJ5dGVzICAgIOS/neeVmeS9jVxuICAgICAgICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCxcbiAgICAgICAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIC8vIGxheWVyKDJieXRlcykgKyBhbHRlcm5hdGVfZ3JvdXAoMmJ5dGVzKSAg6KeG6aKR5bGC77yM6buY6K6k5Li6MO+8jOWAvOWwj+eahOWcqOS4iuWxgi50cmFja+WIhue7hOS/oeaBr++8jOm7mOiupOS4ujDooajnpLror6V0cmFja+acquS4juWFtuS7lnRyYWNr5pyJ576k57uE5YWz57O7XG4gICAgICAgICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLCAvLyB2b2x1bWUoMmJ5dGVzKSArIHJlc2VydmVkKDJieXRlcykgICAgWzguOF0g5qC85byP77yM5aaC5p6c5Li66Z+z6aKRdHJhY2vvvIwxLjDvvIgweDAxMDDvvInooajnpLrmnIDlpKfpn7Pph4/vvJvlkKbliJnkuLowICAgK+S/neeVmeS9jVxuICAgICAgICAgICAgMHgwMCwgMHgwMSwgMHgwMCwgMHgwMCwgLy8gLS0tLWJlZ2luIGNvbXBvc2l0aW9uIG1hdHJpeC0tLS1cbiAgICAgICAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsXG4gICAgICAgICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLFxuICAgICAgICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCxcbiAgICAgICAgICAgIDB4MDAsIDB4MDEsIDB4MDAsIDB4MDAsIC8v6KeG6aKR5Y+Y5o2i55+p6Zi1XG4gICAgICAgICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLFxuICAgICAgICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCxcbiAgICAgICAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsXG4gICAgICAgICAgICAweDQwLCAweDAwLCAweDAwLCAweDAwLCAvLyAtLS0tZW5kIGNvbXBvc2l0aW9uIG1hdHJpeC0tLS1cbiAgICAgICAgICAgICh3aWR0aCA+Pj4gOCkgJiAweEZGLCAvLyAvL+WuveW6plxuICAgICAgICAgICAgKHdpZHRoKSAmIDB4RkYsXG4gICAgICAgICAgICAweDAwLCAweDAwLFxuICAgICAgICAgICAgKGhlaWdodCA+Pj4gOCkgJiAweEZGLCAvL+mrmOW6plxuICAgICAgICAgICAgKGhlaWdodCkgJiAweEZGLFxuICAgICAgICAgICAgMHgwMCwgMHgwMFxuICAgICAgICBdKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICog4oCcbWRpYeKAneS5n+aYr+S4qmNvbnRhaW5lciBib3jvvIzlhbblrZBib3jnmoTnu5PmnoTlkoznp43nsbvov5jmmK/mr5TovoPlpI3mnYLnmoTjgILlhYjmnaXnnIvkuIDkuKrigJxtZGlh4oCd55qE5a6e5L6L57uT5p6E5qCR5Zu+44CCXG4gICAgICog5oC75L2T5p2l6K+077yM4oCcbWRpYeKAneWumuS5ieS6hnRyYWNr5aqS5L2T57G75Z6L5Lul5Y+Kc2FtcGxl5pWw5o2u77yM5o+P6L+wc2FtcGxl5L+h5oGv44CC5LiA6Iis4oCcbWRpYeKAneWMheWQq+S4gOS4quKAnG1kaGTigJ3vvIxcbiAgICAgKiDkuIDkuKrigJxoZGxy4oCd5ZKM5LiA5Liq4oCcbWluZuKAne+8jOWFtuS4reKAnG1kaGTigJ3kuLptZWRpYSBoZWFkZXIgYm9477yM4oCcaGRscuKAneS4umhhbmRsZXIgcmVmZXJlbmNlIGJveO+8jFxuICAgICAqIOKAnG1pbmbigJ3kuLptZWRpYSBpbmZvcm1hdGlvbiBib3jjgIJcbiAgICAgKiBcbiAgICAgKiBtZGlhXG4gICAgICogXHRcdG1kaGRcbiAgICAgKiBcdFx0aGRsclxuICAgICAqIFx0XHRtaW5mXG4gICAgICogXHRcdFx0c21oZFxuICAgICAqIFx0XHRcdGRpbmZcbiAgICAgKiBcdFx0XHRcdGRyZWZcbiAgICAgKiBcdFx0XHRcdFx0dXJsXG4gICAgICogXHRcdFx0c3RibFxuICAgICAqIFx0XHRcdFx0c3RzZFxuICAgICAqIFx0XHRcdFx0XHRtcDRhXG4gICAgICogXHRcdFx0XHRcdFx0ZXNkc1xuICAgICAqIFx0XHRcdFx0c3R0c1xuICAgICAqIFx0XHRcdFx0c3RzY1xuICAgICAqIFx0XHRcdFx0c3RzelxuICAgICAqIFx0XHRcdFx0c3Rjb1xuICAgICAqL1xuICAgIHN0YXRpYyBtZGlhKG1ldGEpIHtcbiAgICAgICAgcmV0dXJuIE1QNC5ib3goTVA0LnR5cGVzLm1kaWEsIE1QNC5tZGhkKG1ldGEpLCBNUDQuaGRscihtZXRhKSwgTVA0Lm1pbmYobWV0YSkpO1xuICAgIH1cblxuICAgIC8vIE1lZGlhIGhlYWRlciBib3hcbiAgICBzdGF0aWMgbWRoZChtZXRhKSB7XG4gICAgICAgIGxldCB0aW1lc2NhbGUgPSBtZXRhLnRpbWVzY2FsZTtcbiAgICAgICAgbGV0IGR1cmF0aW9uID0gbWV0YS5kdXJhdGlvbjtcbiAgICAgICAgcmV0dXJuIE1QNC5ib3goTVA0LnR5cGVzLm1kaGQsIG5ldyBVaW50OEFycmF5KFtcbiAgICAgICAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIC8vIHZlcnNpb24oMCkgKyBmbGFncyAvLyB2ZXJzaW9uKDApICsgZmxhZ3NcdFx0Ym9454mI5pys77yMMOaIljHvvIzkuIDoiKzkuLow44CCXG4gICAgICAgICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLCAvLyBjcmVhdGlvbl90aW1lICAgIOWIm+W7uuaXtumXtFxuICAgICAgICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgLy8gbW9kaWZpY2F0aW9uX3RpbWXkv67mlLnml7bpl7RcbiAgICAgICAgICAgICh0aW1lc2NhbGUgPj4+IDI0KSAmIDB4RkYsIC8vIHRpbWVzY2FsZTogNCBieXRlcyAgICDmlofku7blqpLkvZPlnKgx56eS5pe26Ze05YaF55qE5Yi75bqm5YC877yM5Y+v5Lul55CG6Kej5Li6MeenkumVv+W6plxuICAgICAgICAgICAgKHRpbWVzY2FsZSA+Pj4gMTYpICYgMHhGRixcbiAgICAgICAgICAgICh0aW1lc2NhbGUgPj4+IDgpICYgMHhGRixcbiAgICAgICAgICAgICh0aW1lc2NhbGUpICYgMHhGRixcbiAgICAgICAgICAgIChkdXJhdGlvbiA+Pj4gMjQpICYgMHhGRiwgLy8gZHVyYXRpb246IDQgYnl0ZXMgIHRyYWNr55qE5pe26Ze06ZW/5bqmXG4gICAgICAgICAgICAoZHVyYXRpb24gPj4+IDE2KSAmIDB4RkYsXG4gICAgICAgICAgICAoZHVyYXRpb24gPj4+IDgpICYgMHhGRixcbiAgICAgICAgICAgIChkdXJhdGlvbikgJiAweEZGLFxuICAgICAgICAgICAgMHg1NSwgMHhDNCwgLy8gbGFuZ3VhZ2U6IHVuZCAodW5kZXRlcm1pbmVkKSDlqpLkvZPor63oqIDnoIHjgILmnIDpq5jkvY3kuLow77yM5ZCO6Z2iMTXkvY3kuLoz5Liq5a2X56ym77yI6KeBSVNPIDYzOS0yL1TmoIflh4bkuK3lrprkuYnvvIlcbiAgICAgICAgICAgIDB4MDAsIDB4MDAgLy8gcHJlX2RlZmluZWQgPSAwXG4gICAgICAgIF0pKTtcbiAgICB9XG5cbiAgICAvLyBNZWRpYSBoYW5kbGVyIHJlZmVyZW5jZSBib3hcbiAgICBzdGF0aWMgaGRscihtZXRhKSB7XG4gICAgICAgIGxldCBkYXRhID0gbnVsbDtcbiAgICAgICAgaWYgKG1ldGEudHlwZSA9PT0gJ2F1ZGlvJykge1xuICAgICAgICAgICAgZGF0YSA9IE1QNC5jb25zdGFudHMuSERMUl9BVURJTztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGRhdGEgPSBNUDQuY29uc3RhbnRzLkhETFJfVklERU87XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIE1QNC5ib3goTVA0LnR5cGVzLmhkbHIsIGRhdGEpO1xuICAgIH1cblxuICAgIC8qKlxuXHRcdCAqIOKAnG1pbmbigJ3lrZjlgqjkuobop6Pph4p0cmFja+WqkuS9k+aVsOaNrueahGhhbmRsZXItc3BlY2lmaWPkv6Hmga/vvIxtZWRpYSBoYW5kbGVy55So6L+Z5Lqb5L+h5oGv5bCG5aqS5L2T5pe26Ze05pig5bCE5Yiw5aqS5L2T5pWw5o2u5bm26L+b6KGM5aSE55CG44CC4oCcbWluZuKAneS4reeahOS/oeaBr+agvOW8j+WSjOWGheWuueS4juWqkuS9k+exu+Wei+S7peWPiuino+mHiuWqkuS9k+aVsOaNrueahG1lZGlhIGhhbmRsZXLlr4bliIfnm7jlhbPvvIzlhbbku5ZtZWRpYSBoYW5kbGVy5LiN55+l6YGT5aaC5L2V6Kej6YeK6L+Z5Lqb5L+h5oGv44CC4oCcbWluZuKAneaYr+S4gOS4qmNvbnRhaW5lciBib3jvvIzlhbblrp7pmYXlhoXlrrnnlLHlrZBib3jor7TmmI7jgIJcbsKgwqDCoCDkuIDoiKzmg4XlhrXkuIvvvIzigJxtaW5m4oCd5YyF5ZCr5LiA5LiqaGVhZGVyIGJveO+8jOS4gOS4quKAnGRpbmbigJ3lkozkuIDkuKrigJxzdGJs4oCd77yM5YW25Lit77yMaGVhZGVyIGJveOagueaNrnRyYWNrIHR5cGXvvIjljbNtZWRpYSBoYW5kbGVyIHR5cGXvvInliIbkuLrigJx2bWhk4oCd44CB4oCcc21oZOKAneOAgeKAnGhtaGTigJ3lkozigJxubWhk4oCd77yM4oCcZGluZuKAneS4umRhdGEgaW5mb3JtYXRpb24gYm9477yM4oCcc3RibOKAneS4unNhbXBsZSB0YWJsZSBib3jjgILkuIvpnaLliIbliKvku4vnu43jgIJcblxuXHRcdCAqIFxuXHRcdCAqL1xuICAgIC8vIE1lZGlhIGluZm9tYXRpb24gYm94XG4gICAgc3RhdGljIG1pbmYobWV0YSkge1xuICAgICAgICAvL2hlYWRlciBib3jmoLnmja50cmFjayB0eXBl77yI5Y2zbWVkaWEgaGFuZGxlciB0eXBl77yJ5YiG5Li64oCcdm1oZOKAneOAgeKAnHNtaGTigJ3jgIHigJxobWhk4oCd5ZKM4oCcbm1oZOKAnVxuICAgICAgICBsZXQgeG1oZCA9IG51bGw7XG4gICAgICAgIGlmIChtZXRhLnR5cGUgPT09ICdhdWRpbycpIHtcbiAgICAgICAgICAgIHhtaGQgPSBNUDQuYm94KE1QNC50eXBlcy5zbWhkLCBNUDQuY29uc3RhbnRzLlNNSEQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgeG1oZCA9IE1QNC5ib3goTVA0LnR5cGVzLnZtaGQsIE1QNC5jb25zdGFudHMuVk1IRCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIE1QNC5ib3goTVA0LnR5cGVzLm1pbmYsIHhtaGQsIE1QNC5kaW5mKCksIE1QNC5zdGJsKG1ldGEpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEYXRhIEluZm9ybWF0aW9uIEJveFxuICAgICAqIOKAnGRpbmbigJ3op6Pph4rlpoLkvZXlrprkvY3lqpLkvZPkv6Hmga/vvIzmmK/kuIDkuKpjb250YWluZXIgYm9444CC4oCcZGluZuKAneS4gOiIrOWMheWQq+S4gOS4quKAnGRyZWbigJ3vvIzljbNkYXRhIHJlZmVyZW5jZSBib3jvvJtcbiAgICAgKiDigJxkcmVm4oCd5LiL5Lya5YyF5ZCr6Iul5bmy5Liq4oCcdXJs4oCd5oiW4oCcdXJu4oCd77yM6L+Z5LqbYm9457uE5oiQ5LiA5Liq6KGo77yM55So5p2l5a6a5L2NdHJhY2vmlbDmja7jgIJcbiAgICAgKiDnroDljZXnmoTor7TvvIx0cmFja+WPr+S7peiiq+WIhuaIkOiLpeW5suaute+8jOavj+S4gOautemDveWPr+S7peagueaNruKAnHVybOKAneaIluKAnHVybuKAneaMh+WQkeeahOWcsOWdgOadpeiOt+WPluaVsOaNru+8jFxuICAgICAqIHNhbXBsZeaPj+i/sOS4reS8mueUqOi/meS6m+eJh+auteeahOW6j+WPt+Wwhui/meS6m+eJh+autee7hOaIkOS4gOS4quWujOaVtOeahHRyYWNr44CCXG4gICAgICog5LiA6Iis5oOF5Ya15LiL77yM5b2T5pWw5o2u6KKr5a6M5YWo5YyF5ZCr5Zyo5paH5Lu25Lit5pe277yM4oCcdXJs4oCd5oiW4oCcdXJu4oCd5Lit55qE5a6a5L2N5a2X56ym5Liy5piv56m655qE44CCXG4gICAgICovXG4gICAgc3RhdGljIGRpbmYoKSB7XG4gICAgICAgIGxldCByZXN1bHQgPSBNUDQuYm94KE1QNC50eXBlcy5kaW5mLFxuICAgICAgICAgICAgTVA0LmJveChNUDQudHlwZXMuZHJlZiwgTVA0LmNvbnN0YW50cy5EUkVGKVxuICAgICAgICApO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuXHRcdCAqIFNhbXBsZSBUYWJsZSBCb3jvvIhzdGJs77yJXG7CoMKgwqAgXHQqXHTigJxzdGJs4oCd5Yeg5LmO5piv5pmu6YCa55qETVA05paH5Lu25Lit5pyA5aSN5p2C55qE5LiA5LiqYm945LqG77yM6aaW5YWI6ZyA6KaB5Zue5b+G5LiA5LiLc2FtcGxl55qE5qaC5b+144CCXG4gXHRcdCogXHRzYW1wbGXmmK/lqpLkvZPmlbDmja7lrZjlgqjnmoTljZXkvY3vvIzlrZjlgqjlnKhtZWRpYeeahGNodW5r5Lit77yMY2h1bmvlkoxzYW1wbGXnmoTplb/luqblnYflj6/kupLkuI3nm7jlkIzvvIzlpoLkuIvlm77miYDnpLrjgIJcblx0XHRcdOKAnHN0YmzigJ3mmK/kuIDkuKpjb250YWluZXIgYm9477yM5YW25a2QYm945YyF5ous77yac2FtcGxlIGRlc2NyaXB0aW9uIGJveO+8iHN0c2TvvInjgIFcblx0XHRcdCAqIHRpbWUgdG8gc2FtcGxlIGJveO+8iHN0dHPvvInjgIFzYW1wbGUgc2l6ZSBib3jvvIhzdHN65oiWc3R6Mu+8ieOAgVxuXHRcdFx0ICogc2FtcGxlIHRvIGNodW5rIGJveO+8iHN0c2PvvInjgIFjaHVuayBvZmZzZXQgYm9477yIc3Rjb+aIlmNvNjTvvInjgIFcblx0XHRcdCAqIGNvbXBvc2l0aW9uIHRpbWUgdG8gc2FtcGxlIGJveO+8iGN0dHPvvInjgIFzeW5jIHNhbXBsZSBib3jvvIhzdHNz77yJXG5cdFx0XHQgKiBzdHNk4oCd5b+F5LiN5Y+v5bCR77yM5LiU6Iez5bCR5YyF5ZCr5LiA5Liq5p2h55uu77yM6K+lYm945YyF5ZCr5LqGZGF0YSByZWZlcmVuY2UgYm946L+b6KGMc2FtcGxl5pWw5o2u5qOA57Si55qE5L+h5oGv44CCXG5cdFx0XHQgKiDmsqHmnInigJxzdHNk4oCd5bCx5peg5rOV6K6h566XbWVkaWEgc2FtcGxl55qE5a2Y5YKo5L2N572u44CC4oCcc3RzZOKAneWMheWQq+S6hue8lueggeeahOS/oeaBr++8jOWFtuWtmOWCqOeahOS/oeaBr+maj+WqkuS9k+exu+Wei+S4jeWQjOiAjOS4jeWQjOOAglxuXHRcdFx0ICogXHRcdFx0c3RibFxuXHRcdFx0ICogXHRcdFx0XHRzdHNkXG5cdFx0XHQgKiBcdFx0XHRcdFx0YXZjMVxuXHRcdFx0ICogXHRcdFx0XHRcdFx0YXZjQ1xuXHRcdFx0ICogXHRcdFx0XHRzdHRzXG5cdFx0XHQgKiBcdFx0XHRcdHN0c2Ncblx0XHRcdCAqIFx0XHRcdFx0c3RzelxuXHRcdFx0ICogXHRcdFx0XHRzdGNvXG5cdFx0ICovXG4gICAgc3RhdGljIHN0YmwobWV0YSkge1xuICAgICAgICBsZXQgcmVzdWx0ID0gTVA0LmJveChNUDQudHlwZXMuc3RibCwgLy8gdHlwZTogc3RibFxuICAgICAgICAgICAgTVA0LnN0c2QobWV0YSksIC8vIFNhbXBsZSBEZXNjcmlwdGlvbiBUYWJsZVxuICAgICAgICAgICAgTVA0LmJveChNUDQudHlwZXMuc3R0cywgTVA0LmNvbnN0YW50cy5TVFRTKSwgLy8gVGltZS1Uby1TYW1wbGUgICAg5Zug5Li6c3R0c+eahGVudHJ5IGNvdW50IOS4ujBcbiAgICAgICAgICAgIC8v5omA5Lul5rKh5pyJ5YWz6ZSu5binaW5kZXgg55qEc3Rzc1xuICAgICAgICAgICAgLy/kuZ/msqHmnIlDVFRTIGJveCBDVFRT5piv6K6w5b2V5YGP56e76YePXG4gICAgICAgICAgICBNUDQuYm94KE1QNC50eXBlcy5zdHNjLCBNUDQuY29uc3RhbnRzLlNUU0MpLCAvLyBTYW1wbGUtVG8tQ2h1bmtcbiAgICAgICAgICAgIE1QNC5ib3goTVA0LnR5cGVzLnN0c3osIE1QNC5jb25zdGFudHMuU1RTWiksIC8vIFNhbXBsZSBzaXplXG4gICAgICAgICAgICBNUDQuYm94KE1QNC50eXBlcy5zdGNvLCBNUDQuY29uc3RhbnRzLlNUQ08pIC8vIENodW5rIG9mZnNldFxuICAgICAgICApO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuXHRcdCAqIFNhbXBsZSBEZXNjcmlwdGlvbiBCb3jvvIhzdHNk77yJXG7CoMKgwqDCoFx0XHRib3ggaGVhZGVy5ZKMdmVyc2lvbuWtl+auteWQjuS8muacieS4gOS4qmVudHJ5IGNvdW505a2X5q6177yMXG4gKiBcdFx0XHTmoLnmja5lbnRyeeeahOS4quaVsO+8jOavj+S4qmVudHJ55Lya5pyJdHlwZeS/oeaBr++8jOWmguKAnHZpZGXigJ3jgIHigJxzdW5k4oCd562J77yMXG4gKiBcdFx05qC55o2udHlwZeS4jeWQjHNhbXBsZSBkZXNjcmlwdGlvbuS8muaPkOS+m+S4jeWQjOeahOS/oeaBr++8jOS+i+WmguWvueS6jnZpZGVvIHRyYWNr77yMXG4gKiDkvJrmnInigJxWaXN1YWxTYW1wbGVFbnRyeeKAneexu+Wei+S/oeaBr++8jOWvueS6jmF1ZGlvIHRyYWNr5Lya5pyJ4oCcQXVkaW9TYW1wbGVFbnRyeeKAneexu+Wei+S/oeaBr+OAglxuXG5cdFx0ICogKiBcdFx0XHRcdHN0c2Rcblx0XHRcdCogXHRcdFx0XHRcdG1wNGFcblx0XHRcdCogXHRcdFx0XHRcdFx0ZXNkc1xuXHRcdFx0ICogXG5cdFx0XHQgKiBcblx0XHRcdCAqIFxuXHRcdFx0ICogXG5cdFx0XHQgKiBcdFx0IDQgYnl0ZXMgLSBsZW5ndGggaW4gdG90YWxcblx0XHRcdFx0XHQgNCBieXRlcyAtIDQgY2hhciBjb2RlIG9mIHNhbXBsZSBkZXNjcmlwdGlvbiB0YWJsZSAoc3RzZClcblx0XHRcdFx0XHQgNCBieXRlcyAtIHZlcnNpb24gJiBmbGFnc1xuXHRcdFx0XHRcdCA0IGJ5dGVzIC0gbnVtYmVyIG9mIHNhbXBsZSBlbnRyaWVzIChudW1fc2FtcGxlX2VudHJpZXMpXG5cdFx0XHRcdFx0XHQgW1xuXHRcdFx0XHRcdFx0ICAgIDQgYnl0ZXMgLSBsZW5ndGggb2Ygc2FtcGxlIGVudHJ5IChsZW5fc2FtcGxlX2VudHJ5KVxuXHRcdFx0XHRcdFx0ICAgIDQgYnl0ZXMgLSA0IGNoYXIgY29kZSBvZiBzYW1wbGUgZW50cnlcblx0XHRcdFx0XHRcdCAgICAoJ2xlbl9zYW1wbGVfZW50cnknIC0gOCkgYnl0ZXMgb2YgZGF0YVxuXHRcdFx0XHRcdFx0IF0gKHJlcGVhdGVkICdudW1fc2FtcGxlX2VudHJpZXMnIHRpbWVzKVxuXHRcdFx0XHRcdCg0IGJ5dGVzIC0gb3B0aW9uYWwgMHgwMDAwMDAwMCBhcyBlbmQgb2YgYm94IG1hcmtlciApXG5cdFx0ICovXG4gICAgc3RhdGljIHN0c2QobWV0YSkge1xuICAgICAgICBpZiAobWV0YS50eXBlID09PSAnYXVkaW8nKSB7XG4gICAgICAgICAgICByZXR1cm4gTVA0LmJveChNUDQudHlwZXMuc3RzZCwgTVA0LmNvbnN0YW50cy5TVFNEX1BSRUZJWCwgTVA0Lm1wNGEobWV0YSkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIE1QNC5ib3goTVA0LnR5cGVzLnN0c2QsIE1QNC5jb25zdGFudHMuU1RTRF9QUkVGSVgsIE1QNC5hdmMxKG1ldGEpKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHN0YXRpYyBtcDRhKG1ldGEpIHtcbiAgICAgICAgbGV0IGNoYW5uZWxDb3VudCA9IG1ldGEuY2hhbm5lbENvdW50O1xuICAgICAgICBsZXQgc2FtcGxlUmF0ZSA9IG1ldGEuYXVkaW9TYW1wbGVSYXRlO1xuXG4gICAgICAgIGxldCBkYXRhID0gbmV3IFVpbnQ4QXJyYXkoW1xuICAgICAgICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgLy8gcmVzZXJ2ZWQoNCkgNuS4quWtl+iKgu+8jOiuvue9ruS4ujDvvJtcbiAgICAgICAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDEsIC8vIHJlc2VydmVkKDIpICsgZGF0YV9yZWZlcmVuY2VfaW5kZXgoMilcbiAgICAgICAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIC8vIHJlc2VydmVkOiAyICogNCBieXRlcyDkv53nlZnkvY1cbiAgICAgICAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsXG4gICAgICAgICAgICAweDAwLCBjaGFubmVsQ291bnQsIC8vIGNoYW5uZWxDb3VudCgyKSDljZXlo7DpgZPov5jmmK/lj4zlo7DpgZNcbiAgICAgICAgICAgIDB4MDAsIDB4MTAsIC8vIHNhbXBsZVNpemUoMilcbiAgICAgICAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIC8vIHJlc2VydmVkKDQpIDTlrZfoioLkv53nlZnkvY1cbiAgICAgICAgICAgIChzYW1wbGVSYXRlID4+PiA4KSAmIDB4RkYsIC8vIEF1ZGlvIHNhbXBsZSByYXRlIOaYvueEtuimgeWPs+enuzE25L2N5omN5pyJ5oSP5LmJXHR0ZW1wbGF0ZSB1bnNpZ25lZCBpbnQoMzIpIHNhbXBsZXJhdGUgPSB7dGltZXNjYWxlIG9mIG1lZGlhfTw8MTY7XG4gICAgICAgICAgICAoc2FtcGxlUmF0ZSkgJiAweEZGLFxuICAgICAgICAgICAgMHgwMCwgMHgwMFxuICAgICAgICBdKTtcblxuICAgICAgICByZXR1cm4gTVA0LmJveChNUDQudHlwZXMubXA0YSwgZGF0YSwgTVA0LmVzZHMobWV0YSkpO1xuICAgIH1cblxuICAgIHN0YXRpYyBlc2RzKG1ldGEpIHtcbiAgICAgICAgbGV0IGNvbmZpZyA9IG1ldGEuY29uZmlnO1xuICAgICAgICBsZXQgY29uZmlnU2l6ZSA9IGNvbmZpZy5sZW5ndGg7XG4gICAgICAgIGxldCBkYXRhID0gbmV3IFVpbnQ4QXJyYXkoW1xuICAgICAgICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgLy8gdmVyc2lvbiAwICsgZmxhZ3NcblxuICAgICAgICAgICAgMHgwMywgLy8gZGVzY3JpcHRvcl90eXBlICAgIE1QNEVTRGVzY3JUYWdcbiAgICAgICAgICAgIDB4MTcgKyBjb25maWdTaXplLCAvLyBsZW5ndGgzXG4gICAgICAgICAgICAweDAwLCAweDAxLCAvLyBlc19pZFxuICAgICAgICAgICAgMHgwMCwgLy8gc3RyZWFtX3ByaW9yaXR5XG5cbiAgICAgICAgICAgIDB4MDQsIC8vIGRlc2NyaXB0b3JfdHlwZSAgICBNUDREZWNDb25maWdEZXNjclRhZ1xuICAgICAgICAgICAgMHgwRiArIGNvbmZpZ1NpemUsIC8vIGxlbmd0aFxuICAgICAgICAgICAgMHg0MCwgLy8gY29kZWM6IG1wZWc0X2F1ZGlvXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAq5b2Tb2JqZWN0VHlwZUluZGljYXRpb27kuLoweDQw5pe277yM5Li6TVBFRy00IEF1ZGlv77yITVBFRy00IEF1ZGlvIGdlbmVyYWxseSBpcyB0aG91Z2h0IG9mIGFzIEFBQyBcbiAgICAgICAgICAgICAqIGJ1dCB0aGVyZSBpcyBhIHdob2xlIGZyYW1ld29yayBvZiBhdWRpbyBjb2RlY3MgdGhhdCBjYW4gR28gaW4gTVBFRy00IEF1ZGlvIGluY2x1ZGluZyBBQUMsIEJTQUMsIEFMUywgQ0VMUCwgXG4gICAgICAgICAgICAgKiBhbmQgc29tZXRoaW5nIGNhbGxlZCBNUDNPbjTvvInvvIzlpoLmnpzmg7Pmm7Tnu4bliIZmb3JtYXTkuLphYWPov5jmmK9tcDPvvIxcbiAgICAgICAgICAgICAqIOWPr+S7peivu+WPlk1QNERlY1NwZWNpZmljRGVzY3LlsYJkYXRhWzBd55qE5YmN5LqU5L2NXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIDB4MTUsIC8vIHN0cmVhbV90eXBlOiBBdWRpb1xuICAgICAgICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgLy8gYnVmZmVyX3NpemVcbiAgICAgICAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIC8vIG1heEJpdHJhdGVcbiAgICAgICAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIC8vIGF2Z0JpdHJhdGVcblxuICAgICAgICAgICAgMHgwNSAvLyBkZXNjcmlwdG9yX3R5cGUgTVA0RGVjU3BlY2lmaWNEZXNjclRhZ1xuICAgICAgICBdLmNvbmNhdChbXG4gICAgICAgICAgICBjb25maWdTaXplXG4gICAgICAgIF0pLmNvbmNhdChcbiAgICAgICAgICAgIGNvbmZpZ1xuICAgICAgICApLmNvbmNhdChbXG4gICAgICAgICAgICAweDA2LCAweDAxLCAweDAyIC8vIEdBU3BlY2lmaWNDb25maWdcbiAgICAgICAgXSkpO1xuICAgICAgICByZXR1cm4gTVA0LmJveChNUDQudHlwZXMuZXNkcywgZGF0YSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICog5pS554mIXG4gICAgICpzdHNk5LiL55qEYXZjMeinhumikeino+aekCBcbiAgICAgKi9cbiAgICBzdGF0aWMgYXZjMShtZXRhKSB7XG4gICAgICAgIGxldCBhdmNjID0gbWV0YS5hdmNjO1xuICAgICAgICBsZXQgd2lkdGggPSBtZXRhLmNvZGVjV2lkdGgsXG4gICAgICAgICAgICBoZWlnaHQgPSBtZXRhLmNvZGVjSGVpZ2h0O1xuXG4gICAgICAgIGxldCBkYXRhID0gbmV3IFVpbnQ4QXJyYXkoW1xuICAgICAgICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgLy8gLy8gcmVzZXJ2ZWQoNCkgICAgNuS4qsKg5L+d55WZ5L2NXHRSZXNlcnZlZO+8mjbkuKrlrZfoioLvvIzorr7nva7kuLow77ybXG4gICAgICAgICAgICAweDAwLCAweDAwLCAweDAwLCAweDAxLCAvLyByZXNlcnZlZCgyKSArIHt7e3tkYXRhX3JlZmVyZW5jZV9pbmRleCgyKSAg5pWw5o2u5byV55So57Si5byVfX19fVxuICAgICAgICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgLy8gcHJlX2RlZmluZWQoMikgKyByZXNlcnZlZCgyKVxuICAgICAgICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgLy8gcHJlX2RlZmluZWQ6IDMgKiA0IGJ5dGVzICAzKjTkuKrlrZfoioLnmoTkv53nlZnkvY1cbiAgICAgICAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsXG4gICAgICAgICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLFxuICAgICAgICAgICAgKHdpZHRoID4+PiA4KSAmIDB4RkYsIC8vIHdpZHRoOiAyIGJ5dGVzXG4gICAgICAgICAgICAod2lkdGgpICYgMHhGRixcbiAgICAgICAgICAgIChoZWlnaHQgPj4+IDgpICYgMHhGRiwgLy8gaGVpZ2h0OiAyIGJ5dGVzXG4gICAgICAgICAgICAoaGVpZ2h0KSAmIDB4RkYsXG4gICAgICAgICAgICAweDAwLCAweDQ4LCAweDAwLCAweDAwLCAvLyBob3JpenJlc29sdXRpb246IDQgYnl0ZXMg5bi45pWwXG4gICAgICAgICAgICAweDAwLCAweDQ4LCAweDAwLCAweDAwLCAvLyB2ZXJ0cmVzb2x1dGlvbjogNCBieXRlcyDluLjmlbBcbiAgICAgICAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIC8vIHJlc2VydmVkOiA0IGJ5dGVzIOS/neeVmeS9jVxuICAgICAgICAgICAgMHgwMCwgMHgwMSwgLy8gZnJhbWVfY291bnRcdFx0XG4gICAgICAgICAgICAvL2ZyYW1lX2NvdW506KGo5piO5aSa5bCR5bin5Y6L57yp6KeG6aKR5a2Y5YKo5Zyo5q+P5Liq5qC35pys44CC6buY6K6k5pivMSzmr4/moLfkuIDluKc75a6D5Y+v6IO96LaF6L+HMeavj+S4quagt+acrOeahOWkmuS4quW4p+aVsFxuICAgICAgICAgICAgMHgwNCwgLy9cdHN0cmxlbiBjb21wcmVzc29ybmFtZTogMzIgYnl0ZXNcdFx0XHRTdHJpbmdbMzJdXG4gICAgICAgICAgICAvLzMy5LiqOCBiaXQgICAg56ys5LiA5LiqOGJpdOihqOekuumVv+W6pizliankuIszMeS4qjhiaXTooajnpLrlhoXlrrlcbiAgICAgICAgICAgIDB4NjcsIDB4MzEsIDB4MzEsIDB4MzEsIC8vIGNvbXByZXNzb3JuYW1lOiAzMiBieXRlcyAgICDnv7vor5Hov4fmnaXmmK9nMTExXG4gICAgICAgICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLCAvL1xuICAgICAgICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgLy9cbiAgICAgICAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsXG4gICAgICAgICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLFxuICAgICAgICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCxcbiAgICAgICAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsXG4gICAgICAgICAgICAweDAwLCAweDAwLCAweDAwLFxuICAgICAgICAgICAgMHgwMCwgMHgxOCwgLy8gZGVwdGgg6aKc6Imy5rex5bqmXG4gICAgICAgICAgICAweEZGLCAweEZGIC8vIHByZV9kZWZpbmVkID0gLTFcbiAgICAgICAgXSk7XG4gICAgICAgIHJldHVybiBNUDQuYm94KE1QNC50eXBlcy5hdmMxLCBkYXRhLCBNUDQuYm94KE1QNC50eXBlcy5hdmNDLCBhdmNjKSk7XG4gICAgfVxuXG4gICAgLy8gTW92aWUgRXh0ZW5kcyBib3hcbiAgICBzdGF0aWMgbXZleChtZXRhKSB7XG4gICAgICAgIGlmIChtZXRhLmxlbmd0aCA+IDEpXG4gICAgICAgICAgICByZXR1cm4gTVA0LmJveChNUDQudHlwZXMubXZleCwgTVA0LnRyZXgobWV0YVswXSksIE1QNC50cmV4KG1ldGFbMV0pKTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgcmV0dXJuIE1QNC5ib3goTVA0LnR5cGVzLm12ZXgsIE1QNC50cmV4KG1ldGFbMF0pKTtcbiAgICB9XG5cbiAgICAvLyBUcmFjayBFeHRlbmRzIGJveFxuICAgIHN0YXRpYyB0cmV4KG1ldGEpIHtcbiAgICAgICAgbGV0IHRyYWNrSWQgPSBtZXRhLmlkO1xuICAgICAgICBsZXQgZGF0YSA9IG5ldyBVaW50OEFycmF5KFtcbiAgICAgICAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIC8vIHZlcnNpb24oMCkgKyBmbGFnc1xuICAgICAgICAgICAgKHRyYWNrSWQgPj4+IDI0KSAmIDB4RkYsIC8vIHRyYWNrX0lEXG4gICAgICAgICAgICAodHJhY2tJZCA+Pj4gMTYpICYgMHhGRixcbiAgICAgICAgICAgICh0cmFja0lkID4+PiA4KSAmIDB4RkYsXG4gICAgICAgICAgICAodHJhY2tJZCkgJiAweEZGLFxuICAgICAgICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMSwgLy8gZGVmYXVsdF9zYW1wbGVfZGVzY3JpcHRpb25faW5kZXhcbiAgICAgICAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIC8vIGRlZmF1bHRfc2FtcGxlX2R1cmF0aW9uXG4gICAgICAgICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLCAvLyBkZWZhdWx0X3NhbXBsZV9zaXplXG4gICAgICAgICAgICAweDAwLCAweDAxLCAweDAwLCAweDAxIC8vIGRlZmF1bHRfc2FtcGxlX2ZsYWdzXG4gICAgICAgIF0pO1xuICAgICAgICAvLyBpZiAobWV0YS50eXBlICE9PSAndmlkZW8nKSB7XG4gICAgICAgIC8vICAgICBkYXRhW2RhdGEubGVuZ3RoIC0gMV0gPSAweDAwO1xuICAgICAgICAvLyB9XG4gICAgICAgIHJldHVybiBNUDQuYm94KE1QNC50eXBlcy50cmV4LCBkYXRhKTtcbiAgICB9XG5cbiAgICAvLyBNb3ZpZSBmcmFnbWVudCBib3hcbiAgICBzdGF0aWMgbW9vZih0cmFjaywgYmFzZU1lZGlhRGVjb2RlVGltZSkge1xuICAgICAgICByZXR1cm4gTVA0LmJveChNUDQudHlwZXMubW9vZiwgTVA0Lm1maGQodHJhY2suc2VxdWVuY2VOdW1iZXIpLCBNUDQudHJhZih0cmFjaywgYmFzZU1lZGlhRGVjb2RlVGltZSkpO1xuICAgIH1cblxuICAgIHN0YXRpYyBtZmhkKHNlcXVlbmNlTnVtYmVyKSB7XG4gICAgICAgIGxldCBkYXRhID0gbmV3IFVpbnQ4QXJyYXkoW1xuICAgICAgICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCxcbiAgICAgICAgICAgIChzZXF1ZW5jZU51bWJlciA+Pj4gMjQpICYgMHhGRiwgLy8gc2VxdWVuY2VfbnVtYmVyOiBpbnQzMlxuICAgICAgICAgICAgKHNlcXVlbmNlTnVtYmVyID4+PiAxNikgJiAweEZGLFxuICAgICAgICAgICAgKHNlcXVlbmNlTnVtYmVyID4+PiA4KSAmIDB4RkYsXG4gICAgICAgICAgICAoc2VxdWVuY2VOdW1iZXIpICYgMHhGRlxuICAgICAgICBdKTtcbiAgICAgICAgcmV0dXJuIE1QNC5ib3goTVA0LnR5cGVzLm1maGQsIGRhdGEpO1xuICAgIH1cblxuICAgIC8vIFRyYWNrIGZyYWdtZW50IGJveFxuICAgIHN0YXRpYyB0cmFmKHRyYWNrLCBiYXNlTWVkaWFEZWNvZGVUaW1lKSB7XG4gICAgICAgIGxldCB0cmFja0lkID0gdHJhY2suaWQ7XG5cbiAgICAgICAgLy8gVHJhY2sgZnJhZ21lbnQgaGVhZGVyIGJveFxuICAgICAgICBsZXQgdGZoZCA9IE1QNC5ib3goTVA0LnR5cGVzLnRmaGQsIG5ldyBVaW50OEFycmF5KFtcbiAgICAgICAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIC8vIHZlcnNpb24oMCkgJiBmbGFnc1xuICAgICAgICAgICAgKHRyYWNrSWQgPj4+IDI0KSAmIDB4RkYsIC8vIHRyYWNrX0lEXG4gICAgICAgICAgICAodHJhY2tJZCA+Pj4gMTYpICYgMHhGRixcbiAgICAgICAgICAgICh0cmFja0lkID4+PiA4KSAmIDB4RkYsXG4gICAgICAgICAgICAodHJhY2tJZCkgJiAweEZGXG4gICAgICAgIF0pKTtcbiAgICAgICAgLy8gVHJhY2sgRnJhZ21lbnQgRGVjb2RlIFRpbWVcbiAgICAgICAgbGV0IHRmZHQgPSBNUDQuYm94KE1QNC50eXBlcy50ZmR0LCBuZXcgVWludDhBcnJheShbXG4gICAgICAgICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLCAvLyB2ZXJzaW9uKDApICYgZmxhZ3NcbiAgICAgICAgICAgIChiYXNlTWVkaWFEZWNvZGVUaW1lID4+PiAyNCkgJiAweEZGLCAvLyBiYXNlTWVkaWFEZWNvZGVUaW1lOiBpbnQzMlxuICAgICAgICAgICAgKGJhc2VNZWRpYURlY29kZVRpbWUgPj4+IDE2KSAmIDB4RkYsXG4gICAgICAgICAgICAoYmFzZU1lZGlhRGVjb2RlVGltZSA+Pj4gOCkgJiAweEZGLFxuICAgICAgICAgICAgKGJhc2VNZWRpYURlY29kZVRpbWUpICYgMHhGRlxuICAgICAgICBdKSk7XG4gICAgICAgIGxldCBzZHRwID0gTVA0LnNkdHAodHJhY2spO1xuICAgICAgICBsZXQgdHJ1biA9IE1QNC50cnVuKHRyYWNrLCBzZHRwLmJ5dGVMZW5ndGggKyAxNiArIDE2ICsgOCArIDE2ICsgOCArIDgpO1xuXG4gICAgICAgIHJldHVybiBNUDQuYm94KE1QNC50eXBlcy50cmFmLCB0ZmhkLCB0ZmR0LCB0cnVuLCBzZHRwKTtcbiAgICB9XG5cbiAgICAvLyBTYW1wbGUgRGVwZW5kZW5jeSBUeXBlIGJveFxuICAgIHN0YXRpYyBzZHRwKHRyYWNrKSB7XG4gICAgICAgIGxldCBzYW1wbGVzID0gdHJhY2suc2FtcGxlcyB8fCBbXTtcbiAgICAgICAgbGV0IHNhbXBsZUNvdW50ID0gc2FtcGxlcy5sZW5ndGg7XG4gICAgICAgIGxldCBkYXRhID0gbmV3IFVpbnQ4QXJyYXkoNCArIHNhbXBsZUNvdW50KTtcbiAgICAgICAgLy8gMH40IGJ5dGVzOiB2ZXJzaW9uKDApICYgZmxhZ3NcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzYW1wbGVDb3VudDsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgZmxhZ3MgPSBzYW1wbGVzW2ldLmZsYWdzO1xuICAgICAgICAgICAgZGF0YVtpICsgNF0gPSAoZmxhZ3MuaXNMZWFkaW5nIDw8IDYpIC8vIGlzX2xlYWRpbmc6IDIgKGJpdClcbiAgICAgICAgICAgICAgICB8XG4gICAgICAgICAgICAgICAgKGZsYWdzLmRlcGVuZHNPbiA8PCA0KSAvLyBzYW1wbGVfZGVwZW5kc19vblxuICAgICAgICAgICAgICAgIHxcbiAgICAgICAgICAgICAgICAoZmxhZ3MuaXNEZXBlbmRlZE9uIDw8IDIpIC8vIHNhbXBsZV9pc19kZXBlbmRlZF9vblxuICAgICAgICAgICAgICAgIHxcbiAgICAgICAgICAgICAgICAoZmxhZ3MuaGFzUmVkdW5kYW5jeSk7IC8vIHNhbXBsZV9oYXNfcmVkdW5kYW5jeVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBNUDQuYm94KE1QNC50eXBlcy5zZHRwLCBkYXRhKTtcbiAgICB9XG5cbiAgICAvLyBUcmFjayBmcmFnbWVudCBydW4gYm94XG4gICAgc3RhdGljIHRydW4odHJhY2ssIG9mZnNldCkge1xuICAgICAgICBsZXQgc2FtcGxlcyA9IHRyYWNrLnNhbXBsZXMgfHwgW107XG4gICAgICAgIGxldCBzYW1wbGVDb3VudCA9IHNhbXBsZXMubGVuZ3RoO1xuICAgICAgICBsZXQgZGF0YVNpemUgPSAxMiArIDE2ICogc2FtcGxlQ291bnQ7XG4gICAgICAgIGxldCBkYXRhID0gbmV3IFVpbnQ4QXJyYXkoZGF0YVNpemUpO1xuICAgICAgICBvZmZzZXQgKz0gOCArIGRhdGFTaXplO1xuXG4gICAgICAgIGRhdGEuc2V0KFtcbiAgICAgICAgICAgIDB4MDAsIDB4MDAsIDB4MEYsIDB4MDEsIC8vIHZlcnNpb24oMCkgJiBmbGFnc1xuICAgICAgICAgICAgKHNhbXBsZUNvdW50ID4+PiAyNCkgJiAweEZGLCAvLyBzYW1wbGVfY291bnRcbiAgICAgICAgICAgIChzYW1wbGVDb3VudCA+Pj4gMTYpICYgMHhGRixcbiAgICAgICAgICAgIChzYW1wbGVDb3VudCA+Pj4gOCkgJiAweEZGLFxuICAgICAgICAgICAgKHNhbXBsZUNvdW50KSAmIDB4RkYsXG4gICAgICAgICAgICAob2Zmc2V0ID4+PiAyNCkgJiAweEZGLCAvLyBkYXRhX29mZnNldFxuICAgICAgICAgICAgKG9mZnNldCA+Pj4gMTYpICYgMHhGRixcbiAgICAgICAgICAgIChvZmZzZXQgPj4+IDgpICYgMHhGRixcbiAgICAgICAgICAgIChvZmZzZXQpICYgMHhGRlxuICAgICAgICBdLCAwKTtcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNhbXBsZUNvdW50OyBpKyspIHtcblxuICAgICAgICAgICAgbGV0IGR1cmF0aW9uID0gc2FtcGxlc1tpXS5kdXJhdGlvbjtcblxuICAgICAgICAgICAgbGV0IHNpemUgPSBzYW1wbGVzW2ldLnNpemU7XG4gICAgICAgICAgICBsZXQgZmxhZ3MgPSBzYW1wbGVzW2ldLmZsYWdzO1xuICAgICAgICAgICAgbGV0IGN0cyA9IHNhbXBsZXNbaV0uY3RzO1xuICAgICAgICAgICAgZGF0YS5zZXQoW1xuICAgICAgICAgICAgICAgIChkdXJhdGlvbiA+Pj4gMjQpICYgMHhGRiwgLy8gc2FtcGxlX2R1cmF0aW9uXG4gICAgICAgICAgICAgICAgKGR1cmF0aW9uID4+PiAxNikgJiAweEZGLFxuICAgICAgICAgICAgICAgIChkdXJhdGlvbiA+Pj4gOCkgJiAweEZGLFxuICAgICAgICAgICAgICAgIChkdXJhdGlvbikgJiAweEZGLFxuICAgICAgICAgICAgICAgIChzaXplID4+PiAyNCkgJiAweEZGLCAvLyBzYW1wbGVfc2l6ZVxuICAgICAgICAgICAgICAgIChzaXplID4+PiAxNikgJiAweEZGLFxuICAgICAgICAgICAgICAgIChzaXplID4+PiA4KSAmIDB4RkYsXG4gICAgICAgICAgICAgICAgKHNpemUpICYgMHhGRixcbiAgICAgICAgICAgICAgICAoZmxhZ3MuaXNMZWFkaW5nIDw8IDIpIHwgZmxhZ3MuZGVwZW5kc09uLCAvLyBzYW1wbGVfZmxhZ3NcbiAgICAgICAgICAgICAgICAoZmxhZ3MuaXNEZXBlbmRlZE9uIDw8IDYpIHwgKGZsYWdzLmhhc1JlZHVuZGFuY3kgPDwgNCkgfCBmbGFncy5pc05vblN5bmMsXG4gICAgICAgICAgICAgICAgMHgwMCwgMHgwMCwgLy8gc2FtcGxlX2RlZ3JhZGF0aW9uX3ByaW9yaXR5XG4gICAgICAgICAgICAgICAgKGN0cyA+Pj4gMjQpICYgMHhGRiwgLy8gc2FtcGxlX2NvbXBvc2l0aW9uX3RpbWVfb2Zmc2V0XG4gICAgICAgICAgICAgICAgKGN0cyA+Pj4gMTYpICYgMHhGRixcbiAgICAgICAgICAgICAgICAoY3RzID4+PiA4KSAmIDB4RkYsXG4gICAgICAgICAgICAgICAgKGN0cykgJiAweEZGXG4gICAgICAgICAgICBdLCAxMiArIDE2ICogaSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIE1QNC5ib3goTVA0LnR5cGVzLnRydW4sIGRhdGEpO1xuICAgIH1cblxuICAgIHN0YXRpYyBtZGF0KGRhdGEpIHtcbiAgICAgICAgcmV0dXJuIE1QNC5ib3goTVA0LnR5cGVzLm1kYXQsIGRhdGEpO1xuICAgIH1cblxufVxuXG5NUDQuaW5pdCgpO1xuXG5leHBvcnQgZGVmYXVsdCBNUDQ7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vanMvbXA0L21wNHJlbXV4LmpzIl0sInNvdXJjZVJvb3QiOiIifQ==");

/***/ }),
/* 2 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _flvTag = __webpack_require__(8);\n\nvar _flvTag2 = _interopRequireDefault(_flvTag);\n\nvar _tagdemux = __webpack_require__(0);\n\nvar _tagdemux2 = _interopRequireDefault(_tagdemux);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar FlvParse = function () {\n    function FlvParse() {\n        _classCallCheck(this, FlvParse);\n\n        this.tempUint8 = new Uint8Array();\n        this.arrTag = [];\n        this.index = 0;\n        this.tempArr = [];\n        this.stop = false;\n        this.offset = 0;\n        this.frist = true;\n    }\n\n    /**\n     * 接受 外部的flv二进制数据\n     */\n\n\n    _createClass(FlvParse, [{\n        key: 'setFlv',\n        value: function setFlv(uint8) {\n            this.stop = false;\n            this.arrTag = [];\n            this.index = 0;\n            this.tempUint8 = uint8;\n            if (this.tempUint8.length > 13 && this.tempUint8[0] == 70 && this.tempUint8[1] == 76 && this.tempUint8[2] == 86) {\n                this.probe(this.tempUint8.buffer);\n                this.read(9); //略掉9个字节的flv header tag\n                this.read(4); //略掉第一个4字节的 tag size\n                this.parse();\n                this.frist = false;\n                return this.offset;\n            } else if (!this.frist) {\n                return this.parse();\n            } else {\n                return this.offset;\n            }\n        }\n    }, {\n        key: 'probe',\n        value: function probe(buffer) {\n            var data = new Uint8Array(buffer);\n            var mismatch = { match: false };\n\n            if (data[0] !== 0x46 || data[1] !== 0x4C || data[2] !== 0x56 || data[3] !== 0x01) {\n                return mismatch;\n            }\n\n            var hasAudio = (data[4] & 4) >>> 2 !== 0;\n            var hasVideo = (data[4] & 1) !== 0;\n\n            if (!hasAudio && !hasVideo) {\n                return mismatch;\n            }\n            _tagdemux2.default._hasAudio = hasAudio;\n            _tagdemux2.default._hasVideo = hasVideo;\n            return {\n                match: true,\n                hasAudioTrack: hasAudio,\n                hasVideoTrack: hasVideo\n            };\n        }\n\n        /**\n         * 开始解析\n         */\n\n    }, {\n        key: 'parse',\n        value: function parse() {\n\n            while (this.index < this.tempUint8.length && !this.stop) {\n                this.offset = this.index;\n\n                var t = new _flvTag2.default();\n                if (this.tempUint8.length - this.index >= 11) {\n                    t.tagType = this.read(1)[0]; //取出tag类型\n                    t.dataSize = this.read(3); //取出包体大小\n                    t.Timestamp = this.read(4); //取出解码时间\n                    t.StreamID = this.read(3); //取出stream id\n                } else {\n                    this.stop = true;\n                    continue;\n                }\n                if (this.tempUint8.length - this.index >= this.getBodySum(t.dataSize) + 4) {\n                    t.body = this.read(this.getBodySum(t.dataSize)); //取出body\n                    this.arrTag.push(t);\n                    this.read(4);\n                } else {\n                    this.stop = true;\n                    continue;\n                }\n                this.offset = this.index;\n            }\n\n            return this.offset;\n        }\n    }, {\n        key: 'read',\n        value: function read(length) {\n            // let u8a = new Uint8Array(length);\n            // u8a.set(this.tempUint8.subarray(this.index, this.index + length), 0);\n            var u8a = this.tempUint8.slice(this.index, this.index + length);\n            this.index += length;\n            return u8a;\n        }\n\n        /**\n         * 计算tag包体大小\n         */\n\n    }, {\n        key: 'getBodySum',\n        value: function getBodySum(arr) {\n            var _str = \"\";\n            _str += arr[0].toString(16).length == 1 ? \"0\" + arr[0].toString(16) : arr[0].toString(16);\n            _str += arr[1].toString(16).length == 1 ? \"0\" + arr[1].toString(16) : arr[1].toString(16);\n            _str += arr[2].toString(16).length == 1 ? \"0\" + arr[2].toString(16) : arr[2].toString(16);\n            return parseInt(_str, 16);\n        }\n    }]);\n\n    return FlvParse;\n}();\n\nexports.default = new FlvParse();//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9qcy9mbHYvZmx2UGFyc2UuanM/Y2FlOCJdLCJuYW1lcyI6WyJGbHZQYXJzZSIsInRlbXBVaW50OCIsIlVpbnQ4QXJyYXkiLCJhcnJUYWciLCJpbmRleCIsInRlbXBBcnIiLCJzdG9wIiwib2Zmc2V0IiwiZnJpc3QiLCJ1aW50OCIsImxlbmd0aCIsInByb2JlIiwiYnVmZmVyIiwicmVhZCIsInBhcnNlIiwiZGF0YSIsIm1pc21hdGNoIiwibWF0Y2giLCJoYXNBdWRpbyIsImhhc1ZpZGVvIiwiX2hhc0F1ZGlvIiwiX2hhc1ZpZGVvIiwiaGFzQXVkaW9UcmFjayIsImhhc1ZpZGVvVHJhY2siLCJ0IiwidGFnVHlwZSIsImRhdGFTaXplIiwiVGltZXN0YW1wIiwiU3RyZWFtSUQiLCJnZXRCb2R5U3VtIiwiYm9keSIsInB1c2giLCJ1OGEiLCJzbGljZSIsImFyciIsIl9zdHIiLCJ0b1N0cmluZyIsInBhcnNlSW50Il0sIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBOzs7O0FBQ0E7Ozs7Ozs7O0lBQ01BLFE7QUFDRix3QkFBYztBQUFBOztBQUNWLGFBQUtDLFNBQUwsR0FBaUIsSUFBSUMsVUFBSixFQUFqQjtBQUNBLGFBQUtDLE1BQUwsR0FBYyxFQUFkO0FBQ0EsYUFBS0MsS0FBTCxHQUFhLENBQWI7QUFDQSxhQUFLQyxPQUFMLEdBQWUsRUFBZjtBQUNBLGFBQUtDLElBQUwsR0FBWSxLQUFaO0FBQ0EsYUFBS0MsTUFBTCxHQUFjLENBQWQ7QUFDQSxhQUFLQyxLQUFMLEdBQWEsSUFBYjtBQUNIOztBQUVEOzs7Ozs7OytCQUdPQyxLLEVBQU87QUFDVixpQkFBS0gsSUFBTCxHQUFZLEtBQVo7QUFDQSxpQkFBS0gsTUFBTCxHQUFjLEVBQWQ7QUFDQSxpQkFBS0MsS0FBTCxHQUFhLENBQWI7QUFDQSxpQkFBS0gsU0FBTCxHQUFpQlEsS0FBakI7QUFDQSxnQkFBSSxLQUFLUixTQUFMLENBQWVTLE1BQWYsR0FBd0IsRUFBeEIsSUFBOEIsS0FBS1QsU0FBTCxDQUFlLENBQWYsS0FBcUIsRUFBbkQsSUFBeUQsS0FBS0EsU0FBTCxDQUFlLENBQWYsS0FBcUIsRUFBOUUsSUFBb0YsS0FBS0EsU0FBTCxDQUFlLENBQWYsS0FBcUIsRUFBN0csRUFBaUg7QUFDN0cscUJBQUtVLEtBQUwsQ0FBVyxLQUFLVixTQUFMLENBQWVXLE1BQTFCO0FBQ0EscUJBQUtDLElBQUwsQ0FBVSxDQUFWLEVBRjZHLENBRS9GO0FBQ2QscUJBQUtBLElBQUwsQ0FBVSxDQUFWLEVBSDZHLENBRy9GO0FBQ2QscUJBQUtDLEtBQUw7QUFDQSxxQkFBS04sS0FBTCxHQUFhLEtBQWI7QUFDQSx1QkFBTyxLQUFLRCxNQUFaO0FBQ0gsYUFQRCxNQU9PLElBQUksQ0FBQyxLQUFLQyxLQUFWLEVBQWlCO0FBQ3BCLHVCQUFPLEtBQUtNLEtBQUwsRUFBUDtBQUNILGFBRk0sTUFFQTtBQUNILHVCQUFPLEtBQUtQLE1BQVo7QUFDSDtBQUNKOzs7OEJBQ0tLLE0sRUFBUTtBQUNWLGdCQUFJRyxPQUFPLElBQUliLFVBQUosQ0FBZVUsTUFBZixDQUFYO0FBQ0EsZ0JBQUlJLFdBQVcsRUFBRUMsT0FBTyxLQUFULEVBQWY7O0FBRUEsZ0JBQUlGLEtBQUssQ0FBTCxNQUFZLElBQVosSUFBb0JBLEtBQUssQ0FBTCxNQUFZLElBQWhDLElBQXdDQSxLQUFLLENBQUwsTUFBWSxJQUFwRCxJQUE0REEsS0FBSyxDQUFMLE1BQVksSUFBNUUsRUFBa0Y7QUFDOUUsdUJBQU9DLFFBQVA7QUFDSDs7QUFFRCxnQkFBSUUsV0FBWSxDQUFDSCxLQUFLLENBQUwsSUFBVSxDQUFYLE1BQWtCLENBQW5CLEtBQTBCLENBQXpDO0FBQ0EsZ0JBQUlJLFdBQVcsQ0FBQ0osS0FBSyxDQUFMLElBQVUsQ0FBWCxNQUFrQixDQUFqQzs7QUFFQSxnQkFBSSxDQUFDRyxRQUFELElBQWEsQ0FBQ0MsUUFBbEIsRUFBNEI7QUFDeEIsdUJBQU9ILFFBQVA7QUFDSDtBQUNELCtCQUFTSSxTQUFULEdBQXFCRixRQUFyQjtBQUNBLCtCQUFTRyxTQUFULEdBQXFCRixRQUFyQjtBQUNBLG1CQUFPO0FBQ0hGLHVCQUFPLElBREo7QUFFSEssK0JBQWVKLFFBRlo7QUFHSEssK0JBQWVKO0FBSFosYUFBUDtBQUtIOztBQUVEOzs7Ozs7Z0NBR1E7O0FBRUosbUJBQU8sS0FBS2YsS0FBTCxHQUFhLEtBQUtILFNBQUwsQ0FBZVMsTUFBNUIsSUFBc0MsQ0FBQyxLQUFLSixJQUFuRCxFQUF5RDtBQUNyRCxxQkFBS0MsTUFBTCxHQUFjLEtBQUtILEtBQW5COztBQUVBLG9CQUFJb0IsSUFBSSxzQkFBUjtBQUNBLG9CQUFJLEtBQUt2QixTQUFMLENBQWVTLE1BQWYsR0FBd0IsS0FBS04sS0FBN0IsSUFBc0MsRUFBMUMsRUFBOEM7QUFDMUNvQixzQkFBRUMsT0FBRixHQUFhLEtBQUtaLElBQUwsQ0FBVSxDQUFWLEVBQWEsQ0FBYixDQUFiLENBRDBDLENBQ1g7QUFDL0JXLHNCQUFFRSxRQUFGLEdBQWEsS0FBS2IsSUFBTCxDQUFVLENBQVYsQ0FBYixDQUYwQyxDQUVmO0FBQzNCVyxzQkFBRUcsU0FBRixHQUFjLEtBQUtkLElBQUwsQ0FBVSxDQUFWLENBQWQsQ0FIMEMsQ0FHZDtBQUM1Qlcsc0JBQUVJLFFBQUYsR0FBYSxLQUFLZixJQUFMLENBQVUsQ0FBVixDQUFiLENBSjBDLENBSWY7QUFDOUIsaUJBTEQsTUFLTztBQUNILHlCQUFLUCxJQUFMLEdBQVksSUFBWjtBQUNBO0FBQ0g7QUFDRCxvQkFBSSxLQUFLTCxTQUFMLENBQWVTLE1BQWYsR0FBd0IsS0FBS04sS0FBN0IsSUFBdUMsS0FBS3lCLFVBQUwsQ0FBZ0JMLEVBQUVFLFFBQWxCLElBQThCLENBQXpFLEVBQTZFO0FBQ3pFRixzQkFBRU0sSUFBRixHQUFTLEtBQUtqQixJQUFMLENBQVUsS0FBS2dCLFVBQUwsQ0FBZ0JMLEVBQUVFLFFBQWxCLENBQVYsQ0FBVCxDQUR5RSxDQUN4QjtBQUNqRCx5QkFBS3ZCLE1BQUwsQ0FBWTRCLElBQVosQ0FBaUJQLENBQWpCO0FBQ0EseUJBQUtYLElBQUwsQ0FBVSxDQUFWO0FBQ0gsaUJBSkQsTUFJTztBQUNILHlCQUFLUCxJQUFMLEdBQVksSUFBWjtBQUNBO0FBQ0g7QUFDRCxxQkFBS0MsTUFBTCxHQUFjLEtBQUtILEtBQW5CO0FBQ0g7O0FBRUQsbUJBQU8sS0FBS0csTUFBWjtBQUNIOzs7NkJBQ0lHLE0sRUFBUTtBQUNUO0FBQ0E7QUFDQSxnQkFBSXNCLE1BQU0sS0FBSy9CLFNBQUwsQ0FBZWdDLEtBQWYsQ0FBcUIsS0FBSzdCLEtBQTFCLEVBQWlDLEtBQUtBLEtBQUwsR0FBYU0sTUFBOUMsQ0FBVjtBQUNBLGlCQUFLTixLQUFMLElBQWNNLE1BQWQ7QUFDQSxtQkFBT3NCLEdBQVA7QUFDSDs7QUFFRDs7Ozs7O21DQUdXRSxHLEVBQUs7QUFDWixnQkFBSUMsT0FBTyxFQUFYO0FBQ0FBLG9CQUFTRCxJQUFJLENBQUosRUFBT0UsUUFBUCxDQUFnQixFQUFoQixFQUFvQjFCLE1BQXBCLElBQThCLENBQTlCLEdBQWtDLE1BQU13QixJQUFJLENBQUosRUFBT0UsUUFBUCxDQUFnQixFQUFoQixDQUF4QyxHQUE4REYsSUFBSSxDQUFKLEVBQU9FLFFBQVAsQ0FBZ0IsRUFBaEIsQ0FBdkU7QUFDQUQsb0JBQVNELElBQUksQ0FBSixFQUFPRSxRQUFQLENBQWdCLEVBQWhCLEVBQW9CMUIsTUFBcEIsSUFBOEIsQ0FBOUIsR0FBa0MsTUFBTXdCLElBQUksQ0FBSixFQUFPRSxRQUFQLENBQWdCLEVBQWhCLENBQXhDLEdBQThERixJQUFJLENBQUosRUFBT0UsUUFBUCxDQUFnQixFQUFoQixDQUF2RTtBQUNBRCxvQkFBU0QsSUFBSSxDQUFKLEVBQU9FLFFBQVAsQ0FBZ0IsRUFBaEIsRUFBb0IxQixNQUFwQixJQUE4QixDQUE5QixHQUFrQyxNQUFNd0IsSUFBSSxDQUFKLEVBQU9FLFFBQVAsQ0FBZ0IsRUFBaEIsQ0FBeEMsR0FBOERGLElBQUksQ0FBSixFQUFPRSxRQUFQLENBQWdCLEVBQWhCLENBQXZFO0FBQ0EsbUJBQU9DLFNBQVNGLElBQVQsRUFBZSxFQUFmLENBQVA7QUFDSDs7Ozs7O2tCQUVVLElBQUluQyxRQUFKLEUiLCJmaWxlIjoiMi5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0YWcgZnJvbSAnLi9mbHZUYWcuanMnXG5pbXBvcnQgdGFnZGVtdXggZnJvbSAnLi90YWdkZW11eCdcbmNsYXNzIEZsdlBhcnNlIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy50ZW1wVWludDggPSBuZXcgVWludDhBcnJheSgpO1xuICAgICAgICB0aGlzLmFyclRhZyA9IFtdO1xuICAgICAgICB0aGlzLmluZGV4ID0gMDtcbiAgICAgICAgdGhpcy50ZW1wQXJyID0gW107XG4gICAgICAgIHRoaXMuc3RvcCA9IGZhbHNlO1xuICAgICAgICB0aGlzLm9mZnNldCA9IDA7XG4gICAgICAgIHRoaXMuZnJpc3QgPSB0cnVlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIOaOpeWPlyDlpJbpg6jnmoRmbHbkuozov5vliLbmlbDmja5cbiAgICAgKi9cbiAgICBzZXRGbHYodWludDgpIHtcbiAgICAgICAgdGhpcy5zdG9wID0gZmFsc2U7XG4gICAgICAgIHRoaXMuYXJyVGFnID0gW107XG4gICAgICAgIHRoaXMuaW5kZXggPSAwO1xuICAgICAgICB0aGlzLnRlbXBVaW50OCA9IHVpbnQ4O1xuICAgICAgICBpZiAodGhpcy50ZW1wVWludDgubGVuZ3RoID4gMTMgJiYgdGhpcy50ZW1wVWludDhbMF0gPT0gNzAgJiYgdGhpcy50ZW1wVWludDhbMV0gPT0gNzYgJiYgdGhpcy50ZW1wVWludDhbMl0gPT0gODYpIHtcbiAgICAgICAgICAgIHRoaXMucHJvYmUodGhpcy50ZW1wVWludDguYnVmZmVyKVxuICAgICAgICAgICAgdGhpcy5yZWFkKDkpOyAvL+eVpeaOiTnkuKrlrZfoioLnmoRmbHYgaGVhZGVyIHRhZ1xuICAgICAgICAgICAgdGhpcy5yZWFkKDQpOyAvL+eVpeaOieesrOS4gOS4qjTlrZfoioLnmoQgdGFnIHNpemVcbiAgICAgICAgICAgIHRoaXMucGFyc2UoKTtcbiAgICAgICAgICAgIHRoaXMuZnJpc3QgPSBmYWxzZTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm9mZnNldDtcbiAgICAgICAgfSBlbHNlIGlmICghdGhpcy5mcmlzdCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFyc2UoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm9mZnNldDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBwcm9iZShidWZmZXIpIHtcbiAgICAgICAgbGV0IGRhdGEgPSBuZXcgVWludDhBcnJheShidWZmZXIpO1xuICAgICAgICBsZXQgbWlzbWF0Y2ggPSB7IG1hdGNoOiBmYWxzZSB9O1xuXG4gICAgICAgIGlmIChkYXRhWzBdICE9PSAweDQ2IHx8IGRhdGFbMV0gIT09IDB4NEMgfHwgZGF0YVsyXSAhPT0gMHg1NiB8fCBkYXRhWzNdICE9PSAweDAxKSB7XG4gICAgICAgICAgICByZXR1cm4gbWlzbWF0Y2g7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaGFzQXVkaW8gPSAoKGRhdGFbNF0gJiA0KSA+Pj4gMikgIT09IDA7XG4gICAgICAgIGxldCBoYXNWaWRlbyA9IChkYXRhWzRdICYgMSkgIT09IDA7XG5cbiAgICAgICAgaWYgKCFoYXNBdWRpbyAmJiAhaGFzVmlkZW8pIHtcbiAgICAgICAgICAgIHJldHVybiBtaXNtYXRjaDtcbiAgICAgICAgfVxuICAgICAgICB0YWdkZW11eC5faGFzQXVkaW8gPSBoYXNBdWRpbztcbiAgICAgICAgdGFnZGVtdXguX2hhc1ZpZGVvID0gaGFzVmlkZW87XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBtYXRjaDogdHJ1ZSxcbiAgICAgICAgICAgIGhhc0F1ZGlvVHJhY2s6IGhhc0F1ZGlvLFxuICAgICAgICAgICAgaGFzVmlkZW9UcmFjazogaGFzVmlkZW9cbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiDlvIDlp4vop6PmnpBcbiAgICAgKi9cbiAgICBwYXJzZSgpIHtcblxuICAgICAgICB3aGlsZSAodGhpcy5pbmRleCA8IHRoaXMudGVtcFVpbnQ4Lmxlbmd0aCAmJiAhdGhpcy5zdG9wKSB7XG4gICAgICAgICAgICB0aGlzLm9mZnNldCA9IHRoaXMuaW5kZXg7XG5cbiAgICAgICAgICAgIGxldCB0ID0gbmV3IHRhZygpO1xuICAgICAgICAgICAgaWYgKHRoaXMudGVtcFVpbnQ4Lmxlbmd0aCAtIHRoaXMuaW5kZXggPj0gMTEpIHtcbiAgICAgICAgICAgICAgICB0LnRhZ1R5cGUgPSAodGhpcy5yZWFkKDEpWzBdKTsgLy/lj5blh7p0YWfnsbvlnotcbiAgICAgICAgICAgICAgICB0LmRhdGFTaXplID0gdGhpcy5yZWFkKDMpOyAvL+WPluWHuuWMheS9k+Wkp+Wwj1xuICAgICAgICAgICAgICAgIHQuVGltZXN0YW1wID0gdGhpcy5yZWFkKDQpOyAvL+WPluWHuuino+eggeaXtumXtFxuICAgICAgICAgICAgICAgIHQuU3RyZWFtSUQgPSB0aGlzLnJlYWQoMyk7IC8v5Y+W5Ye6c3RyZWFtIGlkXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuc3RvcCA9IHRydWU7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy50ZW1wVWludDgubGVuZ3RoIC0gdGhpcy5pbmRleCA+PSAodGhpcy5nZXRCb2R5U3VtKHQuZGF0YVNpemUpICsgNCkpIHtcbiAgICAgICAgICAgICAgICB0LmJvZHkgPSB0aGlzLnJlYWQodGhpcy5nZXRCb2R5U3VtKHQuZGF0YVNpemUpKTsgLy/lj5blh7pib2R5XG4gICAgICAgICAgICAgICAgdGhpcy5hcnJUYWcucHVzaCh0KTtcbiAgICAgICAgICAgICAgICB0aGlzLnJlYWQoNCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuc3RvcCA9IHRydWU7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLm9mZnNldCA9IHRoaXMuaW5kZXg7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5vZmZzZXQ7XG4gICAgfVxuICAgIHJlYWQobGVuZ3RoKSB7XG4gICAgICAgIC8vIGxldCB1OGEgPSBuZXcgVWludDhBcnJheShsZW5ndGgpO1xuICAgICAgICAvLyB1OGEuc2V0KHRoaXMudGVtcFVpbnQ4LnN1YmFycmF5KHRoaXMuaW5kZXgsIHRoaXMuaW5kZXggKyBsZW5ndGgpLCAwKTtcbiAgICAgICAgbGV0IHU4YSA9IHRoaXMudGVtcFVpbnQ4LnNsaWNlKHRoaXMuaW5kZXgsIHRoaXMuaW5kZXggKyBsZW5ndGgpO1xuICAgICAgICB0aGlzLmluZGV4ICs9IGxlbmd0aDtcbiAgICAgICAgcmV0dXJuIHU4YTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiDorqHnrpd0YWfljIXkvZPlpKflsI9cbiAgICAgKi9cbiAgICBnZXRCb2R5U3VtKGFycikge1xuICAgICAgICBsZXQgX3N0ciA9IFwiXCI7XG4gICAgICAgIF9zdHIgKz0gKGFyclswXS50b1N0cmluZygxNikubGVuZ3RoID09IDEgPyBcIjBcIiArIGFyclswXS50b1N0cmluZygxNikgOiBhcnJbMF0udG9TdHJpbmcoMTYpKTtcbiAgICAgICAgX3N0ciArPSAoYXJyWzFdLnRvU3RyaW5nKDE2KS5sZW5ndGggPT0gMSA/IFwiMFwiICsgYXJyWzFdLnRvU3RyaW5nKDE2KSA6IGFyclsxXS50b1N0cmluZygxNikpO1xuICAgICAgICBfc3RyICs9IChhcnJbMl0udG9TdHJpbmcoMTYpLmxlbmd0aCA9PSAxID8gXCIwXCIgKyBhcnJbMl0udG9TdHJpbmcoMTYpIDogYXJyWzJdLnRvU3RyaW5nKDE2KSk7XG4gICAgICAgIHJldHVybiBwYXJzZUludChfc3RyLCAxNik7XG4gICAgfVxufVxuZXhwb3J0IGRlZmF1bHQgbmV3IEZsdlBhcnNlKCk7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vanMvZmx2L2ZsdlBhcnNlLmpzIl0sInNvdXJjZVJvb3QiOiIifQ==");

/***/ }),
/* 3 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); /*\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * Copyright (C) 2016 Bilibili. All Rights Reserved.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * @author zheng qian <xqq@xqq.im>\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * Licensed under the Apache License, Version 2.0 (the \"License\");\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * you may not use this file except in compliance with the License.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * You may obtain a copy of the License at\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *     http://www.apache.org/licenses/LICENSE-2.0\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * Unless required by applicable law or agreed to in writing, software\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * distributed under the License is distributed on an \"AS IS\" BASIS,\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * See the License for the specific language governing permissions and\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * limitations under the License.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      */\n\nvar _expGolomb = __webpack_require__(7);\n\nvar _expGolomb2 = _interopRequireDefault(_expGolomb);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar SPSParser = function () {\n    function SPSParser() {\n        _classCallCheck(this, SPSParser);\n    }\n\n    _createClass(SPSParser, null, [{\n        key: '_ebsp2rbsp',\n        value: function _ebsp2rbsp(uint8array) {\n            var src = uint8array;\n            var src_length = src.byteLength;\n            var dst = new Uint8Array(src_length);\n            var dst_idx = 0;\n\n            for (var i = 0; i < src_length; i++) {\n                if (i >= 2) {\n                    // Unescape: Skip 0x03 after 00 00\n                    if (src[i] === 0x03 && src[i - 1] === 0x00 && src[i - 2] === 0x00) {\n                        continue;\n                    }\n                }\n                dst[dst_idx] = src[i];\n                dst_idx++;\n            }\n\n            return new Uint8Array(dst.buffer, 0, dst_idx);\n        }\n    }, {\n        key: 'parseSPS',\n        value: function parseSPS(uint8array) {\n            var rbsp = SPSParser._ebsp2rbsp(uint8array);\n            var gb = new _expGolomb2.default(rbsp);\n\n            gb.readByte();\n            var profile_idc = gb.readByte(); // profile_idc\n            gb.readByte(); // constraint_set_flags[5] + reserved_zero[3]\n            var level_idc = gb.readByte(); // level_idc\n            gb.readUEG(); // seq_parameter_set_id\n\n            var profile_string = SPSParser.getProfileString(profile_idc);\n            var level_string = SPSParser.getLevelString(level_idc);\n            var chroma_format_idc = 1;\n            var chroma_format = 420;\n            var chroma_format_table = [0, 420, 422, 444];\n            var bit_depth = 8;\n\n            if (profile_idc === 100 || profile_idc === 110 || profile_idc === 122 || profile_idc === 244 || profile_idc === 44 || profile_idc === 83 || profile_idc === 86 || profile_idc === 118 || profile_idc === 128 || profile_idc === 138 || profile_idc === 144) {\n\n                chroma_format_idc = gb.readUEG();\n                if (chroma_format_idc === 3) {\n                    gb.readBits(1); // separate_colour_plane_flag\n                }\n                if (chroma_format_idc <= 3) {\n                    chroma_format = chroma_format_table[chroma_format_idc];\n                }\n\n                bit_depth = gb.readUEG() + 8; // bit_depth_luma_minus8\n                gb.readUEG(); // bit_depth_chroma_minus8\n                gb.readBits(1); // qpprime_y_zero_transform_bypass_flag\n                if (gb.readBool()) {\n                    // seq_scaling_matrix_present_flag\n                    var scaling_list_count = chroma_format_idc !== 3 ? 8 : 12;\n                    for (var i = 0; i < scaling_list_count; i++) {\n                        if (gb.readBool()) {\n                            // seq_scaling_list_present_flag\n                            if (i < 6) {\n                                SPSParser._skipScalingList(gb, 16);\n                            } else {\n                                SPSParser._skipScalingList(gb, 64);\n                            }\n                        }\n                    }\n                }\n            }\n            gb.readUEG(); // log2_max_frame_num_minus4\n            var pic_order_cnt_type = gb.readUEG();\n            if (pic_order_cnt_type === 0) {\n                gb.readUEG(); // log2_max_pic_order_cnt_lsb_minus_4\n            } else if (pic_order_cnt_type === 1) {\n                gb.readBits(1); // delta_pic_order_always_zero_flag\n                gb.readSEG(); // offset_for_non_ref_pic\n                gb.readSEG(); // offset_for_top_to_bottom_field\n                var num_ref_frames_in_pic_order_cnt_cycle = gb.readUEG();\n                for (var _i = 0; _i < num_ref_frames_in_pic_order_cnt_cycle; _i++) {\n                    gb.readSEG(); // offset_for_ref_frame\n                }\n            }\n            gb.readUEG(); // max_num_ref_frames\n            gb.readBits(1); // gaps_in_frame_num_value_allowed_flag\n\n            var pic_width_in_mbs_minus1 = gb.readUEG();\n            var pic_height_in_map_units_minus1 = gb.readUEG();\n\n            var frame_mbs_only_flag = gb.readBits(1);\n            if (frame_mbs_only_flag === 0) {\n                gb.readBits(1); // mb_adaptive_frame_field_flag\n            }\n            gb.readBits(1); // direct_8x8_inference_flag\n\n            var frame_crop_left_offset = 0;\n            var frame_crop_right_offset = 0;\n            var frame_crop_top_offset = 0;\n            var frame_crop_bottom_offset = 0;\n\n            var frame_cropping_flag = gb.readBool();\n            if (frame_cropping_flag) {\n                frame_crop_left_offset = gb.readUEG();\n                frame_crop_right_offset = gb.readUEG();\n                frame_crop_top_offset = gb.readUEG();\n                frame_crop_bottom_offset = gb.readUEG();\n            }\n\n            var sar_width = 1,\n                sar_height = 1;\n            var fps = 0,\n                fps_fixed = true,\n                fps_num = 0,\n                fps_den = 0;\n\n            var vui_parameters_present_flag = gb.readBool();\n            if (vui_parameters_present_flag) {\n                if (gb.readBool()) {\n                    // aspect_ratio_info_present_flag\n                    var aspect_ratio_idc = gb.readByte();\n                    var sar_w_table = [1, 12, 10, 16, 40, 24, 20, 32, 80, 18, 15, 64, 160, 4, 3, 2];\n                    var sar_h_table = [1, 11, 11, 11, 33, 11, 11, 11, 33, 11, 11, 33, 99, 3, 2, 1];\n\n                    if (aspect_ratio_idc > 0 && aspect_ratio_idc < 16) {\n                        sar_width = sar_w_table[aspect_ratio_idc - 1];\n                        sar_height = sar_h_table[aspect_ratio_idc - 1];\n                    } else if (aspect_ratio_idc === 255) {\n                        sar_width = gb.readByte() << 8 | gb.readByte();\n                        sar_height = gb.readByte() << 8 | gb.readByte();\n                    }\n                }\n\n                if (gb.readBool()) {\n                    // overscan_info_present_flag\n                    gb.readBool(); // overscan_appropriate_flag\n                }\n                if (gb.readBool()) {\n                    // video_signal_type_present_flag\n                    gb.readBits(4); // video_format & video_full_range_flag\n                    if (gb.readBool()) {\n                        // colour_description_present_flag\n                        gb.readBits(24); // colour_primaries & transfer_characteristics & matrix_coefficients\n                    }\n                }\n                if (gb.readBool()) {\n                    // chroma_loc_info_present_flag\n                    gb.readUEG(); // chroma_sample_loc_type_top_field\n                    gb.readUEG(); // chroma_sample_loc_type_bottom_field\n                }\n                if (gb.readBool()) {\n                    // timing_info_present_flag\n                    var num_units_in_tick = gb.readBits(32);\n                    var time_scale = gb.readBits(32);\n                    fps_fixed = gb.readBool(); // fixed_frame_rate_flag\n\n                    fps_num = time_scale;\n                    fps_den = num_units_in_tick * 2;\n                    fps = fps_num / fps_den;\n                }\n            }\n\n            var sarScale = 1;\n            if (sar_width !== 1 || sar_height !== 1) {\n                sarScale = sar_width / sar_height;\n            }\n\n            var crop_unit_x = 0,\n                crop_unit_y = 0;\n            if (chroma_format_idc === 0) {\n                crop_unit_x = 1;\n                crop_unit_y = 2 - frame_mbs_only_flag;\n            } else {\n                var sub_wc = chroma_format_idc === 3 ? 1 : 2;\n                var sub_hc = chroma_format_idc === 1 ? 2 : 1;\n                crop_unit_x = sub_wc;\n                crop_unit_y = sub_hc * (2 - frame_mbs_only_flag);\n            }\n\n            var codec_width = (pic_width_in_mbs_minus1 + 1) * 16;\n            var codec_height = (2 - frame_mbs_only_flag) * ((pic_height_in_map_units_minus1 + 1) * 16);\n\n            codec_width -= (frame_crop_left_offset + frame_crop_right_offset) * crop_unit_x;\n            codec_height -= (frame_crop_top_offset + frame_crop_bottom_offset) * crop_unit_y;\n\n            var present_width = Math.ceil(codec_width * sarScale);\n\n            gb.destroy();\n            gb = null;\n\n            return {\n                profile_string: profile_string, // baseline, high, high10, ...\n                level_string: level_string, // 3, 3.1, 4, 4.1, 5, 5.1, ...\n                bit_depth: bit_depth, // 8bit, 10bit, ...\n                chroma_format: chroma_format, // 4:2:0, 4:2:2, ...\n                chroma_format_string: SPSParser.getChromaFormatString(chroma_format),\n\n                frame_rate: {\n                    fixed: fps_fixed,\n                    fps: fps,\n                    fps_den: fps_den,\n                    fps_num: fps_num\n                },\n\n                sar_ratio: {\n                    width: sar_width,\n                    height: sar_height\n                },\n\n                codec_size: {\n                    width: codec_width,\n                    height: codec_height\n                },\n\n                present_size: {\n                    width: present_width,\n                    height: codec_height\n                }\n            };\n        }\n    }, {\n        key: '_skipScalingList',\n        value: function _skipScalingList(gb, count) {\n            var last_scale = 8,\n                next_scale = 8;\n            var delta_scale = 0;\n            for (var i = 0; i < count; i++) {\n                if (next_scale !== 0) {\n                    delta_scale = gb.readSEG();\n                    next_scale = (last_scale + delta_scale + 256) % 256;\n                }\n                last_scale = next_scale === 0 ? last_scale : next_scale;\n            }\n        }\n    }, {\n        key: 'getProfileString',\n        value: function getProfileString(profile_idc) {\n            switch (profile_idc) {\n                case 66:\n                    return 'Baseline';\n                case 77:\n                    return 'Main';\n                case 88:\n                    return 'Extended';\n                case 100:\n                    return 'High';\n                case 110:\n                    return 'High10';\n                case 122:\n                    return 'High422';\n                case 244:\n                    return 'High444';\n                default:\n                    return 'Unknown';\n            }\n        }\n    }, {\n        key: 'getLevelString',\n        value: function getLevelString(level_idc) {\n            return (level_idc / 10).toFixed(1);\n        }\n    }, {\n        key: 'getChromaFormatString',\n        value: function getChromaFormatString(chroma) {\n            switch (chroma) {\n                case 420:\n                    return '4:2:0';\n                case 422:\n                    return '4:2:2';\n                case 444:\n                    return '4:4:4';\n                default:\n                    return 'Unknown';\n            }\n        }\n    }]);\n\n    return SPSParser;\n}();\n\nexports.default = SPSParser;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9qcy9mbHYvc3BzLXBhcnNlci5qcz82ZWE1Il0sIm5hbWVzIjpbIlNQU1BhcnNlciIsInVpbnQ4YXJyYXkiLCJzcmMiLCJzcmNfbGVuZ3RoIiwiYnl0ZUxlbmd0aCIsImRzdCIsIlVpbnQ4QXJyYXkiLCJkc3RfaWR4IiwiaSIsImJ1ZmZlciIsInJic3AiLCJfZWJzcDJyYnNwIiwiZ2IiLCJyZWFkQnl0ZSIsInByb2ZpbGVfaWRjIiwibGV2ZWxfaWRjIiwicmVhZFVFRyIsInByb2ZpbGVfc3RyaW5nIiwiZ2V0UHJvZmlsZVN0cmluZyIsImxldmVsX3N0cmluZyIsImdldExldmVsU3RyaW5nIiwiY2hyb21hX2Zvcm1hdF9pZGMiLCJjaHJvbWFfZm9ybWF0IiwiY2hyb21hX2Zvcm1hdF90YWJsZSIsImJpdF9kZXB0aCIsInJlYWRCaXRzIiwicmVhZEJvb2wiLCJzY2FsaW5nX2xpc3RfY291bnQiLCJfc2tpcFNjYWxpbmdMaXN0IiwicGljX29yZGVyX2NudF90eXBlIiwicmVhZFNFRyIsIm51bV9yZWZfZnJhbWVzX2luX3BpY19vcmRlcl9jbnRfY3ljbGUiLCJwaWNfd2lkdGhfaW5fbWJzX21pbnVzMSIsInBpY19oZWlnaHRfaW5fbWFwX3VuaXRzX21pbnVzMSIsImZyYW1lX21ic19vbmx5X2ZsYWciLCJmcmFtZV9jcm9wX2xlZnRfb2Zmc2V0IiwiZnJhbWVfY3JvcF9yaWdodF9vZmZzZXQiLCJmcmFtZV9jcm9wX3RvcF9vZmZzZXQiLCJmcmFtZV9jcm9wX2JvdHRvbV9vZmZzZXQiLCJmcmFtZV9jcm9wcGluZ19mbGFnIiwic2FyX3dpZHRoIiwic2FyX2hlaWdodCIsImZwcyIsImZwc19maXhlZCIsImZwc19udW0iLCJmcHNfZGVuIiwidnVpX3BhcmFtZXRlcnNfcHJlc2VudF9mbGFnIiwiYXNwZWN0X3JhdGlvX2lkYyIsInNhcl93X3RhYmxlIiwic2FyX2hfdGFibGUiLCJudW1fdW5pdHNfaW5fdGljayIsInRpbWVfc2NhbGUiLCJzYXJTY2FsZSIsImNyb3BfdW5pdF94IiwiY3JvcF91bml0X3kiLCJzdWJfd2MiLCJzdWJfaGMiLCJjb2RlY193aWR0aCIsImNvZGVjX2hlaWdodCIsInByZXNlbnRfd2lkdGgiLCJNYXRoIiwiY2VpbCIsImRlc3Ryb3kiLCJjaHJvbWFfZm9ybWF0X3N0cmluZyIsImdldENocm9tYUZvcm1hdFN0cmluZyIsImZyYW1lX3JhdGUiLCJmaXhlZCIsInNhcl9yYXRpbyIsIndpZHRoIiwiaGVpZ2h0IiwiY29kZWNfc2l6ZSIsInByZXNlbnRfc2l6ZSIsImNvdW50IiwibGFzdF9zY2FsZSIsIm5leHRfc2NhbGUiLCJkZWx0YV9zY2FsZSIsInRvRml4ZWQiLCJjaHJvbWEiXSwibWFwcGluZ3MiOiI7Ozs7OztxakJBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQWtCQTs7Ozs7Ozs7SUFFTUEsUzs7Ozs7OzttQ0FFZ0JDLFUsRUFBWTtBQUMxQixnQkFBSUMsTUFBTUQsVUFBVjtBQUNBLGdCQUFJRSxhQUFhRCxJQUFJRSxVQUFyQjtBQUNBLGdCQUFJQyxNQUFNLElBQUlDLFVBQUosQ0FBZUgsVUFBZixDQUFWO0FBQ0EsZ0JBQUlJLFVBQVUsQ0FBZDs7QUFFQSxpQkFBSyxJQUFJQyxJQUFJLENBQWIsRUFBZ0JBLElBQUlMLFVBQXBCLEVBQWdDSyxHQUFoQyxFQUFxQztBQUNqQyxvQkFBSUEsS0FBSyxDQUFULEVBQVk7QUFDUjtBQUNBLHdCQUFJTixJQUFJTSxDQUFKLE1BQVcsSUFBWCxJQUFtQk4sSUFBSU0sSUFBSSxDQUFSLE1BQWUsSUFBbEMsSUFBMENOLElBQUlNLElBQUksQ0FBUixNQUFlLElBQTdELEVBQW1FO0FBQy9EO0FBQ0g7QUFDSjtBQUNESCxvQkFBSUUsT0FBSixJQUFlTCxJQUFJTSxDQUFKLENBQWY7QUFDQUQ7QUFDSDs7QUFFRCxtQkFBTyxJQUFJRCxVQUFKLENBQWVELElBQUlJLE1BQW5CLEVBQTJCLENBQTNCLEVBQThCRixPQUE5QixDQUFQO0FBQ0g7OztpQ0FFZU4sVSxFQUFZO0FBQ3hCLGdCQUFJUyxPQUFP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QUFDbEJDLGtDQUFjL0QsR0FBR2tCLE9BQUgsRUFBZDtBQUNBNEMsaUNBQWEsQ0FBQ0QsYUFBYUUsV0FBYixHQUEyQixHQUE1QixJQUFtQyxHQUFoRDtBQUNIO0FBQ0RGLDZCQUFjQyxlQUFlLENBQWhCLEdBQXFCRCxVQUFyQixHQUFrQ0MsVUFBL0M7QUFDSDtBQUNKOzs7eUNBRXVCNUQsVyxFQUFhO0FBQ2pDLG9CQUFRQSxXQUFSO0FBQ0kscUJBQUssRUFBTDtBQUNJLDJCQUFPLFVBQVA7QUFDSixxQkFBSyxFQUFMO0FBQ0ksMkJBQU8sTUFBUDtBQUNKLHFCQUFLLEVBQUw7QUFDSSwyQkFBTyxVQUFQO0FBQ0oscUJBQUssR0FBTDtBQUNJLDJCQUFPLE1BQVA7QUFDSixxQkFBSyxHQUFMO0FBQ0ksMkJBQU8sUUFBUDtBQUNKLHFCQUFLLEdBQUw7QUFDSSwyQkFBTyxTQUFQO0FBQ0oscUJBQUssR0FBTDtBQUNJLDJCQUFPLFNBQVA7QUFDSjtBQUNJLDJCQUFPLFNBQVA7QUFoQlI7QUFrQkg7Ozt1Q0FFcUJDLFMsRUFBVztBQUM3QixtQkFBTyxDQUFDQSxZQUFZLEVBQWIsRUFBaUI2RCxPQUFqQixDQUF5QixDQUF6QixDQUFQO0FBQ0g7Ozs4Q0FFNEJDLE0sRUFBUTtBQUNqQyxvQkFBUUEsTUFBUjtBQUNJLHFCQUFLLEdBQUw7QUFDSSwyQkFBTyxPQUFQO0FBQ0oscUJBQUssR0FBTDtBQUNJLDJCQUFPLE9BQVA7QUFDSixxQkFBSyxHQUFMO0FBQ0ksMkJBQU8sT0FBUDtBQUNKO0FBQ0ksMkJBQU8sU0FBUDtBQVJSO0FBVUg7Ozs7OztrQkFJVTdFLFMiLCJmaWxlIjoiMy5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qXG4gKiBDb3B5cmlnaHQgKEMpIDIwMTYgQmlsaWJpbGkuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogQGF1dGhvciB6aGVuZyBxaWFuIDx4cXFAeHFxLmltPlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgRXhwR29sb21iIGZyb20gJy4vZXhwLWdvbG9tYi5qcyc7XG5cbmNsYXNzIFNQU1BhcnNlciB7XG5cbiAgICBzdGF0aWMgX2Vic3AycmJzcCh1aW50OGFycmF5KSB7XG4gICAgICAgIGxldCBzcmMgPSB1aW50OGFycmF5O1xuICAgICAgICBsZXQgc3JjX2xlbmd0aCA9IHNyYy5ieXRlTGVuZ3RoO1xuICAgICAgICBsZXQgZHN0ID0gbmV3IFVpbnQ4QXJyYXkoc3JjX2xlbmd0aCk7XG4gICAgICAgIGxldCBkc3RfaWR4ID0gMDtcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNyY19sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKGkgPj0gMikge1xuICAgICAgICAgICAgICAgIC8vIFVuZXNjYXBlOiBTa2lwIDB4MDMgYWZ0ZXIgMDAgMDBcbiAgICAgICAgICAgICAgICBpZiAoc3JjW2ldID09PSAweDAzICYmIHNyY1tpIC0gMV0gPT09IDB4MDAgJiYgc3JjW2kgLSAyXSA9PT0gMHgwMCkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkc3RbZHN0X2lkeF0gPSBzcmNbaV07XG4gICAgICAgICAgICBkc3RfaWR4Kys7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbmV3IFVpbnQ4QXJyYXkoZHN0LmJ1ZmZlciwgMCwgZHN0X2lkeCk7XG4gICAgfVxuXG4gICAgc3RhdGljIHBhcnNlU1BTKHVpbnQ4YXJyYXkpIHtcbiAgICAgICAgbGV0IHJic3AgPSBTUFNQYXJzZXIuX2Vic3AycmJzcCh1aW50OGFycmF5KTtcbiAgICAgICAgbGV0IGdiID0gbmV3IEV4cEdvbG9tYihyYnNwKTtcblxuICAgICAgICBnYi5yZWFkQnl0ZSgpO1xuICAgICAgICBsZXQgcHJvZmlsZV9pZGMgPSBnYi5yZWFkQnl0ZSgpOyAgLy8gcHJvZmlsZV9pZGNcbiAgICAgICAgZ2IucmVhZEJ5dGUoKTsgIC8vIGNvbnN0cmFpbnRfc2V0X2ZsYWdzWzVdICsgcmVzZXJ2ZWRfemVyb1szXVxuICAgICAgICBsZXQgbGV2ZWxfaWRjID0gZ2IucmVhZEJ5dGUoKTsgIC8vIGxldmVsX2lkY1xuICAgICAgICBnYi5yZWFkVUVHKCk7ICAvLyBzZXFfcGFyYW1ldGVyX3NldF9pZFxuXG4gICAgICAgIGxldCBwcm9maWxlX3N0cmluZyA9IFNQU1BhcnNlci5nZXRQcm9maWxlU3RyaW5nKHByb2ZpbGVfaWRjKTtcbiAgICAgICAgbGV0IGxldmVsX3N0cmluZyA9IFNQU1BhcnNlci5nZXRMZXZlbFN0cmluZyhsZXZlbF9pZGMpO1xuICAgICAgICBsZXQgY2hyb21hX2Zvcm1hdF9pZGMgPSAxO1xuICAgICAgICBsZXQgY2hyb21hX2Zvcm1hdCA9IDQyMDtcbiAgICAgICAgbGV0IGNocm9tYV9mb3JtYXRfdGFibGUgPSBbMCwgNDIwLCA0MjIsIDQ0NF07XG4gICAgICAgIGxldCBiaXRfZGVwdGggPSA4O1xuXG4gICAgICAgIGlmIChwcm9maWxlX2lkYyA9PT0gMTAwIHx8IHByb2ZpbGVfaWRjID09PSAxMTAgfHwgcHJvZmlsZV9pZGMgPT09IDEyMiB8fFxuICAgICAgICAgICAgcHJvZmlsZV9pZGMgPT09IDI0NCB8fCBwcm9maWxlX2lkYyA9PT0gNDQgfHwgcHJvZmlsZV9pZGMgPT09IDgzIHx8XG4gICAgICAgICAgICBwcm9maWxlX2lkYyA9PT0gODYgfHwgcHJvZmlsZV9pZGMgPT09IDExOCB8fCBwcm9maWxlX2lkYyA9PT0gMTI4IHx8XG4gICAgICAgICAgICBwcm9maWxlX2lkYyA9PT0gMTM4IHx8IHByb2ZpbGVfaWRjID09PSAxNDQpIHtcblxuICAgICAgICAgICAgY2hyb21hX2Zvcm1hdF9pZGMgPSBnYi5yZWFkVUVHKCk7XG4gICAgICAgICAgICBpZiAoY2hyb21hX2Zvcm1hdF9pZGMgPT09IDMpIHtcbiAgICAgICAgICAgICAgICBnYi5yZWFkQml0cygxKTsgIC8vIHNlcGFyYXRlX2NvbG91cl9wbGFuZV9mbGFnXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY2hyb21hX2Zvcm1hdF9pZGMgPD0gMykge1xuICAgICAgICAgICAgICAgIGNocm9tYV9mb3JtYXQgPSBjaHJvbWFfZm9ybWF0X3RhYmxlW2Nocm9tYV9mb3JtYXRfaWRjXTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYml0X2RlcHRoID0gZ2IucmVhZFVFRygpICsgODsgIC8vIGJpdF9kZXB0aF9sdW1hX21pbnVzOFxuICAgICAgICAgICAgZ2IucmVhZFVFRygpOyAgLy8gYml0X2RlcHRoX2Nocm9tYV9taW51czhcbiAgICAgICAgICAgIGdiLnJlYWRCaXRzKDEpOyAgLy8gcXBwcmltZV95X3plcm9fdHJhbnNmb3JtX2J5cGFzc19mbGFnXG4gICAgICAgICAgICBpZiAoZ2IucmVhZEJvb2woKSkgeyAgLy8gc2VxX3NjYWxpbmdfbWF0cml4X3ByZXNlbnRfZmxhZ1xuICAgICAgICAgICAgICAgIGxldCBzY2FsaW5nX2xpc3RfY291bnQgPSAoY2hyb21hX2Zvcm1hdF9pZGMgIT09IDMpID8gOCA6IDEyO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2NhbGluZ19saXN0X2NvdW50OyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGdiLnJlYWRCb29sKCkpIHsgIC8vIHNlcV9zY2FsaW5nX2xpc3RfcHJlc2VudF9mbGFnXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaSA8IDYpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBTUFNQYXJzZXIuX3NraXBTY2FsaW5nTGlzdChnYiwgMTYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBTUFNQYXJzZXIuX3NraXBTY2FsaW5nTGlzdChnYiwgNjQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGdiLnJlYWRVRUcoKTsgIC8vIGxvZzJfbWF4X2ZyYW1lX251bV9taW51czRcbiAgICAgICAgbGV0IHBpY19vcmRlcl9jbnRfdHlwZSA9IGdiLnJlYWRVRUcoKTtcbiAgICAgICAgaWYgKHBpY19vcmRlcl9jbnRfdHlwZSA9PT0gMCkge1xuICAgICAgICAgICAgZ2IucmVhZFVFRygpOyAgLy8gbG9nMl9tYXhfcGljX29yZGVyX2NudF9sc2JfbWludXNfNFxuICAgICAgICB9IGVsc2UgaWYgKHBpY19vcmRlcl9jbnRfdHlwZSA9PT0gMSkge1xuICAgICAgICAgICAgZ2IucmVhZEJpdHMoMSk7ICAvLyBkZWx0YV9waWNfb3JkZXJfYWx3YXlzX3plcm9fZmxhZ1xuICAgICAgICAgICAgZ2IucmVhZFNFRygpOyAgLy8gb2Zmc2V0X2Zvcl9ub25fcmVmX3BpY1xuICAgICAgICAgICAgZ2IucmVhZFNFRygpOyAgLy8gb2Zmc2V0X2Zvcl90b3BfdG9fYm90dG9tX2ZpZWxkXG4gICAgICAgICAgICBsZXQgbnVtX3JlZl9mcmFtZXNfaW5fcGljX29yZGVyX2NudF9jeWNsZSA9IGdiLnJlYWRVRUcoKTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtX3JlZl9mcmFtZXNfaW5fcGljX29yZGVyX2NudF9jeWNsZTsgaSsrKSB7XG4gICAgICAgICAgICAgICAgZ2IucmVhZFNFRygpOyAgLy8gb2Zmc2V0X2Zvcl9yZWZfZnJhbWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBnYi5yZWFkVUVHKCk7ICAvLyBtYXhfbnVtX3JlZl9mcmFtZXNcbiAgICAgICAgZ2IucmVhZEJpdHMoMSk7ICAvLyBnYXBzX2luX2ZyYW1lX251bV92YWx1ZV9hbGxvd2VkX2ZsYWdcblxuICAgICAgICBsZXQgcGljX3dpZHRoX2luX21ic19taW51czEgPSBnYi5yZWFkVUVHKCk7XG4gICAgICAgIGxldCBwaWNfaGVpZ2h0X2luX21hcF91bml0c19taW51czEgPSBnYi5yZWFkVUVHKCk7XG5cbiAgICAgICAgbGV0IGZyYW1lX21ic19vbmx5X2ZsYWcgPSBnYi5yZWFkQml0cygxKTtcbiAgICAgICAgaWYgKGZyYW1lX21ic19vbmx5X2ZsYWcgPT09IDApIHtcbiAgICAgICAgICAgIGdiLnJlYWRCaXRzKDEpOyAgLy8gbWJfYWRhcHRpdmVfZnJhbWVfZmllbGRfZmxhZ1xuICAgICAgICB9XG4gICAgICAgIGdiLnJlYWRCaXRzKDEpOyAgLy8gZGlyZWN0Xzh4OF9pbmZlcmVuY2VfZmxhZ1xuXG4gICAgICAgIGxldCBmcmFtZV9jcm9wX2xlZnRfb2Zmc2V0ID0gMDtcbiAgICAgICAgbGV0IGZyYW1lX2Nyb3BfcmlnaHRfb2Zmc2V0ID0gMDtcbiAgICAgICAgbGV0IGZyYW1lX2Nyb3BfdG9wX29mZnNldCA9IDA7XG4gICAgICAgIGxldCBmcmFtZV9jcm9wX2JvdHRvbV9vZmZzZXQgPSAwO1xuXG4gICAgICAgIGxldCBmcmFtZV9jcm9wcGluZ19mbGFnID0gZ2IucmVhZEJvb2woKTtcbiAgICAgICAgaWYgKGZyYW1lX2Nyb3BwaW5nX2ZsYWcpIHtcbiAgICAgICAgICAgIGZyYW1lX2Nyb3BfbGVmdF9vZmZzZXQgPSBnYi5yZWFkVUVHKCk7XG4gICAgICAgICAgICBmcmFtZV9jcm9wX3JpZ2h0X29mZnNldCA9IGdiLnJlYWRVRUcoKTtcbiAgICAgICAgICAgIGZyYW1lX2Nyb3BfdG9wX29mZnNldCA9IGdiLnJlYWRVRUcoKTtcbiAgICAgICAgICAgIGZyYW1lX2Nyb3BfYm90dG9tX29mZnNldCA9IGdiLnJlYWRVRUcoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBzYXJfd2lkdGggPSAxLCBzYXJfaGVpZ2h0ID0gMTtcbiAgICAgICAgbGV0IGZwcyA9IDAsIGZwc19maXhlZCA9IHRydWUsIGZwc19udW0gPSAwLCBmcHNfZGVuID0gMDtcblxuICAgICAgICBsZXQgdnVpX3BhcmFtZXRlcnNfcHJlc2VudF9mbGFnID0gZ2IucmVhZEJvb2woKTtcbiAgICAgICAgaWYgKHZ1aV9wYXJhbWV0ZXJzX3ByZXNlbnRfZmxhZykge1xuICAgICAgICAgICAgaWYgKGdiLnJlYWRCb29sKCkpIHsgIC8vIGFzcGVjdF9yYXRpb19pbmZvX3ByZXNlbnRfZmxhZ1xuICAgICAgICAgICAgICAgIGxldCBhc3BlY3RfcmF0aW9faWRjID0gZ2IucmVhZEJ5dGUoKTtcbiAgICAgICAgICAgICAgICBsZXQgc2FyX3dfdGFibGUgPSBbMSwgMTIsIDEwLCAxNiwgNDAsIDI0LCAyMCwgMzIsIDgwLCAxOCwgMTUsIDY0LCAxNjAsIDQsIDMsIDJdO1xuICAgICAgICAgICAgICAgIGxldCBzYXJfaF90YWJsZSA9IFsxLCAxMSwgMTEsIDExLCAzMywgMTEsIDExLCAxMSwgMzMsIDExLCAxMSwgMzMsICA5OSwgMywgMiwgMV07XG5cbiAgICAgICAgICAgICAgICBpZiAoYXNwZWN0X3JhdGlvX2lkYyA+IDAgJiYgYXNwZWN0X3JhdGlvX2lkYyA8IDE2KSB7XG4gICAgICAgICAgICAgICAgICAgIHNhcl93aWR0aCA9IHNhcl93X3RhYmxlW2FzcGVjdF9yYXRpb19pZGMgLSAxXTtcbiAgICAgICAgICAgICAgICAgICAgc2FyX2hlaWdodCA9IHNhcl9oX3RhYmxlW2FzcGVjdF9yYXRpb19pZGMgLSAxXTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGFzcGVjdF9yYXRpb19pZGMgPT09IDI1NSkge1xuICAgICAgICAgICAgICAgICAgICBzYXJfd2lkdGggPSBnYi5yZWFkQnl0ZSgpIDw8IDggfCBnYi5yZWFkQnl0ZSgpO1xuICAgICAgICAgICAgICAgICAgICBzYXJfaGVpZ2h0ID0gZ2IucmVhZEJ5dGUoKSA8PCA4IHwgZ2IucmVhZEJ5dGUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChnYi5yZWFkQm9vbCgpKSB7ICAvLyBvdmVyc2Nhbl9pbmZvX3ByZXNlbnRfZmxhZ1xuICAgICAgICAgICAgICAgIGdiLnJlYWRCb29sKCk7ICAvLyBvdmVyc2Nhbl9hcHByb3ByaWF0ZV9mbGFnXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZ2IucmVhZEJvb2woKSkgeyAgLy8gdmlkZW9fc2lnbmFsX3R5cGVfcHJlc2VudF9mbGFnXG4gICAgICAgICAgICAgICAgZ2IucmVhZEJpdHMoNCk7ICAvLyB2aWRlb19mb3JtYXQgJiB2aWRlb19mdWxsX3JhbmdlX2ZsYWdcbiAgICAgICAgICAgICAgICBpZiAoZ2IucmVhZEJvb2woKSkgeyAgLy8gY29sb3VyX2Rlc2NyaXB0aW9uX3ByZXNlbnRfZmxhZ1xuICAgICAgICAgICAgICAgICAgICBnYi5yZWFkQml0cygyNCk7ICAvLyBjb2xvdXJfcHJpbWFyaWVzICYgdHJhbnNmZXJfY2hhcmFjdGVyaXN0aWNzICYgbWF0cml4X2NvZWZmaWNpZW50c1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChnYi5yZWFkQm9vbCgpKSB7ICAvLyBjaHJvbWFfbG9jX2luZm9fcHJlc2VudF9mbGFnXG4gICAgICAgICAgICAgICAgZ2IucmVhZFVFRygpOyAgLy8gY2hyb21hX3NhbXBsZV9sb2NfdHlwZV90b3BfZmllbGRcbiAgICAgICAgICAgICAgICBnYi5yZWFkVUVHKCk7ICAvLyBjaHJvbWFfc2FtcGxlX2xvY190eXBlX2JvdHRvbV9maWVsZFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGdiLnJlYWRCb29sKCkpIHsgIC8vIHRpbWluZ19pbmZvX3ByZXNlbnRfZmxhZ1xuICAgICAgICAgICAgICAgIGxldCBudW1fdW5pdHNfaW5fdGljayA9IGdiLnJlYWRCaXRzKDMyKTtcbiAgICAgICAgICAgICAgICBsZXQgdGltZV9zY2FsZSA9IGdiLnJlYWRCaXRzKDMyKTtcbiAgICAgICAgICAgICAgICBmcHNfZml4ZWQgPSBnYi5yZWFkQm9vbCgpOyAgLy8gZml4ZWRfZnJhbWVfcmF0ZV9mbGFnXG5cbiAgICAgICAgICAgICAgICBmcHNfbnVtID0gdGltZV9zY2FsZTtcbiAgICAgICAgICAgICAgICBmcHNfZGVuID0gbnVtX3VuaXRzX2luX3RpY2sgKiAyO1xuICAgICAgICAgICAgICAgIGZwcyA9IGZwc19udW0gLyBmcHNfZGVuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHNhclNjYWxlID0gMTtcbiAgICAgICAgaWYgKHNhcl93aWR0aCAhPT0gMSB8fCBzYXJfaGVpZ2h0ICE9PSAxKSB7XG4gICAgICAgICAgICBzYXJTY2FsZSA9IHNhcl93aWR0aCAvIHNhcl9oZWlnaHQ7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgY3JvcF91bml0X3ggPSAwLCBjcm9wX3VuaXRfeSA9IDA7XG4gICAgICAgIGlmIChjaHJvbWFfZm9ybWF0X2lkYyA9PT0gMCkge1xuICAgICAgICAgICAgY3JvcF91bml0X3ggPSAxO1xuICAgICAgICAgICAgY3JvcF91bml0X3kgPSAyIC0gZnJhbWVfbWJzX29ubHlfZmxhZztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGxldCBzdWJfd2MgPSAoY2hyb21hX2Zvcm1hdF9pZGMgPT09IDMpID8gMSA6IDI7XG4gICAgICAgICAgICBsZXQgc3ViX2hjID0gKGNocm9tYV9mb3JtYXRfaWRjID09PSAxKSA/IDIgOiAxO1xuICAgICAgICAgICAgY3JvcF91bml0X3ggPSBzdWJfd2M7XG4gICAgICAgICAgICBjcm9wX3VuaXRfeSA9IHN1Yl9oYyAqICgyIC0gZnJhbWVfbWJzX29ubHlfZmxhZyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgY29kZWNfd2lkdGggPSAocGljX3dpZHRoX2luX21ic19taW51czEgKyAxKSAqIDE2O1xuICAgICAgICBsZXQgY29kZWNfaGVpZ2h0ID0gKDIgLSBmcmFtZV9tYnNfb25seV9mbGFnKSAqICgocGljX2hlaWdodF9pbl9tYXBfdW5pdHNfbWludXMxICsgMSkgKiAxNik7XG5cbiAgICAgICAgY29kZWNfd2lkdGggLT0gKGZyYW1lX2Nyb3BfbGVmdF9vZmZzZXQgKyBmcmFtZV9jcm9wX3JpZ2h0X29mZnNldCkgKiBjcm9wX3VuaXRfeDtcbiAgICAgICAgY29kZWNfaGVpZ2h0IC09IChmcmFtZV9jcm9wX3RvcF9vZmZzZXQgKyBmcmFtZV9jcm9wX2JvdHRvbV9vZmZzZXQpICogY3JvcF91bml0X3k7XG5cbiAgICAgICAgbGV0IHByZXNlbnRfd2lkdGggPSBNYXRoLmNlaWwoY29kZWNfd2lkdGggKiBzYXJTY2FsZSk7XG5cbiAgICAgICAgZ2IuZGVzdHJveSgpO1xuICAgICAgICBnYiA9IG51bGw7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHByb2ZpbGVfc3RyaW5nOiBwcm9maWxlX3N0cmluZywgIC8vIGJhc2VsaW5lLCBoaWdoLCBoaWdoMTAsIC4uLlxuICAgICAgICAgICAgbGV2ZWxfc3RyaW5nOiBsZXZlbF9zdHJpbmcsICAvLyAzLCAzLjEsIDQsIDQuMSwgNSwgNS4xLCAuLi5cbiAgICAgICAgICAgIGJpdF9kZXB0aDogYml0X2RlcHRoLCAgLy8gOGJpdCwgMTBiaXQsIC4uLlxuICAgICAgICAgICAgY2hyb21hX2Zvcm1hdDogY2hyb21hX2Zvcm1hdCwgIC8vIDQ6MjowLCA0OjI6MiwgLi4uXG4gICAgICAgICAgICBjaHJvbWFfZm9ybWF0X3N0cmluZzogU1BTUGFyc2VyLmdldENocm9tYUZvcm1hdFN0cmluZyhjaHJvbWFfZm9ybWF0KSxcblxuICAgICAgICAgICAgZnJhbWVfcmF0ZToge1xuICAgICAgICAgICAgICAgIGZpeGVkOiBmcHNfZml4ZWQsXG4gICAgICAgICAgICAgICAgZnBzOiBmcHMsXG4gICAgICAgICAgICAgICAgZnBzX2RlbjogZnBzX2RlbixcbiAgICAgICAgICAgICAgICBmcHNfbnVtOiBmcHNfbnVtXG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICBzYXJfcmF0aW86IHtcbiAgICAgICAgICAgICAgICB3aWR0aDogc2FyX3dpZHRoLFxuICAgICAgICAgICAgICAgIGhlaWdodDogc2FyX2hlaWdodFxuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgY29kZWNfc2l6ZToge1xuICAgICAgICAgICAgICAgIHdpZHRoOiBjb2RlY193aWR0aCxcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IGNvZGVjX2hlaWdodFxuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgcHJlc2VudF9zaXplOiB7XG4gICAgICAgICAgICAgICAgd2lkdGg6IHByZXNlbnRfd2lkdGgsXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiBjb2RlY19oZWlnaHRcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBzdGF0aWMgX3NraXBTY2FsaW5nTGlzdChnYiwgY291bnQpIHtcbiAgICAgICAgbGV0IGxhc3Rfc2NhbGUgPSA4LCBuZXh0X3NjYWxlID0gODtcbiAgICAgICAgbGV0IGRlbHRhX3NjYWxlID0gMDtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb3VudDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAobmV4dF9zY2FsZSAhPT0gMCkge1xuICAgICAgICAgICAgICAgIGRlbHRhX3NjYWxlID0gZ2IucmVhZFNFRygpO1xuICAgICAgICAgICAgICAgIG5leHRfc2NhbGUgPSAobGFzdF9zY2FsZSArIGRlbHRhX3NjYWxlICsgMjU2KSAlIDI1NjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxhc3Rfc2NhbGUgPSAobmV4dF9zY2FsZSA9PT0gMCkgPyBsYXN0X3NjYWxlIDogbmV4dF9zY2FsZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHN0YXRpYyBnZXRQcm9maWxlU3RyaW5nKHByb2ZpbGVfaWRjKSB7XG4gICAgICAgIHN3aXRjaCAocHJvZmlsZV9pZGMpIHtcbiAgICAgICAgICAgIGNhc2UgNjY6XG4gICAgICAgICAgICAgICAgcmV0dXJuICdCYXNlbGluZSc7XG4gICAgICAgICAgICBjYXNlIDc3OlxuICAgICAgICAgICAgICAgIHJldHVybiAnTWFpbic7XG4gICAgICAgICAgICBjYXNlIDg4OlxuICAgICAgICAgICAgICAgIHJldHVybiAnRXh0ZW5kZWQnO1xuICAgICAgICAgICAgY2FzZSAxMDA6XG4gICAgICAgICAgICAgICAgcmV0dXJuICdIaWdoJztcbiAgICAgICAgICAgIGNhc2UgMTEwOlxuICAgICAgICAgICAgICAgIHJldHVybiAnSGlnaDEwJztcbiAgICAgICAgICAgIGNhc2UgMTIyOlxuICAgICAgICAgICAgICAgIHJldHVybiAnSGlnaDQyMic7XG4gICAgICAgICAgICBjYXNlIDI0NDpcbiAgICAgICAgICAgICAgICByZXR1cm4gJ0hpZ2g0NDQnO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gJ1Vua25vd24nO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgc3RhdGljIGdldExldmVsU3RyaW5nKGxldmVsX2lkYykge1xuICAgICAgICByZXR1cm4gKGxldmVsX2lkYyAvIDEwKS50b0ZpeGVkKDEpO1xuICAgIH1cblxuICAgIHN0YXRpYyBnZXRDaHJvbWFGb3JtYXRTdHJpbmcoY2hyb21hKSB7XG4gICAgICAgIHN3aXRjaCAoY2hyb21hKSB7XG4gICAgICAgICAgICBjYXNlIDQyMDpcbiAgICAgICAgICAgICAgICByZXR1cm4gJzQ6MjowJztcbiAgICAgICAgICAgIGNhc2UgNDIyOlxuICAgICAgICAgICAgICAgIHJldHVybiAnNDoyOjInO1xuICAgICAgICAgICAgY2FzZSA0NDQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuICc0OjQ6NCc7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybiAnVW5rbm93bic7XG4gICAgICAgIH1cbiAgICB9XG5cbn1cblxuZXhwb3J0IGRlZmF1bHQgU1BTUGFyc2VyO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2pzL2Zsdi9zcHMtcGFyc2VyLmpzIl0sInNvdXJjZVJvb3QiOiIifQ==");

/***/ }),
/* 4 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); /*\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * Copyright (C) 2016 Bilibili. All Rights Reserved.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * @author zheng qian <xqq@xqq.im>\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * Licensed under the Apache License, Version 2.0 (the \"License\");\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * you may not use this file except in compliance with the License.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * You may obtain a copy of the License at\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *     http://www.apache.org/licenses/LICENSE-2.0\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * Unless required by applicable law or agreed to in writing, software\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * distributed under the License is distributed on an \"AS IS\" BASIS,\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * See the License for the specific language governing permissions and\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * limitations under the License.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      */\n\nvar _aacSilent = __webpack_require__(12);\n\nvar _aacSilent2 = _interopRequireDefault(_aacSilent);\n\nvar _browser = __webpack_require__(14);\n\nvar _browser2 = _interopRequireDefault(_browser);\n\nvar _mp4remux = __webpack_require__(1);\n\nvar _mp4remux2 = _interopRequireDefault(_mp4remux);\n\nvar _mediaSegmentInfo = __webpack_require__(13);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n// Fragmented mp4 remuxer\nvar MP4Remuxer = function () {\n    function MP4Remuxer(config) {\n        _classCallCheck(this, MP4Remuxer);\n\n        this.TAG = this.constructor.name;\n\n        this._config = config;\n        this._isLive = config.isLive === true ? true : false;\n\n        this._dtsBase = -1;\n        this._dtsBaseInited = false;\n        this._audioDtsBase = Infinity;\n        this._videoDtsBase = Infinity;\n        this._audioNextDts = undefined;\n        this._videoNextDts = undefined;\n\n        this._audioMeta = null;\n        this._videoMeta = null;\n\n        this._audioSegmentInfoList = new _mediaSegmentInfo.MediaSegmentInfoList('audio');\n        this._videoSegmentInfoList = new _mediaSegmentInfo.MediaSegmentInfoList('video');\n\n        this._onInitSegment = null;\n        this._onMediaSegment = null;\n\n        // Workaround for chrome < 50: Always force first sample as a Random Access Point in media segment\n        // see https://bugs.chromium.org/p/chromium/issues/detail?id=229412\n        this._forceFirstIDR = _browser2.default.chrome && (_browser2.default.version.major < 50 || _browser2.default.version.major === 50 && _browser2.default.version.build < 2661) ? true : false;\n\n        // Workaround for IE11/Edge: Fill silent aac frame after keyframe-seeking\n        // Make audio beginDts equals with video beginDts, in order to fix seek freeze\n        this._fillSilentAfterSeek = _browser2.default.msedge || _browser2.default.msie;\n    }\n\n    _createClass(MP4Remuxer, [{\n        key: 'destroy',\n        value: function destroy() {\n            this._dtsBase = -1;\n            this._dtsBaseInited = false;\n            this._audioMeta = null;\n            this._videoMeta = null;\n            this._audioSegmentInfoList.clear();\n            this._audioSegmentInfoList = null;\n            this._videoSegmentInfoList.clear();\n            this._videoSegmentInfoList = null;\n            this._onInitSegment = null;\n            this._onMediaSegment = null;\n        }\n    }, {\n        key: 'bindDataSource',\n        value: function bindDataSource(producer) {\n            producer.onDataAvailable = this.remux.bind(this);\n            producer.onTrackMetadata = this._onTrackMetadataReceived.bind(this);\n            return this;\n        }\n\n        /* prototype: function onInitSegment(type: string, initSegment: ArrayBuffer): void\n           InitSegment: {\n               type: string,\n               data: ArrayBuffer,\n               codec: string,\n               container: string\n           }\n        */\n\n    }, {\n        key: 'insertDiscontinuity',\n        value: function insertDiscontinuity() {\n            this._audioNextDts = this._videoNextDts = undefined;\n        }\n    }, {\n        key: 'seek',\n        value: function seek(originalDts) {\n            this._videoSegmentInfoList.clear();\n            this._audioSegmentInfoList.clear();\n        }\n    }, {\n        key: 'remux',\n        value: function remux(audioTrack, videoTrack) {\n            if (!this._onMediaSegment) {\n                throw new IllegalStateException('MP4Remuxer: onMediaSegment callback must be specificed!');\n            }\n            if (!this._dtsBaseInited) {\n                this._calculateDtsBase(audioTrack, videoTrack);\n            }\n            this._remuxVideo(videoTrack);\n            this._remuxAudio(audioTrack);\n        }\n    }, {\n        key: '_onTrackMetadataReceived',\n        value: function _onTrackMetadataReceived(type, metadata) {\n            var metabox = null;\n\n            if (type === 'audio') {\n                this._audioMeta = metadata;\n                metabox = _mp4remux2.default.generateInitSegment(metadata);\n                Log.v('msg+audio', metadata);\n            } else if (type === 'video') {\n                this._videoMeta = metadata;\n                metabox = _mp4remux2.default.generateInitSegment(metadata);\n                Log.v('msg+video', metadata);\n            } else {\n                return;\n            }\n\n            // dispatch metabox (Initialization Segment)\n            if (!this._onInitSegment) {\n                throw new IllegalStateException('MP4Remuxer: onInitSegment callback must be specified!');\n            }\n            this._onInitSegment(type, {\n                type: type,\n                data: metabox.buffer,\n                codec: metadata.codec,\n                container: type + '/mp4'\n            });\n        }\n    }, {\n        key: '_calculateDtsBase',\n        value: function _calculateDtsBase(audioTrack, videoTrack) {\n            if (this._dtsBaseInited) {\n                return;\n            }\n\n            if (audioTrack.samples && audioTrack.samples.length) {\n                this._audioDtsBase = audioTrack.samples[0].dts;\n            }\n            if (videoTrack.samples && videoTrack.samples.length) {\n                this._videoDtsBase = videoTrack.samples[0].dts;\n            }\n\n            this._dtsBase = Math.min(this._audioDtsBase, this._videoDtsBase);\n            this._dtsBaseInited = true;\n        }\n    }, {\n        key: '_remuxAudio',\n        value: function _remuxAudio(audioTrack) {\n            var track = audioTrack;\n            var samples = track.samples;\n            var dtsCorrection = undefined;\n            var firstDts = -1,\n                lastDts = -1,\n                lastPts = -1;\n\n            var remuxSilentFrame = false;\n            var silentFrameDuration = -1;\n\n            if (!samples || samples.length === 0) {\n                return;\n            }\n\n            var bytes = 8 + track.length;\n            var mdatbox = new Uint8Array(bytes);\n            mdatbox[0] = bytes >>> 24 & 0xFF;\n            mdatbox[1] = bytes >>> 16 & 0xFF;\n            mdatbox[2] = bytes >>> 8 & 0xFF;\n            mdatbox[3] = bytes & 0xFF;\n\n            mdatbox.set(_mp4remux2.default.types.mdat, 4);\n\n            var offset = 8; // size + type\n            var mp4Samples = [];\n\n            while (samples.length) {\n                var aacSample = samples.shift();\n                var unit = aacSample.unit;\n                var originalDts = aacSample.dts - this._dtsBase;\n\n                if (dtsCorrection == undefined) {\n                    if (this._audioNextDts == undefined) {\n                        if (this._audioSegmentInfoList.isEmpty()) {\n                            dtsCorrection = 0;\n                            if (this._fillSilentAfterSeek && !this._videoSegmentInfoList.isEmpty()) {\n                                remuxSilentFrame = true;\n                            }\n                        } else {\n                            var lastSample = this._audioSegmentInfoList.getLastSampleBefore(originalDts);\n                            if (lastSample != null) {\n                                var distance = originalDts - (lastSample.originalDts + lastSample.duration);\n                                if (distance <= 3) {\n                                    distance = 0;\n                                }\n                                var expectedDts = lastSample.dts + lastSample.duration + distance;\n                                dtsCorrection = originalDts - expectedDts;\n                            } else {\n                                // lastSample == null\n                                dtsCorrection = 0;\n                            }\n                        }\n                    } else {\n                        dtsCorrection = originalDts - this._audioNextDts;\n                    }\n                }\n\n                var dts = originalDts - dtsCorrection;\n                if (remuxSilentFrame) {\n                    // align audio segment beginDts to match with current video segment's beginDts\n                    var videoSegment = this._videoSegmentInfoList.getLastSegmentBefore(originalDts);\n                    if (videoSegment != null && videoSegment.beginDts < dts) {\n                        silentFrameDuration = dts - videoSegment.beginDts;\n                        dts = videoSegment.beginDts;\n                    } else {\n                        remuxSilentFrame = false;\n                    }\n                }\n                if (firstDts === -1) {\n                    firstDts = dts;\n                }\n\n                if (remuxSilentFrame) {\n                    remuxSilentFrame = false;\n                    samples.unshift(aacSample);\n\n                    var frame = this._generateSilentAudio(dts, silentFrameDuration);\n                    if (frame == null) {\n                        continue;\n                    }\n                    var _mp4Sample = frame.mp4Sample;\n                    var _unit = frame.unit;\n\n                    mp4Samples.push(_mp4Sample);\n\n                    // re-allocate mdatbox buffer with new size, to fit with this silent frame\n                    bytes += _unit.byteLength;\n                    mdatbox = new Uint8Array(bytes);\n                    mdatbox[0] = bytes >>> 24 & 0xFF;\n                    mdatbox[1] = bytes >>> 16 & 0xFF;\n                    mdatbox[2] = bytes >>> 8 & 0xFF;\n                    mdatbox[3] = bytes & 0xFF;\n                    mdatbox.set(_mp4remux2.default.types.mdat, 4);\n\n                    // fill data now\n                    mdatbox.set(_unit, offset);\n                    offset += _unit.byteLength;\n                    continue;\n                }\n\n                var sampleDuration = 0;\n\n                if (samples.length >= 1) {\n                    var nextDts = samples[0].dts - this._dtsBase - dtsCorrection;\n                    sampleDuration = nextDts - dts;\n                } else {\n                    if (mp4Samples.length >= 1) {\n                        // use second last sample duration\n                        sampleDuration = mp4Samples[mp4Samples.length - 1].duration;\n                    } else {\n                        // the only one sample, use reference sample duration\n                        sampleDuration = this._audioMeta.refSampleDuration;\n                    }\n                }\n\n                var mp4Sample = {\n                    dts: dts,\n                    pts: dts,\n                    cts: 0,\n                    size: unit.byteLength,\n                    duration: sampleDuration,\n                    originalDts: originalDts,\n                    flags: {\n                        isLeading: 0,\n                        dependsOn: 1,\n                        isDependedOn: 0,\n                        hasRedundancy: 0\n                    }\n                };\n                mp4Samples.push(mp4Sample);\n                mdatbox.set(unit, offset);\n                offset += unit.byteLength;\n            }\n            var latest = mp4Samples[mp4Samples.length - 1];\n            lastDts = latest.dts + latest.duration;\n            this._audioNextDts = lastDts;\n\n            // fill media segment info & add to info list\n            var info = new _mediaSegmentInfo.MediaSegmentInfo();\n            info.beginDts = firstDts;\n            info.endDts = lastDts;\n            info.beginPts = firstDts;\n            info.endPts = lastDts;\n            info.originalBeginDts = mp4Samples[0].originalDts;\n            info.originalEndDts = latest.originalDts + latest.duration;\n            info.firstSample = new _mediaSegmentInfo.SampleInfo(mp4Samples[0].dts, mp4Samples[0].pts, mp4Samples[0].duration, mp4Samples[0].originalDts, false);\n            info.lastSample = new _mediaSegmentInfo.SampleInfo(latest.dts, latest.pts, latest.duration, latest.originalDts, false);\n            if (!this._isLive) {\n                this._audioSegmentInfoList.append(info);\n            }\n\n            track.samples = mp4Samples;\n            track.sequenceNumber += track.addcoefficient;\n\n            var moofbox = _mp4remux2.default.moof(track, firstDts);\n            track.samples = [];\n            track.length = 0;\n\n            this._onMediaSegment('audio', {\n                type: 'audio',\n                data: this._mergeBoxes(moofbox, mdatbox).buffer,\n                sampleCount: mp4Samples.length,\n                info: info\n            });\n        }\n    }, {\n        key: '_generateSilentAudio',\n        value: function _generateSilentAudio(dts, frameDuration) {\n            Log.v(this.TAG, 'GenerateSilentAudio: dts = ' + dts + ', duration = ' + frameDuration);\n\n            var unit = _aacSilent2.default.getSilentFrame(this._audioMeta.channelCount);\n            if (unit == null) {\n                Log.w(this.TAG, 'Cannot generate silent aac frame for channelCount = ' + this._audioMeta.channelCount);\n                return null;\n            }\n\n            var mp4Sample = {\n                dts: dts,\n                pts: dts,\n                cts: 0,\n                size: unit.byteLength,\n                duration: frameDuration,\n                originalDts: dts,\n                flags: {\n                    isLeading: 0,\n                    dependsOn: 1,\n                    isDependedOn: 0,\n                    hasRedundancy: 0\n                }\n            };\n\n            return {\n                unit: unit,\n                mp4Sample: mp4Sample\n            };\n        }\n    }, {\n        key: '_remuxVideo',\n        value: function _remuxVideo(videoTrack) {\n            var track = videoTrack;\n            var samples = track.samples;\n            var dtsCorrection = undefined;\n            var firstDts = -1,\n                lastDts = -1;\n            var firstPts = -1,\n                lastPts = -1;\n\n            if (!samples || samples.length === 0) {\n                return;\n            }\n\n            var bytes = 8 + videoTrack.length;\n            var mdatbox = new Uint8Array(bytes);\n            mdatbox[0] = bytes >>> 24 & 0xFF;\n            mdatbox[1] = bytes >>> 16 & 0xFF;\n            mdatbox[2] = bytes >>> 8 & 0xFF;\n            mdatbox[3] = bytes & 0xFF;\n            mdatbox.set(_mp4remux2.default.types.mdat, 4);\n\n            var offset = 8;\n            var mp4Samples = [];\n            var info = new _mediaSegmentInfo.MediaSegmentInfo();\n\n            while (samples.length) {\n                var avcSample = samples.shift();\n                var keyframe = avcSample.isKeyframe;\n                var originalDts = avcSample.dts - this._dtsBase;\n\n                if (dtsCorrection == undefined) {\n                    if (this._videoNextDts == undefined) {\n                        if (this._videoSegmentInfoList.isEmpty()) {\n                            dtsCorrection = 0;\n                        } else {\n                            var lastSample = this._videoSegmentInfoList.getLastSampleBefore(originalDts);\n                            if (lastSample != null) {\n                                var distance = originalDts - (lastSample.originalDts + lastSample.duration);\n                                if (distance <= 3) {\n                                    distance = 0;\n                                }\n                                var expectedDts = lastSample.dts + lastSample.duration + distance;\n                                dtsCorrection = originalDts - expectedDts;\n                            } else {\n                                // lastSample == null\n                                dtsCorrection = 0;\n                            }\n                        }\n                    } else {\n                        dtsCorrection = originalDts - this._videoNextDts;\n                    }\n                }\n\n                var dts = originalDts - dtsCorrection;\n                var cts = avcSample.cts;\n                var pts = dts + cts;\n\n                if (firstDts === -1) {\n                    firstDts = dts;\n                    firstPts = pts;\n                }\n\n                // fill mdat box\n                var sampleSize = 0;\n                while (avcSample.units.length) {\n                    var unit = avcSample.units.shift();\n                    var data = unit.data;\n                    mdatbox.set(data, offset);\n                    offset += data.byteLength;\n                    sampleSize += data.byteLength;\n                }\n\n                var sampleDuration = 0;\n\n                if (samples.length >= 1) {\n                    var nextDts = samples[0].dts - this._dtsBase - dtsCorrection;\n                    sampleDuration = nextDts - dts;\n                } else {\n                    if (mp4Samples.length >= 1) {\n                        // lastest sample, use second last duration\n                        sampleDuration = mp4Samples[mp4Samples.length - 1].duration;\n                    } else {\n                        // the only one sample, use reference duration\n                        sampleDuration = this._videoMeta.refSampleDuration;\n                    }\n                }\n\n                if (keyframe) {\n                    var syncPoint = new _mediaSegmentInfo.SampleInfo(dts, pts, sampleDuration, avcSample.dts, true);\n                    syncPoint.fileposition = avcSample.fileposition;\n                    info.appendSyncPoint(syncPoint);\n                }\n\n                var mp4Sample = {\n                    dts: dts,\n                    pts: pts,\n                    cts: cts,\n                    size: sampleSize,\n                    isKeyframe: keyframe,\n                    duration: sampleDuration,\n                    originalDts: originalDts,\n                    flags: {\n                        isLeading: 0,\n                        dependsOn: keyframe ? 2 : 1,\n                        isDependedOn: keyframe ? 1 : 0,\n                        hasRedundancy: 0,\n                        isNonSync: keyframe ? 0 : 1\n                    }\n                };\n\n                mp4Samples.push(mp4Sample);\n            }\n            var latest = mp4Samples[mp4Samples.length - 1];\n            lastDts = latest.dts + latest.duration;\n            lastPts = latest.pts + latest.duration;\n            this._videoNextDts = lastDts;\n\n            // fill media segment info & add to info list\n            info.beginDts = firstDts;\n            info.endDts = lastDts;\n            info.beginPts = firstPts;\n            info.endPts = lastPts;\n            info.originalBeginDts = mp4Samples[0].originalDts;\n            info.originalEndDts = latest.originalDts + latest.duration;\n            info.firstSample = new _mediaSegmentInfo.SampleInfo(mp4Samples[0].dts, mp4Samples[0].pts, mp4Samples[0].duration, mp4Samples[0].originalDts, mp4Samples[0].isKeyframe);\n            info.lastSample = new _mediaSegmentInfo.SampleInfo(latest.dts, latest.pts, latest.duration, latest.originalDts, latest.isKeyframe);\n            if (!this._isLive) {\n                this._videoSegmentInfoList.append(info);\n            }\n\n            track.samples = mp4Samples;\n            track.sequenceNumber += track.addcoefficient;\n\n            // workaround for chrome < 50: force first sample as a random access point\n            // see https://bugs.chromium.org/p/chromium/issues/detail?id=229412\n            if (this._forceFirstIDR) {\n                var flags = mp4Samples[0].flags;\n                flags.dependsOn = 2;\n                flags.isNonSync = 0;\n            }\n\n            var moofbox = _mp4remux2.default.moof(track, firstDts);\n            track.samples = [];\n            track.length = 0;\n\n            this._onMediaSegment('video', {\n                type: 'video',\n                data: this._mergeBoxes(moofbox, mdatbox).buffer,\n                sampleCount: mp4Samples.length,\n                info: info\n            });\n        }\n    }, {\n        key: '_mergeBoxes',\n        value: function _mergeBoxes(moof, mdat) {\n            var result = new Uint8Array(moof.byteLength + mdat.byteLength);\n            result.set(moof, 0);\n            result.set(mdat, moof.byteLength);\n            return result;\n        }\n    }, {\n        key: 'onInitSegment',\n        get: function get() {\n            return this._onInitSegment;\n        },\n        set: function set(callback) {\n            this._onInitSegment = callback;\n        }\n\n        /* prototype: function onMediaSegment(type: string, mediaSegment: MediaSegment): void\n           MediaSegment: {\n               type: string,\n               data: ArrayBuffer,\n               sampleCount: int32\n               info: MediaSegmentInfo\n           }\n        */\n\n    }, {\n        key: 'onMediaSegment',\n        get: function get() {\n            return this._onMediaSegment;\n        },\n        set: function set(callback) {\n            this._onMediaSegment = callback;\n        }\n    }]);\n\n    return MP4Remuxer;\n}();\n\nexports.default = MP4Remuxer;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9qcy9tcDQvbXA0bW9vZi5qcz9mZGQ0Il0sIm5hbWVzIjpbIk1QNFJlbXV4ZXIiLCJjb25maWciLCJUQUciLCJjb25zdHJ1Y3RvciIsIm5hbWUiLCJfY29uZmlnIiwiX2lzTGl2ZSIsImlzTGl2ZSIsIl9kdHNCYXNlIiwiX2R0c0Jhc2VJbml0ZWQiLCJfYXVkaW9EdHNCYXNlIiwiSW5maW5pdHkiLCJfdmlkZW9EdHNCYXNlIiwiX2F1ZGlvTmV4dER0cyIsInVuZGVmaW5lZCIsIl92aWRlb05leHREdHMiLCJfYXVkaW9NZXRhIiwiX3ZpZGVvTWV0YSIsIl9hdWRpb1NlZ21lbnRJbmZvTGlzdCIsIl92aWRlb1NlZ21lbnRJbmZvTGlzdCIsIl9vbkluaXRTZWdtZW50IiwiX29uTWVkaWFTZWdtZW50IiwiX2ZvcmNlRmlyc3RJRFIiLCJjaHJvbWUiLCJ2ZXJzaW9uIiwibWFqb3IiLCJidWlsZCIsIl9maWxsU2lsZW50QWZ0ZXJTZWVrIiwibXNlZGdlIiwibXNpZSIsImNsZWFyIiwicHJvZHVjZXIiLCJvbkRhdGFBdmFpbGFibGUiLCJyZW11eCIsImJpbmQiLCJvblRyYWNrTWV0YWRhdGEiLCJfb25UcmFja01ldGFkYXRhUmVjZWl2ZWQiLCJvcmlnaW5hbER0cyIsImF1ZGlvVHJhY2siLCJ2aWRlb1RyYWNrIiwiSWxsZWdhbFN0YXRlRXhjZXB0aW9uIiwiX2NhbGN1bGF0ZUR0c0Jhc2UiLCJfcmVtdXhWaWRlbyIsIl9yZW11eEF1ZGlvIiwidHlwZSIsIm1ldGFkYXRhIiwibWV0YWJveCIsImdlbmVyYXRlSW5pdFNlZ21lbnQiLCJMb2ciLCJ2IiwiZGF0YSIsImJ1ZmZlciIsImNvZGVjIiwiY29udGFpbmVyIiwic2FtcGxlcyIsImxlbmd0aCIsImR0cyIsIk1hdGgiLCJtaW4iLCJ0cmFjayIsImR0c0NvcnJlY3Rpb24iLCJmaXJzdER0cyIsImxhc3REdHMiLCJsYXN0UHRzIiwicmVtdXhTaWxlbnRGcmFtZSIsInNpbGVudEZyYW1lRHVyYXRpb24iLCJieXRlcyIsIm1kYXRib3giLCJVaW50OEFycmF5Iiwic2V0IiwidHlwZXMiLCJtZGF0Iiwib2Zmc2V0IiwibXA0U2FtcGxlcyIsImFhY1NhbXBsZSIsInNoaWZ0IiwidW5pdCIsImlzRW1wdHkiLCJsYXN0U2FtcGxlIiwiZ2V0TGFzdFNhbXBsZUJlZm9yZSIsImRpc3RhbmNlIiwiZHVyYXRpb24iLCJleHBlY3RlZER0cyIsInZpZGVvU2VnbWVudCIsImdldExhc3RTZWdtZW50QmVmb3JlIiwiYmVnaW5EdHMiLCJ1bnNoaWZ0IiwiZnJhbWUiLCJfZ2VuZXJhdGVTaWxlbnRBdWRpbyIsIm1wNFNhbXBsZSIsInB1c2giLCJieXRlTGVuZ3RoIiwic2FtcGxlRHVyYXRpb24iLCJuZXh0RHRzIiwicmVmU2FtcGxlRHVyYXRpb24iLCJwdHMiLCJjdHMiLCJzaXplIiwiZmxhZ3MiLCJpc0xlYWRpbmciLCJkZXBlbmRzT24iLCJpc0RlcGVuZGVkT24iLCJoYXNSZWR1bmRhbmN5IiwibGF0ZXN0IiwiaW5mbyIsImVuZER0cyIsImJlZ2luUHRzIiwiZW5kUHRzIiwib3JpZ2luYWxCZWdpbkR0cyIsIm9yaWdpbmFsRW5kRHRzIiwiZmlyc3RTYW1wbGUiLCJhcHBlbmQiLCJzZXF1ZW5jZU51bWJlciIsImFkZGNvZWZmaWNpZW50IiwibW9vZmJveCIsIm1vb2YiLCJfbWVyZ2VCb3hlcyIsInNhbXBsZUNvdW50IiwiZnJhbWVEdXJhdGlvbiIsImdldFNpbGVudEZyYW1lIiwiY2hhbm5lbENvdW50IiwidyIsImZpcnN0UHRzIiwiYXZjU2FtcGxlIiwia2V5ZnJhbWUiLCJpc0tleWZyYW1lIiwic2FtcGxlU2l6ZSIsInVuaXRzIiwic3luY1BvaW50IiwiZmlsZXBvc2l0aW9uIiwiYXBwZW5kU3luY1BvaW50IiwiaXNOb25TeW5jIiwicmVzdWx0IiwiY2FsbGJhY2siXSwibWFwcGluZ3MiOiI7Ozs7OztxakJBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQW1CQTs7OztBQUNBOzs7O0FBQ0E7Ozs7QUFDQTs7Ozs7O0FBRUE7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aUJGLE9BQWpCLEVBQTBCL0MsT0FBMUIsRUFBbUNoQixNQUZmO0FBRzFCa0UsNkJBQWE1QyxXQUFXbEIsTUFIRTtBQUkxQmlELHNCQUFNQTtBQUpvQixhQUE5QjtBQU1IOzs7b0NBRVdXLEksRUFBTTVDLEksRUFBTTtBQUNwQixnQkFBSTZELFNBQVMsSUFBSWhFLFVBQUosQ0FBZStDLEtBQUt4QixVQUFMLEdBQWtCcEIsS0FBS29CLFVBQXRDLENBQWI7QUFDQXlDLG1CQUFPL0QsR0FBUCxDQUFXOEMsSUFBWCxFQUFpQixDQUFqQjtBQUNBaUIsbUJBQU8vRCxHQUFQLENBQVdFLElBQVgsRUFBaUI0QyxLQUFLeEIsVUFBdEI7QUFDQSxtQkFBT3lDLE1BQVA7QUFDSDs7OzRCQXBjbUI7QUFDaEIsbUJBQU8sS0FBS2hILGNBQVo7QUFDSCxTOzBCQUVpQmlILFEsRUFBVTtBQUN4QixpQkFBS2pILGNBQUwsR0FBc0JpSCxRQUF0QjtBQUNIOztBQUVEOzs7Ozs7Ozs7Ozs0QkFRcUI7QUFDakIsbUJBQU8sS0FBS2hILGVBQVo7QUFDSCxTOzBCQUVrQmdILFEsRUFBVTtBQUN6QixpQkFBS2hILGVBQUwsR0FBdUJnSCxRQUF2QjtBQUNIOzs7Ozs7a0JBa2JVckksVSIsImZpbGUiOiI0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLypcbiAqIENvcHlyaWdodCAoQykgMjAxNiBCaWxpYmlsaS4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBAYXV0aG9yIHpoZW5nIHFpYW4gPHhxcUB4cXEuaW0+XG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cblxuaW1wb3J0IEFBQyBmcm9tICcuL2FhYy1zaWxlbnQuanMnO1xuaW1wb3J0IEJyb3dzZXIgZnJvbSAnLi4vdXRpbHMvYnJvd3Nlci5qcyc7XG5pbXBvcnQgTVA0IGZyb20gJy4vbXA0cmVtdXgnXG5pbXBvcnQgeyBTYW1wbGVJbmZvLCBNZWRpYVNlZ21lbnRJbmZvLCBNZWRpYVNlZ21lbnRJbmZvTGlzdCB9IGZyb20gJy4vbWVkaWEtc2VnbWVudC1pbmZvLmpzJztcblxuLy8gRnJhZ21lbnRlZCBtcDQgcmVtdXhlclxuY2xhc3MgTVA0UmVtdXhlciB7XG5cbiAgICBjb25zdHJ1Y3Rvcihjb25maWcpIHtcbiAgICAgICAgdGhpcy5UQUcgPSB0aGlzLmNvbnN0cnVjdG9yLm5hbWU7XG5cbiAgICAgICAgdGhpcy5fY29uZmlnID0gY29uZmlnO1xuICAgICAgICB0aGlzLl9pc0xpdmUgPSAoY29uZmlnLmlzTGl2ZSA9PT0gdHJ1ZSkgPyB0cnVlIDogZmFsc2U7XG5cbiAgICAgICAgdGhpcy5fZHRzQmFzZSA9IC0xO1xuICAgICAgICB0aGlzLl9kdHNCYXNlSW5pdGVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuX2F1ZGlvRHRzQmFzZSA9IEluZmluaXR5O1xuICAgICAgICB0aGlzLl92aWRlb0R0c0Jhc2UgPSBJbmZpbml0eTtcbiAgICAgICAgdGhpcy5fYXVkaW9OZXh0RHRzID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLl92aWRlb05leHREdHMgPSB1bmRlZmluZWQ7XG5cbiAgICAgICAgdGhpcy5fYXVkaW9NZXRhID0gbnVsbDtcbiAgICAgICAgdGhpcy5fdmlkZW9NZXRhID0gbnVsbDtcblxuICAgICAgICB0aGlzLl9hdWRpb1NlZ21lbnRJbmZvTGlzdCA9IG5ldyBNZWRpYVNlZ21lbnRJbmZvTGlzdCgnYXVkaW8nKTtcbiAgICAgICAgdGhpcy5fdmlkZW9TZWdtZW50SW5mb0xpc3QgPSBuZXcgTWVkaWFTZWdtZW50SW5mb0xpc3QoJ3ZpZGVvJyk7XG5cbiAgICAgICAgdGhpcy5fb25Jbml0U2VnbWVudCA9IG51bGw7XG4gICAgICAgIHRoaXMuX29uTWVkaWFTZWdtZW50ID0gbnVsbDtcblxuICAgICAgICAvLyBXb3JrYXJvdW5kIGZvciBjaHJvbWUgPCA1MDogQWx3YXlzIGZvcmNlIGZpcnN0IHNhbXBsZSBhcyBhIFJhbmRvbSBBY2Nlc3MgUG9pbnQgaW4gbWVkaWEgc2VnbWVudFxuICAgICAgICAvLyBzZWUgaHR0cHM6Ly9idWdzLmNocm9taXVtLm9yZy9wL2Nocm9taXVtL2lzc3Vlcy9kZXRhaWw/aWQ9MjI5NDEyXG4gICAgICAgIHRoaXMuX2ZvcmNlRmlyc3RJRFIgPSAoQnJvd3Nlci5jaHJvbWUgJiZcbiAgICAgICAgICAgIChCcm93c2VyLnZlcnNpb24ubWFqb3IgPCA1MCB8fFxuICAgICAgICAgICAgICAgIChCcm93c2VyLnZlcnNpb24ubWFqb3IgPT09IDUwICYmIEJyb3dzZXIudmVyc2lvbi5idWlsZCA8IDI2NjEpKSkgPyB0cnVlIDogZmFsc2U7XG5cbiAgICAgICAgLy8gV29ya2Fyb3VuZCBmb3IgSUUxMS9FZGdlOiBGaWxsIHNpbGVudCBhYWMgZnJhbWUgYWZ0ZXIga2V5ZnJhbWUtc2Vla2luZ1xuICAgICAgICAvLyBNYWtlIGF1ZGlvIGJlZ2luRHRzIGVxdWFscyB3aXRoIHZpZGVvIGJlZ2luRHRzLCBpbiBvcmRlciB0byBmaXggc2VlayBmcmVlemVcbiAgICAgICAgdGhpcy5fZmlsbFNpbGVudEFmdGVyU2VlayA9IChCcm93c2VyLm1zZWRnZSB8fCBCcm93c2VyLm1zaWUpO1xuICAgIH1cblxuICAgIGRlc3Ryb3koKSB7XG4gICAgICAgIHRoaXMuX2R0c0Jhc2UgPSAtMTtcbiAgICAgICAgdGhpcy5fZHRzQmFzZUluaXRlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLl9hdWRpb01ldGEgPSBudWxsO1xuICAgICAgICB0aGlzLl92aWRlb01ldGEgPSBudWxsO1xuICAgICAgICB0aGlzLl9hdWRpb1NlZ21lbnRJbmZvTGlzdC5jbGVhcigpO1xuICAgICAgICB0aGlzLl9hdWRpb1NlZ21lbnRJbmZvTGlzdCA9IG51bGw7XG4gICAgICAgIHRoaXMuX3ZpZGVvU2VnbWVudEluZm9MaXN0LmNsZWFyKCk7XG4gICAgICAgIHRoaXMuX3ZpZGVvU2VnbWVudEluZm9MaXN0ID0gbnVsbDtcbiAgICAgICAgdGhpcy5fb25Jbml0U2VnbWVudCA9IG51bGw7XG4gICAgICAgIHRoaXMuX29uTWVkaWFTZWdtZW50ID0gbnVsbDtcbiAgICB9XG5cbiAgICBiaW5kRGF0YVNvdXJjZShwcm9kdWNlcikge1xuICAgICAgICBwcm9kdWNlci5vbkRhdGFBdmFpbGFibGUgPSB0aGlzLnJlbXV4LmJpbmQodGhpcyk7XG4gICAgICAgIHByb2R1Y2VyLm9uVHJhY2tNZXRhZGF0YSA9IHRoaXMuX29uVHJhY2tNZXRhZGF0YVJlY2VpdmVkLmJpbmQodGhpcyk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIC8qIHByb3RvdHlwZTogZnVuY3Rpb24gb25Jbml0U2VnbWVudCh0eXBlOiBzdHJpbmcsIGluaXRTZWdtZW50OiBBcnJheUJ1ZmZlcik6IHZvaWRcbiAgICAgICBJbml0U2VnbWVudDoge1xuICAgICAgICAgICB0eXBlOiBzdHJpbmcsXG4gICAgICAgICAgIGRhdGE6IEFycmF5QnVmZmVyLFxuICAgICAgICAgICBjb2RlYzogc3RyaW5nLFxuICAgICAgICAgICBjb250YWluZXI6IHN0cmluZ1xuICAgICAgIH1cbiAgICAqL1xuICAgIGdldCBvbkluaXRTZWdtZW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fb25Jbml0U2VnbWVudDtcbiAgICB9XG5cbiAgICBzZXQgb25Jbml0U2VnbWVudChjYWxsYmFjaykge1xuICAgICAgICB0aGlzLl9vbkluaXRTZWdtZW50ID0gY2FsbGJhY2s7XG4gICAgfVxuXG4gICAgLyogcHJvdG90eXBlOiBmdW5jdGlvbiBvbk1lZGlhU2VnbWVudCh0eXBlOiBzdHJpbmcsIG1lZGlhU2VnbWVudDogTWVkaWFTZWdtZW50KTogdm9pZFxuICAgICAgIE1lZGlhU2VnbWVudDoge1xuICAgICAgICAgICB0eXBlOiBzdHJpbmcsXG4gICAgICAgICAgIGRhdGE6IEFycmF5QnVmZmVyLFxuICAgICAgICAgICBzYW1wbGVDb3VudDogaW50MzJcbiAgICAgICAgICAgaW5mbzogTWVkaWFTZWdtZW50SW5mb1xuICAgICAgIH1cbiAgICAqL1xuICAgIGdldCBvbk1lZGlhU2VnbWVudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX29uTWVkaWFTZWdtZW50O1xuICAgIH1cblxuICAgIHNldCBvbk1lZGlhU2VnbWVudChjYWxsYmFjaykge1xuICAgICAgICB0aGlzLl9vbk1lZGlhU2VnbWVudCA9IGNhbGxiYWNrO1xuICAgIH1cblxuICAgIGluc2VydERpc2NvbnRpbnVpdHkoKSB7XG4gICAgICAgIHRoaXMuX2F1ZGlvTmV4dER0cyA9IHRoaXMuX3ZpZGVvTmV4dER0cyA9IHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICBzZWVrKG9yaWdpbmFsRHRzKSB7XG4gICAgICAgIHRoaXMuX3ZpZGVvU2VnbWVudEluZm9MaXN0LmNsZWFyKCk7XG4gICAgICAgIHRoaXMuX2F1ZGlvU2VnbWVudEluZm9MaXN0LmNsZWFyKCk7XG4gICAgfVxuXG4gICAgcmVtdXgoYXVkaW9UcmFjaywgdmlkZW9UcmFjaykge1xuICAgICAgICBpZiAoIXRoaXMuX29uTWVkaWFTZWdtZW50KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbFN0YXRlRXhjZXB0aW9uKCdNUDRSZW11eGVyOiBvbk1lZGlhU2VnbWVudCBjYWxsYmFjayBtdXN0IGJlIHNwZWNpZmljZWQhJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLl9kdHNCYXNlSW5pdGVkKSB7XG4gICAgICAgICAgICB0aGlzLl9jYWxjdWxhdGVEdHNCYXNlKGF1ZGlvVHJhY2ssIHZpZGVvVHJhY2spO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3JlbXV4VmlkZW8odmlkZW9UcmFjayk7XG4gICAgICAgIHRoaXMuX3JlbXV4QXVkaW8oYXVkaW9UcmFjayk7XG4gICAgfVxuXG4gICAgX29uVHJhY2tNZXRhZGF0YVJlY2VpdmVkKHR5cGUsIG1ldGFkYXRhKSB7XG4gICAgICAgIGxldCBtZXRhYm94ID0gbnVsbDtcblxuICAgICAgICBpZiAodHlwZSA9PT0gJ2F1ZGlvJykge1xuICAgICAgICAgICAgdGhpcy5fYXVkaW9NZXRhID0gbWV0YWRhdGE7XG4gICAgICAgICAgICBtZXRhYm94ID0gTVA0LmdlbmVyYXRlSW5pdFNlZ21lbnQobWV0YWRhdGEpO1xuICAgICAgICAgICAgTG9nLnYoJ21zZythdWRpbycsIG1ldGFkYXRhKVxuICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICd2aWRlbycpIHtcbiAgICAgICAgICAgIHRoaXMuX3ZpZGVvTWV0YSA9IG1ldGFkYXRhO1xuICAgICAgICAgICAgbWV0YWJveCA9IE1QNC5nZW5lcmF0ZUluaXRTZWdtZW50KG1ldGFkYXRhKTtcbiAgICAgICAgICAgIExvZy52KCdtc2crdmlkZW8nLCBtZXRhZGF0YSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGRpc3BhdGNoIG1ldGFib3ggKEluaXRpYWxpemF0aW9uIFNlZ21lbnQpXG4gICAgICAgIGlmICghdGhpcy5fb25Jbml0U2VnbWVudCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxTdGF0ZUV4Y2VwdGlvbignTVA0UmVtdXhlcjogb25Jbml0U2VnbWVudCBjYWxsYmFjayBtdXN0IGJlIHNwZWNpZmllZCEnKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9vbkluaXRTZWdtZW50KHR5cGUsIHtcbiAgICAgICAgICAgIHR5cGU6IHR5cGUsXG4gICAgICAgICAgICBkYXRhOiBtZXRhYm94LmJ1ZmZlcixcbiAgICAgICAgICAgIGNvZGVjOiBtZXRhZGF0YS5jb2RlYyxcbiAgICAgICAgICAgIGNvbnRhaW5lcjogYCR7dHlwZX0vbXA0YFxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBfY2FsY3VsYXRlRHRzQmFzZShhdWRpb1RyYWNrLCB2aWRlb1RyYWNrKSB7XG4gICAgICAgIGlmICh0aGlzLl9kdHNCYXNlSW5pdGVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoYXVkaW9UcmFjay5zYW1wbGVzICYmIGF1ZGlvVHJhY2suc2FtcGxlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHRoaXMuX2F1ZGlvRHRzQmFzZSA9IGF1ZGlvVHJhY2suc2FtcGxlc1swXS5kdHM7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHZpZGVvVHJhY2suc2FtcGxlcyAmJiB2aWRlb1RyYWNrLnNhbXBsZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICB0aGlzLl92aWRlb0R0c0Jhc2UgPSB2aWRlb1RyYWNrLnNhbXBsZXNbMF0uZHRzO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fZHRzQmFzZSA9IE1hdGgubWluKHRoaXMuX2F1ZGlvRHRzQmFzZSwgdGhpcy5fdmlkZW9EdHNCYXNlKTtcbiAgICAgICAgdGhpcy5fZHRzQmFzZUluaXRlZCA9IHRydWU7XG4gICAgfVxuXG4gICAgX3JlbXV4QXVkaW8oYXVkaW9UcmFjaykge1xuICAgICAgICBsZXQgdHJhY2sgPSBhdWRpb1RyYWNrO1xuICAgICAgICBsZXQgc2FtcGxlcyA9IHRyYWNrLnNhbXBsZXM7XG4gICAgICAgIGxldCBkdHNDb3JyZWN0aW9uID0gdW5kZWZpbmVkO1xuICAgICAgICBsZXQgZmlyc3REdHMgPSAtMSxcbiAgICAgICAgICAgIGxhc3REdHMgPSAtMSxcbiAgICAgICAgICAgIGxhc3RQdHMgPSAtMTtcblxuICAgICAgICBsZXQgcmVtdXhTaWxlbnRGcmFtZSA9IGZhbHNlO1xuICAgICAgICBsZXQgc2lsZW50RnJhbWVEdXJhdGlvbiA9IC0xO1xuXG4gICAgICAgIGlmICghc2FtcGxlcyB8fCBzYW1wbGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGJ5dGVzID0gOCArIHRyYWNrLmxlbmd0aDtcbiAgICAgICAgbGV0IG1kYXRib3ggPSBuZXcgVWludDhBcnJheShieXRlcyk7XG4gICAgICAgIG1kYXRib3hbMF0gPSAoYnl0ZXMgPj4+IDI0KSAmIDB4RkY7XG4gICAgICAgIG1kYXRib3hbMV0gPSAoYnl0ZXMgPj4+IDE2KSAmIDB4RkY7XG4gICAgICAgIG1kYXRib3hbMl0gPSAoYnl0ZXMgPj4+IDgpICYgMHhGRjtcbiAgICAgICAgbWRhdGJveFszXSA9IChieXRlcykgJiAweEZGO1xuXG4gICAgICAgIG1kYXRib3guc2V0KE1QNC50eXBlcy5tZGF0LCA0KTtcblxuICAgICAgICBsZXQgb2Zmc2V0ID0gODsgLy8gc2l6ZSArIHR5cGVcbiAgICAgICAgbGV0IG1wNFNhbXBsZXMgPSBbXTtcblxuICAgICAgICB3aGlsZSAoc2FtcGxlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGxldCBhYWNTYW1wbGUgPSBzYW1wbGVzLnNoaWZ0KCk7XG4gICAgICAgICAgICBsZXQgdW5pdCA9IGFhY1NhbXBsZS51bml0O1xuICAgICAgICAgICAgbGV0IG9yaWdpbmFsRHRzID0gYWFjU2FtcGxlLmR0cyAtIHRoaXMuX2R0c0Jhc2U7XG5cbiAgICAgICAgICAgIGlmIChkdHNDb3JyZWN0aW9uID09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9hdWRpb05leHREdHMgPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl9hdWRpb1NlZ21lbnRJbmZvTGlzdC5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGR0c0NvcnJlY3Rpb24gPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX2ZpbGxTaWxlbnRBZnRlclNlZWsgJiYgIXRoaXMuX3ZpZGVvU2VnbWVudEluZm9MaXN0LmlzRW1wdHkoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbXV4U2lsZW50RnJhbWUgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGxhc3RTYW1wbGUgPSB0aGlzLl9hdWRpb1NlZ21lbnRJbmZvTGlzdC5nZXRMYXN0U2FtcGxlQmVmb3JlKG9yaWdpbmFsRHRzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsYXN0U2FtcGxlICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgZGlzdGFuY2UgPSAob3JpZ2luYWxEdHMgLSAobGFzdFNhbXBsZS5vcmlnaW5hbER0cyArIGxhc3RTYW1wbGUuZHVyYXRpb24pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGlzdGFuY2UgPD0gMykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXN0YW5jZSA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBleHBlY3RlZER0cyA9IGxhc3RTYW1wbGUuZHRzICsgbGFzdFNhbXBsZS5kdXJhdGlvbiArIGRpc3RhbmNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGR0c0NvcnJlY3Rpb24gPSBvcmlnaW5hbER0cyAtIGV4cGVjdGVkRHRzO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsgLy8gbGFzdFNhbXBsZSA9PSBudWxsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZHRzQ29ycmVjdGlvbiA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBkdHNDb3JyZWN0aW9uID0gb3JpZ2luYWxEdHMgLSB0aGlzLl9hdWRpb05leHREdHM7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBsZXQgZHRzID0gb3JpZ2luYWxEdHMgLSBkdHNDb3JyZWN0aW9uO1xuICAgICAgICAgICAgaWYgKHJlbXV4U2lsZW50RnJhbWUpIHtcbiAgICAgICAgICAgICAgICAvLyBhbGlnbiBhdWRpbyBzZWdtZW50IGJlZ2luRHRzIHRvIG1hdGNoIHdpdGggY3VycmVudCB2aWRlbyBzZWdtZW50J3MgYmVnaW5EdHNcbiAgICAgICAgICAgICAgICBsZXQgdmlkZW9TZWdtZW50ID0gdGhpcy5fdmlkZW9TZWdtZW50SW5mb0xpc3QuZ2V0TGFzdFNlZ21lbnRCZWZvcmUob3JpZ2luYWxEdHMpO1xuICAgICAgICAgICAgICAgIGlmICh2aWRlb1NlZ21lbnQgIT0gbnVsbCAmJiB2aWRlb1NlZ21lbnQuYmVnaW5EdHMgPCBkdHMpIHtcbiAgICAgICAgICAgICAgICAgICAgc2lsZW50RnJhbWVEdXJhdGlvbiA9IGR0cyAtIHZpZGVvU2VnbWVudC5iZWdpbkR0cztcbiAgICAgICAgICAgICAgICAgICAgZHRzID0gdmlkZW9TZWdtZW50LmJlZ2luRHRzO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJlbXV4U2lsZW50RnJhbWUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZmlyc3REdHMgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgZmlyc3REdHMgPSBkdHM7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChyZW11eFNpbGVudEZyYW1lKSB7XG4gICAgICAgICAgICAgICAgcmVtdXhTaWxlbnRGcmFtZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHNhbXBsZXMudW5zaGlmdChhYWNTYW1wbGUpO1xuXG4gICAgICAgICAgICAgICAgbGV0IGZyYW1lID0gdGhpcy5fZ2VuZXJhdGVTaWxlbnRBdWRpbyhkdHMsIHNpbGVudEZyYW1lRHVyYXRpb24pO1xuICAgICAgICAgICAgICAgIGlmIChmcmFtZSA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBsZXQgbXA0U2FtcGxlID0gZnJhbWUubXA0U2FtcGxlO1xuICAgICAgICAgICAgICAgIGxldCB1bml0ID0gZnJhbWUudW5pdDtcblxuICAgICAgICAgICAgICAgIG1wNFNhbXBsZXMucHVzaChtcDRTYW1wbGUpO1xuXG4gICAgICAgICAgICAgICAgLy8gcmUtYWxsb2NhdGUgbWRhdGJveCBidWZmZXIgd2l0aCBuZXcgc2l6ZSwgdG8gZml0IHdpdGggdGhpcyBzaWxlbnQgZnJhbWVcbiAgICAgICAgICAgICAgICBieXRlcyArPSB1bml0LmJ5dGVMZW5ndGg7XG4gICAgICAgICAgICAgICAgbWRhdGJveCA9IG5ldyBVaW50OEFycmF5KGJ5dGVzKTtcbiAgICAgICAgICAgICAgICBtZGF0Ym94WzBdID0gKGJ5dGVzID4+PiAyNCkgJiAweEZGO1xuICAgICAgICAgICAgICAgIG1kYXRib3hbMV0gPSAoYnl0ZXMgPj4+IDE2KSAmIDB4RkY7XG4gICAgICAgICAgICAgICAgbWRhdGJveFsyXSA9IChieXRlcyA+Pj4gOCkgJiAweEZGO1xuICAgICAgICAgICAgICAgIG1kYXRib3hbM10gPSAoYnl0ZXMpICYgMHhGRjtcbiAgICAgICAgICAgICAgICBtZGF0Ym94LnNldChNUDQudHlwZXMubWRhdCwgNCk7XG5cbiAgICAgICAgICAgICAgICAvLyBmaWxsIGRhdGEgbm93XG4gICAgICAgICAgICAgICAgbWRhdGJveC5zZXQodW5pdCwgb2Zmc2V0KTtcbiAgICAgICAgICAgICAgICBvZmZzZXQgKz0gdW5pdC5ieXRlTGVuZ3RoO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBsZXQgc2FtcGxlRHVyYXRpb24gPSAwO1xuXG4gICAgICAgICAgICBpZiAoc2FtcGxlcy5sZW5ndGggPj0gMSkge1xuICAgICAgICAgICAgICAgIGxldCBuZXh0RHRzID0gc2FtcGxlc1swXS5kdHMgLSB0aGlzLl9kdHNCYXNlIC0gZHRzQ29ycmVjdGlvbjtcbiAgICAgICAgICAgICAgICBzYW1wbGVEdXJhdGlvbiA9IG5leHREdHMgLSBkdHM7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChtcDRTYW1wbGVzLmxlbmd0aCA+PSAxKSB7IC8vIHVzZSBzZWNvbmQgbGFzdCBzYW1wbGUgZHVyYXRpb25cbiAgICAgICAgICAgICAgICAgICAgc2FtcGxlRHVyYXRpb24gPSBtcDRTYW1wbGVzW21wNFNhbXBsZXMubGVuZ3RoIC0gMV0uZHVyYXRpb247XG4gICAgICAgICAgICAgICAgfSBlbHNlIHsgLy8gdGhlIG9ubHkgb25lIHNhbXBsZSwgdXNlIHJlZmVyZW5jZSBzYW1wbGUgZHVyYXRpb25cbiAgICAgICAgICAgICAgICAgICAgc2FtcGxlRHVyYXRpb24gPSB0aGlzLl9hdWRpb01ldGEucmVmU2FtcGxlRHVyYXRpb247XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBsZXQgbXA0U2FtcGxlID0ge1xuICAgICAgICAgICAgICAgIGR0czogZHRzLFxuICAgICAgICAgICAgICAgIHB0czogZHRzLFxuICAgICAgICAgICAgICAgIGN0czogMCxcbiAgICAgICAgICAgICAgICBzaXplOiB1bml0LmJ5dGVMZW5ndGgsXG4gICAgICAgICAgICAgICAgZHVyYXRpb246IHNhbXBsZUR1cmF0aW9uLFxuICAgICAgICAgICAgICAgIG9yaWdpbmFsRHRzOiBvcmlnaW5hbER0cyxcbiAgICAgICAgICAgICAgICBmbGFnczoge1xuICAgICAgICAgICAgICAgICAgICBpc0xlYWRpbmc6IDAsXG4gICAgICAgICAgICAgICAgICAgIGRlcGVuZHNPbjogMSxcbiAgICAgICAgICAgICAgICAgICAgaXNEZXBlbmRlZE9uOiAwLFxuICAgICAgICAgICAgICAgICAgICBoYXNSZWR1bmRhbmN5OiAwXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIG1wNFNhbXBsZXMucHVzaChtcDRTYW1wbGUpO1xuICAgICAgICAgICAgbWRhdGJveC5zZXQodW5pdCwgb2Zmc2V0KTtcbiAgICAgICAgICAgIG9mZnNldCArPSB1bml0LmJ5dGVMZW5ndGg7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGxhdGVzdCA9IG1wNFNhbXBsZXNbbXA0U2FtcGxlcy5sZW5ndGggLSAxXTtcbiAgICAgICAgbGFzdER0cyA9IGxhdGVzdC5kdHMgKyBsYXRlc3QuZHVyYXRpb247XG4gICAgICAgIHRoaXMuX2F1ZGlvTmV4dER0cyA9IGxhc3REdHM7XG5cbiAgICAgICAgLy8gZmlsbCBtZWRpYSBzZWdtZW50IGluZm8gJiBhZGQgdG8gaW5mbyBsaXN0XG4gICAgICAgIGxldCBpbmZvID0gbmV3IE1lZGlhU2VnbWVudEluZm8oKTtcbiAgICAgICAgaW5mby5iZWdpbkR0cyA9IGZpcnN0RHRzO1xuICAgICAgICBpbmZvLmVuZER0cyA9IGxhc3REdHM7XG4gICAgICAgIGluZm8uYmVnaW5QdHMgPSBmaXJzdER0cztcbiAgICAgICAgaW5mby5lbmRQdHMgPSBsYXN0RHRzO1xuICAgICAgICBpbmZvLm9yaWdpbmFsQmVnaW5EdHMgPSBtcDRTYW1wbGVzWzBdLm9yaWdpbmFsRHRzO1xuICAgICAgICBpbmZvLm9yaWdpbmFsRW5kRHRzID0gbGF0ZXN0Lm9yaWdpbmFsRHRzICsgbGF0ZXN0LmR1cmF0aW9uO1xuICAgICAgICBpbmZvLmZpcnN0U2FtcGxlID0gbmV3IFNhbXBsZUluZm8obXA0U2FtcGxlc1swXS5kdHMsXG4gICAgICAgICAgICBtcDRTYW1wbGVzWzBdLnB0cyxcbiAgICAgICAgICAgIG1wNFNhbXBsZXNbMF0uZHVyYXRpb24sXG4gICAgICAgICAgICBtcDRTYW1wbGVzWzBdLm9yaWdpbmFsRHRzLFxuICAgICAgICAgICAgZmFsc2UpO1xuICAgICAgICBpbmZvLmxhc3RTYW1wbGUgPSBuZXcgU2FtcGxlSW5mbyhsYXRlc3QuZHRzLFxuICAgICAgICAgICAgbGF0ZXN0LnB0cyxcbiAgICAgICAgICAgIGxhdGVzdC5kdXJhdGlvbixcbiAgICAgICAgICAgIGxhdGVzdC5vcmlnaW5hbER0cyxcbiAgICAgICAgICAgIGZhbHNlKTtcbiAgICAgICAgaWYgKCF0aGlzLl9pc0xpdmUpIHtcbiAgICAgICAgICAgIHRoaXMuX2F1ZGlvU2VnbWVudEluZm9MaXN0LmFwcGVuZChpbmZvKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRyYWNrLnNhbXBsZXMgPSBtcDRTYW1wbGVzO1xuICAgICAgICB0cmFjay5zZXF1ZW5jZU51bWJlciArPSB0cmFjay5hZGRjb2VmZmljaWVudDtcblxuICAgICAgICBsZXQgbW9vZmJveCA9IE1QNC5tb29mKHRyYWNrLCBmaXJzdER0cyk7XG4gICAgICAgIHRyYWNrLnNhbXBsZXMgPSBbXTtcbiAgICAgICAgdHJhY2subGVuZ3RoID0gMDtcblxuICAgICAgICB0aGlzLl9vbk1lZGlhU2VnbWVudCgnYXVkaW8nLCB7XG4gICAgICAgICAgICB0eXBlOiAnYXVkaW8nLFxuICAgICAgICAgICAgZGF0YTogdGhpcy5fbWVyZ2VCb3hlcyhtb29mYm94LCBtZGF0Ym94KS5idWZmZXIsXG4gICAgICAgICAgICBzYW1wbGVDb3VudDogbXA0U2FtcGxlcy5sZW5ndGgsXG4gICAgICAgICAgICBpbmZvOiBpbmZvXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIF9nZW5lcmF0ZVNpbGVudEF1ZGlvKGR0cywgZnJhbWVEdXJhdGlvbikge1xuICAgICAgICBMb2cudih0aGlzLlRBRywgYEdlbmVyYXRlU2lsZW50QXVkaW86IGR0cyA9ICR7ZHRzfSwgZHVyYXRpb24gPSAke2ZyYW1lRHVyYXRpb259YCk7XG5cbiAgICAgICAgbGV0IHVuaXQgPSBBQUMuZ2V0U2lsZW50RnJhbWUodGhpcy5fYXVkaW9NZXRhLmNoYW5uZWxDb3VudCk7XG4gICAgICAgIGlmICh1bml0ID09IG51bGwpIHtcbiAgICAgICAgICAgIExvZy53KHRoaXMuVEFHLCBgQ2Fubm90IGdlbmVyYXRlIHNpbGVudCBhYWMgZnJhbWUgZm9yIGNoYW5uZWxDb3VudCA9ICR7dGhpcy5fYXVkaW9NZXRhLmNoYW5uZWxDb3VudH1gKTtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IG1wNFNhbXBsZSA9IHtcbiAgICAgICAgICAgIGR0czogZHRzLFxuICAgICAgICAgICAgcHRzOiBkdHMsXG4gICAgICAgICAgICBjdHM6IDAsXG4gICAgICAgICAgICBzaXplOiB1bml0LmJ5dGVMZW5ndGgsXG4gICAgICAgICAgICBkdXJhdGlvbjogZnJhbWVEdXJhdGlvbixcbiAgICAgICAgICAgIG9yaWdpbmFsRHRzOiBkdHMsXG4gICAgICAgICAgICBmbGFnczoge1xuICAgICAgICAgICAgICAgIGlzTGVhZGluZzogMCxcbiAgICAgICAgICAgICAgICBkZXBlbmRzT246IDEsXG4gICAgICAgICAgICAgICAgaXNEZXBlbmRlZE9uOiAwLFxuICAgICAgICAgICAgICAgIGhhc1JlZHVuZGFuY3k6IDBcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdW5pdCxcbiAgICAgICAgICAgIG1wNFNhbXBsZVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIF9yZW11eFZpZGVvKHZpZGVvVHJhY2spIHtcbiAgICAgICAgbGV0IHRyYWNrID0gdmlkZW9UcmFjaztcbiAgICAgICAgbGV0IHNhbXBsZXMgPSB0cmFjay5zYW1wbGVzO1xuICAgICAgICBsZXQgZHRzQ29ycmVjdGlvbiA9IHVuZGVmaW5lZDtcbiAgICAgICAgbGV0IGZpcnN0RHRzID0gLTEsXG4gICAgICAgICAgICBsYXN0RHRzID0gLTE7XG4gICAgICAgIGxldCBmaXJzdFB0cyA9IC0xLFxuICAgICAgICAgICAgbGFzdFB0cyA9IC0xO1xuXG4gICAgICAgIGlmICghc2FtcGxlcyB8fCBzYW1wbGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGJ5dGVzID0gOCArIHZpZGVvVHJhY2subGVuZ3RoO1xuICAgICAgICBsZXQgbWRhdGJveCA9IG5ldyBVaW50OEFycmF5KGJ5dGVzKTtcbiAgICAgICAgbWRhdGJveFswXSA9IChieXRlcyA+Pj4gMjQpICYgMHhGRjtcbiAgICAgICAgbWRhdGJveFsxXSA9IChieXRlcyA+Pj4gMTYpICYgMHhGRjtcbiAgICAgICAgbWRhdGJveFsyXSA9IChieXRlcyA+Pj4gOCkgJiAweEZGO1xuICAgICAgICBtZGF0Ym94WzNdID0gKGJ5dGVzKSAmIDB4RkY7XG4gICAgICAgIG1kYXRib3guc2V0KE1QNC50eXBlcy5tZGF0LCA0KTtcblxuICAgICAgICBsZXQgb2Zmc2V0ID0gODtcbiAgICAgICAgbGV0IG1wNFNhbXBsZXMgPSBbXTtcbiAgICAgICAgbGV0IGluZm8gPSBuZXcgTWVkaWFTZWdtZW50SW5mbygpO1xuXG4gICAgICAgIHdoaWxlIChzYW1wbGVzLmxlbmd0aCkge1xuICAgICAgICAgICAgbGV0IGF2Y1NhbXBsZSA9IHNhbXBsZXMuc2hpZnQoKTtcbiAgICAgICAgICAgIGxldCBrZXlmcmFtZSA9IGF2Y1NhbXBsZS5pc0tleWZyYW1lO1xuICAgICAgICAgICAgbGV0IG9yaWdpbmFsRHRzID0gYXZjU2FtcGxlLmR0cyAtIHRoaXMuX2R0c0Jhc2U7XG5cbiAgICAgICAgICAgIGlmIChkdHNDb3JyZWN0aW9uID09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLl92aWRlb05leHREdHMgPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl92aWRlb1NlZ21lbnRJbmZvTGlzdC5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGR0c0NvcnJlY3Rpb24gPSAwO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGxhc3RTYW1wbGUgPSB0aGlzLl92aWRlb1NlZ21lbnRJbmZvTGlzdC5nZXRMYXN0U2FtcGxlQmVmb3JlKG9yaWdpbmFsRHRzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsYXN0U2FtcGxlICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgZGlzdGFuY2UgPSAob3JpZ2luYWxEdHMgLSAobGFzdFNhbXBsZS5vcmlnaW5hbER0cyArIGxhc3RTYW1wbGUuZHVyYXRpb24pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGlzdGFuY2UgPD0gMykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXN0YW5jZSA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBleHBlY3RlZER0cyA9IGxhc3RTYW1wbGUuZHRzICsgbGFzdFNhbXBsZS5kdXJhdGlvbiArIGRpc3RhbmNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGR0c0NvcnJlY3Rpb24gPSBvcmlnaW5hbER0cyAtIGV4cGVjdGVkRHRzO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsgLy8gbGFzdFNhbXBsZSA9PSBudWxsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZHRzQ29ycmVjdGlvbiA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBkdHNDb3JyZWN0aW9uID0gb3JpZ2luYWxEdHMgLSB0aGlzLl92aWRlb05leHREdHM7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBsZXQgZHRzID0gb3JpZ2luYWxEdHMgLSBkdHNDb3JyZWN0aW9uO1xuICAgICAgICAgICAgbGV0IGN0cyA9IGF2Y1NhbXBsZS5jdHM7XG4gICAgICAgICAgICBsZXQgcHRzID0gZHRzICsgY3RzO1xuXG4gICAgICAgICAgICBpZiAoZmlyc3REdHMgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgZmlyc3REdHMgPSBkdHM7XG4gICAgICAgICAgICAgICAgZmlyc3RQdHMgPSBwdHM7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIGZpbGwgbWRhdCBib3hcbiAgICAgICAgICAgIGxldCBzYW1wbGVTaXplID0gMDtcbiAgICAgICAgICAgIHdoaWxlIChhdmNTYW1wbGUudW5pdHMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgbGV0IHVuaXQgPSBhdmNTYW1wbGUudW5pdHMuc2hpZnQoKTtcbiAgICAgICAgICAgICAgICBsZXQgZGF0YSA9IHVuaXQuZGF0YTtcbiAgICAgICAgICAgICAgICBtZGF0Ym94LnNldChkYXRhLCBvZmZzZXQpO1xuICAgICAgICAgICAgICAgIG9mZnNldCArPSBkYXRhLmJ5dGVMZW5ndGg7XG4gICAgICAgICAgICAgICAgc2FtcGxlU2l6ZSArPSBkYXRhLmJ5dGVMZW5ndGg7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGxldCBzYW1wbGVEdXJhdGlvbiA9IDA7XG5cbiAgICAgICAgICAgIGlmIChzYW1wbGVzLmxlbmd0aCA+PSAxKSB7XG4gICAgICAgICAgICAgICAgbGV0IG5leHREdHMgPSBzYW1wbGVzWzBdLmR0cyAtIHRoaXMuX2R0c0Jhc2UgLSBkdHNDb3JyZWN0aW9uO1xuICAgICAgICAgICAgICAgIHNhbXBsZUR1cmF0aW9uID0gbmV4dER0cyAtIGR0cztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKG1wNFNhbXBsZXMubGVuZ3RoID49IDEpIHsgLy8gbGFzdGVzdCBzYW1wbGUsIHVzZSBzZWNvbmQgbGFzdCBkdXJhdGlvblxuICAgICAgICAgICAgICAgICAgICBzYW1wbGVEdXJhdGlvbiA9IG1wNFNhbXBsZXNbbXA0U2FtcGxlcy5sZW5ndGggLSAxXS5kdXJhdGlvbjtcbiAgICAgICAgICAgICAgICB9IGVsc2UgeyAvLyB0aGUgb25seSBvbmUgc2FtcGxlLCB1c2UgcmVmZXJlbmNlIGR1cmF0aW9uXG4gICAgICAgICAgICAgICAgICAgIHNhbXBsZUR1cmF0aW9uID0gdGhpcy5fdmlkZW9NZXRhLnJlZlNhbXBsZUR1cmF0aW9uO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGtleWZyYW1lKSB7XG4gICAgICAgICAgICAgICAgbGV0IHN5bmNQb2ludCA9IG5ldyBTYW1wbGVJbmZvKGR0cywgcHRzLCBzYW1wbGVEdXJhdGlvbiwgYXZjU2FtcGxlLmR0cywgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgc3luY1BvaW50LmZpbGVwb3NpdGlvbiA9IGF2Y1NhbXBsZS5maWxlcG9zaXRpb247XG4gICAgICAgICAgICAgICAgaW5mby5hcHBlbmRTeW5jUG9pbnQoc3luY1BvaW50KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbGV0IG1wNFNhbXBsZSA9IHtcbiAgICAgICAgICAgICAgICBkdHM6IGR0cyxcbiAgICAgICAgICAgICAgICBwdHM6IHB0cyxcbiAgICAgICAgICAgICAgICBjdHM6IGN0cyxcbiAgICAgICAgICAgICAgICBzaXplOiBzYW1wbGVTaXplLFxuICAgICAgICAgICAgICAgIGlzS2V5ZnJhbWU6IGtleWZyYW1lLFxuICAgICAgICAgICAgICAgIGR1cmF0aW9uOiBzYW1wbGVEdXJhdGlvbixcbiAgICAgICAgICAgICAgICBvcmlnaW5hbER0czogb3JpZ2luYWxEdHMsXG4gICAgICAgICAgICAgICAgZmxhZ3M6IHtcbiAgICAgICAgICAgICAgICAgICAgaXNMZWFkaW5nOiAwLFxuICAgICAgICAgICAgICAgICAgICBkZXBlbmRzT246IGtleWZyYW1lID8gMiA6IDEsXG4gICAgICAgICAgICAgICAgICAgIGlzRGVwZW5kZWRPbjoga2V5ZnJhbWUgPyAxIDogMCxcbiAgICAgICAgICAgICAgICAgICAgaGFzUmVkdW5kYW5jeTogMCxcbiAgICAgICAgICAgICAgICAgICAgaXNOb25TeW5jOiBrZXlmcmFtZSA/IDAgOiAxXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgbXA0U2FtcGxlcy5wdXNoKG1wNFNhbXBsZSk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGxhdGVzdCA9IG1wNFNhbXBsZXNbbXA0U2FtcGxlcy5sZW5ndGggLSAxXTtcbiAgICAgICAgbGFzdER0cyA9IGxhdGVzdC5kdHMgKyBsYXRlc3QuZHVyYXRpb247XG4gICAgICAgIGxhc3RQdHMgPSBsYXRlc3QucHRzICsgbGF0ZXN0LmR1cmF0aW9uO1xuICAgICAgICB0aGlzLl92aWRlb05leHREdHMgPSBsYXN0RHRzO1xuXG4gICAgICAgIC8vIGZpbGwgbWVkaWEgc2VnbWVudCBpbmZvICYgYWRkIHRvIGluZm8gbGlzdFxuICAgICAgICBpbmZvLmJlZ2luRHRzID0gZmlyc3REdHM7XG4gICAgICAgIGluZm8uZW5kRHRzID0gbGFzdER0cztcbiAgICAgICAgaW5mby5iZWdpblB0cyA9IGZpcnN0UHRzO1xuICAgICAgICBpbmZvLmVuZFB0cyA9IGxhc3RQdHM7XG4gICAgICAgIGluZm8ub3JpZ2luYWxCZWdpbkR0cyA9IG1wNFNhbXBsZXNbMF0ub3JpZ2luYWxEdHM7XG4gICAgICAgIGluZm8ub3JpZ2luYWxFbmREdHMgPSBsYXRlc3Qub3JpZ2luYWxEdHMgKyBsYXRlc3QuZHVyYXRpb247XG4gICAgICAgIGluZm8uZmlyc3RTYW1wbGUgPSBuZXcgU2FtcGxlSW5mbyhtcDRTYW1wbGVzWzBdLmR0cyxcbiAgICAgICAgICAgIG1wNFNhbXBsZXNbMF0ucHRzLFxuICAgICAgICAgICAgbXA0U2FtcGxlc1swXS5kdXJhdGlvbixcbiAgICAgICAgICAgIG1wNFNhbXBsZXNbMF0ub3JpZ2luYWxEdHMsXG4gICAgICAgICAgICBtcDRTYW1wbGVzWzBdLmlzS2V5ZnJhbWUpO1xuICAgICAgICBpbmZvLmxhc3RTYW1wbGUgPSBuZXcgU2FtcGxlSW5mbyhsYXRlc3QuZHRzLFxuICAgICAgICAgICAgbGF0ZXN0LnB0cyxcbiAgICAgICAgICAgIGxhdGVzdC5kdXJhdGlvbixcbiAgICAgICAgICAgIGxhdGVzdC5vcmlnaW5hbER0cyxcbiAgICAgICAgICAgIGxhdGVzdC5pc0tleWZyYW1lKTtcbiAgICAgICAgaWYgKCF0aGlzLl9pc0xpdmUpIHtcbiAgICAgICAgICAgIHRoaXMuX3ZpZGVvU2VnbWVudEluZm9MaXN0LmFwcGVuZChpbmZvKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRyYWNrLnNhbXBsZXMgPSBtcDRTYW1wbGVzO1xuICAgICAgICB0cmFjay5zZXF1ZW5jZU51bWJlciArPSB0cmFjay5hZGRjb2VmZmljaWVudDtcblxuICAgICAgICAvLyB3b3JrYXJvdW5kIGZvciBjaHJvbWUgPCA1MDogZm9yY2UgZmlyc3Qgc2FtcGxlIGFzIGEgcmFuZG9tIGFjY2VzcyBwb2ludFxuICAgICAgICAvLyBzZWUgaHR0cHM6Ly9idWdzLmNocm9taXVtLm9yZy9wL2Nocm9taXVtL2lzc3Vlcy9kZXRhaWw/aWQ9MjI5NDEyXG4gICAgICAgIGlmICh0aGlzLl9mb3JjZUZpcnN0SURSKSB7XG4gICAgICAgICAgICBsZXQgZmxhZ3MgPSBtcDRTYW1wbGVzWzBdLmZsYWdzO1xuICAgICAgICAgICAgZmxhZ3MuZGVwZW5kc09uID0gMjtcbiAgICAgICAgICAgIGZsYWdzLmlzTm9uU3luYyA9IDA7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgbW9vZmJveCA9IE1QNC5tb29mKHRyYWNrLCBmaXJzdER0cyk7XG4gICAgICAgIHRyYWNrLnNhbXBsZXMgPSBbXTtcbiAgICAgICAgdHJhY2subGVuZ3RoID0gMDtcblxuICAgICAgICB0aGlzLl9vbk1lZGlhU2VnbWVudCgndmlkZW8nLCB7XG4gICAgICAgICAgICB0eXBlOiAndmlkZW8nLFxuICAgICAgICAgICAgZGF0YTogdGhpcy5fbWVyZ2VCb3hlcyhtb29mYm94LCBtZGF0Ym94KS5idWZmZXIsXG4gICAgICAgICAgICBzYW1wbGVDb3VudDogbXA0U2FtcGxlcy5sZW5ndGgsXG4gICAgICAgICAgICBpbmZvOiBpbmZvXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIF9tZXJnZUJveGVzKG1vb2YsIG1kYXQpIHtcbiAgICAgICAgbGV0IHJlc3VsdCA9IG5ldyBVaW50OEFycmF5KG1vb2YuYnl0ZUxlbmd0aCArIG1kYXQuYnl0ZUxlbmd0aCk7XG4gICAgICAgIHJlc3VsdC5zZXQobW9vZiwgMCk7XG4gICAgICAgIHJlc3VsdC5zZXQobWRhdCwgbW9vZi5ieXRlTGVuZ3RoKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbn1cblxuZXhwb3J0IGRlZmF1bHQgTVA0UmVtdXhlcjtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9qcy9tcDQvbXA0bW9vZi5qcyJdLCJzb3VyY2VSb290IjoiIn0=");

/***/ }),
/* 5 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar _flvParse = __webpack_require__(2);\n\nvar _flvParse2 = _interopRequireDefault(_flvParse);\n\nvar _tagdemux = __webpack_require__(0);\n\nvar _tagdemux2 = _interopRequireDefault(_tagdemux);\n\nvar _mp4remux = __webpack_require__(1);\n\nvar _mp4remux2 = _interopRequireDefault(_mp4remux);\n\nvar _mp4moof = __webpack_require__(4);\n\nvar _mp4moof2 = _interopRequireDefault(_mp4moof);\n\nvar _flv2fmp = __webpack_require__(11);\n\nvar _flv2fmp2 = _interopRequireDefault(_flv2fmp);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar temp = new _flv2fmp2.default();\n\nwindow.flvParse = {\n    mp4File: null,\n    succ: null,\n    // ftyp_moov:null,\n    tracks: [],\n    baseTime: 0,\n    setFlv: function setFlv(uint8, baseTime) {\n        if (flvParse.baseTime != baseTime) {\n            flvParse.baseTime = baseTime;\n            temp.seek();\n        }\n        if (window.mp4Init) {\n            temp.onInitSegment = window.mp4Init;\n        }\n        if (window.onMediaSegment) {\n            temp.onMediaSegment = window.onMediaSegment;\n        }\n        if (window.seekCallBack) {\n            temp.seekCallBack = window.seekCallBack;\n        }\n        if (window.onMediaInfo) {\n            temp.onMediaInfo = window.onMediaInfo;\n        }\n        return temp.setflv(uint8.buffer, baseTime);\n\n        //用来获取moov\n    },\n    setLocFlv: function setLocFlv(uin8) {\n        return temp.setflvloc(uin8);\n    }\n};//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9qcy9mbHZFbnRlci5qcz9iZGJiIl0sIm5hbWVzIjpbInRlbXAiLCJ3aW5kb3ciLCJmbHZQYXJzZSIsIm1wNEZpbGUiLCJzdWNjIiwidHJhY2tzIiwiYmFzZVRpbWUiLCJzZXRGbHYiLCJ1aW50OCIsInNlZWsiLCJtcDRJbml0Iiwib25Jbml0U2VnbWVudCIsIm9uTWVkaWFTZWdtZW50Iiwic2Vla0NhbGxCYWNrIiwib25NZWRpYUluZm8iLCJzZXRmbHYiLCJidWZmZXIiLCJzZXRMb2NGbHYiLCJ1aW44Iiwic2V0Zmx2bG9jIl0sIm1hcHBpbmdzIjoiOztBQUFBOzs7O0FBQ0E7Ozs7QUFDQTs7OztBQUNBOzs7O0FBQ0E7Ozs7OztBQUVBLElBQUlBLE9BQU8sdUJBQVg7O0FBRUFDLE9BQU9DLFFBQVAsR0FBa0I7QUFDZEMsYUFBUyxJQURLO0FBRWRDLFVBQU0sSUFGUTtBQUdkO0FBQ0FDLFlBQVEsRUFKTTtBQUtkQyxjQUFVLENBTEk7QUFNZEMsWUFBUSxnQkFBU0MsS0FBVCxFQUFnQkYsUUFBaEIsRUFBMEI7QUFDOUIsWUFBSUosU0FBU0ksUUFBVCxJQUFxQkEsUUFBekIsRUFBbUM7QUFDL0JKLHFCQUFTSSxRQUFULEdBQW9CQSxRQUFwQjtBQUNBTixpQkFBS1MsSUFBTDtBQUNIO0FBQ0QsWUFBSVIsT0FBT1MsT0FBWCxFQUFvQjtBQUNoQlYsaUJBQUtXLGFBQUwsR0FBcUJWLE9BQU9TLE9BQTVCO0FBQ0g7QUFDRCxZQUFJVCxPQUFPVyxjQUFYLEVBQTJCO0FBQ3ZCWixpQkFBS1ksY0FBTCxHQUFzQlgsT0FBT1csY0FBN0I7QUFDSDtBQUNELFlBQUlYLE9BQU9ZLFlBQVgsRUFBeUI7QUFDckJiLGlCQUFLYSxZQUFMLEdBQW9CWixPQUFPWSxZQUEzQjtBQUNIO0FBQ0QsWUFBSVosT0FBT2EsV0FBWCxFQUF3QjtBQUNwQmQsaUJBQUtjLFdBQUwsR0FBbUJiLE9BQU9hLFdBQTFCO0FBQ0g7QUFDRCxlQUFPZCxLQUFLZSxNQUFMLENBQVlQLE1BQU1RLE1BQWxCLEVBQTBCVixRQUExQixDQUFQOztBQUdBO0FBRUgsS0E1QmE7QUE2QmRXLGVBQVcsbUJBQVNDLElBQVQsRUFBZTtBQUN0QixlQUFPbEIsS0FBS21CLFNBQUwsQ0FBZUQsSUFBZixDQUFQO0FBQ0g7QUEvQmEsQ0FBbEIiLCJmaWxlIjoiNS5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBmbHZwYXJzZSBmcm9tICcuL2Zsdi9mbHZQYXJzZSdcbmltcG9ydCB0YWdkZW11eCBmcm9tICcuL2Zsdi90YWdkZW11eCdcbmltcG9ydCBtcDRyZW11eCBmcm9tICcuL21wNC9tcDRyZW11eCdcbmltcG9ydCBtcDRtb29mIGZyb20gJy4vbXA0L21wNG1vb2YnXG5pbXBvcnQgZjJtIGZyb20gJy4vZmx2MmZtcDQnO1xuXG5sZXQgdGVtcCA9IG5ldyBmMm0oKTtcblxud2luZG93LmZsdlBhcnNlID0ge1xuICAgIG1wNEZpbGU6IG51bGwsXG4gICAgc3VjYzogbnVsbCxcbiAgICAvLyBmdHlwX21vb3Y6bnVsbCxcbiAgICB0cmFja3M6IFtdLFxuICAgIGJhc2VUaW1lOiAwLFxuICAgIHNldEZsdjogZnVuY3Rpb24odWludDgsIGJhc2VUaW1lKSB7XG4gICAgICAgIGlmIChmbHZQYXJzZS5iYXNlVGltZSAhPSBiYXNlVGltZSkge1xuICAgICAgICAgICAgZmx2UGFyc2UuYmFzZVRpbWUgPSBiYXNlVGltZTtcbiAgICAgICAgICAgIHRlbXAuc2VlaygpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh3aW5kb3cubXA0SW5pdCkge1xuICAgICAgICAgICAgdGVtcC5vbkluaXRTZWdtZW50ID0gd2luZG93Lm1wNEluaXRcbiAgICAgICAgfVxuICAgICAgICBpZiAod2luZG93Lm9uTWVkaWFTZWdtZW50KSB7XG4gICAgICAgICAgICB0ZW1wLm9uTWVkaWFTZWdtZW50ID0gd2luZG93Lm9uTWVkaWFTZWdtZW50XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHdpbmRvdy5zZWVrQ2FsbEJhY2spIHtcbiAgICAgICAgICAgIHRlbXAuc2Vla0NhbGxCYWNrID0gd2luZG93LnNlZWtDYWxsQmFja1xuICAgICAgICB9XG4gICAgICAgIGlmICh3aW5kb3cub25NZWRpYUluZm8pIHtcbiAgICAgICAgICAgIHRlbXAub25NZWRpYUluZm8gPSB3aW5kb3cub25NZWRpYUluZm9cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGVtcC5zZXRmbHYodWludDguYnVmZmVyLCBiYXNlVGltZSk7XG5cblxuICAgICAgICAvL+eUqOadpeiOt+WPlm1vb3ZcblxuICAgIH0sXG4gICAgc2V0TG9jRmx2OiBmdW5jdGlvbih1aW44KSB7XG4gICAgICAgIHJldHVybiB0ZW1wLnNldGZsdmxvYyh1aW44KTtcbiAgICB9XG59XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vanMvZmx2RW50ZXIuanMiXSwic291cmNlUm9vdCI6IiJ9");

/***/ }),
/* 6 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nfunction decodeUTF8(uint8array) {\n    var out = [];\n    var input = uint8array;\n    var i = 0;\n    var length = uint8array.length;\n\n    while (i < length) {\n        if (input[i] < 0x80) {\n            out.push(String.fromCharCode(input[i]));\n            ++i;\n            continue;\n        } else if (input[i] < 0xC0) {\n            // fallthrough\n        } else if (input[i] < 0xE0) {\n            if (checkContinuation(input, i, 1)) {\n                var ucs4 = (input[i] & 0x1F) << 6 | input[i + 1] & 0x3F;\n                if (ucs4 >= 0x80) {\n                    out.push(String.fromCharCode(ucs4 & 0xFFFF));\n                    i += 2;\n                    continue;\n                }\n            }\n        } else if (input[i] < 0xF0) {\n            if (checkContinuation(input, i, 2)) {\n                var _ucs = (input[i] & 0xF) << 12 | (input[i + 1] & 0x3F) << 6 | input[i + 2] & 0x3F;\n                if (_ucs >= 0x800 && (_ucs & 0xF800) !== 0xD800) {\n                    out.push(String.fromCharCode(_ucs & 0xFFFF));\n                    i += 3;\n                    continue;\n                }\n            }\n        } else if (input[i] < 0xF8) {\n            if (checkContinuation(input, i, 3)) {\n                var _ucs2 = (input[i] & 0x7) << 18 | (input[i + 1] & 0x3F) << 12 | (input[i + 2] & 0x3F) << 6 | input[i + 3] & 0x3F;\n                if (_ucs2 > 0x10000 && _ucs2 < 0x110000) {\n                    _ucs2 -= 0x10000;\n                    out.push(String.fromCharCode(_ucs2 >>> 10 | 0xD800));\n                    out.push(String.fromCharCode(_ucs2 & 0x3FF | 0xDC00));\n                    i += 4;\n                    continue;\n                }\n            }\n        }\n        out.push(String.fromCharCode(0xFFFD));\n        ++i;\n    }\n\n    return out.join('');\n}\n\nexports.default = decodeUTF8;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9qcy9kZWNvZGVVVEY4LmpzPzQ3ZWQiXSwibmFtZXMiOlsiZGVjb2RlVVRGOCIsInVpbnQ4YXJyYXkiLCJvdXQiLCJpbnB1dCIsImkiLCJsZW5ndGgiLCJwdXNoIiwiU3RyaW5nIiwiZnJvbUNoYXJDb2RlIiwiY2hlY2tDb250aW51YXRpb24iLCJ1Y3M0Iiwiam9pbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSxTQUFTQSxVQUFULENBQW9CQyxVQUFwQixFQUFnQztBQUM1QixRQUFJQyxNQUFNLEVBQVY7QUFDQSxRQUFJQyxRQUFRRixVQUFaO0FBQ0EsUUFBSUcsSUFBSSxDQUFSO0FBQ0EsUUFBSUMsU0FBU0osV0FBV0ksTUFBeEI7O0FBRUEsV0FBT0QsSUFBSUMsTUFBWCxFQUFtQjtBQUNmLFlBQUlGLE1BQU1DLENBQU4sSUFBVyxJQUFmLEVBQXFCO0FBQ2pCRixnQkFBSUksSUFBSixDQUFTQyxPQUFPQyxZQUFQLENBQW9CTCxNQUFNQyxDQUFOLENBQXBCLENBQVQ7QUFDQSxjQUFFQSxDQUFGO0FBQ0E7QUFDSCxTQUpELE1BSU8sSUFBSUQsTUFBTUMsQ0FBTixJQUFXLElBQWYsRUFBcUI7QUFDeEI7QUFDSCxTQUZNLE1BRUEsSUFBSUQsTUFBTUMsQ0FBTixJQUFXLElBQWYsRUFBcUI7QUFDeEIsZ0JBQUlLLGtCQUFrQk4sS0FBbEIsRUFBeUJDLENBQXpCLEVBQTRCLENBQTVCLENBQUosRUFBb0M7QUFDaEMsb0JBQUlNLE9BQU8sQ0FBQ1AsTUFBTUMsQ0FBTixJQUFXLElBQVosS0FBcUIsQ0FBckIsR0FBMEJELE1BQU1DLElBQUksQ0FBVixJQUFlLElBQXBEO0FBQ0Esb0JBQUlNLFFBQVEsSUFBWixFQUFrQjtBQUNkUix3QkFBSUksSUFBSixDQUFTQyxPQUFPQyxZQUFQLENBQW9CRSxPQUFPLE1BQTNCLENBQVQ7QUFDQU4seUJBQUssQ0FBTDtBQUNBO0FBQ0g7QUFDSjtBQUNKLFNBVE0sTUFTQSxJQUFJRCxNQUFNQyxDQUFOLElBQVcsSUFBZixFQUFxQjtBQUN4QixnQkFBSUssa0JBQWtCTixLQUFsQixFQUF5QkMsQ0FBekIsRUFBNEIsQ0FBNUIsQ0FBSixFQUFvQztBQUNoQyxvQkFBSU0sT0FBTyxDQUFDUCxNQUFNQyxDQUFOLElBQVcsR0FBWixLQUFvQixFQUFwQixHQUF5QixDQUFDRCxNQUFNQyxJQUFJLENBQVYsSUFBZSxJQUFoQixLQUF5QixDQUFsRCxHQUFzREQsTUFBTUMsSUFBSSxDQUFWLElBQWUsSUFBaEY7QUFDQSxvQkFBSU0sUUFBUSxLQUFSLElBQWlCLENBQUNBLE9BQU8sTUFBUixNQUFvQixNQUF6QyxFQUFpRDtBQUM3Q1Isd0JBQUlJLElBQUosQ0FBU0MsT0FBT0MsWUFBUCxDQUFvQkUsT0FBTyxNQUEzQixDQUFUO0FBQ0FOLHlCQUFLLENBQUw7QUFDQTtBQUNIO0FBQ0o7QUFDSixTQVRNLE1BU0EsSUFBSUQsTUFBTUMsQ0FBTixJQUFXLElBQWYsRUFBcUI7QUFDeEIsZ0JBQUlLLGtCQUFrQk4sS0FBbEIsRUFBeUJDLENBQXpCLEVBQTRCLENBQTVCLENBQUosRUFBb0M7QUFDaEMsb0JBQUlNLFFBQU8sQ0FBQ1AsTUFBTUMsQ0FBTixJQUFXLEdBQVosS0FBb0IsRUFBcEIsR0FBeUIsQ0FBQ0QsTUFBTUMsSUFBSSxDQUFWLElBQWUsSUFBaEIsS0FBeUIsRUFBbEQsR0FDUCxDQUFDRCxNQUFNQyxJQUFJLENBQVYsSUFBZSxJQUFoQixLQUF5QixDQURsQixHQUN1QkQsTUFBTUMsSUFBSSxDQUFWLElBQWUsSUFEakQ7QUFFQSxvQkFBSU0sUUFBTyxPQUFQLElBQWtCQSxRQUFPLFFBQTdCLEVBQXVDO0FBQ25DQSw2QkFBUSxPQUFSO0FBQ0FSLHdCQUFJSSxJQUFKLENBQVNDLE9BQU9DLFlBQVAsQ0FBcUJFLFVBQVMsRUFBVixHQUFnQixNQUFwQyxDQUFUO0FBQ0FSLHdCQUFJSSxJQUFKLENBQVNDLE9BQU9DLFlBQVAsQ0FBcUJFLFFBQU8sS0FBUixHQUFpQixNQUFyQyxDQUFUO0FBQ0FOLHlCQUFLLENBQUw7QUFDQTtBQUNIO0FBQ0o7QUFDSjtBQUNERixZQUFJSSxJQUFKLENBQVNDLE9BQU9DLFlBQVAsQ0FBb0IsTUFBcEIsQ0FBVDtBQUNBLFVBQUVKLENBQUY7QUFDSDs7QUFFRCxXQUFPRixJQUFJUyxJQUFKLENBQVMsRUFBVCxDQUFQO0FBQ0g7O2tCQUVjWCxVIiwiZmlsZSI6IjYuanMiLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBkZWNvZGVVVEY4KHVpbnQ4YXJyYXkpIHtcbiAgICBsZXQgb3V0ID0gW107XG4gICAgbGV0IGlucHV0ID0gdWludDhhcnJheTtcbiAgICBsZXQgaSA9IDA7XG4gICAgbGV0IGxlbmd0aCA9IHVpbnQ4YXJyYXkubGVuZ3RoO1xuXG4gICAgd2hpbGUgKGkgPCBsZW5ndGgpIHtcbiAgICAgICAgaWYgKGlucHV0W2ldIDwgMHg4MCkge1xuICAgICAgICAgICAgb3V0LnB1c2goU3RyaW5nLmZyb21DaGFyQ29kZShpbnB1dFtpXSkpO1xuICAgICAgICAgICAgKytpO1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH0gZWxzZSBpZiAoaW5wdXRbaV0gPCAweEMwKSB7XG4gICAgICAgICAgICAvLyBmYWxsdGhyb3VnaFxuICAgICAgICB9IGVsc2UgaWYgKGlucHV0W2ldIDwgMHhFMCkge1xuICAgICAgICAgICAgaWYgKGNoZWNrQ29udGludWF0aW9uKGlucHV0LCBpLCAxKSkge1xuICAgICAgICAgICAgICAgIGxldCB1Y3M0ID0gKGlucHV0W2ldICYgMHgxRikgPDwgNiB8IChpbnB1dFtpICsgMV0gJiAweDNGKTtcbiAgICAgICAgICAgICAgICBpZiAodWNzNCA+PSAweDgwKSB7XG4gICAgICAgICAgICAgICAgICAgIG91dC5wdXNoKFN0cmluZy5mcm9tQ2hhckNvZGUodWNzNCAmIDB4RkZGRikpO1xuICAgICAgICAgICAgICAgICAgICBpICs9IDI7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChpbnB1dFtpXSA8IDB4RjApIHtcbiAgICAgICAgICAgIGlmIChjaGVja0NvbnRpbnVhdGlvbihpbnB1dCwgaSwgMikpIHtcbiAgICAgICAgICAgICAgICBsZXQgdWNzNCA9IChpbnB1dFtpXSAmIDB4RikgPDwgMTIgfCAoaW5wdXRbaSArIDFdICYgMHgzRikgPDwgNiB8IGlucHV0W2kgKyAyXSAmIDB4M0Y7XG4gICAgICAgICAgICAgICAgaWYgKHVjczQgPj0gMHg4MDAgJiYgKHVjczQgJiAweEY4MDApICE9PSAweEQ4MDApIHtcbiAgICAgICAgICAgICAgICAgICAgb3V0LnB1c2goU3RyaW5nLmZyb21DaGFyQ29kZSh1Y3M0ICYgMHhGRkZGKSk7XG4gICAgICAgICAgICAgICAgICAgIGkgKz0gMztcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKGlucHV0W2ldIDwgMHhGOCkge1xuICAgICAgICAgICAgaWYgKGNoZWNrQ29udGludWF0aW9uKGlucHV0LCBpLCAzKSkge1xuICAgICAgICAgICAgICAgIGxldCB1Y3M0ID0gKGlucHV0W2ldICYgMHg3KSA8PCAxOCB8IChpbnB1dFtpICsgMV0gJiAweDNGKSA8PCAxMiB8XG4gICAgICAgICAgICAgICAgICAgIChpbnB1dFtpICsgMl0gJiAweDNGKSA8PCA2IHwgKGlucHV0W2kgKyAzXSAmIDB4M0YpO1xuICAgICAgICAgICAgICAgIGlmICh1Y3M0ID4gMHgxMDAwMCAmJiB1Y3M0IDwgMHgxMTAwMDApIHtcbiAgICAgICAgICAgICAgICAgICAgdWNzNCAtPSAweDEwMDAwO1xuICAgICAgICAgICAgICAgICAgICBvdXQucHVzaChTdHJpbmcuZnJvbUNoYXJDb2RlKCh1Y3M0ID4+PiAxMCkgfCAweEQ4MDApKTtcbiAgICAgICAgICAgICAgICAgICAgb3V0LnB1c2goU3RyaW5nLmZyb21DaGFyQ29kZSgodWNzNCAmIDB4M0ZGKSB8IDB4REMwMCkpO1xuICAgICAgICAgICAgICAgICAgICBpICs9IDQ7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBvdXQucHVzaChTdHJpbmcuZnJvbUNoYXJDb2RlKDB4RkZGRCkpO1xuICAgICAgICArK2k7XG4gICAgfVxuXG4gICAgcmV0dXJuIG91dC5qb2luKCcnKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZGVjb2RlVVRGODtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9qcy9kZWNvZGVVVEY4LmpzIl0sInNvdXJjZVJvb3QiOiIifQ==");

/***/ }),
/* 7 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/*\n * Copyright (C) 2016 Bilibili. All Rights Reserved.\n *\n * @author zheng qian <xqq@xqq.im>\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n// Exponential-Golomb buffer decoder\nvar ExpGolomb = function () {\n    function ExpGolomb(uint8array) {\n        _classCallCheck(this, ExpGolomb);\n\n        this.TAG = this.constructor.name;\n\n        this._buffer = uint8array;\n        this._buffer_index = 0;\n        this._total_bytes = uint8array.byteLength;\n        this._total_bits = uint8array.byteLength * 8;\n        this._current_word = 0;\n        this._current_word_bits_left = 0;\n    }\n\n    _createClass(ExpGolomb, [{\n        key: 'destroy',\n        value: function destroy() {\n            this._buffer = null;\n        }\n    }, {\n        key: '_fillCurrentWord',\n        value: function _fillCurrentWord() {\n            var buffer_bytes_left = this._total_bytes - this._buffer_index;\n            if (buffer_bytes_left <= 0) throw new IllegalStateException('ExpGolomb: _fillCurrentWord() but no bytes available');\n\n            var bytes_read = Math.min(4, buffer_bytes_left);\n            var word = new Uint8Array(4);\n            word.set(this._buffer.subarray(this._buffer_index, this._buffer_index + bytes_read));\n            this._current_word = new DataView(word.buffer).getUint32(0, false);\n\n            this._buffer_index += bytes_read;\n            this._current_word_bits_left = bytes_read * 8;\n        }\n    }, {\n        key: 'readBits',\n        value: function readBits(bits) {\n            if (bits > 32) throw new InvalidArgumentException('ExpGolomb: readBits() bits exceeded max 32bits!');\n\n            if (bits <= this._current_word_bits_left) {\n                var _result = this._current_word >>> 32 - bits;\n                this._current_word <<= bits;\n                this._current_word_bits_left -= bits;\n                return _result;\n            }\n\n            var result = this._current_word_bits_left ? this._current_word : 0;\n            result = result >>> 32 - this._current_word_bits_left;\n            var bits_need_left = bits - this._current_word_bits_left;\n\n            this._fillCurrentWord();\n            var bits_read_next = Math.min(bits_need_left, this._current_word_bits_left);\n\n            var result2 = this._current_word >>> 32 - bits_read_next;\n            this._current_word <<= bits_read_next;\n            this._current_word_bits_left -= bits_read_next;\n\n            result = result << bits_read_next | result2;\n            return result;\n        }\n    }, {\n        key: 'readBool',\n        value: function readBool() {\n            return this.readBits(1) === 1;\n        }\n    }, {\n        key: 'readByte',\n        value: function readByte() {\n            return this.readBits(8);\n        }\n    }, {\n        key: '_skipLeadingZero',\n        value: function _skipLeadingZero() {\n            var zero_count = void 0;\n            for (zero_count = 0; zero_count < this._current_word_bits_left; zero_count++) {\n                if (0 !== (this._current_word & 0x80000000 >>> zero_count)) {\n                    this._current_word <<= zero_count;\n                    this._current_word_bits_left -= zero_count;\n                    return zero_count;\n                }\n            }\n            this._fillCurrentWord();\n            return zero_count + this._skipLeadingZero();\n        }\n    }, {\n        key: 'readUEG',\n        value: function readUEG() {\n            // unsigned exponential golomb\n            var leading_zeros = this._skipLeadingZero();\n            return this.readBits(leading_zeros + 1) - 1;\n        }\n    }, {\n        key: 'readSEG',\n        value: function readSEG() {\n            // signed exponential golomb\n            var value = this.readUEG();\n            if (value & 0x01) {\n                return value + 1 >>> 1;\n            } else {\n                return -1 * (value >>> 1);\n            }\n        }\n    }]);\n\n    return ExpGolomb;\n}();\n\nexports.default = ExpGolomb;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9qcy9mbHYvZXhwLWdvbG9tYi5qcz8zY2M5Il0sIm5hbWVzIjpbIkV4cEdvbG9tYiIsInVpbnQ4YXJyYXkiLCJUQUciLCJjb25zdHJ1Y3RvciIsIm5hbWUiLCJfYnVmZmVyIiwiX2J1ZmZlcl9pbmRleCIsIl90b3RhbF9ieXRlcyIsImJ5dGVMZW5ndGgiLCJfdG90YWxfYml0cyIsIl9jdXJyZW50X3dvcmQiLCJfY3VycmVudF93b3JkX2JpdHNfbGVmdCIsImJ1ZmZlcl9ieXRlc19sZWZ0IiwiSWxsZWdhbFN0YXRlRXhjZXB0aW9uIiwiYnl0ZXNfcmVhZCIsIk1hdGgiLCJtaW4iLCJ3b3JkIiwiVWludDhBcnJheSIsInNldCIsInN1YmFycmF5IiwiRGF0YVZpZXciLCJidWZmZXIiLCJnZXRVaW50MzIiLCJiaXRzIiwiSW52YWxpZEFyZ3VtZW50RXhjZXB0aW9uIiwicmVzdWx0IiwiYml0c19uZWVkX2xlZnQiLCJfZmlsbEN1cnJlbnRXb3JkIiwiYml0c19yZWFkX25leHQiLCJyZXN1bHQyIiwicmVhZEJpdHMiLCJ6ZXJvX2NvdW50IiwiX3NraXBMZWFkaW5nWmVybyIsImxlYWRpbmdfemVyb3MiLCJ2YWx1ZSIsInJlYWRVRUciXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBb0JBO0lBQ01BLFM7QUFFRix1QkFBWUMsVUFBWixFQUF3QjtBQUFBOztBQUNwQixhQUFLQyxHQUFMLEdBQVcsS0FBS0MsV0FBTCxDQUFpQkMsSUFBNUI7O0FBRUEsYUFBS0MsT0FBTCxHQUFlSixVQUFmO0FBQ0EsYUFBS0ssYUFBTCxHQUFxQixDQUFyQjtBQUNBLGFBQUtDLFlBQUwsR0FBb0JOLFdBQVdPLFVBQS9CO0FBQ0EsYUFBS0MsV0FBTCxHQUFtQlIsV0FBV08sVUFBWCxHQUF3QixDQUEzQztBQUNBLGFBQUtFLGFBQUwsR0FBcUIsQ0FBckI7QUFDQSxhQUFLQyx1QkFBTCxHQUErQixDQUEvQjtBQUNIOzs7O2tDQUVT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LGFBRkQsTUFFTztBQUNILHVCQUFPLENBQUMsQ0FBRCxJQUFNQSxVQUFVLENBQWhCLENBQVA7QUFDSDtBQUNKOzs7Ozs7a0JBSVVuQyxTIiwiZmlsZSI6IjcuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuICogQ29weXJpZ2h0IChDKSAyMDE2IEJpbGliaWxpLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIEBhdXRob3IgemhlbmcgcWlhbiA8eHFxQHhxcS5pbT5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuXG5cbi8vIEV4cG9uZW50aWFsLUdvbG9tYiBidWZmZXIgZGVjb2RlclxuY2xhc3MgRXhwR29sb21iIHtcblxuICAgIGNvbnN0cnVjdG9yKHVpbnQ4YXJyYXkpIHtcbiAgICAgICAgdGhpcy5UQUcgPSB0aGlzLmNvbnN0cnVjdG9yLm5hbWU7XG5cbiAgICAgICAgdGhpcy5fYnVmZmVyID0gdWludDhhcnJheTtcbiAgICAgICAgdGhpcy5fYnVmZmVyX2luZGV4ID0gMDtcbiAgICAgICAgdGhpcy5fdG90YWxfYnl0ZXMgPSB1aW50OGFycmF5LmJ5dGVMZW5ndGg7XG4gICAgICAgIHRoaXMuX3RvdGFsX2JpdHMgPSB1aW50OGFycmF5LmJ5dGVMZW5ndGggKiA4O1xuICAgICAgICB0aGlzLl9jdXJyZW50X3dvcmQgPSAwO1xuICAgICAgICB0aGlzLl9jdXJyZW50X3dvcmRfYml0c19sZWZ0ID0gMDtcbiAgICB9XG5cbiAgICBkZXN0cm95KCkge1xuICAgICAgICB0aGlzLl9idWZmZXIgPSBudWxsO1xuICAgIH1cblxuICAgIF9maWxsQ3VycmVudFdvcmQoKSB7XG4gICAgICAgIGxldCBidWZmZXJfYnl0ZXNfbGVmdCA9IHRoaXMuX3RvdGFsX2J5dGVzIC0gdGhpcy5fYnVmZmVyX2luZGV4O1xuICAgICAgICBpZiAoYnVmZmVyX2J5dGVzX2xlZnQgPD0gMClcbiAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsU3RhdGVFeGNlcHRpb24oJ0V4cEdvbG9tYjogX2ZpbGxDdXJyZW50V29yZCgpIGJ1dCBubyBieXRlcyBhdmFpbGFibGUnKTtcblxuICAgICAgICBsZXQgYnl0ZXNfcmVhZCA9IE1hdGgubWluKDQsIGJ1ZmZlcl9ieXRlc19sZWZ0KTtcbiAgICAgICAgbGV0IHdvcmQgPSBuZXcgVWludDhBcnJheSg0KTtcbiAgICAgICAgd29yZC5zZXQodGhpcy5fYnVmZmVyLnN1YmFycmF5KHRoaXMuX2J1ZmZlcl9pbmRleCwgdGhpcy5fYnVmZmVyX2luZGV4ICsgYnl0ZXNfcmVhZCkpO1xuICAgICAgICB0aGlzLl9jdXJyZW50X3dvcmQgPSBuZXcgRGF0YVZpZXcod29yZC5idWZmZXIpLmdldFVpbnQzMigwLCBmYWxzZSk7XG5cbiAgICAgICAgdGhpcy5fYnVmZmVyX2luZGV4ICs9IGJ5dGVzX3JlYWQ7XG4gICAgICAgIHRoaXMuX2N1cnJlbnRfd29yZF9iaXRzX2xlZnQgPSBieXRlc19yZWFkICogODtcbiAgICB9XG5cbiAgICByZWFkQml0cyhiaXRzKSB7XG4gICAgICAgIGlmIChiaXRzID4gMzIpXG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXhjZXB0aW9uKCdFeHBHb2xvbWI6IHJlYWRCaXRzKCkgYml0cyBleGNlZWRlZCBtYXggMzJiaXRzIScpO1xuXG4gICAgICAgIGlmIChiaXRzIDw9IHRoaXMuX2N1cnJlbnRfd29yZF9iaXRzX2xlZnQpIHtcbiAgICAgICAgICAgIGxldCByZXN1bHQgPSB0aGlzLl9jdXJyZW50X3dvcmQgPj4+ICgzMiAtIGJpdHMpO1xuICAgICAgICAgICAgdGhpcy5fY3VycmVudF93b3JkIDw8PSBiaXRzO1xuICAgICAgICAgICAgdGhpcy5fY3VycmVudF93b3JkX2JpdHNfbGVmdCAtPSBiaXRzO1xuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCByZXN1bHQgPSB0aGlzLl9jdXJyZW50X3dvcmRfYml0c19sZWZ0ID8gdGhpcy5fY3VycmVudF93b3JkIDogMDtcbiAgICAgICAgcmVzdWx0ID0gcmVzdWx0ID4+PiAoMzIgLSB0aGlzLl9jdXJyZW50X3dvcmRfYml0c19sZWZ0KTtcbiAgICAgICAgbGV0IGJpdHNfbmVlZF9sZWZ0ID0gYml0cyAtIHRoaXMuX2N1cnJlbnRfd29yZF9iaXRzX2xlZnQ7XG5cbiAgICAgICAgdGhpcy5fZmlsbEN1cnJlbnRXb3JkKCk7XG4gICAgICAgIGxldCBiaXRzX3JlYWRfbmV4dCA9IE1hdGgubWluKGJpdHNfbmVlZF9sZWZ0LCB0aGlzLl9jdXJyZW50X3dvcmRfYml0c19sZWZ0KTtcblxuICAgICAgICBsZXQgcmVzdWx0MiA9IHRoaXMuX2N1cnJlbnRfd29yZCA+Pj4gKDMyIC0gYml0c19yZWFkX25leHQpO1xuICAgICAgICB0aGlzLl9jdXJyZW50X3dvcmQgPDw9IGJpdHNfcmVhZF9uZXh0O1xuICAgICAgICB0aGlzLl9jdXJyZW50X3dvcmRfYml0c19sZWZ0IC09IGJpdHNfcmVhZF9uZXh0O1xuXG4gICAgICAgIHJlc3VsdCA9IChyZXN1bHQgPDwgYml0c19yZWFkX25leHQpIHwgcmVzdWx0MjtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICByZWFkQm9vbCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVhZEJpdHMoMSkgPT09IDE7XG4gICAgfVxuXG4gICAgcmVhZEJ5dGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlYWRCaXRzKDgpO1xuICAgIH1cblxuICAgIF9za2lwTGVhZGluZ1plcm8oKSB7XG4gICAgICAgIGxldCB6ZXJvX2NvdW50O1xuICAgICAgICBmb3IgKHplcm9fY291bnQgPSAwOyB6ZXJvX2NvdW50IDwgdGhpcy5fY3VycmVudF93b3JkX2JpdHNfbGVmdDsgemVyb19jb3VudCsrKSB7XG4gICAgICAgICAgICBpZiAoMCAhPT0gKHRoaXMuX2N1cnJlbnRfd29yZCAmICgweDgwMDAwMDAwID4+PiB6ZXJvX2NvdW50KSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9jdXJyZW50X3dvcmQgPDw9IHplcm9fY291bnQ7XG4gICAgICAgICAgICAgICAgdGhpcy5fY3VycmVudF93b3JkX2JpdHNfbGVmdCAtPSB6ZXJvX2NvdW50O1xuICAgICAgICAgICAgICAgIHJldHVybiB6ZXJvX2NvdW50O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2ZpbGxDdXJyZW50V29yZCgpO1xuICAgICAgICByZXR1cm4gemVyb19jb3VudCArIHRoaXMuX3NraXBMZWFkaW5nWmVybygpO1xuICAgIH1cblxuICAgIHJlYWRVRUcoKSB7IC8vIHVuc2lnbmVkIGV4cG9uZW50aWFsIGdvbG9tYlxuICAgICAgICBsZXQgbGVhZGluZ196ZXJvcyA9IHRoaXMuX3NraXBMZWFkaW5nWmVybygpO1xuICAgICAgICByZXR1cm4gdGhpcy5yZWFkQml0cyhsZWFkaW5nX3plcm9zICsgMSkgLSAxO1xuICAgIH1cblxuICAgIHJlYWRTRUcoKSB7IC8vIHNpZ25lZCBleHBvbmVudGlhbCBnb2xvbWJcbiAgICAgICAgbGV0IHZhbHVlID0gdGhpcy5yZWFkVUVHKCk7XG4gICAgICAgIGlmICh2YWx1ZSAmIDB4MDEpIHtcbiAgICAgICAgICAgIHJldHVybiAodmFsdWUgKyAxKSA+Pj4gMTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiAtMSAqICh2YWx1ZSA+Pj4gMSk7XG4gICAgICAgIH1cbiAgICB9XG5cbn1cblxuZXhwb3J0IGRlZmF1bHQgRXhwR29sb21iO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2pzL2Zsdi9leHAtZ29sb21iLmpzIl0sInNvdXJjZVJvb3QiOiIifQ==");

/***/ }),
/* 8 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar FlvTag = function () {\n    function FlvTag() {\n        _classCallCheck(this, FlvTag);\n\n        this.tagType = -1;\n        this.dataSize = -1;\n        this.Timestamp = -1;\n        this.StreamID = -1;\n        this.body = -1;\n        this.time = -1;\n        this.arr = [];\n    }\n\n    _createClass(FlvTag, [{\n        key: \"getTime\",\n        value: function getTime() {\n            // this.Timestamp.pop();\n            this.arr = [];\n            for (var i = 0; i < this.Timestamp.length; i++) {\n                this.arr.push(this.Timestamp[i].toString(16).length == 1 ? \"0\" + this.Timestamp[i].toString(16) : this.Timestamp[i].toString(16));\n            }\n            this.arr.pop();\n            var time = this.arr.join('');\n            this.time = parseInt(time, 16);\n            return parseInt(time, 16);\n        }\n    }]);\n\n    return FlvTag;\n}();\n\nexports.default = FlvTag;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9qcy9mbHYvZmx2VGFnLmpzPzg1OTgiXSwibmFtZXMiOlsiRmx2VGFnIiwidGFnVHlwZSIsImRhdGFTaXplIiwiVGltZXN0YW1wIiwiU3RyZWFtSUQiLCJib2R5IiwidGltZSIsImFyciIsImkiLCJsZW5ndGgiLCJwdXNoIiwidG9TdHJpbmciLCJwb3AiLCJqb2luIiwicGFyc2VJbnQiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7SUFBcUJBLE07QUFDakIsc0JBQWM7QUFBQTs7QUFDVixhQUFLQyxPQUFMLEdBQWUsQ0FBQyxDQUFoQjtBQUNBLGFBQUtDLFFBQUwsR0FBZ0IsQ0FBQyxDQUFqQjtBQUNBLGFBQUtDLFNBQUwsR0FBaUIsQ0FBQyxDQUFsQjtBQUNBLGFBQUtDLFFBQUwsR0FBZ0IsQ0FBQyxDQUFqQjtBQUNBLGFBQUtDLElBQUwsR0FBWSxDQUFDLENBQWI7QUFDQSxhQUFLQyxJQUFMLEdBQVksQ0FBQyxDQUFiO0FBQ0EsYUFBS0MsR0FBTCxHQUFXLEVBQVg7QUFDSDs7OztrQ0FDUztBQUNOO0FBQ0EsaUJBQUtBLEdBQUwsR0FBVyxFQUFYO0FBQ0EsaUJBQUssSUFBSUMsSUFBSSxDQUFiLEVBQWdCQSxJQUFJLEtBQUtMLFNBQUwsQ0FBZU0sTUFBbkMsRUFBMkNELEdBQTNDLEVBQWdEO0FBQzVDLHFCQUFLRCxHQUFMLENBQVNHLElBQVQsQ0FBZSxLQUFLUCxTQUFMLENBQWVLLENBQWYsRUFBa0JHLFFBQWxCLENBQTJCLEVBQTNCLEVBQStCRixNQUEvQixJQUF5QyxDQUF6QyxHQUE2QyxNQUFNLEtBQUtOLFNBQUwsQ0FBZUssQ0FBZixFQUFrQkcsUUFBbEIsQ0FBMkIsRUFBM0IsQ0FBbkQsR0FBb0YsS0FBS1IsU0FBTCxDQUFlSyxDQUFmLEVBQWtCRyxRQUFsQixDQUEyQixFQUEzQixDQUFuRztBQUNIO0FBQ0QsaUJBQUtKLEdBQUwsQ0FBU0ssR0FBVDtBQUNBLGdCQUFJTixPQUFPLEtBQUtDLEdBQUwsQ0FBU00sSUFBVCxDQUFjLEVBQWQsQ0FBWDtBQUNBLGlCQUFLUCxJQUFMLEdBQVlRLFNBQVNSLElBQVQsRUFBZSxFQUFmLENBQVo7QUFDQSxtQkFBT1EsU0FBU1IsSUFBVCxFQUFlLEVBQWYsQ0FBUDtBQUNIOzs7Ozs7a0JBcEJnQk4sTSIsImZpbGUiOiI4LmpzIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRmx2VGFnIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy50YWdUeXBlID0gLTE7XG4gICAgICAgIHRoaXMuZGF0YVNpemUgPSAtMTtcbiAgICAgICAgdGhpcy5UaW1lc3RhbXAgPSAtMTtcbiAgICAgICAgdGhpcy5TdHJlYW1JRCA9IC0xO1xuICAgICAgICB0aGlzLmJvZHkgPSAtMTtcbiAgICAgICAgdGhpcy50aW1lID0gLTE7XG4gICAgICAgIHRoaXMuYXJyID0gW107XG4gICAgfVxuICAgIGdldFRpbWUoKSB7XG4gICAgICAgIC8vIHRoaXMuVGltZXN0YW1wLnBvcCgpO1xuICAgICAgICB0aGlzLmFyciA9IFtdO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuVGltZXN0YW1wLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB0aGlzLmFyci5wdXNoKCh0aGlzLlRpbWVzdGFtcFtpXS50b1N0cmluZygxNikubGVuZ3RoID09IDEgPyBcIjBcIiArIHRoaXMuVGltZXN0YW1wW2ldLnRvU3RyaW5nKDE2KSA6IHRoaXMuVGltZXN0YW1wW2ldLnRvU3RyaW5nKDE2KSkpXG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5hcnIucG9wKCk7XG4gICAgICAgIGxldCB0aW1lID0gdGhpcy5hcnIuam9pbignJyk7XG4gICAgICAgIHRoaXMudGltZSA9IHBhcnNlSW50KHRpbWUsIDE2KTtcbiAgICAgICAgcmV0dXJuIHBhcnNlSW50KHRpbWUsIDE2KTtcbiAgICB9XG59XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vanMvZmx2L2ZsdlRhZy5qcyJdLCJzb3VyY2VSb290IjoiIn0=");

/***/ }),
/* 9 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _decodeUTF = __webpack_require__(6);\n\nvar _decodeUTF2 = _interopRequireDefault(_decodeUTF);\n\nvar _spsParser = __webpack_require__(3);\n\nvar _spsParser2 = _interopRequireDefault(_spsParser);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar le = function () {\n    var buf = new ArrayBuffer(2);\n    new DataView(buf).setInt16(0, 256, true); // little-endian write\n    return new Int16Array(buf)[0] === 256; // platform-spec read, if equal then LE\n}();\n\nvar flvDemux = function () {\n    function flvDemux() {\n        _classCallCheck(this, flvDemux);\n    }\n\n    _createClass(flvDemux, null, [{\n        key: 'parseObject',\n        value: function parseObject(arrayBuffer, dataOffset, dataSize) {\n\n            var name = flvDemux.parseString(arrayBuffer, dataOffset, dataSize);\n            var value = flvDemux.parseScript(arrayBuffer, dataOffset + name.size);\n            var isObjectEnd = value.objectEnd;\n\n            return {\n                data: {\n                    name: name.data,\n                    value: value.data\n                },\n                size: value.size,\n                objectEnd: isObjectEnd\n            };\n        }\n    }, {\n        key: 'parseVariable',\n        value: function parseVariable(arrayBuffer, dataOffset, dataSize) {\n            return flvDemux.parseObject(arrayBuffer, dataOffset, dataSize);\n        }\n    }, {\n        key: 'parseLongString',\n        value: function parseLongString(arrayBuffer, dataOffset, dataSize) {\n            if (dataSize < 4) {\n                throw new IllegalStateException('Data not enough when parse LongString');\n            }\n            var v = new DataView(arrayBuffer, dataOffset);\n            var length = v.getUint32(0, !le);\n\n            var str = void 0;\n            if (length > 0) {\n                str = (0, _decodeUTF2.default)(new Uint8Array(arrayBuffer, dataOffset + 4, length));\n            } else {\n                str = '';\n            }\n\n            return {\n                data: str,\n                size: 4 + length\n            };\n        }\n    }, {\n        key: 'parseDate',\n        value: function parseDate(arrayBuffer, dataOffset, dataSize) {\n            if (dataSize < 10) {\n                throw new IllegalStateException('Data size invalid when parse Date');\n            }\n            var v = new DataView(arrayBuffer, dataOffset);\n            var timestamp = v.getFloat64(0, !le);\n            var localTimeOffset = v.getInt16(8, !le);\n            timestamp += localTimeOffset * 60 * 1000; // get UTC time\n\n            return {\n                data: new Date(timestamp),\n                size: 8 + 2\n            };\n        }\n    }, {\n        key: 'parseString',\n        value: function parseString(arrayBuffer, dataOffset, dataSize) {\n            var v = new DataView(arrayBuffer, dataOffset);\n            var length = v.getUint16(0, !le);\n            var str = void 0;\n            if (length > 0) {\n                str = (0, _decodeUTF2.default)(new Uint8Array(arrayBuffer, dataOffset + 2, length));\n            } else {\n                str = '';\n            }\n            return {\n                data: str,\n                size: 2 + length\n            };\n        }\n\n        /**\n         * 解析metadata\n         */\n\n    }, {\n        key: 'parseMetadata',\n        value: function parseMetadata(arr) {\n            var name = flvDemux.parseScript(arr, 0);\n            var value = flvDemux.parseScript(arr, name.size, arr.length - name.size);\n            // return {}\n            var data = {};\n            data[name.data] = value.data;\n            return data;\n        }\n    }, {\n        key: 'parseScript',\n        value: function parseScript(arr, offset, dataSize) {\n            var dataOffset = offset;\n            var object = {};\n            var uint8 = new Uint8Array(arr);\n            var buffer = uint8.buffer;\n            var dv = new DataView(buffer, 0, dataSize);\n            var value = null;\n            var objectEnd = false;\n            var type = dv.getUint8(dataOffset);\n            dataOffset += 1;\n            switch (type) {\n                case 0:\n                    // Number(Double) type\n                    value = dv.getFloat64(dataOffset, !le);\n                    dataOffset += 8;\n                    break;\n                case 1:\n                    {\n                        // Boolean type\n                        var b = dv.getUint8(dataOffset);\n                        value = b ? true : false;\n                        dataOffset += 1;\n                        break;\n                    }\n                case 2:\n                    {\n                        // String type\n                        // dataOffset += 1;\n                        var amfstr = flvDemux.parseString(buffer, dataOffset);\n                        value = amfstr.data;\n                        dataOffset += amfstr.size;\n                        break;\n                    }\n                case 3:\n\n                    {\n                        // Object(s) type\n                        value = {};\n                        var terminal = 0; // workaround for malformed Objects which has missing ScriptDataObjectEnd\n                        if ((dv.getUint32(dataSize - 4, !le) & 0x00FFFFFF) === 9) {\n                            terminal = 3;\n                        }\n                        while (offset < dataSize - 4) {\n                            // 4 === type(UI8) + ScriptDataObjectEnd(UI24)\n                            var amfobj = flvDemux.parseObject(buffer, dataOffset, dataSize - offset - terminal);\n\n                            if (amfobj.objectEnd) break;\n                            value[amfobj.data.name] = amfobj.data.value;\n                            // dataOffset += amfobj.size;\n                            dataOffset = amfobj.size;\n                        }\n                        if (offset <= dataSize - 3) {\n                            var marker = v.getUint32(dataOffset - 1, !le) & 0x00FFFFFF;\n                            if (marker === 9) {\n                                dataOffset += 3;\n                            }\n                        }\n                        break;\n                    }\n                case 8:\n                    {\n                        // ECMA array type (Mixed array)\n                        value = {};\n                        // dataOffset += 1;\n                        dataOffset += 4; // ECMAArrayLength(UI32)\n                        var _terminal = 0; // workaround for malformed MixedArrays which has missing ScriptDataObjectEnd\n                        if ((dv.getUint32(dataSize - 4, !le) & 0x00FFFFFF) === 9) {\n                            _terminal = 3;\n                        }\n                        while (dataOffset < dataSize - 8) {\n                            // 8 === type(UI8) + ECMAArrayLength(UI32) + ScriptDataVariableEnd(UI24)\n                            var amfvar = flvDemux.parseVariable(buffer, dataOffset);\n\n                            if (amfvar.objectEnd) break;\n                            value[amfvar.data.name] = amfvar.data.value;\n                            dataOffset = amfvar.size;\n                        }\n                        if (dataOffset <= dataSize - 3) {\n                            var _marker = dv.getUint32(dataOffset - 1, !le) & 0x00FFFFFF;\n                            if (_marker === 9) {\n                                dataOffset += 3;\n                            }\n                        }\n                        break;\n                    }\n                case 9:\n                    // ScriptDataObjectEnd\n                    value = undefined;\n                    dataOffset = 1;\n                    objectEnd = true;\n                    break;\n                case 10:\n                    {\n                        // Strict array type\n                        // ScriptDataValue[n]. NOTE: according to video_file_format_spec_v10_1.pdf\n                        value = [];\n                        var strictArrayLength = dv.getUint32(dataOffset, !le);\n                        dataOffset += 4;\n                        for (var i = 0; i < strictArrayLength; i++) {\n                            var val = flvDemux.parseScript(buffer, dataOffset);\n                            value.push(val.data);\n                            dataOffset = val.size;\n                        }\n                        break;\n                    }\n                case 11:\n                    {\n                        // Date type\n                        var date = flvDemux.parseDate(buffer, dataOffset + 1, dataSize - 1);\n                        value = date.data;\n                        dataOffset += date.size;\n                        break;\n                    }\n                case 12:\n                    {\n                        // Long string type\n                        var amfLongStr = flvDemux.parseString(buffer, dataOffset + 1, dataSize - 1);\n                        value = amfLongStr.data;\n                        dataOffset += amfLongStr.size;\n                        break;\n                    }\n                default:\n                    // ignore and skip\n                    dataOffset = dataSize;\n                    console.log('AMF', 'Unsupported AMF value type ' + type);\n            }\n            return {\n                data: value,\n                size: dataOffset\n            };\n        }\n    }]);\n\n    return flvDemux;\n}();\n\nexports.default = flvDemux;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9qcy9mbHYvZmx2ZGVtdXguanM/YjdhYSJdLCJuYW1lcyI6WyJsZSIsImJ1ZiIsIkFycmF5QnVmZmVyIiwiRGF0YVZpZXciLCJzZXRJbnQxNiIsIkludDE2QXJyYXkiLCJmbHZEZW11eCIsImFycmF5QnVmZmVyIiwiZGF0YU9mZnNldCIsImRhdGFTaXplIiwibmFtZSIsInBhcnNlU3RyaW5nIiwidmFsdWUiLCJwYXJzZVNjcmlwdCIsInNpemUiLCJpc09iamVjdEVuZCIsIm9iamVjdEVuZCIsImRhdGEiLCJwYXJzZU9iamVjdCIsIklsbGVnYWxTdGF0ZUV4Y2VwdGlvbiIsInYiLCJsZW5ndGgiLCJnZXRVaW50MzIiLCJzdHIiLCJVaW50OEFycmF5IiwidGltZXN0YW1wIiwiZ2V0RmxvYXQ2NCIsImxvY2FsVGltZU9mZnNldCIsImdldEludDE2IiwiRGF0ZSIsImdldFVpbnQxNiIsImFyciIsIm9mZnNldCIsIm9iamVjdCIsInVpbnQ4IiwiYnVmZmVyIiwiZHYiLCJ0eXBlIiwiZ2V0VWludDgiLCJiIiwiYW1mc3RyIiwidGVybWluYWwiLCJhbWZvYmoiLCJtYXJrZXIiLCJhbWZ2YXIiLCJwYXJzZVZhcmlhYmxlIiwidW5kZWZpbmVkIiwic3RyaWN0QXJyYXlMZW5ndGgiLCJpIiwidmFsIiwicHVzaCIsImRhdGUiLCJwYXJzZURhdGUiLCJhbWZMb25nU3RyIiwiY29uc29sZSIsImxvZyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQTs7OztBQUNBOzs7Ozs7OztBQUNBLElBQUlBLEtBQU0sWUFBVztBQUNqQixRQUFJQyxNQUFNLElBQUlDLFdBQUosQ0FBZ0IsQ0FBaEIsQ0FBVjtBQUNDLFFBQUlDLFFBQUosQ0FBYUYsR0FBYixDQUFELENBQW9CRyxRQUFwQixDQUE2QixDQUE3QixFQUFnQyxHQUFoQyxFQUFxQyxJQUFyQyxFQUZpQixDQUUyQjtBQUM1QyxXQUFRLElBQUlDLFVBQUosQ0FBZUosR0FBZixDQUFELENBQXNCLENBQXRCLE1B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LElBQWY7QUFDQVQseUNBQWF5QyxJQUFJbkMsSUFBakI7QUFDSDtBQUNEO0FBQ0g7QUFDTCxxQkFBSyxFQUFMO0FBQ0k7QUFBRTtBQUNFLDRCQUFJcUMsT0FBTzdDLFNBQVM4QyxTQUFULENBQW1CakIsTUFBbkIsRUFBMkIzQixhQUFhLENBQXhDLEVBQTJDQyxXQUFXLENBQXRELENBQVg7QUFDQUcsZ0NBQVF1QyxLQUFLbEMsSUFBYjtBQUNBVCxzQ0FBYzJDLEtBQUtyQyxJQUFuQjtBQUNBO0FBQ0g7QUFDTCxxQkFBSyxFQUFMO0FBQ0k7QUFBRTtBQUNFLDRCQUFJdUMsYUFBYS9DLFNBQVNLLFdBQVQsQ0FBcUJ3QixNQUFyQixFQUE2QjNCLGFBQWEsQ0FBMUMsRUFBNkNDLFdBQVcsQ0FBeEQsQ0FBakI7QUFDQUcsZ0NBQVF5QyxXQUFXcEMsSUFBbkI7QUFDQVQsc0NBQWM2QyxXQUFXdkMsSUFBekI7QUFDQTtBQUNIO0FBQ0w7QUFDSTtBQUNBTixpQ0FBYUMsUUFBYjtBQUNBNkMsNEJBQVFDLEdBQVIsQ0FBWSxLQUFaLEVBQW1CLGdDQUFnQ2xCLElBQW5EO0FBekdSO0FBMkdBLG1CQUFPO0FBQ0hwQixzQkFBTUwsS0FESDtBQUVIRSxzQkFBTU47QUFGSCxhQUFQO0FBSUg7Ozs7OztrQkFoTmdCRixRIiwiZmlsZSI6IjkuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZGVjb2RlVVRGOCBmcm9tICcuLi9kZWNvZGVVVEY4JztcbmltcG9ydCBTUFNQYXJzZXIgZnJvbSAnLi9zcHMtcGFyc2VyJ1xubGV0IGxlID0gKGZ1bmN0aW9uKCkge1xuICAgIGxldCBidWYgPSBuZXcgQXJyYXlCdWZmZXIoMik7XG4gICAgKG5ldyBEYXRhVmlldyhidWYpKS5zZXRJbnQxNigwLCAyNTYsIHRydWUpOyAvLyBsaXR0bGUtZW5kaWFuIHdyaXRlXG4gICAgcmV0dXJuIChuZXcgSW50MTZBcnJheShidWYpKVswXSA9PT0gMjU2OyAvLyBwbGF0Zm9ybS1zcGVjIHJlYWQsIGlmIGVxdWFsIHRoZW4gTEVcbn0pKCk7XG5leHBvcnQgZGVmYXVsdCBjbGFzcyBmbHZEZW11eCB7XG5cbiAgICBjb25zdHJ1Y3RvcigpIHtcblxuICAgIH1cbiAgICBzdGF0aWMgcGFyc2VPYmplY3QoYXJyYXlCdWZmZXIsIGRhdGFPZmZzZXQsIGRhdGFTaXplKSB7XG5cbiAgICAgICAgbGV0IG5hbWUgPSBmbHZEZW11eC5wYXJzZVN0cmluZyhhcnJheUJ1ZmZlciwgZGF0YU9mZnNldCwgZGF0YVNpemUpO1xuICAgICAgICBsZXQgdmFsdWUgPSBmbHZEZW11eC5wYXJzZVNjcmlwdChhcnJheUJ1ZmZlciwgZGF0YU9mZnNldCArIG5hbWUuc2l6ZSk7XG4gICAgICAgIGxldCBpc09iamVjdEVuZCA9IHZhbHVlLm9iamVjdEVuZDtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgIG5hbWU6IG5hbWUuZGF0YSxcbiAgICAgICAgICAgICAgICB2YWx1ZTogdmFsdWUuZGF0YVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNpemU6IHZhbHVlLnNpemUsXG4gICAgICAgICAgICBvYmplY3RFbmQ6IGlzT2JqZWN0RW5kXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgc3RhdGljIHBhcnNlVmFyaWFibGUoYXJyYXlCdWZmZXIsIGRhdGFPZmZzZXQsIGRhdGFTaXplKSB7XG4gICAgICAgIHJldHVybiBmbHZEZW11eC5wYXJzZU9iamVjdChhcnJheUJ1ZmZlciwgZGF0YU9mZnNldCwgZGF0YVNpemUpO1xuICAgIH1cbiAgICBzdGF0aWMgcGFyc2VMb25nU3RyaW5nKGFycmF5QnVmZmVyLCBkYXRhT2Zmc2V0LCBkYXRhU2l6ZSkge1xuICAgICAgICBpZiAoZGF0YVNpemUgPCA0KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbFN0YXRlRXhjZXB0aW9uKCdEYXRhIG5vdCBlbm91Z2ggd2hlbiBwYXJzZSBMb25nU3RyaW5nJyk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHYgPSBuZXcgRGF0YVZpZXcoYXJyYXlCdWZmZXIsIGRhdGFPZmZzZXQpO1xuICAgICAgICBsZXQgbGVuZ3RoID0gdi5nZXRVaW50MzIoMCwgIWxlKTtcblxuICAgICAgICBsZXQgc3RyO1xuICAgICAgICBpZiAobGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgc3RyID0gZGVjb2RlVVRGOChuZXcgVWludDhBcnJheShhcnJheUJ1ZmZlciwgZGF0YU9mZnNldCArIDQsIGxlbmd0aCkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc3RyID0gJyc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZGF0YTogc3RyLFxuICAgICAgICAgICAgc2l6ZTogNCArIGxlbmd0aFxuICAgICAgICB9O1xuICAgIH1cbiAgICBzdGF0aWMgcGFyc2VEYXRlKGFycmF5QnVmZmVyLCBkYXRhT2Zmc2V0LCBkYXRhU2l6ZSkge1xuICAgICAgICBpZiAoZGF0YVNpemUgPCAxMCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxTdGF0ZUV4Y2VwdGlvbignRGF0YSBzaXplIGludmFsaWQgd2hlbiBwYXJzZSBEYXRlJyk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHYgPSBuZXcgRGF0YVZpZXcoYXJyYXlCdWZmZXIsIGRhdGFPZmZzZXQpO1xuICAgICAgICBsZXQgdGltZXN0YW1wID0gdi5nZXRGbG9hdDY0KDAsICFsZSk7XG4gICAgICAgIGxldCBsb2NhbFRpbWVPZmZzZXQgPSB2LmdldEludDE2KDgsICFsZSk7XG4gICAgICAgIHRpbWVzdGFtcCArPSBsb2NhbFRpbWVPZmZzZXQgKiA2MCAqIDEwMDA7IC8vIGdldCBVVEMgdGltZVxuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBkYXRhOiBuZXcgRGF0ZSh0aW1lc3RhbXApLFxuICAgICAgICAgICAgc2l6ZTogOCArIDJcbiAgICAgICAgfTtcbiAgICB9XG4gICAgc3RhdGljIHBhcnNlU3RyaW5nKGFycmF5QnVmZmVyLCBkYXRhT2Zmc2V0LCBkYXRhU2l6ZSkge1xuICAgICAgICBsZXQgdiA9IG5ldyBEYXRhVmlldyhhcnJheUJ1ZmZlciwgZGF0YU9mZnNldCk7XG4gICAgICAgIGxldCBsZW5ndGggPSB2LmdldFVpbnQxNigwLCAhbGUpO1xuICAgICAgICBsZXQgc3RyO1xuICAgICAgICBpZiAobGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgc3RyID0gZGVjb2RlVVRGOChuZXcgVWludDhBcnJheShhcnJheUJ1ZmZlciwgZGF0YU9mZnNldCArIDIsIGxlbmd0aCkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc3RyID0gJyc7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGRhdGE6IHN0cixcbiAgICAgICAgICAgIHNpemU6IDIgKyBsZW5ndGhcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiDop6PmnpBtZXRhZGF0YVxuICAgICAqL1xuICAgIHN0YXRpYyBwYXJzZU1ldGFkYXRhKGFycikge1xuICAgICAgICBsZXQgbmFtZSA9IGZsdkRlbXV4LnBhcnNlU2NyaXB0KGFyciwgMCk7XG4gICAgICAgIGxldCB2YWx1ZSA9IGZsdkRlbXV4LnBhcnNlU2NyaXB0KGFyciwgbmFtZS5zaXplLCBhcnIubGVuZ3RoIC0gbmFtZS5zaXplKTtcbiAgICAgICAgLy8gcmV0dXJuIHt9XG4gICAgICAgIGxldCBkYXRhID0ge307XG4gICAgICAgIGRhdGFbbmFtZS5kYXRhXSA9IHZhbHVlLmRhdGE7XG4gICAgICAgIHJldHVybiBkYXRhO1xuICAgIH1cblxuXG5cblxuICAgIHN0YXRpYyBwYXJzZVNjcmlwdChhcnIsIG9mZnNldCwgZGF0YVNpemUpIHtcbiAgICAgICAgbGV0IGRhdGFPZmZzZXQgPSBvZmZzZXQ7XG4gICAgICAgIGxldCBvYmplY3QgPSB7fTtcbiAgICAgICAgbGV0IHVpbnQ4ID0gbmV3IFVpbnQ4QXJyYXkoYXJyKTtcbiAgICAgICAgbGV0IGJ1ZmZlciA9IHVpbnQ4LmJ1ZmZlcjtcbiAgICAgICAgbGV0IGR2ID0gbmV3IERhdGFWaWV3KGJ1ZmZlciwgMCwgZGF0YVNpemUpO1xuICAgICAgICBsZXQgdmFsdWUgPSBudWxsO1xuICAgICAgICBsZXQgb2JqZWN0RW5kID0gZmFsc2U7XG4gICAgICAgIGxldCB0eXBlID0gKGR2LmdldFVpbnQ4KGRhdGFPZmZzZXQpKTtcbiAgICAgICAgZGF0YU9mZnNldCArPSAxO1xuICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgMDogLy8gTnVtYmVyKERvdWJsZSkgdHlwZVxuICAgICAgICAgICAgICAgIHZhbHVlID0gZHYuZ2V0RmxvYXQ2NChkYXRhT2Zmc2V0LCAhbGUpO1xuICAgICAgICAgICAgICAgIGRhdGFPZmZzZXQgKz0gODtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICB7IC8vIEJvb2xlYW4gdHlwZVxuICAgICAgICAgICAgICAgICAgICBsZXQgYiA9IGR2LmdldFVpbnQ4KGRhdGFPZmZzZXQpO1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IGIgPyB0cnVlIDogZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIGRhdGFPZmZzZXQgKz0gMTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgIHsgLy8gU3RyaW5nIHR5cGVcbiAgICAgICAgICAgICAgICAgICAgLy8gZGF0YU9mZnNldCArPSAxO1xuICAgICAgICAgICAgICAgICAgICBsZXQgYW1mc3RyID0gZmx2RGVtdXgucGFyc2VTdHJpbmcoYnVmZmVyLCBkYXRhT2Zmc2V0KTtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBhbWZzdHIuZGF0YTtcbiAgICAgICAgICAgICAgICAgICAgZGF0YU9mZnNldCArPSBhbWZzdHIuc2l6ZTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSAzOlxuXG4gICAgICAgICAgICAgICAgeyAvLyBPYmplY3QocykgdHlwZVxuICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IHt9O1xuICAgICAgICAgICAgICAgICAgICBsZXQgdGVybWluYWwgPSAwOyAvLyB3b3JrYXJvdW5kIGZvciBtYWxmb3JtZWQgT2JqZWN0cyB3aGljaCBoYXMgbWlzc2luZyBTY3JpcHREYXRhT2JqZWN0RW5kXG4gICAgICAgICAgICAgICAgICAgIGlmICgoZHYuZ2V0VWludDMyKGRhdGFTaXplIC0gNCwgIWxlKSAmIDB4MDBGRkZGRkYpID09PSA5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXJtaW5hbCA9IDM7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKG9mZnNldCA8IGRhdGFTaXplIC0gNCkgeyAvLyA0ID09PSB0eXBlKFVJOCkgKyBTY3JpcHREYXRhT2JqZWN0RW5kKFVJMjQpXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgYW1mb2JqID0gZmx2RGVtdXgucGFyc2VPYmplY3QoYnVmZmVyLCBkYXRhT2Zmc2V0LCBkYXRhU2l6ZSAtIG9mZnNldCAtIHRlcm1pbmFsKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFtZm9iai5vYmplY3RFbmQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZVthbWZvYmouZGF0YS5uYW1lXSA9IGFtZm9iai5kYXRhLnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZGF0YU9mZnNldCArPSBhbWZvYmouc2l6ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFPZmZzZXQgPSBhbWZvYmouc2l6ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAob2Zmc2V0IDw9IGRhdGFTaXplIC0gMykge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG1hcmtlciA9IHYuZ2V0VWludDMyKGRhdGFPZmZzZXQgLSAxLCAhbGUpICYgMHgwMEZGRkZGRjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtYXJrZXIgPT09IDkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhT2Zmc2V0ICs9IDM7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSA4OlxuICAgICAgICAgICAgICAgIHsgLy8gRUNNQSBhcnJheSB0eXBlIChNaXhlZCBhcnJheSlcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgLy8gZGF0YU9mZnNldCArPSAxO1xuICAgICAgICAgICAgICAgICAgICBkYXRhT2Zmc2V0ICs9IDQ7IC8vIEVDTUFBcnJheUxlbmd0aChVSTMyKVxuICAgICAgICAgICAgICAgICAgICBsZXQgdGVybWluYWwgPSAwOyAvLyB3b3JrYXJvdW5kIGZvciBtYWxmb3JtZWQgTWl4ZWRBcnJheXMgd2hpY2ggaGFzIG1pc3NpbmcgU2NyaXB0RGF0YU9iamVjdEVuZFxuICAgICAgICAgICAgICAgICAgICBpZiAoKGR2LmdldFVpbnQzMihkYXRhU2l6ZSAtIDQsICFsZSkgJiAweDAwRkZGRkZGKSA9PT0gOSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGVybWluYWwgPSAzO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChkYXRhT2Zmc2V0IDwgZGF0YVNpemUgLSA4KSB7IC8vIDggPT09IHR5cGUoVUk4KSArIEVDTUFBcnJheUxlbmd0aChVSTMyKSArIFNjcmlwdERhdGFWYXJpYWJsZUVuZChVSTI0KVxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGFtZnZhciA9IGZsdkRlbXV4LnBhcnNlVmFyaWFibGUoYnVmZmVyLCBkYXRhT2Zmc2V0KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFtZnZhci5vYmplY3RFbmQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZVthbWZ2YXIuZGF0YS5uYW1lXSA9IGFtZnZhci5kYXRhLnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YU9mZnNldCA9IGFtZnZhci5zaXplO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChkYXRhT2Zmc2V0IDw9IGRhdGFTaXplIC0gMykge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG1hcmtlciA9IGR2LmdldFVpbnQzMihkYXRhT2Zmc2V0IC0gMSwgIWxlKSAmIDB4MDBGRkZGRkY7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobWFya2VyID09PSA5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YU9mZnNldCArPSAzO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgOTogLy8gU2NyaXB0RGF0YU9iamVjdEVuZFxuICAgICAgICAgICAgICAgIHZhbHVlID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIGRhdGFPZmZzZXQgPSAxO1xuICAgICAgICAgICAgICAgIG9iamVjdEVuZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDEwOlxuICAgICAgICAgICAgICAgIHsgLy8gU3RyaWN0IGFycmF5IHR5cGVcbiAgICAgICAgICAgICAgICAgICAgLy8gU2NyaXB0RGF0YVZhbHVlW25dLiBOT1RFOiBhY2NvcmRpbmcgdG8gdmlkZW9fZmlsZV9mb3JtYXRfc3BlY192MTBfMS5wZGZcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHN0cmljdEFycmF5TGVuZ3RoID0gZHYuZ2V0VWludDMyKGRhdGFPZmZzZXQsICFsZSk7XG4gICAgICAgICAgICAgICAgICAgIGRhdGFPZmZzZXQgKz0gNDtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdHJpY3RBcnJheUxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgdmFsID0gZmx2RGVtdXgucGFyc2VTY3JpcHQoYnVmZmVyLCBkYXRhT2Zmc2V0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlLnB1c2godmFsLmRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YU9mZnNldCA9IHZhbC5zaXplO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgMTE6XG4gICAgICAgICAgICAgICAgeyAvLyBEYXRlIHR5cGVcbiAgICAgICAgICAgICAgICAgICAgbGV0IGRhdGUgPSBmbHZEZW11eC5wYXJzZURhdGUoYnVmZmVyLCBkYXRhT2Zmc2V0ICsgMSwgZGF0YVNpemUgLSAxKTtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBkYXRlLmRhdGE7XG4gICAgICAgICAgICAgICAgICAgIGRhdGFPZmZzZXQgKz0gZGF0ZS5zaXplO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlIDEyOlxuICAgICAgICAgICAgICAgIHsgLy8gTG9uZyBzdHJpbmcgdHlwZVxuICAgICAgICAgICAgICAgICAgICBsZXQgYW1mTG9uZ1N0ciA9IGZsdkRlbXV4LnBhcnNlU3RyaW5nKGJ1ZmZlciwgZGF0YU9mZnNldCArIDEsIGRhdGFTaXplIC0gMSk7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gYW1mTG9uZ1N0ci5kYXRhO1xuICAgICAgICAgICAgICAgICAgICBkYXRhT2Zmc2V0ICs9IGFtZkxvbmdTdHIuc2l6ZTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAvLyBpZ25vcmUgYW5kIHNraXBcbiAgICAgICAgICAgICAgICBkYXRhT2Zmc2V0ID0gZGF0YVNpemU7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0FNRicsICdVbnN1cHBvcnRlZCBBTUYgdmFsdWUgdHlwZSAnICsgdHlwZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGRhdGE6IHZhbHVlLFxuICAgICAgICAgICAgc2l6ZTogZGF0YU9mZnNldCxcbiAgICAgICAgfTtcbiAgICB9XG59XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vanMvZmx2L2ZsdmRlbXV4LmpzIl0sInNvdXJjZVJvb3QiOiIifQ==");

/***/ }),
/* 10 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/*\n * Copyright (C) 2016 Bilibili. All Rights Reserved.\n *\n * @author zheng qian <xqq@xqq.im>\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nvar MediaInfo = function () {\n    function MediaInfo() {\n        _classCallCheck(this, MediaInfo);\n\n        this.mimeType = null;\n        this.duration = null;\n\n        this.hasAudio = null;\n        this.hasVideo = null;\n        this.audioCodec = null;\n        this.videoCodec = null;\n        this.audioDataRate = null;\n        this.videoDataRate = null;\n\n        this.audioSampleRate = null;\n        this.audioChannelCount = null;\n\n        this.width = null;\n        this.height = null;\n        this.fps = null;\n        this.profile = null;\n        this.level = null;\n        this.chromaFormat = null;\n        this.sarNum = null;\n        this.sarDen = null;\n\n        this.metadata = null;\n        this.segments = null; // MediaInfo[]\n        this.segmentCount = null;\n        this.hasKeyframesIndex = null;\n        this.keyframesIndex = null;\n    }\n\n    _createClass(MediaInfo, [{\n        key: \"isComplete\",\n        value: function isComplete() {\n            var audioInfoComplete = this.hasAudio === false || this.hasAudio === true && this.audioCodec != null && this.audioSampleRate != null && this.audioChannelCount != null;\n\n            var videoInfoComplete = this.hasVideo === false || this.hasVideo === true && this.videoCodec != null && this.width != null && this.height != null && this.fps != null && this.profile != null && this.level != null && this.chromaFormat != null && this.sarNum != null && this.sarDen != null;\n\n            // keyframesIndex may not be present\n            return this.mimeType != null && this.duration != null && this.metadata != null && this.hasKeyframesIndex != null && audioInfoComplete && videoInfoComplete;\n        }\n    }, {\n        key: \"isSeekable\",\n        value: function isSeekable() {\n            return this.hasKeyframesIndex === true;\n        }\n    }, {\n        key: \"getNearestKeyframe\",\n        value: function getNearestKeyframe(milliseconds) {\n            if (this.keyframesIndex == null) {\n                return null;\n            }\n\n            var table = this.keyframesIndex;\n            var keyframeIdx = this._search(table.times, milliseconds);\n\n            return {\n                index: keyframeIdx,\n                milliseconds: table.times[keyframeIdx],\n                fileposition: table.filepositions[keyframeIdx]\n            };\n        }\n    }, {\n        key: \"_search\",\n        value: function _search(list, value) {\n            var idx = 0;\n\n            var last = list.length - 1;\n            var mid = 0;\n            var lbound = 0;\n            var ubound = last;\n\n            if (value < list[0]) {\n                idx = 0;\n                lbound = ubound + 1; // skip search\n            }\n\n            while (lbound <= ubound) {\n                mid = lbound + Math.floor((ubound - lbound) / 2);\n                if (mid === last || value >= list[mid] && value < list[mid + 1]) {\n                    idx = mid;\n                    break;\n                } else if (list[mid] < value) {\n                    lbound = mid + 1;\n                } else {\n                    ubound = mid - 1;\n                }\n            }\n\n            return idx;\n        }\n    }]);\n\n    return MediaInfo;\n}();\n\nexports.default = MediaInfo;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9qcy9mbHYvbWVkaWEtaW5mby5qcz9lYzg5Il0sIm5hbWVzIjpbIk1lZGlhSW5mbyIsIm1pbWVUeXBlIiwiZHVyYXRpb24iLCJoYXNBdWRpbyIsImhhc1ZpZGVvIiwiYXVkaW9Db2RlYyIsInZpZGVvQ29kZWMiLCJhdWRpb0RhdGFSYXRlIiwidmlkZW9EYXRhUmF0ZSIsImF1ZGlvU2FtcGxlUmF0ZSIsImF1ZGlvQ2hhbm5lbENvdW50Iiwid2lkdGgiLCJoZWlnaHQiLCJmcHMiLCJwcm9maWxlIiwibGV2ZWwiLCJjaHJvbWFGb3JtYXQiLCJzYXJOdW0iLCJzYXJEZW4iLCJtZXRhZGF0YSIsInNlZ21lbnRzIiwic2VnbWVudENvdW50IiwiaGFzS2V5ZnJhbWVzSW5kZXgiLCJrZXlmcmFtZXNJbmRleCIsImF1ZGlvSW5mb0NvbXBsZXRlIiwidmlkZW9JbmZvQ29tcGxldGUiLCJtaWxsaXNlY29uZHMiLCJ0YWJsZSIsImtleWZyYW1lSWR4IiwiX3NlYXJjaCIsInRpbWVzIiwiaW5kZXgiLCJmaWxlcG9zaXRpb24iLCJmaWxlcG9zaXRpb25zIiwibGlzdCIsInZhbHVlIiwiaWR4IiwibGFzdCIsImxlbmd0aCIsIm1pZCIsImxib3VuZCIsInVib3VuZCIsIk1hdGgiLCJmbG9vciJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7SUFrQk1BLFM7QUFFRix5QkFBYztBQUFBOztBQUNWLGFBQUtDLFFBQUwsR0FBZ0IsSUFBaEI7QUFDQSxhQUFLQyxRQUFMLEdBQWdCLElBQWhCOztBQUVBLGFBQUtDLFFBQUwsR0FBZ0IsSUFBaEI7QUFDQSxhQUFLQyxRQUFMLEdBQWdCLElBQWhCO0FBQ0EsYUFBS0MsVUFBTCxHQUFrQixJQUFsQjtBQUNBLGFBQUtDLFVBQUwsR0FBa0IsSUFBbEI7QUFDQSxhQUFLQyxhQUFMLEdBQXFCLElBQXJCO0FBQ0EsYUFBS0MsYUFBTCxHQUFxQixJQUFyQjs7QUFFQSxhQUFLQyxlQUFMLEdB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QkosUUFBUUQsS0FBS0ssTUFBTSxDQUFYLENBQW5ELEVBQW1FO0FBQy9ESCwwQkFBTUcsR0FBTjtBQUNBO0FBQ0gsaUJBSEQsTUFHTyxJQUFJTCxLQUFLSyxHQUFMLElBQVlKLEtBQWhCLEVBQXVCO0FBQzFCSyw2QkFBU0QsTUFBTSxDQUFmO0FBQ0gsaUJBRk0sTUFFQTtBQUNIRSw2QkFBU0YsTUFBTSxDQUFmO0FBQ0g7QUFDSjs7QUFFRCxtQkFBT0gsR0FBUDtBQUNIOzs7Ozs7a0JBSVVwQyxTIiwiZmlsZSI6IjEwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLypcbiAqIENvcHlyaWdodCAoQykgMjAxNiBCaWxpYmlsaS4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBAYXV0aG9yIHpoZW5nIHFpYW4gPHhxcUB4cXEuaW0+XG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmNsYXNzIE1lZGlhSW5mbyB7XG5cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5taW1lVHlwZSA9IG51bGw7XG4gICAgICAgIHRoaXMuZHVyYXRpb24gPSBudWxsO1xuXG4gICAgICAgIHRoaXMuaGFzQXVkaW8gPSBudWxsO1xuICAgICAgICB0aGlzLmhhc1ZpZGVvID0gbnVsbDtcbiAgICAgICAgdGhpcy5hdWRpb0NvZGVjID0gbnVsbDtcbiAgICAgICAgdGhpcy52aWRlb0NvZGVjID0gbnVsbDtcbiAgICAgICAgdGhpcy5hdWRpb0RhdGFSYXRlID0gbnVsbDtcbiAgICAgICAgdGhpcy52aWRlb0RhdGFSYXRlID0gbnVsbDtcblxuICAgICAgICB0aGlzLmF1ZGlvU2FtcGxlUmF0ZSA9IG51bGw7XG4gICAgICAgIHRoaXMuYXVkaW9DaGFubmVsQ291bnQgPSBudWxsO1xuXG4gICAgICAgIHRoaXMud2lkdGggPSBudWxsO1xuICAgICAgICB0aGlzLmhlaWdodCA9IG51bGw7XG4gICAgICAgIHRoaXMuZnBzID0gbnVsbDtcbiAgICAgICAgdGhpcy5wcm9maWxlID0gbnVsbDtcbiAgICAgICAgdGhpcy5sZXZlbCA9IG51bGw7XG4gICAgICAgIHRoaXMuY2hyb21hRm9ybWF0ID0gbnVsbDtcbiAgICAgICAgdGhpcy5zYXJOdW0gPSBudWxsO1xuICAgICAgICB0aGlzLnNhckRlbiA9IG51bGw7XG5cbiAgICAgICAgdGhpcy5tZXRhZGF0YSA9IG51bGw7XG4gICAgICAgIHRoaXMuc2VnbWVudHMgPSBudWxsOyAgLy8gTWVkaWFJbmZvW11cbiAgICAgICAgdGhpcy5zZWdtZW50Q291bnQgPSBudWxsO1xuICAgICAgICB0aGlzLmhhc0tleWZyYW1lc0luZGV4ID0gbnVsbDtcbiAgICAgICAgdGhpcy5rZXlmcmFtZXNJbmRleCA9IG51bGw7XG4gICAgfVxuXG4gICAgaXNDb21wbGV0ZSgpIHtcbiAgICAgICAgbGV0IGF1ZGlvSW5mb0NvbXBsZXRlID0gKHRoaXMuaGFzQXVkaW8gPT09IGZhbHNlKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodGhpcy5oYXNBdWRpbyA9PT0gdHJ1ZSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hdWRpb0NvZGVjICE9IG51bGwgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYXVkaW9TYW1wbGVSYXRlICE9IG51bGwgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYXVkaW9DaGFubmVsQ291bnQgIT0gbnVsbCk7XG5cbiAgICAgICAgbGV0IHZpZGVvSW5mb0NvbXBsZXRlID0gKHRoaXMuaGFzVmlkZW8gPT09IGZhbHNlKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodGhpcy5oYXNWaWRlbyA9PT0gdHJ1ZSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy52aWRlb0NvZGVjICE9IG51bGwgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMud2lkdGggIT0gbnVsbCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5oZWlnaHQgIT0gbnVsbCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5mcHMgIT0gbnVsbCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9maWxlICE9IG51bGwgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubGV2ZWwgIT0gbnVsbCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jaHJvbWFGb3JtYXQgIT0gbnVsbCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zYXJOdW0gIT0gbnVsbCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zYXJEZW4gIT0gbnVsbCk7XG5cbiAgICAgICAgLy8ga2V5ZnJhbWVzSW5kZXggbWF5IG5vdCBiZSBwcmVzZW50XG4gICAgICAgIHJldHVybiB0aGlzLm1pbWVUeXBlICE9IG51bGwgJiZcbiAgICAgICAgICAgICAgIHRoaXMuZHVyYXRpb24gIT0gbnVsbCAmJlxuICAgICAgICAgICAgICAgdGhpcy5tZXRhZGF0YSAhPSBudWxsICYmXG4gICAgICAgICAgICAgICB0aGlzLmhhc0tleWZyYW1lc0luZGV4ICE9IG51bGwgJiZcbiAgICAgICAgICAgICAgIGF1ZGlvSW5mb0NvbXBsZXRlICYmXG4gICAgICAgICAgICAgICB2aWRlb0luZm9Db21wbGV0ZTtcbiAgICB9XG5cbiAgICBpc1NlZWthYmxlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5oYXNLZXlmcmFtZXNJbmRleCA9PT0gdHJ1ZTtcbiAgICB9XG5cbiAgICBnZXROZWFyZXN0S2V5ZnJhbWUobWlsbGlzZWNvbmRzKSB7XG4gICAgICAgIGlmICh0aGlzLmtleWZyYW1lc0luZGV4ID09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHRhYmxlID0gdGhpcy5rZXlmcmFtZXNJbmRleDtcbiAgICAgICAgbGV0IGtleWZyYW1lSWR4ID0gdGhpcy5fc2VhcmNoKHRhYmxlLnRpbWVzLCBtaWxsaXNlY29uZHMpO1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBpbmRleDoga2V5ZnJhbWVJZHgsXG4gICAgICAgICAgICBtaWxsaXNlY29uZHM6IHRhYmxlLnRpbWVzW2tleWZyYW1lSWR4XSxcbiAgICAgICAgICAgIGZpbGVwb3NpdGlvbjogdGFibGUuZmlsZXBvc2l0aW9uc1trZXlmcmFtZUlkeF1cbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBfc2VhcmNoKGxpc3QsIHZhbHVlKSB7XG4gICAgICAgIGxldCBpZHggPSAwO1xuXG4gICAgICAgIGxldCBsYXN0ID0gbGlzdC5sZW5ndGggLSAxO1xuICAgICAgICBsZXQgbWlkID0gMDtcbiAgICAgICAgbGV0IGxib3VuZCA9IDA7XG4gICAgICAgIGxldCB1Ym91bmQgPSBsYXN0O1xuXG4gICAgICAgIGlmICh2YWx1ZSA8IGxpc3RbMF0pIHtcbiAgICAgICAgICAgIGlkeCA9IDA7XG4gICAgICAgICAgICBsYm91bmQgPSB1Ym91bmQgKyAxOyAgLy8gc2tpcCBzZWFyY2hcbiAgICAgICAgfVxuXG4gICAgICAgIHdoaWxlIChsYm91bmQgPD0gdWJvdW5kKSB7XG4gICAgICAgICAgICBtaWQgPSBsYm91bmQgKyBNYXRoLmZsb29yKCh1Ym91bmQgLSBsYm91bmQpIC8gMik7XG4gICAgICAgICAgICBpZiAobWlkID09PSBsYXN0IHx8ICh2YWx1ZSA+PSBsaXN0W21pZF0gJiYgdmFsdWUgPCBsaXN0W21pZCArIDFdKSkge1xuICAgICAgICAgICAgICAgIGlkeCA9IG1pZDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH0gZWxzZSBpZiAobGlzdFttaWRdIDwgdmFsdWUpIHtcbiAgICAgICAgICAgICAgICBsYm91bmQgPSBtaWQgKyAxO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB1Ym91bmQgPSBtaWQgLSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGlkeDtcbiAgICB9XG5cbn1cblxuZXhwb3J0IGRlZmF1bHQgTWVkaWFJbmZvO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2pzL2Zsdi9tZWRpYS1pbmZvLmpzIl0sInNvdXJjZVJvb3QiOiIifQ==");

/***/ }),
/* 11 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _flvParse = __webpack_require__(2);\n\nvar _flvParse2 = _interopRequireDefault(_flvParse);\n\nvar _tagdemux = __webpack_require__(0);\n\nvar _tagdemux2 = _interopRequireDefault(_tagdemux);\n\nvar _mp4remux = __webpack_require__(1);\n\nvar _mp4remux2 = _interopRequireDefault(_mp4remux);\n\nvar _mp4moof = __webpack_require__(4);\n\nvar _mp4moof2 = _interopRequireDefault(_mp4moof);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar flv2fmp4 = function () {\n\n    /**\n     * Creates an instance of flv2fmp4.\n     * config 里面有_isLive属性,是否是直播\n     * @param {any} config \n     * \n     * @memberof flv2fmp4\n     */\n    function flv2fmp4(config) {\n        _classCallCheck(this, flv2fmp4);\n\n        this._config = { _isLive: false };\n        this._config = Object.assign(this._config, config);\n\n        //外部方法赋值\n        this.onInitSegment = null;\n        this.onMediaSegment = null;\n        this.onMediaInfo = null;\n        this.seekCallBack = null;\n\n        //内部使用\n        this.loadmetadata = false;\n        this.ftyp_moov = null;\n        this.metaSuccRun = false;\n        this.metas = [];\n        this.parseChunk = null;\n        //临时记录seek时间\n        this._pendingResolveSeekPoint = -1;\n\n        //临时记录flv数据起始时间\n        this._tempBaseTime = 0;\n\n        //处理flv数据入口\n        this.setflvBase = this.setflvBasefrist;\n\n        _tagdemux2.default._onTrackMetadata = this.Metadata.bind(this);\n        _tagdemux2.default._onMediaInfo = this.metaSucc.bind(this);\n        _tagdemux2.default._onDataAvailable = this.onDataAvailable.bind(this);\n        this.m4mof = new _mp4moof2.default(this._config);\n        this.m4mof.onMediaSegment = this.onMdiaSegment.bind(this);\n    }\n\n    _createClass(flv2fmp4, [{\n        key: 'seek',\n        value: function seek() {\n            this.setflvBase = this.setflvBasefrist;\n        }\n\n        /**\n         * 不要主动调用这个接口!!!!!!!!!!!!!!!!!!!!!!!!!!!!\n         * 第一次接受数据,和seek时候接受数据入口,\n         * \n         * @param {any} arraybuff \n         * @param {any} baseTime \n         * @returns \n         * \n         * @memberof flv2fmp4\n         */\n\n    }, {\n        key: 'setflvBasefrist',\n        value: function setflvBasefrist(arraybuff, baseTime) {\n            if (baseTime == undefined || baseTime == 0) {\n                baseTime = 0;\n                this._pendingResolveSeekPoint = -1;\n            }\n            if (this._tempBaseTime != baseTime) {\n                this._tempBaseTime = baseTime;\n                _tagdemux2.default._timestampBase = baseTime;\n                this.m4mof.seek(baseTime);\n                this.m4mof.insertDiscontinuity();\n                this._pendingResolveSeekPoint = baseTime;\n            }\n\n            var offset = _flvParse2.default.setFlv(new Uint8Array(arraybuff));\n\n            if (_flvParse2.default.arrTag.length > 0) {\n                if (this._tempBaseTime != 0 && this._tempBaseTime == _flvParse2.default.arrTag[0].getTime()) {\n                    _tagdemux2.default._timestampBase = 0;\n                }\n                _tagdemux2.default.moofTag(_flvParse2.default.arrTag);\n                this.setflvBase = this.setflvBaseUsually;\n            }\n\n            return offset;\n        }\n\n        /**\n         * 不要主动调用这个接口!!!!!!!!!!!!!!!!!!!!!!!!!!!!\n         * 后续接受数据接口\n         * @param {any} arraybuff \n         * @param {any} baseTime \n         * @returns \n         * \n         * @memberof flv2fmp4\n         */\n\n    }, {\n        key: 'setflvBaseUsually',\n        value: function setflvBaseUsually(arraybuff, baseTime) {\n            var offset = _flvParse2.default.setFlv(new Uint8Array(arraybuff));\n\n            if (_flvParse2.default.arrTag.length > 0) {\n                _tagdemux2.default.moofTag(_flvParse2.default.arrTag);\n            }\n\n            return offset;\n        }\n\n        /**\n         * 不要主动调用这个接口!!!!!!!!!!!!!!!!!!!!!!!!!!!!\n         * moof回调\n         * \n         * @param {any} track \n         * @param {any} value \n         * \n         * @memberof flv2fmp4\n         */\n\n    }, {\n        key: 'onMdiaSegment',\n        value: function onMdiaSegment(track, value) {\n\n            if (this.onMediaSegment) {\n                this.onMediaSegment(new Uint8Array(value.data));\n            }\n            if (this._pendingResolveSeekPoint != -1 && track == 'video') {\n                var seekpoint = this._pendingResolveSeekPoint;\n                this._pendingResolveSeekPoint = -1;\n                if (this.seekCallBack) {\n                    this.seekCallBack(seekpoint);\n                }\n            }\n        }\n\n        /**\n         * \n         * 音频和视频的初始化tag\n         * \n         * @param {any} type \n         * @param {any} meta \n         * \n         * @memberof flv2fmp4\n         */\n\n    }, {\n        key: 'Metadata',\n        value: function Metadata(type, meta) {\n            switch (type) {\n                case 'video':\n                    this.metas.push(meta);\n                    this.m4mof._videoMeta = meta;\n                    break;\n                case 'audio':\n                    this.metas.push(meta);\n                    this.m4mof._audioMeta = meta;\n                    break;\n            }\n            if (this.metaSuccRun && this.metas.length > 1) {\n                this.metaSucc();\n            }\n        }\n\n        /**\n         * metadata解读成功后触发及第一个视频tag和第一个音频tag\n         * \n         * @param {any} mi \n         * @returns \n         * \n         * @memberof flv2fmp4\n         */\n\n    }, {\n        key: 'metaSucc',\n        value: function metaSucc(mi) {\n            if (this.onMediaInfo) {\n                this.onMediaInfo(mi);\n            }\n            //获取ftyp和moov\n            if (this.metas.length == 0) {\n                this.metaSuccRun = true;\n                return;\n            }\n\n            this.ftyp_moov = _mp4remux2.default.generateInitSegment(this.metas);\n            if (this.onInitSegment && this.loadmetadata == false) {\n\n                this.onInitSegment(this.ftyp_moov);\n                this.loadmetadata = true;\n            }\n        }\n    }, {\n        key: 'onDataAvailable',\n        value: function onDataAvailable(audiotrack, videotrack) {\n            this.m4mof.remux(audiotrack, videotrack);\n        }\n\n        /**\n         * 传入flv的二进制数据\n         * 统一入口\n         * @param {any} arraybuff \n         * @param {any} baseTime flv数据开始时间\n         * @returns \n         * \n         * @memberof flv2fmp4\n         */\n\n    }, {\n        key: 'setflv',\n        value: function setflv(arraybuff, baseTime) {\n            return this.setflvBase(arraybuff, baseTime);\n        }\n\n        /**\n         * \n         * 本地调试代码,不用理会\n         * @param {any} arraybuff \n         * @returns \n         * \n         * @memberof flv2fmp4\n         */\n\n    }, {\n        key: 'setflvloc',\n        value: function setflvloc(arraybuff) {\n            var offset = _flvParse2.default.setFlv(new Uint8Array(arraybuff));\n\n            if (_flvParse2.default.arrTag.length > 0) {\n                return _flvParse2.default.arrTag;\n            }\n        }\n    }]);\n\n    return flv2fmp4;\n}();\n\n/**\n * 封装的对外类,有些方法不想对外暴露,所以封装这么一个类\n * \n * @class foreign\n */\n\n\nvar foreign = function () {\n    function foreign(config) {\n        _classCallCheck(this, foreign);\n\n        this.f2m = new flv2fmp4(config);\n        //外部方法赋值\n        this._onInitSegment = null;\n        this._onMediaSegment = null;\n        this._onMediaInfo = null;\n        this._seekCallBack = null;\n    }\n\n    /**\n     * \n     * 跳转\n     * \n     * @memberof foreign\n     */\n\n\n    _createClass(foreign, [{\n        key: 'seek',\n        value: function seek() {\n            this.f2m.seek();\n        }\n\n        /**\n         * 传入flv的二进制数据\n         * 统一入口\n         * @param {any} arraybuff \n         * @param {any} baseTime flv数据开始时间\n         * @returns \n         * \n         * @memberof flv2fmp4\n         */\n\n    }, {\n        key: 'setflv',\n        value: function setflv(arraybuff, baseTime) {\n            return this.f2m.setflv(arraybuff, baseTime);\n        }\n\n        /**\n         * \n         * 本地调试代码,不用理会\n         * @param {any} arraybuff \n         * @returns \n         * \n         * @memberof flv2fmp4\n         */\n\n    }, {\n        key: 'setflvloc',\n        value: function setflvloc(arraybuff) {\n            return this.f2m.setflvloc(arraybuff);\n        }\n\n        /**\n         * 赋值初始化seg接受方法\n         * \n         * \n         * @memberof foreign\n         */\n\n    }, {\n        key: 'onInitSegment',\n        set: function set(fun) {\n            this._onInitSegment = fun;\n            this.f2m.onInitSegment = fun;\n        }\n\n        /**\n         * 赋值moof接受方法\n         * \n         * \n         * @memberof foreign\n         */\n\n    }, {\n        key: 'onMediaSegment',\n        set: function set(fun) {\n            this._onMediaSegment = fun;\n            this.f2m.onMediaSegment = fun;\n        }\n\n        /**\n         * 赋值metadata接受方法\n         * \n         * \n         * @memberof foreign\n         */\n\n    }, {\n        key: 'onMediaInfo',\n        set: function set(fun) {\n            this._onMediaInfo = fun;\n            this.f2m.onMediaInfo = fun;\n        }\n\n        /**\n         * 赋值是否跳转回调接受方法\n         * \n         * \n         * @memberof foreign\n         */\n\n    }, {\n        key: 'seekCallBack',\n        set: function set(fun) {\n            this._seekCallBack = fun;\n            this.f2m.seekCallBack = fun;\n        }\n    }]);\n\n    return foreign;\n}();\n\nexports.default = foreign;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9qcy9mbHYyZm1wNC5qcz84ZTQ3Il0sIm5hbWVzIjpbImZsdjJmbXA0IiwiY29uZmlnIiwiX2NvbmZpZyIsIl9pc0xpdmUiLCJPYmplY3QiLCJhc3NpZ24iLCJvbkluaXRTZWdtZW50Iiwib25NZWRpYVNlZ21lbnQiLCJvbk1lZGlhSW5mbyIsInNlZWtDYWxsQmFjayIsImxvYWRtZXRhZGF0YSIsImZ0eXBfbW9vdiIsIm1ldGFTdWNjUnVuIiwibWV0YXMiLCJwYXJzZUNodW5rIiwiX3BlbmRpbmdSZXNvbHZlU2Vla1BvaW50IiwiX3RlbXBCYXNlVGltZSIsInNldGZsdkJhc2UiLCJzZXRmbHZCYXNlZnJpc3QiLCJfb25UcmFja01ldGFkYXRhIiwiTWV0YWRhdGEiLCJiaW5kIiwiX29uTWVkaWFJbmZvIiwibWV0YVN1Y2MiLCJfb25EYXRhQXZhaWxhYmxlIiwib25EYXRhQXZhaWxhYmxlIiwibTRtb2YiLCJvbk1kaWFTZWdtZW50IiwiYXJyYXlidWZmIiwiYmFzZVRpbWUiLCJ1bmRlZmluZWQiLCJfdGltZXN0YW1wQmFzZSIsInNlZWsiLCJpbnNlcnREaXNjb250aW51aXR5Iiwib2Zmc2V0Iiwic2V0Rmx2IiwiVWludDhBcnJheSIsImFyclRhZyIsImxlbmd0aCIsImdldFRpbWUiLCJtb29mVGFnIiwic2V0Zmx2QmFzZVVzdWFsbHkiLCJ0cmFjayIsInZhbHVlIiwiZGF0YSIsInNlZWtwb2ludCIsInR5cGUiLCJtZXRhIiwicHVzaCIsIl92aWRlb01ldGEiLCJfYXVkaW9NZXRhIiwibWkiLCJnZW5lcmF0ZUluaXRTZWdtZW50IiwiYXVkaW90cmFjayIsInZpZGVvdHJhY2siLCJyZW11eCIsImZvcmVpZ24iLCJmMm0iLCJfb25Jbml0U2VnbWVudCIsIl9vbk1lZGlhU2VnbWVudCIsIl9zZWVrQ2FsbEJhY2siLCJzZXRmbHYiLCJzZXRmbHZsb2MiLCJmdW4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUE7Ozs7QUFDQTs7OztBQUNBOzs7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Ozs7OytCQU1PO0FBQ0gsaUJBQUtILEdBQUwsQ0FBU3pCLElBQVQ7QUFDSDs7QUFFRDs7Ozs7Ozs7Ozs7OytCQVNPSixTLEVBQVdDLFEsRUFBVTtBQUN4QixtQkFBTyxLQUFLNEIsR0FBTCxDQUFTSSxNQUFULENBQWdCakMsU0FBaEIsRUFBMkJDLFFBQTNCLENBQVA7QUFDSDs7QUFFRDs7Ozs7Ozs7Ozs7a0NBUVVELFMsRUFBVztBQUNqQixtQkFBTyxLQUFLNkIsR0FBTCxDQUFTSyxTQUFULENBQW1CbEMsU0FBbkIsQ0FBUDtBQUNIOztBQUdEOzs7Ozs7Ozs7MEJBTWtCbUMsRyxFQUFLO0FBQ25CLGlCQUFLTCxjQUFMLEdBQXNCSyxHQUF0QjtBQUNBLGlCQUFLTixHQUFMLENBQVNuRCxhQUFULEdBQXlCeUQsR0FBekI7QUFDSDs7QUFFRDs7Ozs7Ozs7OzBCQU1tQkEsRyxFQUFLO0FBQ3BCLGlCQUFLSixlQUFMLEdBQXVCSSxHQUF2QjtBQUNBLGlCQUFLTixHQUFMLENBQVNsRCxjQUFULEdBQTBCd0QsR0FBMUI7QUFDSDs7QUFFRDs7Ozs7Ozs7OzBCQU1nQkEsRyxFQUFLO0FBQ2pCLGlCQUFLekMsWUFBTCxHQUFvQnlDLEdBQXBCO0FBQ0EsaUJBQUtOLEdBQUwsQ0FBU2pELFdBQVQsR0FBdUJ1RCxHQUF2QjtBQUNIOztBQUVEOzs7Ozs7Ozs7MEJBTWlCQSxHLEVBQUs7QUFDbEIsaUJBQUtILGFBQUwsR0FBcUJHLEdBQXJCO0FBQ0EsaUJBQUtOLEdBQUwsQ0FBU2hELFlBQVQsR0FBd0JzRCxHQUF4QjtBQUNIOzs7Ozs7a0JBR1VQLE8iLCJmaWxlIjoiMTEuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZmx2cGFyc2UgZnJvbSAnLi9mbHYvZmx2UGFyc2UnXG5pbXBvcnQgdGFnZGVtdXggZnJvbSAnLi9mbHYvdGFnZGVtdXgnXG5pbXBvcnQgbXA0cmVtdXggZnJvbSAnLi9tcDQvbXA0cmVtdXgnXG5pbXBvcnQgbXA0bW9vZiBmcm9tICcuL21wNC9tcDRtb29mJ1xuY2xhc3MgZmx2MmZtcDQge1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiBmbHYyZm1wNC5cbiAgICAgKiBjb25maWcg6YeM6Z2i5pyJX2lzTGl2ZeWxnuaApyzmmK/lkKbmmK/nm7Tmkq1cbiAgICAgKiBAcGFyYW0ge2FueX0gY29uZmlnIFxuICAgICAqIFxuICAgICAqIEBtZW1iZXJvZiBmbHYyZm1wNFxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGNvbmZpZykge1xuICAgICAgICB0aGlzLl9jb25maWcgPSB7IF9pc0xpdmU6IGZhbHNlIH07XG4gICAgICAgIHRoaXMuX2NvbmZpZyA9IE9iamVjdC5hc3NpZ24odGhpcy5fY29uZmlnLCBjb25maWcpO1xuXG4gICAgICAgIC8v5aSW6YOo5pa55rOV6LWL5YC8XG4gICAgICAgIHRoaXMub25Jbml0U2VnbWVudCA9IG51bGw7XG4gICAgICAgIHRoaXMub25NZWRpYVNlZ21lbnQgPSBudWxsO1xuICAgICAgICB0aGlzLm9uTWVkaWFJbmZvID0gbnVsbDtcbiAgICAgICAgdGhpcy5zZWVrQ2FsbEJhY2sgPSBudWxsO1xuXG5cbiAgICAgICAgLy/lhoXpg6jkvb/nlKhcbiAgICAgICAgdGhpcy5sb2FkbWV0YWRhdGEgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5mdHlwX21vb3YgPSBudWxsO1xuICAgICAgICB0aGlzLm1ldGFTdWNjUnVuID0gZmFsc2U7XG4gICAgICAgIHRoaXMubWV0YXMgPSBbXTtcbiAgICAgICAgdGhpcy5wYXJzZUNodW5rID0gbnVsbDtcbiAgICAgICAgLy/kuLTml7borrDlvZVzZWVr5pe26Ze0XG4gICAgICAgIHRoaXMuX3BlbmRpbmdSZXNvbHZlU2Vla1BvaW50ID0gLTE7XG5cbiAgICAgICAgLy/kuLTml7borrDlvZVmbHbmlbDmja7otbflp4vml7bpl7RcbiAgICAgICAgdGhpcy5fdGVtcEJhc2VUaW1lID0gMDtcblxuXG5cbiAgICAgICAgLy/lpITnkIZmbHbmlbDmja7lhaXlj6NcbiAgICAgICAgdGhpcy5zZXRmbHZCYXNlID0gdGhpcy5zZXRmbHZCYXNlZnJpc3Q7XG5cbiAgICAgICAgdGFnZGVtdXguX29uVHJhY2tNZXRhZGF0YSA9IHRoaXMuTWV0YWRhdGEuYmluZCh0aGlzKTtcbiAgICAgICAgdGFnZGVtdXguX29uTWVkaWFJbmZvID0gdGhpcy5tZXRhU3VjYy5iaW5kKHRoaXMpXG4gICAgICAgIHRhZ2RlbXV4Ll9vbkRhdGFBdmFpbGFibGUgPSB0aGlzLm9uRGF0YUF2YWlsYWJsZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLm00bW9mID0gbmV3IG1wNG1vb2YodGhpcy5fY29uZmlnKVxuICAgICAgICB0aGlzLm00bW9mLm9uTWVkaWFTZWdtZW50ID0gdGhpcy5vbk1kaWFTZWdtZW50LmJpbmQodGhpcyk7XG4gICAgfVxuICAgIHNlZWsoKSB7XG4gICAgICAgIHRoaXMuc2V0Zmx2QmFzZSA9IHRoaXMuc2V0Zmx2QmFzZWZyaXN0O1xuICAgIH1cblxuXG4gICAgLyoqXG4gICAgICog5LiN6KaB5Li75Yqo6LCD55So6L+Z5Liq5o6l5Y+jISEhISEhISEhISEhISEhISEhISEhISEhISEhIVxuICAgICAqIOesrOS4gOasoeaOpeWPl+aVsOaNrizlkoxzZWVr5pe25YCZ5o6l5Y+X5pWw5o2u5YWl5Y+jLFxuICAgICAqIFxuICAgICAqIEBwYXJhbSB7YW55fSBhcnJheWJ1ZmYgXG4gICAgICogQHBhcmFtIHthbnl9IGJhc2VUaW1lIFxuICAgICAqIEByZXR1cm5zIFxuICAgICAqIFxuICAgICAqIEBtZW1iZXJvZiBmbHYyZm1wNFxuICAgICAqL1xuICAgIHNldGZsdkJhc2VmcmlzdChhcnJheWJ1ZmYsIGJhc2VUaW1lKSB7XG4gICAgICAgIGlmIChiYXNlVGltZSA9PSB1bmRlZmluZWQgfHwgYmFzZVRpbWUgPT0gMCkge1xuICAgICAgICAgICAgYmFzZVRpbWUgPSAwO1xuICAgICAgICAgICAgdGhpcy5fcGVuZGluZ1Jlc29sdmVTZWVrUG9pbnQgPSAtMTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5fdGVtcEJhc2VUaW1lICE9IGJhc2VUaW1lKSB7XG4gICAgICAgICAgICB0aGlzLl90ZW1wQmFzZVRpbWUgPSBiYXNlVGltZTtcbiAgICAgICAgICAgIHRhZ2RlbXV4Ll90aW1lc3RhbXBCYXNlID0gYmFzZVRpbWU7XG4gICAgICAgICAgICB0aGlzLm00bW9mLnNlZWsoYmFzZVRpbWUpO1xuICAgICAgICAgICAgdGhpcy5tNG1vZi5pbnNlcnREaXNjb250aW51aXR5KCk7XG4gICAgICAgICAgICB0aGlzLl9wZW5kaW5nUmVzb2x2ZVNlZWtQb2ludCA9IGJhc2VUaW1lO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IG9mZnNldCA9IGZsdnBhcnNlLnNldEZsdihuZXcgVWludDhBcnJheShhcnJheWJ1ZmYpKTtcblxuICAgICAgICBpZiAoZmx2cGFyc2UuYXJyVGFnLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGlmICh0aGlzLl90ZW1wQmFzZVRpbWUgIT0gMCAmJiB0aGlzLl90ZW1wQmFzZVRpbWUgPT0gZmx2cGFyc2UuYXJyVGFnWzBdLmdldFRpbWUoKSkge1xuICAgICAgICAgICAgICAgIHRhZ2RlbXV4Ll90aW1lc3RhbXBCYXNlID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRhZ2RlbXV4Lm1vb2ZUYWcoZmx2cGFyc2UuYXJyVGFnKTtcbiAgICAgICAgICAgIHRoaXMuc2V0Zmx2QmFzZSA9IHRoaXMuc2V0Zmx2QmFzZVVzdWFsbHk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gb2Zmc2V0O1xuICAgIH1cblxuXG4gICAgLyoqXG4gICAgICog5LiN6KaB5Li75Yqo6LCD55So6L+Z5Liq5o6l5Y+jISEhISEhISEhISEhISEhISEhISEhISEhISEhIVxuICAgICAqIOWQjue7reaOpeWPl+aVsOaNruaOpeWPo1xuICAgICAqIEBwYXJhbSB7YW55fSBhcnJheWJ1ZmYgXG4gICAgICogQHBhcmFtIHthbnl9IGJhc2VUaW1lIFxuICAgICAqIEByZXR1cm5zIFxuICAgICAqIFxuICAgICAqIEBtZW1iZXJvZiBmbHYyZm1wNFxuICAgICAqL1xuICAgIHNldGZsdkJhc2VVc3VhbGx5KGFycmF5YnVmZiwgYmFzZVRpbWUpIHtcbiAgICAgICAgbGV0IG9mZnNldCA9IGZsdnBhcnNlLnNldEZsdihuZXcgVWludDhBcnJheShhcnJheWJ1ZmYpKTtcblxuXG4gICAgICAgIGlmIChmbHZwYXJzZS5hcnJUYWcubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgdGFnZGVtdXgubW9vZlRhZyhmbHZwYXJzZS5hcnJUYWcpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG9mZnNldDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiDkuI3opoHkuLvliqjosIPnlKjov5nkuKrmjqXlj6MhISEhISEhISEhISEhISEhISEhISEhISEhISEhXG4gICAgICogbW9vZuWbnuiwg1xuICAgICAqIFxuICAgICAqIEBwYXJhbSB7YW55fSB0cmFjayBcbiAgICAgKiBAcGFyYW0ge2FueX0gdmFsdWUgXG4gICAgICogXG4gICAgICogQG1lbWJlcm9mIGZsdjJmbXA0XG4gICAgICovXG4gICAgb25NZGlhU2VnbWVudCh0cmFjaywgdmFsdWUpIHtcblxuICAgICAgICBpZiAodGhpcy5vbk1lZGlhU2VnbWVudCkge1xuICAgICAgICAgICAgdGhpcy5vbk1lZGlhU2VnbWVudChuZXcgVWludDhBcnJheSh2YWx1ZS5kYXRhKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuX3BlbmRpbmdSZXNvbHZlU2Vla1BvaW50ICE9IC0xICYmIHRyYWNrID09ICd2aWRlbycpIHtcbiAgICAgICAgICAgIGxldCBzZWVrcG9pbnQgPSB0aGlzLl9wZW5kaW5nUmVzb2x2ZVNlZWtQb2ludDtcbiAgICAgICAgICAgIHRoaXMuX3BlbmRpbmdSZXNvbHZlU2Vla1BvaW50ID0gLTE7XG4gICAgICAgICAgICBpZiAodGhpcy5zZWVrQ2FsbEJhY2spIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNlZWtDYWxsQmFjayhzZWVrcG9pbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG5cbiAgICAvKipcbiAgICAgKiBcbiAgICAgKiDpn7PpopHlkozop4bpopHnmoTliJ3lp4vljJZ0YWdcbiAgICAgKiBcbiAgICAgKiBAcGFyYW0ge2FueX0gdHlwZSBcbiAgICAgKiBAcGFyYW0ge2FueX0gbWV0YSBcbiAgICAgKiBcbiAgICAgKiBAbWVtYmVyb2YgZmx2MmZtcDRcbiAgICAgKi9cbiAgICBNZXRhZGF0YSh0eXBlLCBtZXRhKSB7XG4gICAgICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICAgICAgY2FzZSAndmlkZW8nOlxuICAgICAgICAgICAgICAgIHRoaXMubWV0YXMucHVzaChtZXRhKTtcbiAgICAgICAgICAgICAgICB0aGlzLm00bW9mLl92aWRlb01ldGEgPSBtZXRhO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnYXVkaW8nOlxuICAgICAgICAgICAgICAgIHRoaXMubWV0YXMucHVzaChtZXRhKTtcbiAgICAgICAgICAgICAgICB0aGlzLm00bW9mLl9hdWRpb01ldGEgPSBtZXRhO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLm1ldGFTdWNjUnVuICYmIHRoaXMubWV0YXMubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgdGhpcy5tZXRhU3VjYygpO1xuICAgICAgICB9XG4gICAgfVxuXG5cbiAgICAvKipcbiAgICAgKiBtZXRhZGF0Yeino+ivu+aIkOWKn+WQjuinpuWPkeWPiuesrOS4gOS4quinhumikXRhZ+WSjOesrOS4gOS4qumfs+mikXRhZ1xuICAgICAqIFxuICAgICAqIEBwYXJhbSB7YW55fSBtaSBcbiAgICAgKiBAcmV0dXJucyBcbiAgICAgKiBcbiAgICAgKiBAbWVtYmVyb2YgZmx2MmZtcDRcbiAgICAgKi9cbiAgICBtZXRhU3VjYyhtaSkge1xuICAgICAgICBpZiAodGhpcy5vbk1lZGlhSW5mbykge1xuICAgICAgICAgICAgdGhpcy5vbk1lZGlhSW5mbyhtaSk7XG4gICAgICAgIH1cbiAgICAgICAgLy/ojrflj5ZmdHlw5ZKMbW9vdlxuICAgICAgICBpZiAodGhpcy5tZXRhcy5sZW5ndGggPT0gMCkge1xuICAgICAgICAgICAgdGhpcy5tZXRhU3VjY1J1biA9IHRydWU7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmZ0eXBfbW9vdiA9IG1wNHJlbXV4LmdlbmVyYXRlSW5pdFNlZ21lbnQodGhpcy5tZXRhcyk7XG4gICAgICAgIGlmICh0aGlzLm9uSW5pdFNlZ21lbnQgJiYgdGhpcy5sb2FkbWV0YWRhdGEgPT0gZmFsc2UpIHtcblxuICAgICAgICAgICAgdGhpcy5vbkluaXRTZWdtZW50KHRoaXMuZnR5cF9tb292KTtcbiAgICAgICAgICAgIHRoaXMubG9hZG1ldGFkYXRhID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIG9uRGF0YUF2YWlsYWJsZShhdWRpb3RyYWNrLCB2aWRlb3RyYWNrKSB7XG4gICAgICAgIHRoaXMubTRtb2YucmVtdXgoYXVkaW90cmFjaywgdmlkZW90cmFjayk7XG4gICAgfVxuXG5cbiAgICAvKipcbiAgICAgKiDkvKDlhaVmbHbnmoTkuozov5vliLbmlbDmja5cbiAgICAgKiDnu5/kuIDlhaXlj6NcbiAgICAgKiBAcGFyYW0ge2FueX0gYXJyYXlidWZmIFxuICAgICAqIEBwYXJhbSB7YW55fSBiYXNlVGltZSBmbHbmlbDmja7lvIDlp4vml7bpl7RcbiAgICAgKiBAcmV0dXJucyBcbiAgICAgKiBcbiAgICAgKiBAbWVtYmVyb2YgZmx2MmZtcDRcbiAgICAgKi9cbiAgICBzZXRmbHYoYXJyYXlidWZmLCBiYXNlVGltZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZXRmbHZCYXNlKGFycmF5YnVmZiwgYmFzZVRpbWUpO1xuICAgIH1cblxuXG4gICAgLyoqXG4gICAgICogXG4gICAgICog5pys5Zyw6LCD6K+V5Luj56CBLOS4jeeUqOeQhuS8mlxuICAgICAqIEBwYXJhbSB7YW55fSBhcnJheWJ1ZmYgXG4gICAgICogQHJldHVybnMgXG4gICAgICogXG4gICAgICogQG1lbWJlcm9mIGZsdjJmbXA0XG4gICAgICovXG4gICAgc2V0Zmx2bG9jKGFycmF5YnVmZikge1xuICAgICAgICBsZXQgb2Zmc2V0ID0gZmx2cGFyc2Uuc2V0Rmx2KG5ldyBVaW50OEFycmF5KGFycmF5YnVmZikpO1xuXG5cbiAgICAgICAgaWYgKGZsdnBhcnNlLmFyclRhZy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICByZXR1cm4gZmx2cGFyc2UuYXJyVGFnO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5cblxuLyoqXG4gKiDlsIHoo4XnmoTlr7nlpJbnsbss5pyJ5Lqb5pa55rOV5LiN5oOz5a+55aSW5pq06ZyyLOaJgOS7peWwgeijhei/meS5iOS4gOS4quexu1xuICogXG4gKiBAY2xhc3MgZm9yZWlnblxuICovXG5jbGFzcyBmb3JlaWduIHtcbiAgICBjb25zdHJ1Y3Rvcihjb25maWcpIHtcblxuICAgICAgICB0aGlzLmYybSA9IG5ldyBmbHYyZm1wNChjb25maWcpO1xuICAgICAgICAvL+WklumDqOaWueazlei1i+WAvFxuICAgICAgICB0aGlzLl9vbkluaXRTZWdtZW50ID0gbnVsbDtcbiAgICAgICAgdGhpcy5fb25NZWRpYVNlZ21lbnQgPSBudWxsO1xuICAgICAgICB0aGlzLl9vbk1lZGlhSW5mbyA9IG51bGw7XG4gICAgICAgIHRoaXMuX3NlZWtDYWxsQmFjayA9IG51bGw7XG4gICAgfVxuXG5cbiAgICAvKipcbiAgICAgKiBcbiAgICAgKiDot7PovaxcbiAgICAgKiBcbiAgICAgKiBAbWVtYmVyb2YgZm9yZWlnblxuICAgICAqL1xuICAgIHNlZWsoKSB7XG4gICAgICAgIHRoaXMuZjJtLnNlZWsoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiDkvKDlhaVmbHbnmoTkuozov5vliLbmlbDmja5cbiAgICAgKiDnu5/kuIDlhaXlj6NcbiAgICAgKiBAcGFyYW0ge2FueX0gYXJyYXlidWZmIFxuICAgICAqIEBwYXJhbSB7YW55fSBiYXNlVGltZSBmbHbmlbDmja7lvIDlp4vml7bpl7RcbiAgICAgKiBAcmV0dXJucyBcbiAgICAgKiBcbiAgICAgKiBAbWVtYmVyb2YgZmx2MmZtcDRcbiAgICAgKi9cbiAgICBzZXRmbHYoYXJyYXlidWZmLCBiYXNlVGltZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5mMm0uc2V0Zmx2KGFycmF5YnVmZiwgYmFzZVRpbWUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFxuICAgICAqIOacrOWcsOiwg+ivleS7o+eggSzkuI3nlKjnkIbkvJpcbiAgICAgKiBAcGFyYW0ge2FueX0gYXJyYXlidWZmIFxuICAgICAqIEByZXR1cm5zIFxuICAgICAqIFxuICAgICAqIEBtZW1iZXJvZiBmbHYyZm1wNFxuICAgICAqL1xuICAgIHNldGZsdmxvYyhhcnJheWJ1ZmYpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZjJtLnNldGZsdmxvYyhhcnJheWJ1ZmYpO1xuICAgIH1cblxuXG4gICAgLyoqXG4gICAgICog6LWL5YC85Yid5aeL5YyWc2Vn5o6l5Y+X5pa55rOVXG4gICAgICogXG4gICAgICogXG4gICAgICogQG1lbWJlcm9mIGZvcmVpZ25cbiAgICAgKi9cbiAgICBzZXQgb25Jbml0U2VnbWVudChmdW4pIHtcbiAgICAgICAgdGhpcy5fb25Jbml0U2VnbWVudCA9IGZ1bjtcbiAgICAgICAgdGhpcy5mMm0ub25Jbml0U2VnbWVudCA9IGZ1bjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiDotYvlgLxtb29m5o6l5Y+X5pa55rOVXG4gICAgICogXG4gICAgICogXG4gICAgICogQG1lbWJlcm9mIGZvcmVpZ25cbiAgICAgKi9cbiAgICBzZXQgb25NZWRpYVNlZ21lbnQoZnVuKSB7XG4gICAgICAgIHRoaXMuX29uTWVkaWFTZWdtZW50ID0gZnVuO1xuICAgICAgICB0aGlzLmYybS5vbk1lZGlhU2VnbWVudCA9IGZ1bjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiDotYvlgLxtZXRhZGF0YeaOpeWPl+aWueazlVxuICAgICAqIFxuICAgICAqIFxuICAgICAqIEBtZW1iZXJvZiBmb3JlaWduXG4gICAgICovXG4gICAgc2V0IG9uTWVkaWFJbmZvKGZ1bikge1xuICAgICAgICB0aGlzLl9vbk1lZGlhSW5mbyA9IGZ1bjtcbiAgICAgICAgdGhpcy5mMm0ub25NZWRpYUluZm8gPSBmdW47XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICog6LWL5YC85piv5ZCm6Lez6L2s5Zue6LCD5o6l5Y+X5pa55rOVXG4gICAgICogXG4gICAgICogXG4gICAgICogQG1lbWJlcm9mIGZvcmVpZ25cbiAgICAgKi9cbiAgICBzZXQgc2Vla0NhbGxCYWNrKGZ1bikge1xuICAgICAgICB0aGlzLl9zZWVrQ2FsbEJhY2sgPSBmdW47XG4gICAgICAgIHRoaXMuZjJtLnNlZWtDYWxsQmFjayA9IGZ1bjtcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZvcmVpZ247XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vanMvZmx2MmZtcDQuanMiXSwic291cmNlUm9vdCI6IiJ9");

/***/ }),
/* 12 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/*\n * Copyright (C) 2016 Bilibili. All Rights Reserved.\n *\n * This file is modified from dailymotion's hls.js library (hls.js/src/helper/aac.js)\n * @author zheng qian <xqq@xqq.im>\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nvar AAC = function () {\n    function AAC() {\n        _classCallCheck(this, AAC);\n    }\n\n    _createClass(AAC, null, [{\n        key: \"getSilentFrame\",\n        value: function getSilentFrame(channelCount) {\n            if (channelCount === 1) {\n                return new Uint8Array([0x00, 0xc8, 0x00, 0x80, 0x23, 0x80]);\n            } else if (channelCount === 2) {\n                return new Uint8Array([0x21, 0x00, 0x49, 0x90, 0x02, 0x19, 0x00, 0x23, 0x80]);\n            } else if (channelCount === 3) {\n                return new Uint8Array([0x00, 0xc8, 0x00, 0x80, 0x20, 0x84, 0x01, 0x26, 0x40, 0x08, 0x64, 0x00, 0x8e]);\n            } else if (channelCount === 4) {\n                return new Uint8Array([0x00, 0xc8, 0x00, 0x80, 0x20, 0x84, 0x01, 0x26, 0x40, 0x08, 0x64, 0x00, 0x80, 0x2c, 0x80, 0x08, 0x02, 0x38]);\n            } else if (channelCount === 5) {\n                return new Uint8Array([0x00, 0xc8, 0x00, 0x80, 0x20, 0x84, 0x01, 0x26, 0x40, 0x08, 0x64, 0x00, 0x82, 0x30, 0x04, 0x99, 0x00, 0x21, 0x90, 0x02, 0x38]);\n            } else if (channelCount === 6) {\n                return new Uint8Array([0x00, 0xc8, 0x00, 0x80, 0x20, 0x84, 0x01, 0x26, 0x40, 0x08, 0x64, 0x00, 0x82, 0x30, 0x04, 0x99, 0x00, 0x21, 0x90, 0x02, 0x00, 0xb2, 0x00, 0x20, 0x08, 0xe0]);\n            }\n            return null;\n        }\n    }]);\n\n    return AAC;\n}();\n\nexports.default = AAC;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9qcy9tcDQvYWFjLXNpbGVudC5qcz84YWU3Il0sIm5hbWVzIjpbIkFBQyIsImNoYW5uZWxDb3VudCIsIlVpbnQ4QXJyYXkiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7OztJQW1CTUEsRzs7Ozs7Ozt1Q0FFb0JDLFksRUFBYztBQUNoQyxnQkFBSUEsaUJBQWlCLENBQXJCLEVBQXdCO0FBQ3BCLHVCQUFPLElBQUlDLFVBQUosQ0FBZSxDQUFDLElBQUQsRUFBTyxJQUFQLEVBQWEsSUFBYixFQUFtQixJQUFuQixFQUF5QixJQUF6QixFQUErQixJQUEvQixDQUFmLENBQVA7QUFDSCxhQUZELE1BRU8sSUFBSUQsaUJBQWlCLENBQXJCLEVBQXdCO0FBQzNCLHVCQUFPLElBQUlDLFVBQUosQ0FBZSxDQUFDLElBQUQsRUFBTyxJQUFQLEVBQWEsSUFBYixFQUFtQixJQUFuQixFQUF5QixJQUF6QixFQUErQixJQUEvQixFQUFxQyxJQUFyQyxFQUEyQyxJQUEzQyxFQUFpRCxJQUFqRCxDQUFmLENBQVA7QUFDSCxhQUZNLE1BRUEsSUFBSUQsaUJBQWlCLENBQXJCLEVBQXdCO0FBQzNCLHVCQUFPLElBQUlDLFVBQUosQ0FBZSxDQUFDLElBQUQsRUFBTyxJQUFQLEVBQWEsSUFBYixFQUFtQixJQUFuQixFQUF5QixJQUF6QixFQUErQixJQUEvQixFQUFxQyxJQUFyQyxFQUEyQyxJQUEzQyxFQUFpRCxJQUFqRCxFQUF1RCxJQUF2RCxFQUE2RCxJQUE3RCxFQUFtRSxJQUFuRSxFQUF5RSxJQUF6RSxDQUFmLENBQVA7QUFDSCxhQUZNLE1BRUEsSUFBSUQsaUJBQWlCLENBQXJCLEVBQXdCO0FBQzNCLHVCQUFPLElBQUlDLFVBQUosQ0FBZSxDQUFDLElBQUQsRUFBTyxJQUFQLEVBQWEsSUFBYixFQUFtQixJQUFuQixFQUF5QixJQUF6QixFQUErQixJQUEvQixFQUFxQyxJQUFyQyxFQUEyQyxJQUEzQyxFQUFpRCxJQUFqRCxFQUF1RCxJQUF2RCxFQUE2RCxJQUE3RCxFQUFtRSxJQUFuRSxFQUF5RSxJQUF6RSxFQUErRSxJQUEvRSxFQUFxRixJQUFyRixFQUEyRixJQUEzRixFQUFpRyxJQUFqRyxFQUF1RyxJQUF2RyxDQUFmLENBQVA7QUFDSCxhQUZNLE1BRUEsSUFBSUQsaUJBQWlCLENBQXJCLEVBQXdCO0FBQzNCLHVCQUFPLElBQUlDLFVBQUosQ0FBZSxDQUFDLElBQUQsRUFBTyxJQUFQLEVBQWEsSUFBYixFQUFtQixJQUFuQixFQUF5QixJQUF6QixFQUErQixJQUEvQixFQUFxQyxJQUFyQyxFQUEyQyxJQUEzQyxFQUFpRCxJQUFqRCxFQUF1RCxJQUF2RCxFQUE2RCxJQUE3RCxFQUFtRSxJQUFuRSxFQUF5RSxJQUF6RSxFQUErRSxJQUEvRSxFQUFxRixJQUFyRixFQUEyRixJQUEzRixFQUFpRyxJQUFqRyxFQUF1RyxJQUF2RyxFQUE2RyxJQUE3RyxFQUFtSCxJQUFuSCxFQUF5SCxJQUF6SCxDQUFmLENBQVA7QUFDSCxhQUZNLE1BRUEsSUFBSUQsaUJBQWlCLENBQXJCLEVBQXdCO0FBQzNCLHVCQUFPLElBQUlDLFVBQUosQ0FBZSxDQUFDLElBQUQsRUFBTyxJQUFQLEVBQWEsSUFBYixFQUFtQixJQUFuQixFQUF5QixJQUF6QixFQUErQixJQUEvQixFQUFxQyxJQUFyQyxFQUEyQyxJQUEzQyxFQUFpRCxJQUFqRCxFQUF1RCxJQUF2RCxFQUE2RCxJQUE3RCxFQUFtRSxJQUFuRSxFQUF5RSxJQUF6RSxFQUErRSxJQUEvRSxFQUFxRixJQUFyRixFQUEyRixJQUEzRixFQUFpRyxJQUFqRyxFQUF1RyxJQUF2RyxFQUE2RyxJQUE3RyxFQUFtSCxJQUFuSCxFQUF5SCxJQUF6SCxFQUErSCxJQUEvSCxFQUFxSSxJQUFySSxFQUEySSxJQUEzSSxFQUFpSixJQUFqSixFQUF1SixJQUF2SixDQUFmLENBQVA7QUFDSDtBQUNELG1CQUFPLElBQVA7QUFDSDs7Ozs7O2tCQUlVRixHIiwiZmlsZSI6IjEyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLypcbiAqIENvcHlyaWdodCAoQykgMjAxNiBCaWxpYmlsaS4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBUaGlzIGZpbGUgaXMgbW9kaWZpZWQgZnJvbSBkYWlseW1vdGlvbidzIGhscy5qcyBsaWJyYXJ5IChobHMuanMvc3JjL2hlbHBlci9hYWMuanMpXG4gKiBAYXV0aG9yIHpoZW5nIHFpYW4gPHhxcUB4cXEuaW0+XG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmNsYXNzIEFBQyB7XG5cbiAgICBzdGF0aWMgZ2V0U2lsZW50RnJhbWUoY2hhbm5lbENvdW50KSB7XG4gICAgICAgIGlmIChjaGFubmVsQ291bnQgPT09IDEpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgVWludDhBcnJheShbMHgwMCwgMHhjOCwgMHgwMCwgMHg4MCwgMHgyMywgMHg4MF0pO1xuICAgICAgICB9IGVsc2UgaWYgKGNoYW5uZWxDb3VudCA9PT0gMikge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBVaW50OEFycmF5KFsweDIxLCAweDAwLCAweDQ5LCAweDkwLCAweDAyLCAweDE5LCAweDAwLCAweDIzLCAweDgwXSk7XG4gICAgICAgIH0gZWxzZSBpZiAoY2hhbm5lbENvdW50ID09PSAzKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFVpbnQ4QXJyYXkoWzB4MDAsIDB4YzgsIDB4MDAsIDB4ODAsIDB4MjAsIDB4ODQsIDB4MDEsIDB4MjYsIDB4NDAsIDB4MDgsIDB4NjQsIDB4MDAsIDB4OGVdKTtcbiAgICAgICAgfSBlbHNlIGlmIChjaGFubmVsQ291bnQgPT09IDQpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgVWludDhBcnJheShbMHgwMCwgMHhjOCwgMHgwMCwgMHg4MCwgMHgyMCwgMHg4NCwgMHgwMSwgMHgyNiwgMHg0MCwgMHgwOCwgMHg2NCwgMHgwMCwgMHg4MCwgMHgyYywgMHg4MCwgMHgwOCwgMHgwMiwgMHgzOF0pO1xuICAgICAgICB9IGVsc2UgaWYgKGNoYW5uZWxDb3VudCA9PT0gNSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBVaW50OEFycmF5KFsweDAwLCAweGM4LCAweDAwLCAweDgwLCAweDIwLCAweDg0LCAweDAxLCAweDI2LCAweDQwLCAweDA4LCAweDY0LCAweDAwLCAweDgyLCAweDMwLCAweDA0LCAweDk5LCAweDAwLCAweDIxLCAweDkwLCAweDAyLCAweDM4XSk7XG4gICAgICAgIH0gZWxzZSBpZiAoY2hhbm5lbENvdW50ID09PSA2KSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFVpbnQ4QXJyYXkoWzB4MDAsIDB4YzgsIDB4MDAsIDB4ODAsIDB4MjAsIDB4ODQsIDB4MDEsIDB4MjYsIDB4NDAsIDB4MDgsIDB4NjQsIDB4MDAsIDB4ODIsIDB4MzAsIDB4MDQsIDB4OTksIDB4MDAsIDB4MjEsIDB4OTAsIDB4MDIsIDB4MDAsIDB4YjIsIDB4MDAsIDB4MjAsIDB4MDgsIDB4ZTBdKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbn1cblxuZXhwb3J0IGRlZmF1bHQgQUFDO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2pzL21wNC9hYWMtc2lsZW50LmpzIl0sInNvdXJjZVJvb3QiOiIifQ==");

/***/ }),
/* 13 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/*\n * Copyright (C) 2016 Bilibili. All Rights Reserved.\n *\n * @author zheng qian <xqq@xqq.im>\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n// Represents an media sample (audio / video)\nvar SampleInfo = exports.SampleInfo = function SampleInfo(dts, pts, duration, originalDts, isSync) {\n    _classCallCheck(this, SampleInfo);\n\n    this.dts = dts;\n    this.pts = pts;\n    this.duration = duration;\n    this.originalDts = originalDts;\n    this.isSyncPoint = isSync;\n    this.fileposition = null;\n};\n\n// Media Segment concept is defined in Media Source Extensions spec.\n// Particularly in ISO BMFF format, an Media Segment contains a moof box followed by a mdat box.\n\n\nvar MediaSegmentInfo = exports.MediaSegmentInfo = function () {\n    function MediaSegmentInfo() {\n        _classCallCheck(this, MediaSegmentInfo);\n\n        this.beginDts = 0;\n        this.endDts = 0;\n        this.beginPts = 0;\n        this.endPts = 0;\n        this.originalBeginDts = 0;\n        this.originalEndDts = 0;\n        this.syncPoints = []; // SampleInfo[n], for video IDR frames only\n        this.firstSample = null; // SampleInfo\n        this.lastSample = null; // SampleInfo\n    }\n\n    _createClass(MediaSegmentInfo, [{\n        key: \"appendSyncPoint\",\n        value: function appendSyncPoint(sampleInfo) {\n            // also called Random Access Point\n            sampleInfo.isSyncPoint = true;\n            this.syncPoints.push(sampleInfo);\n        }\n    }]);\n\n    return MediaSegmentInfo;\n}();\n\n// Ordered list for recording video IDR frames, sorted by originalDts\n\n\nvar IDRSampleList = exports.IDRSampleList = function () {\n    function IDRSampleList() {\n        _classCallCheck(this, IDRSampleList);\n\n        this._list = [];\n    }\n\n    _createClass(IDRSampleList, [{\n        key: \"clear\",\n        value: function clear() {\n            this._list = [];\n        }\n    }, {\n        key: \"appendArray\",\n        value: function appendArray(syncPoints) {\n            var list = this._list;\n\n            if (syncPoints.length === 0) {\n                return;\n            }\n\n            if (list.length > 0 && syncPoints[0].originalDts < list[list.length - 1].originalDts) {\n                this.clear();\n            }\n\n            Array.prototype.push.apply(list, syncPoints);\n        }\n    }, {\n        key: \"getLastSyncPointBeforeDts\",\n        value: function getLastSyncPointBeforeDts(dts) {\n            if (this._list.length == 0) {\n                return null;\n            }\n\n            var list = this._list;\n            var idx = 0;\n            var last = list.length - 1;\n            var mid = 0;\n            var lbound = 0;\n            var ubound = last;\n\n            if (dts < list[0].dts) {\n                idx = 0;\n                lbound = ubound + 1;\n            }\n\n            while (lbound <= ubound) {\n                mid = lbound + Math.floor((ubound - lbound) / 2);\n                if (mid === last || dts >= list[mid].dts && dts < list[mid + 1].dts) {\n                    idx = mid;\n                    break;\n                } else if (list[mid].dts < dts) {\n                    lbound = mid + 1;\n                } else {\n                    ubound = mid - 1;\n                }\n            }\n            return this._list[idx];\n        }\n    }]);\n\n    return IDRSampleList;\n}();\n\n// Data structure for recording information of media segments in single track.\n\n\nvar MediaSegmentInfoList = exports.MediaSegmentInfoList = function () {\n    function MediaSegmentInfoList(type) {\n        _classCallCheck(this, MediaSegmentInfoList);\n\n        this._type = type;\n        this._list = [];\n        this._lastAppendLocation = -1; // cached last insert location\n    }\n\n    _createClass(MediaSegmentInfoList, [{\n        key: \"isEmpty\",\n        value: function isEmpty() {\n            return this._list.length === 0;\n        }\n    }, {\n        key: \"clear\",\n        value: function clear() {\n            this._list = [];\n            this._lastAppendLocation = -1;\n        }\n    }, {\n        key: \"_searchNearestSegmentBefore\",\n        value: function _searchNearestSegmentBefore(originalBeginDts) {\n            var list = this._list;\n            if (list.length === 0) {\n                return -2;\n            }\n            var last = list.length - 1;\n            var mid = 0;\n            var lbound = 0;\n            var ubound = last;\n\n            var idx = 0;\n\n            if (originalBeginDts < list[0].originalBeginDts) {\n                idx = -1;\n                return idx;\n            }\n\n            while (lbound <= ubound) {\n                mid = lbound + Math.floor((ubound - lbound) / 2);\n                if (mid === last || originalBeginDts > list[mid].lastSample.originalDts && originalBeginDts < list[mid + 1].originalBeginDts) {\n                    idx = mid;\n                    break;\n                } else if (list[mid].originalBeginDts < originalBeginDts) {\n                    lbound = mid + 1;\n                } else {\n                    ubound = mid - 1;\n                }\n            }\n            return idx;\n        }\n    }, {\n        key: \"_searchNearestSegmentAfter\",\n        value: function _searchNearestSegmentAfter(originalBeginDts) {\n            return this._searchNearestSegmentBefore(originalBeginDts) + 1;\n        }\n    }, {\n        key: \"append\",\n        value: function append(mediaSegmentInfo) {\n            var list = this._list;\n            var msi = mediaSegmentInfo;\n            var lastAppendIdx = this._lastAppendLocation;\n            var insertIdx = 0;\n\n            if (lastAppendIdx !== -1 && lastAppendIdx < list.length && msi.originalBeginDts >= list[lastAppendIdx].lastSample.originalDts && (lastAppendIdx === list.length - 1 || lastAppendIdx < list.length - 1 && msi.originalBeginDts < list[lastAppendIdx + 1].originalBeginDts)) {\n                insertIdx = lastAppendIdx + 1; // use cached location idx\n            } else {\n                if (list.length > 0) {\n                    insertIdx = this._searchNearestSegmentBefore(msi.originalBeginDts) + 1;\n                }\n            }\n\n            this._lastAppendLocation = insertIdx;\n            this._list.splice(insertIdx, 0, msi);\n        }\n    }, {\n        key: \"getLastSegmentBefore\",\n        value: function getLastSegmentBefore(originalBeginDts) {\n            var idx = this._searchNearestSegmentBefore(originalBeginDts);\n            if (idx >= 0) {\n                return this._list[idx];\n            } else {\n                // -1\n                return null;\n            }\n        }\n    }, {\n        key: \"getLastSampleBefore\",\n        value: function getLastSampleBefore(originalBeginDts) {\n            var segment = this.getLastSegmentBefore(originalBeginDts);\n            if (segment != null) {\n                return segment.lastSample;\n            } else {\n                return null;\n            }\n        }\n    }, {\n        key: \"getLastSyncPointBefore\",\n        value: function getLastSyncPointBefore(originalBeginDts) {\n            var segmentIdx = this._searchNearestSegmentBefore(originalBeginDts);\n            var syncPoints = this._list[segmentIdx].syncPoints;\n            while (syncPoints.length === 0 && segmentIdx > 0) {\n                segmentIdx--;\n                syncPoints = this._list[segmentIdx].syncPoints;\n            }\n            if (syncPoints.length > 0) {\n                return syncPoints[syncPoints.length - 1];\n            } else {\n                return null;\n            }\n        }\n    }, {\n        key: \"type\",\n        get: function get() {\n            return this._type;\n        }\n    }, {\n        key: \"length\",\n        get: function get() {\n            return this._list.length;\n        }\n    }]);\n\n    return MediaSegmentInfoList;\n}();//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9qcy9tcDQvbWVkaWEtc2VnbWVudC1pbmZvLmpzP2MyZmIiXSwibmFtZXMiOlsiU2FtcGxlSW5mbyIsImR0cyIsInB0cyIsImR1cmF0aW9uIiwib3JpZ2luYWxEdHMiLCJpc1N5bmMiLCJpc1N5bmNQb2ludCIsImZpbGVwb3NpdGlvbiIsIk1lZGlhU2VnbWVudEluZm8iLCJiZWdpbkR0cyIsImVuZER0cyIsImJlZ2luUHRzIiwiZW5kUHRzIiwib3JpZ2luYWxCZWdpbkR0cyIsIm9yaWdpbmFsRW5kRHRzIiwic3luY1BvaW50cyIsImZpcnN0U2FtcGxlIiwibGFzdFNhbXBsZSIsInNhbXBsZUluZm8iLCJwdXNoIiwiSURSU2FtcGxlTGlzdCIsIl9saXN0IiwibGlzdCIsImxlbmd0aCIsImNsZWFyIiwiQXJyYXkiLCJwcm90b3R5cGUiLCJhcHBseSIsImlkeCIsImxhc3QiLCJtaWQiLCJsYm91bmQiLCJ1Ym91bmQiLCJNYXRoIiwiZmxvb3IiLCJNZWRpYVNlZ21lbnRJbmZvTGlzdCIsInR5cGUiLCJfdHlwZSIsIl9sYXN0QXBwZW5kTG9jYXRpb24iLCJfc2VhcmNoTmVhcmVzdFNlZ21lbnRCZWZvcmUiLCJtZWRpYVNlZ21lbnRJbmZvIiwibXNpIiwibGFzdEFwcGVuZElkeCIsImluc2VydElkeCIsInNwbGljZSIsInNlZ21lbnQiLCJnZXRMYXN0U2VnbWVudEJlZm9yZSIsInNlZ21lbnRJZHgiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBa0JBO0lBQ2FBLFUsV0FBQUEsVSxHQUVULG9CQUFZQyxHQUFaLEVBQWlCQyxHQUFqQixFQUFzQkMsUUFBdEIsRUFBZ0NDLFdBQWhDLEVBQTZDQyxNQUE3QyxFQUFxRDtBQUFBOztBQUNqRCxTQUFLSixHQUFMLEdBQVdBLEdBQVg7QUFDQSxTQUFLQyxHQUFMLEdBQVdBLEdBQVg7QUFDQSxTQUFLQyxRQUFMLEdBQWdCQSxRQUFoQjtBQUNBLFNBQUtDLFdBQUws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ZSxPQUFPLENBQVgsRUFBYztBQUNWLHVCQUFPLEtBQUtQLEtBQUwsQ0FBV08sR0FBWCxDQUFQO0FBQ0gsYUFGRCxNQUVPO0FBQUU7QUFDTCx1QkFBTyxJQUFQO0FBQ0g7QUFDSjs7OzRDQUVtQmYsZ0IsRUFBa0I7QUFDbEMsZ0JBQUlnQyxVQUFVLEtBQUtDLG9CQUFMLENBQTBCakMsZ0JBQTFCLENBQWQ7QUFDQSxnQkFBSWdDLFdBQVcsSUFBZixFQUFxQjtBQUNqQix1QkFBT0EsUUFBUTVCLFVBQWY7QUFDSCxhQUZELE1BRU87QUFDSCx1QkFBTyxJQUFQO0FBQ0g7QUFDSjs7OytDQUVzQkosZ0IsRUFBa0I7QUFDckMsZ0JBQUlrQyxhQUFhLEtBQUtSLDJCQUFMLENBQWlDMUIsZ0JBQWpDLENBQWpCO0FBQ0EsZ0JBQUlFLGFBQWEsS0FBS00sS0FBTCxDQUFXMEIsVUFBWCxFQUF1QmhDLFVBQXhDO0FBQ0EsbUJBQU9BLFdBQVdRLE1BQVgsS0FBc0IsQ0FBdEIsSUFBMkJ3QixhQUFhLENBQS9DLEVBQWtEO0FBQzlDQTtBQUNBaEMsNkJBQWEsS0FBS00sS0FBTCxDQUFXMEIsVUFBWCxFQUF1QmhDLFVBQXBDO0FBQ0g7QUFDRCxnQkFBSUEsV0FBV1EsTUFBWCxHQUFvQixDQUF4QixFQUEyQjtBQUN2Qix1QkFBT1IsV0FBV0EsV0FBV1EsTUFBWCxHQUFvQixDQUEvQixDQUFQO0FBQ0gsYUFGRCxNQUVPO0FBQ0gsdUJBQU8sSUFBUDtBQUNIO0FBQ0o7Ozs0QkF6R1U7QUFDUCxtQkFBTyxLQUFLYyxLQUFaO0FBQ0g7Ozs0QkFFWTtBQUNULG1CQUFPLEtBQUtoQixLQUFMLENBQVdFLE1BQWxCO0FBQ0giLCJmaWxlIjoiMTMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuICogQ29weXJpZ2h0IChDKSAyMDE2IEJpbGliaWxpLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIEBhdXRob3IgemhlbmcgcWlhbiA8eHFxQHhxcS5pbT5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuLy8gUmVwcmVzZW50cyBhbiBtZWRpYSBzYW1wbGUgKGF1ZGlvIC8gdmlkZW8pXG5leHBvcnQgY2xhc3MgU2FtcGxlSW5mbyB7XG5cbiAgICBjb25zdHJ1Y3RvcihkdHMsIHB0cywgZHVyYXRpb24sIG9yaWdpbmFsRHRzLCBpc1N5bmMpIHtcbiAgICAgICAgdGhpcy5kdHMgPSBkdHM7XG4gICAgICAgIHRoaXMucHRzID0gcHRzO1xuICAgICAgICB0aGlzLmR1cmF0aW9uID0gZHVyYXRpb247XG4gICAgICAgIHRoaXMub3JpZ2luYWxEdHMgPSBvcmlnaW5hbER0cztcbiAgICAgICAgdGhpcy5pc1N5bmNQb2ludCA9IGlzU3luYztcbiAgICAgICAgdGhpcy5maWxlcG9zaXRpb24gPSBudWxsO1xuICAgIH1cblxufVxuXG4vLyBNZWRpYSBTZWdtZW50IGNvbmNlcHQgaXMgZGVmaW5lZCBpbiBNZWRpYSBTb3VyY2UgRXh0ZW5zaW9ucyBzcGVjLlxuLy8gUGFydGljdWxhcmx5IGluIElTTyBCTUZGIGZvcm1hdCwgYW4gTWVkaWEgU2VnbWVudCBjb250YWlucyBhIG1vb2YgYm94IGZvbGxvd2VkIGJ5IGEgbWRhdCBib3guXG5leHBvcnQgY2xhc3MgTWVkaWFTZWdtZW50SW5mbyB7XG5cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5iZWdpbkR0cyA9IDA7XG4gICAgICAgIHRoaXMuZW5kRHRzID0gMDtcbiAgICAgICAgdGhpcy5iZWdpblB0cyA9IDA7XG4gICAgICAgIHRoaXMuZW5kUHRzID0gMDtcbiAgICAgICAgdGhpcy5vcmlnaW5hbEJlZ2luRHRzID0gMDtcbiAgICAgICAgdGhpcy5vcmlnaW5hbEVuZER0cyA9IDA7XG4gICAgICAgIHRoaXMuc3luY1BvaW50cyA9IFtdOyAvLyBTYW1wbGVJbmZvW25dLCBmb3IgdmlkZW8gSURSIGZyYW1lcyBvbmx5XG4gICAgICAgIHRoaXMuZmlyc3RTYW1wbGUgPSBudWxsOyAvLyBTYW1wbGVJbmZvXG4gICAgICAgIHRoaXMubGFzdFNhbXBsZSA9IG51bGw7IC8vIFNhbXBsZUluZm9cbiAgICB9XG5cbiAgICBhcHBlbmRTeW5jUG9pbnQoc2FtcGxlSW5mbykgeyAvLyBhbHNvIGNhbGxlZCBSYW5kb20gQWNjZXNzIFBvaW50XG4gICAgICAgIHNhbXBsZUluZm8uaXNTeW5jUG9pbnQgPSB0cnVlO1xuICAgICAgICB0aGlzLnN5bmNQb2ludHMucHVzaChzYW1wbGVJbmZvKTtcbiAgICB9XG5cbn1cblxuLy8gT3JkZXJlZCBsaXN0IGZvciByZWNvcmRpbmcgdmlkZW8gSURSIGZyYW1lcywgc29ydGVkIGJ5IG9yaWdpbmFsRHRzXG5leHBvcnQgY2xhc3MgSURSU2FtcGxlTGlzdCB7XG5cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5fbGlzdCA9IFtdO1xuICAgIH1cblxuICAgIGNsZWFyKCkge1xuICAgICAgICB0aGlzLl9saXN0ID0gW107XG4gICAgfVxuXG4gICAgYXBwZW5kQXJyYXkoc3luY1BvaW50cykge1xuICAgICAgICBsZXQgbGlzdCA9IHRoaXMuX2xpc3Q7XG5cbiAgICAgICAgaWYgKHN5bmNQb2ludHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAobGlzdC5sZW5ndGggPiAwICYmIHN5bmNQb2ludHNbMF0ub3JpZ2luYWxEdHMgPCBsaXN0W2xpc3QubGVuZ3RoIC0gMV0ub3JpZ2luYWxEdHMpIHtcbiAgICAgICAgICAgIHRoaXMuY2xlYXIoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIEFycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KGxpc3QsIHN5bmNQb2ludHMpO1xuICAgIH1cblxuICAgIGdldExhc3RTeW5jUG9pbnRCZWZvcmVEdHMoZHRzKSB7XG4gICAgICAgIGlmICh0aGlzLl9saXN0Lmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBsaXN0ID0gdGhpcy5fbGlzdDtcbiAgICAgICAgbGV0IGlkeCA9IDA7XG4gICAgICAgIGxldCBsYXN0ID0gbGlzdC5sZW5ndGggLSAxO1xuICAgICAgICBsZXQgbWlkID0gMDtcbiAgICAgICAgbGV0IGxib3VuZCA9IDA7XG4gICAgICAgIGxldCB1Ym91bmQgPSBsYXN0O1xuXG4gICAgICAgIGlmIChkdHMgPCBsaXN0WzBdLmR0cykge1xuICAgICAgICAgICAgaWR4ID0gMDtcbiAgICAgICAgICAgIGxib3VuZCA9IHVib3VuZCArIDE7XG4gICAgICAgIH1cblxuICAgICAgICB3aGlsZSAobGJvdW5kIDw9IHVib3VuZCkge1xuICAgICAgICAgICAgbWlkID0gbGJvdW5kICsgTWF0aC5mbG9vcigodWJvdW5kIC0gbGJvdW5kKSAvIDIpO1xuICAgICAgICAgICAgaWYgKG1pZCA9PT0gbGFzdCB8fCAoZHRzID49IGxpc3RbbWlkXS5kdHMgJiYgZHRzIDwgbGlzdFttaWQgKyAxXS5kdHMpKSB7XG4gICAgICAgICAgICAgICAgaWR4ID0gbWlkO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChsaXN0W21pZF0uZHRzIDwgZHRzKSB7XG4gICAgICAgICAgICAgICAgbGJvdW5kID0gbWlkICsgMTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdWJvdW5kID0gbWlkIC0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fbGlzdFtpZHhdO1xuICAgIH1cblxufVxuXG4vLyBEYXRhIHN0cnVjdHVyZSBmb3IgcmVjb3JkaW5nIGluZm9ybWF0aW9uIG9mIG1lZGlhIHNlZ21lbnRzIGluIHNpbmdsZSB0cmFjay5cbmV4cG9ydCBjbGFzcyBNZWRpYVNlZ21lbnRJbmZvTGlzdCB7XG5cbiAgICBjb25zdHJ1Y3Rvcih0eXBlKSB7XG4gICAgICAgIHRoaXMuX3R5cGUgPSB0eXBlO1xuICAgICAgICB0aGlzLl9saXN0ID0gW107XG4gICAgICAgIHRoaXMuX2xhc3RBcHBlbmRMb2NhdGlvbiA9IC0xOyAvLyBjYWNoZWQgbGFzdCBpbnNlcnQgbG9jYXRpb25cbiAgICB9XG5cbiAgICBnZXQgdHlwZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3R5cGU7XG4gICAgfVxuXG4gICAgZ2V0IGxlbmd0aCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2xpc3QubGVuZ3RoO1xuICAgIH1cblxuICAgIGlzRW1wdHkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9saXN0Lmxlbmd0aCA9PT0gMDtcbiAgICB9XG5cbiAgICBjbGVhcigpIHtcbiAgICAgICAgdGhpcy5fbGlzdCA9IFtdO1xuICAgICAgICB0aGlzLl9sYXN0QXBwZW5kTG9jYXRpb24gPSAtMTtcbiAgICB9XG5cbiAgICBfc2VhcmNoTmVhcmVzdFNlZ21lbnRCZWZvcmUob3JpZ2luYWxCZWdpbkR0cykge1xuICAgICAgICBsZXQgbGlzdCA9IHRoaXMuX2xpc3Q7XG4gICAgICAgIGlmIChsaXN0Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIC0yO1xuICAgICAgICB9XG4gICAgICAgIGxldCBsYXN0ID0gbGlzdC5sZW5ndGggLSAxO1xuICAgICAgICBsZXQgbWlkID0gMDtcbiAgICAgICAgbGV0IGxib3VuZCA9IDA7XG4gICAgICAgIGxldCB1Ym91bmQgPSBsYXN0O1xuXG4gICAgICAgIGxldCBpZHggPSAwO1xuXG4gICAgICAgIGlmIChvcmlnaW5hbEJlZ2luRHRzIDwgbGlzdFswXS5vcmlnaW5hbEJlZ2luRHRzKSB7XG4gICAgICAgICAgICBpZHggPSAtMTtcbiAgICAgICAgICAgIHJldHVybiBpZHg7XG4gICAgICAgIH1cblxuICAgICAgICB3aGlsZSAobGJvdW5kIDw9IHVib3VuZCkge1xuICAgICAgICAgICAgbWlkID0gbGJvdW5kICsgTWF0aC5mbG9vcigodWJvdW5kIC0gbGJvdW5kKSAvIDIpO1xuICAgICAgICAgICAgaWYgKG1pZCA9PT0gbGFzdCB8fCAob3JpZ2luYWxCZWdpbkR0cyA+IGxpc3RbbWlkXS5sYXN0U2FtcGxlLm9yaWdpbmFsRHRzICYmXG4gICAgICAgICAgICAgICAgICAgIChvcmlnaW5hbEJlZ2luRHRzIDwgbGlzdFttaWQgKyAxXS5vcmlnaW5hbEJlZ2luRHRzKSkpIHtcbiAgICAgICAgICAgICAgICBpZHggPSBtaWQ7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGxpc3RbbWlkXS5vcmlnaW5hbEJlZ2luRHRzIDwgb3JpZ2luYWxCZWdpbkR0cykge1xuICAgICAgICAgICAgICAgIGxib3VuZCA9IG1pZCArIDE7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHVib3VuZCA9IG1pZCAtIDE7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGlkeDtcbiAgICB9XG5cbiAgICBfc2VhcmNoTmVhcmVzdFNlZ21lbnRBZnRlcihvcmlnaW5hbEJlZ2luRHRzKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zZWFyY2hOZWFyZXN0U2VnbWVudEJlZm9yZShvcmlnaW5hbEJlZ2luRHRzKSArIDE7XG4gICAgfVxuXG4gICAgYXBwZW5kKG1lZGlhU2VnbWVudEluZm8pIHtcbiAgICAgICAgbGV0IGxpc3QgPSB0aGlzLl9saXN0O1xuICAgICAgICBsZXQgbXNpID0gbWVkaWFTZWdtZW50SW5mbztcbiAgICAgICAgbGV0IGxhc3RBcHBlbmRJZHggPSB0aGlzLl9sYXN0QXBwZW5kTG9jYXRpb247XG4gICAgICAgIGxldCBpbnNlcnRJZHggPSAwO1xuXG4gICAgICAgIGlmIChsYXN0QXBwZW5kSWR4ICE9PSAtMSAmJiBsYXN0QXBwZW5kSWR4IDwgbGlzdC5sZW5ndGggJiZcbiAgICAgICAgICAgIG1zaS5vcmlnaW5hbEJlZ2luRHRzID49IGxpc3RbbGFzdEFwcGVuZElkeF0ubGFzdFNhbXBsZS5vcmlnaW5hbER0cyAmJlxuICAgICAgICAgICAgKChsYXN0QXBwZW5kSWR4ID09PSBsaXN0Lmxlbmd0aCAtIDEpIHx8XG4gICAgICAgICAgICAgICAgKGxhc3RBcHBlbmRJZHggPCBsaXN0Lmxlbmd0aCAtIDEgJiZcbiAgICAgICAgICAgICAgICAgICAgbXNpLm9yaWdpbmFsQmVnaW5EdHMgPCBsaXN0W2xhc3RBcHBlbmRJZHggKyAxXS5vcmlnaW5hbEJlZ2luRHRzKSkpIHtcbiAgICAgICAgICAgIGluc2VydElkeCA9IGxhc3RBcHBlbmRJZHggKyAxOyAvLyB1c2UgY2FjaGVkIGxvY2F0aW9uIGlkeFxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKGxpc3QubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGluc2VydElkeCA9IHRoaXMuX3NlYXJjaE5lYXJlc3RTZWdtZW50QmVmb3JlKG1zaS5vcmlnaW5hbEJlZ2luRHRzKSArIDE7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9sYXN0QXBwZW5kTG9jYXRpb24gPSBpbnNlcnRJZHg7XG4gICAgICAgIHRoaXMuX2xpc3Quc3BsaWNlKGluc2VydElkeCwgMCwgbXNpKTtcbiAgICB9XG5cbiAgICBnZXRMYXN0U2VnbWVudEJlZm9yZShvcmlnaW5hbEJlZ2luRHRzKSB7XG4gICAgICAgIGxldCBpZHggPSB0aGlzLl9zZWFyY2hOZWFyZXN0U2VnbWVudEJlZm9yZShvcmlnaW5hbEJlZ2luRHRzKTtcbiAgICAgICAgaWYgKGlkeCA+PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fbGlzdFtpZHhdO1xuICAgICAgICB9IGVsc2UgeyAvLyAtMVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBnZXRMYXN0U2FtcGxlQmVmb3JlKG9yaWdpbmFsQmVnaW5EdHMpIHtcbiAgICAgICAgbGV0IHNlZ21lbnQgPSB0aGlzLmdldExhc3RTZWdtZW50QmVmb3JlKG9yaWdpbmFsQmVnaW5EdHMpO1xuICAgICAgICBpZiAoc2VnbWVudCAhPSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gc2VnbWVudC5sYXN0U2FtcGxlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBnZXRMYXN0U3luY1BvaW50QmVmb3JlKG9yaWdpbmFsQmVnaW5EdHMpIHtcbiAgICAgICAgbGV0IHNlZ21lbnRJZHggPSB0aGlzLl9zZWFyY2hOZWFyZXN0U2VnbWVudEJlZm9yZShvcmlnaW5hbEJlZ2luRHRzKTtcbiAgICAgICAgbGV0IHN5bmNQb2ludHMgPSB0aGlzLl9saXN0W3NlZ21lbnRJZHhdLnN5bmNQb2ludHM7XG4gICAgICAgIHdoaWxlIChzeW5jUG9pbnRzLmxlbmd0aCA9PT0gMCAmJiBzZWdtZW50SWR4ID4gMCkge1xuICAgICAgICAgICAgc2VnbWVudElkeC0tO1xuICAgICAgICAgICAgc3luY1BvaW50cyA9IHRoaXMuX2xpc3Rbc2VnbWVudElkeF0uc3luY1BvaW50cztcbiAgICAgICAgfVxuICAgICAgICBpZiAoc3luY1BvaW50cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICByZXR1cm4gc3luY1BvaW50c1tzeW5jUG9pbnRzLmxlbmd0aCAtIDFdO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICB9XG5cbn1cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9qcy9tcDQvbWVkaWEtc2VnbWVudC1pbmZvLmpzIl0sInNvdXJjZVJvb3QiOiIifQ==");

/***/ }),
/* 14 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n/*\n * Copyright (C) 2016 Bilibili. All Rights Reserved.\n *\n * @author zheng qian <xqq@xqq.im>\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nvar Browser = {};\n\nfunction detect() {\n    // modified from jquery-browser-plugin\n\n    var ua = self.navigator.userAgent.toLowerCase();\n\n    var match = /(edge)\\/([\\w.]+)/.exec(ua) || /(opr)[\\/]([\\w.]+)/.exec(ua) || /(chrome)[ \\/]([\\w.]+)/.exec(ua) || /(iemobile)[\\/]([\\w.]+)/.exec(ua) || /(version)(applewebkit)[ \\/]([\\w.]+).*(safari)[ \\/]([\\w.]+)/.exec(ua) || /(webkit)[ \\/]([\\w.]+).*(version)[ \\/]([\\w.]+).*(safari)[ \\/]([\\w.]+)/.exec(ua) || /(webkit)[ \\/]([\\w.]+)/.exec(ua) || /(opera)(?:.*version|)[ \\/]([\\w.]+)/.exec(ua) || /(msie) ([\\w.]+)/.exec(ua) || ua.indexOf('trident') >= 0 && /(rv)(?::| )([\\w.]+)/.exec(ua) || ua.indexOf('compatible') < 0 && /(mozilla)(?:.*? rv:([\\w.]+)|)/.exec(ua) || [];\n\n    var platform_match = /(ipad)/.exec(ua) || /(ipod)/.exec(ua) || /(windows phone)/.exec(ua) || /(iphone)/.exec(ua) || /(kindle)/.exec(ua) || /(android)/.exec(ua) || /(windows)/.exec(ua) || /(mac)/.exec(ua) || /(linux)/.exec(ua) || /(cros)/.exec(ua) || [];\n\n    var matched = {\n        browser: match[5] || match[3] || match[1] || '',\n        version: match[2] || match[4] || '0',\n        majorVersion: match[4] || match[2] || '0',\n        platform: platform_match[0] || ''\n    };\n\n    var browser = {};\n    if (matched.browser) {\n        browser[matched.browser] = true;\n\n        var versionArray = matched.majorVersion.split('.');\n        browser.version = {\n            major: parseInt(matched.majorVersion, 10),\n            string: matched.version\n        };\n        if (versionArray.length > 1) {\n            browser.version.minor = parseInt(versionArray[1], 10);\n        }\n        if (versionArray.length > 2) {\n            browser.version.build = parseInt(versionArray[2], 10);\n        }\n    }\n\n    if (matched.platform) {\n        browser[matched.platform] = true;\n    }\n\n    if (browser.chrome || browser.opr || browser.safari) {\n        browser.webkit = true;\n    }\n\n    // MSIE. IE11 has 'rv' identifer\n    if (browser.rv || browser.iemobile) {\n        if (browser.rv) {\n            delete browser.rv;\n        }\n        var msie = 'msie';\n        matched.browser = msie;\n        browser[msie] = true;\n    }\n\n    // Microsoft Edge\n    if (browser.edge) {\n        delete browser.edge;\n        var msedge = 'msedge';\n        matched.browser = msedge;\n        browser[msedge] = true;\n    }\n\n    // Opera 15+\n    if (browser.opr) {\n        var opera = 'opera';\n        matched.browser = opera;\n        browser[opera] = true;\n    }\n\n    // Stock android browsers are marked as Safari\n    if (browser.safari && browser.android) {\n        var android = 'android';\n        matched.browser = android;\n        browser[android] = true;\n    }\n\n    browser.name = matched.browser;\n    browser.platform = matched.platform;\n\n    for (var key in Browser) {\n        if (Browser.hasOwnProperty(key)) {\n            delete Browser[key];\n        }\n    }\n    Object.assign(Browser, browser);\n}\n\ndetect();\n\nexports.default = Browser;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9qcy91dGlscy9icm93c2VyLmpzPzQ3NTkiXSwibmFtZXMiOlsiQnJvd3NlciIsImRldGVjdCIsInVhIiwic2VsZiIsIm5hdmlnYXRvciIsInVzZXJBZ2VudCIsInRvTG93ZXJDYXNlIiwibWF0Y2giLCJleGVjIiwiaW5kZXhPZiIsInBsYXRmb3JtX21hdGNoIiwibWF0Y2hlZCIsImJyb3dzZXIiLCJ2ZXJzaW9uIiwibWFqb3JWZXJzaW9uIiwicGxhdGZvcm0iLCJ2ZXJzaW9uQXJyYXkiLCJzcGxpdCIsIm1ham9yIiwicGFyc2VJbnQiLCJzdHJpbmciLCJsZW5ndGgiLCJtaW5vciIsImJ1aWxkIiwiY2hyb21lIiwib3ByIiwic2FmYXJpIiwid2Via2l0IiwicnYiLCJpZW1vYmlsZSIsIm1zaWUiLCJlZGdlIiwibXNlZGdlIiwib3BlcmEiLCJhbmRyb2lkIiwibmFtZSIsImtleSIsImhhc093blByb3BlcnR5IiwiT2JqZWN0IiwiYXNzaWduIl0sIm1hcHBpbmdzIjoiOzs7OztBQUFBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFrQkEsSUFBSUEsVUFBVSxFQUFkOztBQUVBLFNBQVNDLE1BQVQsR0FBa0I7QUFDZDs7QUFFQSxRQUFJQyxLQUFLQyxLQUFLQyxTQUFMLENBQWVDLFNBQWYsQ0FBeUJDLFdBQXpCLEVBQVQ7O0FBRUEsUUFBSUMsUUFBUSxtQkFBbUJDLElBQW5CLENBQXdCTixFQUF4QixLQUNSLG9CQUFvQk0sSUFBcEIsQ0FBeUJOLEVBQXpCLENBRFEsSUFFUix3QkFBd0JNLElBQXhCLENBQTZCTixFQUE3QixDQUZRLElBR1IseUJBQXlCTSxJQUF6QixDQUE4Qk4sRUFBOUIsQ0FIUSxJQUlSLDZEQUE2RE0sSUFBN0QsQ0FBa0VOLEVBQWxFLENBSlEsSUFLUix1RUFBdUVNLElBQXZFLENBQTRFTixFQUE1RSxDQUxRLElBTVIsd0JBQXdCTSxJQUF4QixDQUE2Qk4sRUFBN0IsQ0FOUSxJQU9SLHFDQUFxQ00sSUFBckMsQ0FBMENOLEVBQTFD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LGdCQUFRQyxPQUFSLEdBQWtCb0IsTUFBbEI7QUFDQXBCLGdCQUFRb0IsTUFBUixJQUFrQixJQUFsQjtBQUNIOztBQUVEO0FBQ0EsUUFBSXBCLFFBQVFhLEdBQVosRUFBaUI7QUFDYixZQUFJUSxRQUFRLE9BQVo7QUFDQXRCLGdCQUFRQyxPQUFSLEdBQWtCcUIsS0FBbEI7QUFDQXJCLGdCQUFRcUIsS0FBUixJQUFpQixJQUFqQjtBQUNIOztBQUVEO0FBQ0EsUUFBSXJCLFFBQVFjLE1BQVIsSUFBa0JkLFFBQVFzQixPQUE5QixFQUF1QztBQUNuQyxZQUFJQSxVQUFVLFNBQWQ7QUFDQXZCLGdCQUFRQyxPQUFSLEdBQWtCc0IsT0FBbEI7QUFDQXRCLGdCQUFRc0IsT0FBUixJQUFtQixJQUFuQjtBQUNIOztBQUVEdEIsWUFBUXVCLElBQVIsR0FBZXhCLFFBQVFDLE9BQXZCO0FBQ0FBLFlBQVFHLFFBQVIsR0FBbUJKLFFBQVFJLFFBQTNCOztBQUVBLFNBQUssSUFBSXFCLEdBQVQsSUFBZ0JwQyxPQUFoQixFQUF5QjtBQUNyQixZQUFJQSxRQUFRcUMsY0FBUixDQUF1QkQsR0FBdkIsQ0FBSixFQUFpQztBQUM3QixtQkFBT3BDLFFBQVFvQyxHQUFSLENBQVA7QUFDSDtBQUNKO0FBQ0RFLFdBQU9DLE1BQVAsQ0FBY3ZDLE9BQWQsRUFBdUJZLE9BQXZCO0FBQ0g7O0FBRURYOztrQkFFZUQsTyIsImZpbGUiOiIxNC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qXG4gKiBDb3B5cmlnaHQgKEMpIDIwMTYgQmlsaWJpbGkuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogQGF1dGhvciB6aGVuZyBxaWFuIDx4cXFAeHFxLmltPlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5sZXQgQnJvd3NlciA9IHt9O1xuXG5mdW5jdGlvbiBkZXRlY3QoKSB7XG4gICAgLy8gbW9kaWZpZWQgZnJvbSBqcXVlcnktYnJvd3Nlci1wbHVnaW5cblxuICAgIGxldCB1YSA9IHNlbGYubmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpO1xuXG4gICAgbGV0IG1hdGNoID0gLyhlZGdlKVxcLyhbXFx3Ll0rKS8uZXhlYyh1YSkgfHxcbiAgICAgICAgLyhvcHIpW1xcL10oW1xcdy5dKykvLmV4ZWModWEpIHx8XG4gICAgICAgIC8oY2hyb21lKVsgXFwvXShbXFx3Ll0rKS8uZXhlYyh1YSkgfHxcbiAgICAgICAgLyhpZW1vYmlsZSlbXFwvXShbXFx3Ll0rKS8uZXhlYyh1YSkgfHxcbiAgICAgICAgLyh2ZXJzaW9uKShhcHBsZXdlYmtpdClbIFxcL10oW1xcdy5dKykuKihzYWZhcmkpWyBcXC9dKFtcXHcuXSspLy5leGVjKHVhKSB8fFxuICAgICAgICAvKHdlYmtpdClbIFxcL10oW1xcdy5dKykuKih2ZXJzaW9uKVsgXFwvXShbXFx3Ll0rKS4qKHNhZmFyaSlbIFxcL10oW1xcdy5dKykvLmV4ZWModWEpIHx8XG4gICAgICAgIC8od2Via2l0KVsgXFwvXShbXFx3Ll0rKS8uZXhlYyh1YSkgfHxcbiAgICAgICAgLyhvcGVyYSkoPzouKnZlcnNpb258KVsgXFwvXShbXFx3Ll0rKS8uZXhlYyh1YSkgfHxcbiAgICAgICAgLyhtc2llKSAoW1xcdy5dKykvLmV4ZWModWEpIHx8XG4gICAgICAgIHVhLmluZGV4T2YoJ3RyaWRlbnQnKSA+PSAwICYmIC8ocnYpKD86OnwgKShbXFx3Ll0rKS8uZXhlYyh1YSkgfHxcbiAgICAgICAgdWEuaW5kZXhPZignY29tcGF0aWJsZScpIDwgMCAmJiAvKG1vemlsbGEpKD86Lio/IHJ2OihbXFx3Ll0rKXwpLy5leGVjKHVhKSB8fCBbXTtcblxuICAgIGxldCBwbGF0Zm9ybV9tYXRjaCA9IC8oaXBhZCkvLmV4ZWModWEpIHx8XG4gICAgICAgIC8oaXBvZCkvLmV4ZWModWEpIHx8XG4gICAgICAgIC8od2luZG93cyBwaG9uZSkvLmV4ZWModWEpIHx8XG4gICAgICAgIC8oaXBob25lKS8uZXhlYyh1YSkgfHxcbiAgICAgICAgLyhraW5kbGUpLy5leGVjKHVhKSB8fFxuICAgICAgICAvKGFuZHJvaWQpLy5leGVjKHVhKSB8fFxuICAgICAgICAvKHdpbmRvd3MpLy5leGVjKHVhKSB8fFxuICAgICAgICAvKG1hYykvLmV4ZWModWEpIHx8XG4gICAgICAgIC8obGludXgpLy5leGVjKHVhKSB8fFxuICAgICAgICAvKGNyb3MpLy5leGVjKHVhKSB8fCBbXTtcblxuICAgIGxldCBtYXRjaGVkID0ge1xuICAgICAgICBicm93c2VyOiBtYXRjaFs1XSB8fCBtYXRjaFszXSB8fCBtYXRjaFsxXSB8fCAnJyxcbiAgICAgICAgdmVyc2lvbjogbWF0Y2hbMl0gfHwgbWF0Y2hbNF0gfHwgJzAnLFxuICAgICAgICBtYWpvclZlcnNpb246IG1hdGNoWzRdIHx8IG1hdGNoWzJdIHx8ICcwJyxcbiAgICAgICAgcGxhdGZvcm06IHBsYXRmb3JtX21hdGNoWzBdIHx8ICcnXG4gICAgfTtcblxuICAgIGxldCBicm93c2VyID0ge307XG4gICAgaWYgKG1hdGNoZWQuYnJvd3Nlcikge1xuICAgICAgICBicm93c2VyW21hdGNoZWQuYnJvd3Nlcl0gPSB0cnVlO1xuXG4gICAgICAgIGxldCB2ZXJzaW9uQXJyYXkgPSBtYXRjaGVkLm1ham9yVmVyc2lvbi5zcGxpdCgnLicpO1xuICAgICAgICBicm93c2VyLnZlcnNpb24gPSB7XG4gICAgICAgICAgICBtYWpvcjogcGFyc2VJbnQobWF0Y2hlZC5tYWpvclZlcnNpb24sIDEwKSxcbiAgICAgICAgICAgIHN0cmluZzogbWF0Y2hlZC52ZXJzaW9uXG4gICAgICAgIH07XG4gICAgICAgIGlmICh2ZXJzaW9uQXJyYXkubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgYnJvd3Nlci52ZXJzaW9uLm1pbm9yID0gcGFyc2VJbnQodmVyc2lvbkFycmF5WzFdLCAxMCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHZlcnNpb25BcnJheS5sZW5ndGggPiAyKSB7XG4gICAgICAgICAgICBicm93c2VyLnZlcnNpb24uYnVpbGQgPSBwYXJzZUludCh2ZXJzaW9uQXJyYXlbMl0sIDEwKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGlmIChtYXRjaGVkLnBsYXRmb3JtKSB7XG4gICAgICAgIGJyb3dzZXJbbWF0Y2hlZC5wbGF0Zm9ybV0gPSB0cnVlO1xuICAgIH1cblxuICAgIGlmIChicm93c2VyLmNocm9tZSB8fCBicm93c2VyLm9wciB8fCBicm93c2VyLnNhZmFyaSkge1xuICAgICAgICBicm93c2VyLndlYmtpdCA9IHRydWU7XG4gICAgfVxuXG4gICAgLy8gTVNJRS4gSUUxMSBoYXMgJ3J2JyBpZGVudGlmZXJcbiAgICBpZiAoYnJvd3Nlci5ydiB8fCBicm93c2VyLmllbW9iaWxlKSB7XG4gICAgICAgIGlmIChicm93c2VyLnJ2KSB7XG4gICAgICAgICAgICBkZWxldGUgYnJvd3Nlci5ydjtcbiAgICAgICAgfVxuICAgICAgICBsZXQgbXNpZSA9ICdtc2llJztcbiAgICAgICAgbWF0Y2hlZC5icm93c2VyID0gbXNpZTtcbiAgICAgICAgYnJvd3Nlclttc2llXSA9IHRydWU7XG4gICAgfVxuXG4gICAgLy8gTWljcm9zb2Z0IEVkZ2VcbiAgICBpZiAoYnJvd3Nlci5lZGdlKSB7XG4gICAgICAgIGRlbGV0ZSBicm93c2VyLmVkZ2U7XG4gICAgICAgIGxldCBtc2VkZ2UgPSAnbXNlZGdlJztcbiAgICAgICAgbWF0Y2hlZC5icm93c2VyID0gbXNlZGdlO1xuICAgICAgICBicm93c2VyW21zZWRnZV0gPSB0cnVlO1xuICAgIH1cblxuICAgIC8vIE9wZXJhIDE1K1xuICAgIGlmIChicm93c2VyLm9wcikge1xuICAgICAgICBsZXQgb3BlcmEgPSAnb3BlcmEnO1xuICAgICAgICBtYXRjaGVkLmJyb3dzZXIgPSBvcGVyYTtcbiAgICAgICAgYnJvd3NlcltvcGVyYV0gPSB0cnVlO1xuICAgIH1cblxuICAgIC8vIFN0b2NrIGFuZHJvaWQgYnJvd3NlcnMgYXJlIG1hcmtlZCBhcyBTYWZhcmlcbiAgICBpZiAoYnJvd3Nlci5zYWZhcmkgJiYgYnJvd3Nlci5hbmRyb2lkKSB7XG4gICAgICAgIGxldCBhbmRyb2lkID0gJ2FuZHJvaWQnO1xuICAgICAgICBtYXRjaGVkLmJyb3dzZXIgPSBhbmRyb2lkO1xuICAgICAgICBicm93c2VyW2FuZHJvaWRdID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBicm93c2VyLm5hbWUgPSBtYXRjaGVkLmJyb3dzZXI7XG4gICAgYnJvd3Nlci5wbGF0Zm9ybSA9IG1hdGNoZWQucGxhdGZvcm07XG5cbiAgICBmb3IgKGxldCBrZXkgaW4gQnJvd3Nlcikge1xuICAgICAgICBpZiAoQnJvd3Nlci5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgICAgICBkZWxldGUgQnJvd3NlcltrZXldO1xuICAgICAgICB9XG4gICAgfVxuICAgIE9iamVjdC5hc3NpZ24oQnJvd3NlciwgYnJvd3Nlcik7XG59XG5cbmRldGVjdCgpO1xuXG5leHBvcnQgZGVmYXVsdCBCcm93c2VyO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2pzL3V0aWxzL2Jyb3dzZXIuanMiXSwic291cmNlUm9vdCI6IiJ9");

/***/ }),
/* 15 */
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__(5);


/***/ })
/******/ ]);